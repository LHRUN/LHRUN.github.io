<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="songlh">







<title>ã€ç¿»ã€‘Render Functions &amp; JSX | LH&#39;BLOG</title>



    <link rel="icon" href="/favicon.png">



<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&family=Roboto+Mono&display=swap');
</style>



    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    




    <!-- scripts list from _config.yml -->
    
    <script src="/js/frame.js"></script>
    










  <meta name="generator" content="Hexo 6.2.0"></head>
  <body>
    <div class="mask-border">
    </div>

    <div class="wrapper">

      <div class="header">
  <div class="flex-container">
    <div class="header-inner">
      <div class="site-brand-container">
        <a href="/">
          
            <img loading="lazy" class="logo-img" src="/logo.png" alt="logo_image">
          
        </a>
      </div>
      <div id="menu-btn" class="menu-btn" onclick="toggleMenu()">
        Menu
      </div>
      <nav class="site-nav">
        <ul class="menu-list">
          
            
              <li class="menu-item">
                <a href="/">Home</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/categories/gallery/">Posts</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/tags/Translate/">Translate</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/archives/">Archive</a>
              </li> 
                   
          
            
              <li class="menu-item">
                <a href="/about/">About</a>
              </li> 
                   
          
          
            <li class="menu-item search-btn">
              <a href="#">Search</a>
            </li>
          
        </ul>
      </nav>
    </div>
  </div>
</div>


      <div class="main">
        <div class="flex-container">
          <article id="post">

  
    <div class="post-head">
    <div class="post-info">
        <div class="tag-list">
            
                
                    <span class="post-tag">
                        <a href="/tags/Vue/">
                            Vue
                        </a>
                    </span>    
                
                    <span class="post-tag">
                        <a href="/tags/Translate/">
                            Translate
                        </a>
                    </span>    
                           
            
        </div>
        <div class="post-title">
            
            
                ã€ç¿»ã€‘Render Functions &amp; JSX
            
            
        </div>
        <span class="post-date">
            8æœˆ 31, 2023
        </span>
    </div>
    <div class="post-img">
        
            <div class="h-line-primary"></div>
              
    </div>
</div>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.6.0/styles/base16/gruvbox-light-medium.min.css">
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<div class="post-content">
    <blockquote>
<p>ä¸ºäº†æé«˜è‹±è¯­æ°´å¹³å’Œä¿æŒæŠ€æœ¯æˆé•¿ï¼Œå¼€å§‹æŒ‰è®¡åˆ’ç¿»è¯‘ä¸€äº›çŸ­ç¯‡å’Œåšå®¢ï¼Œæœ‰é—®é¢˜æ¬¢è¿è®¨è®ºğŸ‘»<br>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://vuejs.org/guide/extras/render-function.html">Render Functions &amp; JSX</a></p>
</blockquote>
<h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><p>Vue æ¨èå¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨æ¨¡æ¿æ¥æ„å»ºåº”ç”¨ã€‚ä¸è¿‡ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨JavaScriptçš„å…¨éƒ¨ç¼–ç¨‹èƒ½åŠ›ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨æ¸²æŸ“å‡½æ•°ã€‚</p>
<h2 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h2><h3 id="Creating-Vnodes"><a href="#Creating-Vnodes" class="headerlink" title="Creating Vnodes"></a>Creating Vnodes</h3><p>Vueæä¾›äº†<code>h()</code>å‡½æ•°ç”¨äºåˆ›å»ºvnode</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">const</span> vnode = <span class="title function_">h</span>(
  <span class="string">&#x27;div&#x27;</span>, <span class="comment">// type</span>
  &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="attr">class</span>: <span class="string">&#x27;bar&#x27;</span> &#125;, <span class="comment">// props</span>
  [
    <span class="comment">/* children */</span>
  ]
)</code></pre>

<p><code>h()</code>æ˜¯ <strong>hyperscript</strong> çš„ç¼©å†™ï¼Œæ„æ€æ˜¯â€ç”ŸæˆHTMLï¼ˆè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼‰çš„JavaScriptâ€ã€‚è¿™ä¸ªåå­—æ¥è‡ªäºè®¸å¤šè™šæ‹ŸDOMå®ç°æ—¶çš„å…±åŒçº¦å®šã€‚ä¸€ä¸ªæè¿°æ€§æ›´å¼ºçš„åç§°å¯ä»¥ä¸º<code>createVnode()</code>ï¼Œä½†å½“ä½ éœ€è¦åœ¨æ¸²æŸ“å‡½æ•°ä¸­å¤šæ¬¡è°ƒç”¨æ—¶ï¼Œä¸€ä¸ªæ›´ç®€çŸ­çš„åç§°ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>è¿™ä¸ª<code>h()</code>å‡½æ•°è®¾è®¡çš„éå¸¸çµæ´»</p>
<pre><code class="highlight js"><span class="comment">// all arguments except the type are optional</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>)
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span> &#125;)

<span class="comment">// both attributes and properties can be used in props</span>
<span class="comment">// Vue automatically picks the right way to assign it</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">class</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">innerHTML</span>: <span class="string">&#x27;hello&#x27;</span> &#125;)

<span class="comment">// props modifiers such as `.prop` and `.attr` can be added</span>
<span class="comment">// with `.` and `^` prefixes respectively</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="string">&#x27;.name&#x27;</span>: <span class="string">&#x27;some-name&#x27;</span>, <span class="string">&#x27;^width&#x27;</span>: <span class="string">&#x27;100&#x27;</span> &#125;)

<span class="comment">// class and style have the same object / array</span>
<span class="comment">// value support that they have in templates</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">class</span>: [foo, &#123; bar &#125;], <span class="attr">style</span>: &#123; <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125; &#125;)

<span class="comment">// event listeners should be passed as onXxx</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">onClick</span>: <span class="function">() =&gt;</span> &#123;&#125; &#125;)

<span class="comment">// children can be a string</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span> &#125;, <span class="string">&#x27;hello&#x27;</span>)

<span class="comment">// props can be omitted when there are no props</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [<span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)])

<span class="comment">// children array can contain mixed vnodes and strings</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [<span class="string">&#x27;hello&#x27;</span>, <span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)])</code></pre>

<p>ç”Ÿæˆçš„vnodeç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="highlight js"><span class="keyword">const</span> vnode = <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span> &#125;, [])

vnode.<span class="property">type</span> <span class="comment">// &#x27;div&#x27;</span>
vnode.<span class="property">props</span> <span class="comment">// &#123; id: &#x27;foo&#x27; &#125;</span>
vnode.<span class="property">children</span> <span class="comment">// []</span>
vnode.<span class="property">key</span> <span class="comment">// null</span></code></pre>

<blockquote>
<p>Note<br>å®Œæ•´çš„VNodeç»“æ„è¿˜åŒ…å«è®¸å¤šå…¶ä»–å†…éƒ¨å±æ€§ï¼Œå½“å¼ºçƒˆå»ºè®®é¿å…ä¾èµ–ä»¥ä¸Šæ‰€åˆ—çš„ä»¥å¤–å…¶ä»–å±æ€§ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨å†…éƒ¨å±æ€§å‘ç”Ÿå˜åŒ–æ—¶å‡ºç°æ„å¤–ä¸­æ–­ã€‚</p>
</blockquote>
<h3 id="Declaring-Render-Functions"><a href="#Declaring-Render-Functions" class="headerlink" title="Declaring Render Functions"></a>Declaring Render Functions</h3><p>åœ¨é€šè¿‡ Composition API ä½¿ç”¨æ¨¡ç‰ˆæ—¶ï¼Œ<code>setup()</code>çš„è¿”å›å€¼æ˜¯ç”¨äºå‘æ¨¡ç‰ˆæš´éœ²æ•°æ®ã€‚ä½†åœ¨ä½¿ç”¨æ¸²æŸ“å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›æ¸²æŸ“å‡½æ•°ï¼š</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; ref, h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="attr">props</span>: &#123;
    <span class="comment">/* ... */</span>
  &#125;,
  <span class="title function_">setup</span>(<span class="params">props</span>) &#123;
    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">1</span>)

    <span class="comment">// return the render function</span>
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, props.<span class="property">msg</span> + count.<span class="property">value</span>)
  &#125;
&#125;</code></pre>

<p>å› ä¸ºæ¸²æŸ“å‡½æ•°æ˜¯åœ¨<code>setup()</code>å†…éƒ¨å£°æ˜çš„ï¼Œæ‰€ä»¥å®ƒè‡ªç„¶å¯ä»¥è®¿é—®å…¶åŒä¸€ä½œç”¨åŸŸä¸‹å£°æ˜çš„propså’Œä»»æ„çš„å“åº”æ•°æ®ã€‚</p>
<p>é™¤äº†è¿”å›å•ä¸ªvnodeå¤–ï¼Œè¿˜å¯ä»¥è¿”å›å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„ï¼š</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="title function_">setup</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="string">&#x27;hello world!&#x27;</span>
  &#125;
&#125;</code></pre>

<pre><code class="highlight js"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="title function_">setup</span>(<span class="params"></span>) &#123;
    <span class="comment">// use an array to return multiple root nodes</span>
    <span class="keyword">return</span> <span class="function">() =&gt;</span> [
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>),
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>),
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>)
    ]
  &#125;
&#125;</code></pre>

<blockquote>
<p>TIP<br>ç¡®ä¿è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼ï¼å› ä¸ºæ¯ä¸ªç»„ä»¶çš„<code>setup()</code>åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè€Œè¿”å›çš„æ¸²æŸ“å‡½æ•°ä¼šè¢«è°ƒç”¨å¤šæ¬¡ã€‚</p>
</blockquote>
<p>å¦‚æœæ¸²æŸ“å‡½æ•°ä¸éœ€è¦ä»»ä½•å®ä¾‹çŠ¶æ€ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="string">&#x27;hello world!&#x27;</span>
&#125;</code></pre>

<p>æ²¡é”™ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„Vueç»„ä»¶ï¼æœ‰å…³æ­¤è¯­æ³•çš„æ›´å¤šè¯¦æƒ…ï¼Œå¯ä»¥æŸ¥çœ‹ <a target="_blank" rel="noopener" href="https://vuejs.org/guide/extras/render-function.html#functional-components">Functional Components</a></p>
<h3 id="Vnodes-Must-Be-Unique"><a href="#Vnodes-Must-Be-Unique" class="headerlink" title="Vnodes Must Be Unique"></a>Vnodes Must Be Unique</h3><p>ç»„ä»¶æ ‘ä¸­çš„æ‰€æœ‰vnodeå¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚ä¸‹é¢çš„æ¸²æŸ“å‡½æ•°å°±æ„å‘³ç€æ˜¯æ— æ•ˆçš„ï¼š</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> p = <span class="title function_">h</span>(<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;hi&#x27;</span>)
  <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [
    <span class="comment">// Yikes - duplicate vnodes!</span>
    p,
    p
  ])
&#125;</code></pre>

<p>å¦‚æœä½ çœŸçš„æƒ³å¤šæ¬¡å¤åˆ¶ç›¸åŒçš„å…ƒç´ &#x2F;ç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å‚å‡½æ•°æ¥å®ç°ã€‚æ¯”å¦‚ï¼Œä¸‹é¢çš„æ¸²æŸ“å‡½æ•°å°±æ˜¯æ¸²æŸ“äº†20ä¸ªç›¸åŒå†…å®¹çš„æœ‰æ•ˆæ–¹æ³•ï¼š</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="title function_">h</span>(
    <span class="string">&#x27;div&#x27;</span>,
    <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">20</span> &#125;).<span class="title function_">map</span>(<span class="function">() =&gt;</span> &#123;
      <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;hi&#x27;</span>)
    &#125;)
  )
&#125;</code></pre>

<h2 id="JSX-x2F-TSXâ€‹"><a href="#JSX-x2F-TSXâ€‹" class="headerlink" title="JSX &#x2F; TSXâ€‹"></a>JSX &#x2F; TSXâ€‹</h2><p><a target="_blank" rel="noopener" href="https://facebook.github.io/jsx/">JSX</a>æ˜¯JavaScriptçš„XMLæ‰©å±•ï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å‡ºä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="highlight jsx"><span class="keyword">const</span> vnode = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></code></pre>

<p>åœ¨JSXè¡¨è¾¾å¼ä¸­ï¼Œä½¿ç”¨èŠ±æ‹¬å·åµŒå…¥åŠ¨æ€å€¼ï¼š</p>
<pre><code class="highlight jsx"><span class="keyword">const</span> vnode = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#123;dynamicId&#125;</span>&gt;</span>hello, &#123;userName&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></code></pre>

<p><strong>create-vue</strong>å’ŒVue CLIéƒ½æœ‰åœ¨è„šæ‰‹æ¶é…ç½®é¡¹ä¸­è¿›è¡Œäº†JSXæ”¯æŒã€‚å¦‚æœä½ è¦æ‰‹åŠ¨é…ç½®JSXï¼Œè¯·å‚é˜…<a target="_blank" rel="noopener" href="https://github.com/vuejs/babel-plugin-jsx">@vue&#x2F;babel-plugin-jsx</a>æ–‡æ¡£äº†è§£è¯¦æƒ…ã€‚</p>
<p>è™½ç„¶JSXæœ€åˆæ˜¯ç”±Reactå¼•å…¥çš„ï¼Œä½†å®ƒå®é™…ä¸Šå¹¶æ²¡æœ‰å®šä¹‰è¿è¡Œæ—¶è¯­ä¹‰ï¼Œå¯ä»¥ç¼–è¯‘æˆå„ç§ä¸åŒçš„è¾“å‡ºã€‚å¦‚æœä½ ä»¥å‰ä½¿ç”¨è¿‡JSXï¼Œéœ€æ³¨æ„Vueçš„JSXè½¬æ¢å’ŒReactçš„JSXè½¬æ¢æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥ä½ ä¸èƒ½åœ¨Vueåº”ç”¨ä¸­ä½¿ç”¨Reactçš„JSXè½¬æ¢ï¼Œå…·ä½“ä¸React JSXçš„ä¸€äº›æ˜æ˜¾åŒºåˆ«åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä½ å¯ä»¥ä½¿ç”¨<code>class</code>å’Œ<code>for</code>ç­‰HTMLå±æ€§ä½œä¸ºpropsï¼Œæ— éœ€ä½¿ç”¨<code>className</code>æˆ–è€…<code>htmlFor</code>ã€‚</li>
<li>å°†å­å…ƒç´ ä¼ é€’ç»™ç»„ä»¶(å³æ’æ§½)çš„å·¥ä½œæ–¹å¼æœ‰æ‰€ä¸åŒã€‚</li>
</ul>
<p>Vueçš„ç±»å‹å®šä¹‰è¿˜ä¸ºTSXçš„ä½¿ç”¨æä¾›äº†ç±»å‹æ¨æ–­ã€‚ä½¿ç”¨TSXæ—¶ï¼Œç¡®ä¿åœ¨tsconfig.jsonä¸­æŒ‡å®š<code>&quot;jsx&quot;: &quot;preserve&quot;</code>ï¼Œä»¥ä¾¿åœ¨TypeScriptä¿ç•™JSXè¯­æ³•ï¼Œä¾›Vue JSXè½¬æ¢å¤„ç†ã€‚</p>
<h3 id="JSX-Type-Inference"><a href="#JSX-Type-Inference" class="headerlink" title="JSX Type Inference"></a>JSX Type Inference</h3><p>ä¸transformä¸€æ ·ï¼ŒVueçš„JSXä¹Ÿéœ€è¦ä¸åŒçš„ç±»å‹å®šä¹‰ã€‚ç›®å‰ï¼ŒVueä¼šè‡ªåŠ¨å…¨å±€æ³¨å†ŒVueçš„JSXç±»å‹ã€‚è¿™æ„å‘³ç€ï¼Œå½“Vueçš„ç±»å‹å¯ç”¨æ—¶ï¼ŒTSXå°±èƒ½å¼€ç®±å³ç”¨ã€‚</p>
<p>Vueçš„å…¨å±€JSXç±»å‹å¯èƒ½ä¼šä¸å…¶ä»–åŒæ ·éœ€è¦JSXç±»å‹æ¨å¯¼çš„åº“å‘ç”Ÿå†²çªï¼Œç‰¹åˆ«æ˜¯Reactã€‚ä»3.3ç‰ˆæœ¬å¼€å§‹ï¼ŒVueæ”¯æŒé€šè¿‡TypeScriptçš„jsxImportSourceé€‰é¡¹æŒ‡å®šJSXå‘½åç©ºé—´ã€‚æˆ‘ä»¬è®¡åˆ’åœ¨3.4ç‰ˆæœ¬ä¸­ç§»é™¤é»˜è®¤çš„å…¨å±€JSXå‘½åç©ºé—´æ³¨å†Œã€‚</p>
<p>å¯¹äºTSXç”¨æˆ·ï¼Œå»ºè®®åœ¨å‡çº§åˆ°3.3ä¹‹ååœ¨ tsconfig.json ä¸­å°† jsxImportSource é€‰é¡¹è®¾ç½®ä¸º â€œvueâ€ï¼Œæˆ–è€…åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ <code>/* @jsxImportSource vue */</code>ã€‚è¿™æ ·ï¼Œä½ ç°åœ¨å°±å¯ä»¥é€‰æ‹©åŠ å…¥æ–°è¡Œä¸ºï¼Œå¹¶åœ¨ 3.4 å‘å¸ƒæ—¶æ— ç¼å‡çº§ã€‚</p>
<p>å¦‚æœæœ‰ä»£ç ä¾èµ–äºå…¨å±€JSXå‘½åç©ºé—´ï¼Œä½ å¯ä»¥é€šè¿‡æ˜¾å¼å¼•ç”¨ vue&#x2F;jsxï¼ˆå®ƒä¼šæ³¨å†Œå…¨å±€ JSX å‘½åç©ºé—´ï¼‰æ¥ä¿ç•™å®Œå…¨ç›¸åŒçš„ 3.4 ä¹‹å‰çš„å…¨å±€è¡Œä¸º</p>
<h2 id="Render-Function-Recipes"><a href="#Render-Function-Recipes" class="headerlink" title="Render Function Recipes"></a>Render Function Recipes</h2><p>ä¸‹é¢æˆ‘ä»¬ä¼šæä¾›ä¸€äº›ç”¨ç­‰ä»·çš„æ¸²æŸ“å‡½æ•°&#x2F;JSXå®ç°æ¨¡ç‰ˆåŠŸèƒ½çš„å¸¸ç”¨æ–¹æ³•ã€‚</p>
<h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h3><p>template:</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">div</span>&gt;</span>
  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">div</span>&gt;</span>
  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>no<span class="tag">&lt;/<span class="name">span</span>&gt;</span>
<span class="tag">&lt;/<span class="name">div</span>&gt;</span></code></pre>

<p>ç­‰ä»· æ¸²æŸ“å‡½æ•°&#x2F;JSX:</p>
<pre><code class="highlight js"><span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [ok.<span class="property">value</span> ? <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;yes&#x27;</span>) : <span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;no&#x27;</span>)])</code></pre>

<pre><code class="highlight jsx">&lt;div&gt;&#123;ok.<span class="property">value</span> ? <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>no<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>&#125;&lt;/div&gt;</code></pre>

<h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h3><p>template:</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>
  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;&#123; id, text &#125; in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span>
    &#123;&#123; text &#125;&#125;
  <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></code></pre>

<p>ç­‰ä»· æ¸²æŸ“å‡½æ•°&#x2F;JSX:</p>
<pre><code class="highlight js"><span class="title function_">h</span>(
  <span class="string">&#x27;ul&#x27;</span>,
  <span class="comment">// assuming `items` is a ref with array value</span>
  items.<span class="property">value</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123; id, text &#125;</span>) =&gt;</span> &#123;
    <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: id &#125;, text)
  &#125;)
)</code></pre>

<pre><code class="highlight jsx">&lt;ul&gt;
  &#123;items.<span class="property">value</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123; id, text &#125;</span>) =&gt;</span> &#123;
    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;id&#125;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>
  &#125;)&#125;
&lt;/ul&gt;</code></pre>

<h3 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h3><p>propsåç§°ä»¥<code>on</code>å¼€å¤´ä¸”åé¢è·Ÿå¤§å†™å­—æ¯çš„è¢«è§†ä¸ºäº‹ä»¶ç›‘å¬å™¨ã€‚æ¯”å¦‚ï¼Œ<code>onClick</code>ç›¸å½“äºæ¨¡ç‰ˆçš„<code>@click</code>ã€‚</p>
<pre><code class="highlight js"><span class="title function_">h</span>(
  <span class="string">&#x27;button&#x27;</span>,
  &#123;
    <span class="title function_">onClick</span>(<span class="params">event</span>) &#123;
      <span class="comment">/* ... */</span>
    &#125;
  &#125;,
  <span class="string">&#x27;click me&#x27;</span>
)</code></pre>

<pre><code class="highlight jsx">&lt;button
  onClick=&#123;<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;
    <span class="comment">/* ... */</span>
  &#125;&#125;
&gt;
  click me
&lt;/button&gt;</code></pre>

<h3 id="Event-Modifiers"><a href="#Event-Modifiers" class="headerlink" title="Event Modifiers"></a>Event Modifiers</h3><p>å¯¹äº<code>.passive</code>ï¼Œ<code>.capture</code>å’Œ<code>.once</code>äº‹ä»¶ä¿®é¥°ç¬¦ï¼Œå¯ä»¥é©¼å³°å†™æ³•åœ¨äº‹ä»¶åç§°åé¢è¿›è¡Œè¿æ¥ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="highlight js"><span class="title function_">h</span>(<span class="string">&#x27;input&#x27;</span>, &#123;
  <span class="title function_">onClickCapture</span>(<span class="params"></span>) &#123;
    <span class="comment">/* listener in capture mode */</span>
  &#125;,
  <span class="title function_">onKeyupOnce</span>(<span class="params"></span>) &#123;
    <span class="comment">/* triggers only once */</span>
  &#125;,
  <span class="title function_">onMouseoverOnceCapture</span>(<span class="params"></span>) &#123;
    <span class="comment">/* once + capture */</span>
  &#125;
&#125;)</code></pre>

<pre><code class="highlight jsx">&lt;input
  onClickCapture=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;
  onKeyupOnce=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;
  onMouseoverOnceCapture=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;
/&gt;</code></pre>

<p>ç„¶åå…¶ä½™çš„äº‹ä»¶å’ŒæŒ‰é”®ä¿®é¥°ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨<code>withModifiers</code>ååŠ©ä½¿ç”¨ï¼š</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; withModifiers &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123;
  <span class="attr">onClick</span>: <span class="title function_">withModifiers</span>(<span class="function">() =&gt;</span> &#123;&#125;, [<span class="string">&#x27;self&#x27;</span>])
&#125;)</code></pre>

<pre><code class="highlight jsx">&lt;div onClick=&#123;<span class="title function_">withModifiers</span>(<span class="function">() =&gt;</span> &#123;&#125;, [<span class="string">&#x27;self&#x27;</span>])&#125; /&gt;</code></pre>

<h3 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h3><p>è¦ä¸ºç»„ä»¶åˆ›å»ºvnodeï¼Œä¼ é€’ç»™<code>h()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°åº”è¯¥æ˜¯ç»„ä»¶å®šä¹‰ã€‚è¿™å°±æ„å‘³ç€ä½¿ç”¨æ¸²æŸ“å‡½æ•°æ—¶ï¼Œæ— éœ€æ³¨å†Œç»„ä»¶ï¼Œåªæ˜¯ç›´æ¥ä½¿ç”¨å¯¼å…¥çš„ç»„ä»¶å³å¯ï¼š</p>
<pre><code class="highlight js"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span>
<span class="keyword">import</span> <span class="title class_">Bar</span> <span class="keyword">from</span> <span class="string">&#x27;./Bar.jsx&#x27;</span>

<span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [<span class="title function_">h</span>(<span class="title class_">Foo</span>), <span class="title function_">h</span>(<span class="title class_">Bar</span>)])
&#125;</code></pre>

<pre><code class="highlight jsx"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">Foo</span> /&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">Bar</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
  )
&#125;</code></pre>

<p>æ­£å¦‚æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œåªè¦æ˜¯æœ‰æ•ˆçš„Vueç»„ä»¶ï¼Œhå‡½æ•°å°±èƒ½å¤„ç†ä»»ä½•æ–‡ä»¶æ ¼å¼å¯¼å…¥çš„ç»„ä»¶ã€‚</p>
<p>åŠ¨æ€ç»„ä»¶åœ¨æ¸²æŸ“ç»„ä»¶ä¸­å¯ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="highlight js"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span>
<span class="keyword">import</span> <span class="title class_">Bar</span> <span class="keyword">from</span> <span class="string">&#x27;./Bar.jsx&#x27;</span>

<span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> ok.<span class="property">value</span> ? <span class="title function_">h</span>(<span class="title class_">Foo</span>) : <span class="title function_">h</span>(<span class="title class_">Bar</span>)
&#125;</code></pre>

<pre><code class="highlight jsx"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> ok.<span class="property">value</span> ? <span class="language-xml"><span class="tag">&lt;<span class="name">Foo</span> /&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">Bar</span> /&gt;</span></span>
&#125;</code></pre>

<p>å¦‚æœç»„ä»¶æ˜¯ç”¨åç§°æ³¨å†Œçš„ï¼Œæ— æ³•ç›´æ¥å¯¼å…¥(ä¾‹å¦‚ï¼Œæœ‰åº“è¿›è¡Œçš„å…¨å±€æ³¨å†Œ)ï¼Œè¿™ç§æƒ…å†µå¯ä»¥ä½¿ç”¨<code>resolveComponent</code>æ¥è§£æè¯¥ç»„ä»¶ã€‚</p>
<h3 id="Rendering-Slots"><a href="#Rendering-Slots" class="headerlink" title="Rendering Slots"></a>Rendering Slots</h3><p>åœ¨æ¸²æŸ“å‡½æ•°ä¸­ï¼Œå¯ä»¥é€šè¿‡<code>setup()</code>çš„ä¸Šä¸‹æ–‡è®¿é—®slotã€‚ç„¶åslotså¯¹è±¡ä¸Šçš„æ¯ä¸€ä¸ªslotéƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šè¿”å›ä¸€ä¸ªvnodesæ•°ç»„ï¼š</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="attr">props</span>: [<span class="string">&#x27;message&#x27;</span>],
  <span class="title function_">setup</span>(<span class="params">props, &#123; slots &#125;</span>) &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span> [
      <span class="comment">// default slot:</span>
      <span class="comment">// &lt;div&gt;&lt;slot /&gt;&lt;/div&gt;</span>
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, slots.<span class="title function_">default</span>()),

      <span class="comment">// named slot:</span>
      <span class="comment">// &lt;div&gt;&lt;slot name=&quot;footer&quot; :text=&quot;message&quot; /&gt;&lt;/div&gt;</span>
      <span class="title function_">h</span>(
        <span class="string">&#x27;div&#x27;</span>,
        slots.<span class="title function_">footer</span>(&#123;
          <span class="attr">text</span>: props.<span class="property">message</span>
        &#125;)
      )
    ]
  &#125;
&#125;</code></pre>

<p>JSXï¼š</p>
<pre><code class="highlight js"><span class="comment">// default</span>
&lt;div&gt;&#123;slots.<span class="title function_">default</span>()&#125;&lt;/div&gt;

<span class="comment">// named</span>
<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;slots.footer(&#123; text: props.message &#125;)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></code></pre>

<h3 id="Passing-Slots"><a href="#Passing-Slots" class="headerlink" title="Passing Slots"></a>Passing Slots</h3><p>å°†å­å…ƒç´ ä¼ é€’ç»™ç»„ä»¶å’Œå­å…ƒç´ ä¼ é€’ç»™å…ƒç´ çš„æ–¹å¼æœ‰äº›ä¸åŒã€‚æˆ‘ä»¬ä¸éœ€è¦ä¼ é€’æ•°ç»„ï¼Œè€Œæ˜¯ä¼ é€’slotå‡½æ•°æˆ–è€…slotå‡½æ•°å¯¹è±¡ã€‚slotå‡½æ•°å¯ä»¥è¿”å›ä¸æ™®é€šæ¸²æŸ“å‡½æ•°çš„è¿”å›å€¼ä¸€æ ·çš„å†…å®¹ï¼Œå¹¶ä¸”åœ¨å­ç»„ä»¶è®¿é—®æ—¶ï¼Œè¿™äº›å†…å®¹å°†å§‹ç»ˆä¼šè½¬æ¢ä¸ºä¸€ä¸ªvnodesæ•°ç»„ã€‚</p>
<pre><code class="highlight js"><span class="comment">// å•ä¸ªé»˜è®¤æ’æ§½</span>
<span class="title function_">h</span>(<span class="title class_">MyComponent</span>, <span class="function">() =&gt;</span> <span class="string">&#x27;hello&#x27;</span>)

<span class="comment">// å…·åæ’æ§½</span>
<span class="comment">// æ³¨æ„ `null` æ˜¯å¿…éœ€çš„</span>
<span class="comment">// ä»¥é¿å… slot å¯¹è±¡è¢«å½“æˆ prop å¤„ç†</span>
<span class="title function_">h</span>(<span class="title class_">MyComponent</span>, <span class="literal">null</span>, &#123;
    <span class="attr">default</span>: <span class="function">() =&gt;</span> <span class="string">&#x27;default slot&#x27;</span>,
    <span class="attr">foo</span>: <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>),
    <span class="attr">bar</span>: <span class="function">() =&gt;</span> [<span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;one&#x27;</span>), <span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;two&#x27;</span>)]
&#125;)</code></pre>

<p>ç­‰ä»·çš„JSXï¼š</p>
<pre><code class="highlight jsx"><span class="comment">// default</span>
&lt;<span class="title class_">MyComponent</span>&gt;&#123;<span class="function">() =&gt;</span> <span class="string">&#x27;hello&#x27;</span>&#125;&lt;/<span class="title class_">MyComponent</span>&gt;

<span class="comment">// named</span>
<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>&gt;</span>&#123;&#123;</span>
<span class="language-xml">  default: () =&gt; &#x27;default slot&#x27;,</span>
<span class="language-xml">  foo: () =&gt; <span class="tag">&lt;<span class="name">div</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">div</span>&gt;</span>,</span>
<span class="language-xml">  bar: () =&gt; [<span class="tag">&lt;<span class="name">span</span>&gt;</span>one<span class="tag">&lt;/<span class="name">span</span>&gt;</span>, <span class="tag">&lt;<span class="name">span</span>&gt;</span>two<span class="tag">&lt;/<span class="name">span</span>&gt;</span>]</span>
<span class="language-xml">&#125;&#125;<span class="tag">&lt;/<span class="name">MyComponent</span>&gt;</span></span></code></pre>

<p>å°†slotä½œä¸ºå‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå¯ä»¥è®©å­ç»„ä»¶æ‡’æ•£åœ°è°ƒç”¨slotã€‚è¿™æ ·ï¼Œå­ç»„ä»¶è€Œä¸æ˜¯çˆ¶ç»„ä»¶å°±èƒ½è·Ÿè¸ªslotçš„ä¾èµ–å…³ç³»ï¼Œä»è€Œå®ç°æ›´å‡†ç¡®ã€æ›´æœ‰æ•ˆçš„æ›´æ–°ã€‚</p>
<h3 id="Built-in-Components"><a href="#Built-in-Components" class="headerlink" title="Built-in Components"></a>Built-in Components</h3><p>å†…ç½®ç»„ä»¶å¦‚<code>&lt;KeepAlive&gt;</code>, <code>&lt;Transition&gt;</code>, <code>&lt;TransitionGroup&gt;</code>, <code>&lt;Teleport&gt;</code> å’Œ <code>&lt;Suspense&gt;</code>å¿…é¡»å¯¼å…¥æ‰èƒ½åœ¨æ¸²æŸ“å‡½æ•°ä¸­ä½¿ç”¨</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h, <span class="title class_">KeepAlive</span>, <span class="title class_">Teleport</span>, <span class="title class_">Transition</span>, <span class="title class_">TransitionGroup</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  setup () &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="title class_">Transition</span>, &#123; <span class="attr">mode</span>: <span class="string">&#x27;out-in&#x27;</span> &#125;, <span class="comment">/* ... */</span>)
  &#125;
&#125;</code></pre>

<h3 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h3><p>åœ¨æ¨¡ç‰ˆç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œ<code>v-model</code>æŒ‡ä»¤ä¼šæ‰©å±•ä¸º<code>modelValue</code>å’Œ<code>onUpdate:modelValue</code>ä¸¤ä¸ªpropsï¼Œåœ¨æ¸²æŸ“å‡½æ•°ä¸­å°±å¿…é¡»è‡ªå·±æä¾›è¿™äº›propsï¼š</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="attr">props</span>: [<span class="string">&#x27;modelValue&#x27;</span>],
  <span class="attr">emits</span>: [<span class="string">&#x27;update:modelValue&#x27;</span>],
  <span class="title function_">setup</span>(<span class="params">props, &#123; emit &#125;</span>) &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span>
      <span class="title function_">h</span>(<span class="title class_">SomeComponent</span>, &#123;
        <span class="attr">modelValue</span>: props.<span class="property">modelValue</span>,
        <span class="string">&#x27;onUpdate:modelValue&#x27;</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> <span class="title function_">emit</span>(<span class="string">&#x27;update:modelValue&#x27;</span>, value)
      &#125;)
  &#125;
&#125;</code></pre>

<h3 id="Custom-Directives"><a href="#Custom-Directives" class="headerlink" title="Custom Directives"></a>Custom Directives</h3><p>è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥é€šè¿‡<code>withDirectives</code>åº”ç”¨åˆ°vnodeï¼š</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h, withDirectives &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="comment">// a custom directive</span>
<span class="keyword">const</span> pin = &#123;
  <span class="title function_">mounted</span>(<span class="params"></span>) &#123; <span class="comment">/* ... */</span> &#125;,
  <span class="title function_">updated</span>(<span class="params"></span>) &#123; <span class="comment">/* ... */</span> &#125;
&#125;

<span class="comment">// &lt;div v-pin:top.animate=&quot;200&quot;&gt;&lt;/div&gt;</span>
<span class="keyword">const</span> vnode = <span class="title function_">withDirectives</span>(<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>), [
  [pin, <span class="number">200</span>, <span class="string">&#x27;top&#x27;</span>, &#123; <span class="attr">animate</span>: <span class="literal">true</span> &#125;]
])</code></pre>

<p>å¦‚æœæŒ‡ä»¤æ˜¯é€šè¿‡åå­—æ³¨å†Œçš„ï¼Œæ˜¯æ— æ³•ç›´æ¥å¯¼å…¥çš„ï¼Œéœ€è¦ä½¿ç”¨<code>resolveDirective</code>å¯¹å…¶è¿›è¡Œè§£æã€‚</p>
<h3 id="Template-Refs"><a href="#Template-Refs" class="headerlink" title="Template Refs"></a>Template Refs</h3><p>åœ¨ä½¿ç”¨ç»„åˆå¼APIæ—¶ï¼Œæ¨¡ç‰ˆrefæ˜¯é€šè¿‡<code>ref()</code>æœ¬èº«ä½œä¸ºpropsä¼ é€’ç»™vnodeåˆ›å»ºçš„</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="title function_">setup</span>(<span class="params"></span>) &#123;
    <span class="keyword">const</span> divEl = <span class="title function_">ref</span>()

    <span class="comment">// &lt;div ref=&quot;divEl&quot;&gt;</span>
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">ref</span>: divEl &#125;)
  &#125;
&#125;</code></pre>

<h2 id="Functional-Components"><a href="#Functional-Components" class="headerlink" title="Functional Components"></a>Functional Components</h2><p>å‡½æ•°ç»„ä»¶æ˜¯ç»„ä»¶çš„å¦ä¸€ç§å½¢å¼ï¼Œè‡ªèº«æ²¡æœ‰ä»»ä½•çŠ¶æ€ã€‚æ‰§è¡Œçš„å†…å®¹å°±åƒçº¯å‡½æ•°ï¼Œpropsè¾“å…¥ï¼Œvnodeè¾“å‡ºã€‚åœ¨æ¸²æŸ“æ—¶ä¸åˆ›å»ºç»„ä»¶å®ä¾‹(å³æ²¡æœ‰<code>this</code>)ï¼Œä¹Ÿæ²¡æœ‰ä¸€äº›ç»„ä»¶å£°æ˜å‘¨æœŸé’©å­ã€‚</p>
<p>æˆ‘ä»¬ä¼šé€šè¿‡ä¸€ä¸ªæ™®é€šå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ã€‚è¯¥å‡½æ•°å®é™…ä¸Šå°±æ˜¯ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ã€‚</p>
<p>å‡½æ•°ç»„ä»¶çš„ç­¾åä¸<code>setup()</code>hookç›¸åŒï¼š</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params">props, &#123; slots, emit, attrs &#125;</span>) &#123;
  <span class="comment">// ...</span>
&#125;</code></pre>

<p>ç»„ä»¶çš„å¤§å¤šæ•°å¸¸è§„é…ç½®é€‰é¡¹éƒ½ä¸é€‚ç”¨äºå‡½æ•°ç»„ä»¶ã€‚ä¸è¿‡ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ å±æ€§æ¥å®šä¹‰<code>props</code>å’Œ<code>emits</code>ï¼š</p>
<pre><code class="highlight js"><span class="title class_">MyComponent</span>.<span class="property">props</span> = [<span class="string">&#x27;value&#x27;</span>]
<span class="title class_">MyComponent</span>.<span class="property">emits</span> = [<span class="string">&#x27;click&#x27;</span>]</code></pre>

<p>å¦‚æœæœªæŒ‡å®špropsé€‰é¡¹ï¼Œé‚£ä¹ˆä¼ é€’ç»™å‡½æ•°çš„propså¯¹è±¡å°†åŒ…å«æ‰€æœ‰å±æ€§ï¼Œä¸attrsç›¸åŒã€‚é™¤éæŒ‡å®šæ¥propsé€‰é¡¹ï¼Œå¦åˆ™propsåç§°ä¸ä¼šè§„èŒƒä¸ºé©¼å³°ã€‚</p>
<p>å¯¹äºæ²¡æœ‰æ˜ç¡®propsçš„å‡½æ•°ç»„ä»¶ï¼Œå±æ€§ç©¿é€çš„å·¥ä½œåŸç†ä¸æ™®é€šç»„ä»¶å¤§è‡´ç›¸åŒã€‚ä½†æ˜¯ï¼Œå¯¹äºæ²¡æœ‰æ˜ç¡®æŒ‡å®špropsçš„å‡½æ•°ç»„ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹å°†ä¼šä»<code>attrs</code>ç»§æ‰¿<code>class</code>ã€<code>style</code>å’Œ<code>onXxx</code>äº‹ä»¶ä¾¦å¬å™¨ã€‚æ— è®ºæ˜¯å“ªç§æƒ…å†µï¼Œéƒ½å¯ä»¥å°†<code>inheritAttrs</code>è®¾ä¸º<code>false</code>ä»¥ç¦ç”¨å±æ€§ç»§æ‰¿ï¼š</p>
<pre><code class="highlight js"><span class="title class_">MyComponent</span>.<span class="property">inheritAttrs</span> = <span class="literal">false</span></code></pre>

<p>å‡½æ•°ç»„ä»¶å¯ä»¥åƒæ™®é€šç»„ä»¶ä¸€æ ·æ³¨å†Œå’Œä½¿ç”¨ã€‚å¦‚æœå°†å‡½æ•°ä½œä¸º<code>h()</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå®ƒä¼šè¢«è§†ä¸ºå‡½æ•°ç»„ä»¶ã€‚</p>
<h3 id="Typing-Functional-Components"><a href="#Typing-Functional-Components" class="headerlink" title="Typing Functional Components"></a>Typing Functional Components</h3><p>å‡½æ•°ç»„ä»¶å¯æ ¹æ®å…¶å‘½åæˆ–åŒ¿åç±»å‹æ¥è¿›è¡Œæ ‡æ³¨ç±»å‹ã€‚åœ¨SFCæ¨¡æ¿ä¸­ä½¿ç”¨æ—¶ï¼ŒVolarè¿˜æ”¯æŒå¯¹å…¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚</p>
<p>å…·åå‡½æ•°ç»„ä»¶</p>
<pre><code class="highlight tsx"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">SetupContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>
<span class="keyword">type</span> <span class="title class_">FComponentProps</span> = &#123;
  <span class="attr">message</span>: <span class="built_in">string</span>
&#125;

<span class="keyword">type</span> <span class="title class_">Events</span> = &#123;
  <span class="title function_">sendMessage</span>(<span class="attr">message</span>: <span class="built_in">string</span>): <span class="built_in">void</span>
&#125;

<span class="keyword">function</span> <span class="title function_">FComponent</span>(<span class="params"></span>
<span class="params">  props: FComponentProps,</span>
<span class="params">  context: SetupContext&lt;Events&gt;</span>
<span class="params"></span>) &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> context.emit(&#x27;sendMessage&#x27;, props.message)&#125;&gt;</span>
<span class="language-xml">        &#123;props.message&#125; &#123;&#x27; &#x27;&#125;</span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>
  )
&#125;

<span class="title class_">FComponent</span>.<span class="property">props</span> = &#123;
  <span class="attr">message</span>: &#123;
    <span class="attr">type</span>: <span class="title class_">String</span>,
    <span class="attr">required</span>: <span class="literal">true</span>
  &#125;
&#125;

<span class="title class_">FComponent</span>.<span class="property">emits</span> = &#123;
  <span class="attr">sendMessage</span>: <span class="function">(<span class="params">value: <span class="built_in">unknown</span></span>) =&gt;</span> <span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>
&#125;</code></pre>

<p>åŒ¿åå‡½æ•°ç»„ä»¶</p>
<pre><code class="highlight tsx"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">FunctionalComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">type</span> <span class="title class_">FComponentProps</span> = &#123;
  <span class="attr">message</span>: <span class="built_in">string</span>
&#125;

<span class="keyword">type</span> <span class="title class_">Events</span> = &#123;
  <span class="title function_">sendMessage</span>(<span class="attr">message</span>: <span class="built_in">string</span>): <span class="built_in">void</span>
&#125;

<span class="keyword">const</span> <span class="title class_">FComponent</span>: <span class="title class_">FunctionalComponent</span>&lt;<span class="title class_">FComponentProps</span>, <span class="title class_">Events</span>&gt; = <span class="function">(<span class="params"></span></span>
<span class="params"><span class="function">  props,</span></span>
<span class="params"><span class="function">  context</span></span>
<span class="params"><span class="function"></span>) =&gt;</span> &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> context.emit(&#x27;sendMessage&#x27;, props.message)&#125;&gt;</span>
<span class="language-xml">      Â  &#123;props.message&#125;Â &#123;&#x27; &#x27;&#125;</span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>
  )
&#125;

<span class="title class_">FComponent</span>.<span class="property">props</span> = &#123;
  <span class="attr">message</span>: &#123;
    <span class="attr">type</span>: <span class="title class_">String</span>,
    <span class="attr">required</span>: <span class="literal">true</span>
  &#125;
&#125;

<span class="title class_">FComponent</span>.<span class="property">emits</span> = &#123;
  <span class="attr">sendMessage</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> <span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>
&#125;</code></pre>

</div> 

<script>
    window.onload = detectors();
</script>
    <div class="post-footer">
    <div class="h-line-primary"></div>
    <nav class="post-nav">
        <div class="prev-item">
           
        </div>
        <div class="next-item">
            
                <div class="icon arrow-right"></div>
                <div class="post-link">
                  <a href="/2023/08/23/%E3%80%90%E7%BF%BB%E3%80%91Announcing-Vue-3-3/">Next</a>  
                </div>  
            
        </div>
    </nav>
</div>

    <!-- <div class="post-toc">
  <div class="post-toc-wrap">
    <div class="post-toc-title">ç›®å½•</div>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E6%96%87"><span class="toc-text">æ­£æ–‡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Basic-Usage"><span class="toc-text">Basic Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-Vnodes"><span class="toc-text">Creating Vnodes</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Declaring-Render-Functions"><span class="toc-text">Declaring Render Functions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vnodes-Must-Be-Unique"><span class="toc-text">Vnodes Must Be Unique</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSX-x2F-TSX%E2%80%8B"><span class="toc-text">JSX &#x2F; TSXâ€‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSX-Type-Inference"><span class="toc-text">JSX Type Inference</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Render-Function-Recipes"><span class="toc-text">Render Function Recipes</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#v-if"><span class="toc-text">v-if</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-for"><span class="toc-text">v-for</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-on"><span class="toc-text">v-on</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Event-Modifiers"><span class="toc-text">Event Modifiers</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Components"><span class="toc-text">Components</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Rendering-Slots"><span class="toc-text">Rendering Slots</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Passing-Slots"><span class="toc-text">Passing Slots</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Built-in-Components"><span class="toc-text">Built-in Components</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v-model"><span class="toc-text">v-model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Custom-Directives"><span class="toc-text">Custom Directives</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Template-Refs"><span class="toc-text">Template Refs</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Functional-Components"><span class="toc-text">Functional Components</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Typing-Functional-Components"><span class="toc-text">Typing Functional Components</span></a></li></ol></li></ol></li></ol>
  </div>
</div>

<script>
  const tocLinks = document.querySelectorAll('.toc-link')
  tocLinks.forEach((el) => {
    el.setAttribute('href', `#${el.innerText}`)
  })
</script>
 -->
    
      <div class="post-comment">

     

    
        <div id="disqus_thread"></div>
        <script>
            /**
            *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
            *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
            
            var disqus_config = function () {
                this.page.url = 'https://lhrun.github.io/2023/08/31/%E3%80%90%E7%BF%BB%E3%80%91Render-Functions-JSX/';  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = '2023/08/31/ã€ç¿»ã€‘Render-Functions-JSX/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                this.language = 'en'
            };
            
            (function() { // DON'T EDIT BELOW THIS LINE
            var d = document, s = d.createElement('script');
            s.src = 'https://lhblog-1.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>   
     
    
    

</div>
     
  
</article>
        </div>
      </div>
      
      <div class="footer">
    <div class="flex-container">
        <div class="footer-text">
            
            
            
                Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>
                
        </div>
    </div>
</div>

    </div>

    
      <div class="search-popup">
    <div class="search-popup-overlay">  
    </div>
    <div class="search-popup-window" >
        <div class="search-header">
            <div class="search-input-container">
              <input autocomplete="off" autocapitalize="off" maxlength="80"
                     placeholder="Search Anything" spellcheck="false"
                     type="search" class="search-input">
            </div>
            <div class="search-close-btn">
                <div class="icon close-btn"></div>
            </div>
        </div>
        <div class="search-result-container">
        </div>
    </div>
</div>

<script>
    const searchConfig = {
        path             : "/search.xml",
        top_n_per_article: "1",
        unescape         : "false",
        trigger: "auto",
        preload: "false"
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script>
<script src="/js/search.js"></script>
    
    

  </body>
</html>
