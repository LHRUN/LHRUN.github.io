<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Canvas ArtistryÔºö Mastering Selection, Dragging, and Scaling</title>
    <url>/2023/11/30/Canvas-Artistry1/</url>
    <content><![CDATA[<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>About half a year ago. I made a Canvas multifunctional drawing board with some of the following main features</p>
<ul>
<li>Freestyle drawing<ul>
<li>Supports color changes and real-time adjustment of line width according to the drawing speed.</li>
<li>Offers a multitude of effects such as fluorescent, multi-color, crayon, spray, bubbles and more.</li>
</ul>
</li>
<li>Eraser.<ul>
<li>Linear erase function with mouse movement.</li>
</ul>
</li>
<li>Drawing text<ul>
<li>By double clicking on the drawing board, the user can enter text and draw in the specified position.</li>
</ul>
</li>
<li>Drawing board Drag &amp; Drop<ul>
<li>Holding down the space bar allows the user to drag and drop the drawing board infinitely.</li>
</ul>
</li>
<li>Select Mode<ul>
<li>Once in selection mode, the user can box in elements by clicking on them, zoom or move them by holding down the handle, and delete selected elements with the Backspace key.</li>
</ul>
</li>
<li>Layer<ul>
<li>The content of the drawing board is displayed in the order of the layers, and users can add, delete and sort layers.</li>
</ul>
</li>
<li>Provides undo and reverse undo features that allow users to clear the board or save the content as an image.</li>
</ul>
<p>Then recently I had some free time and decided to write a series of articles documenting my design ideas and code. If you are interested in this project, feel free to visit and also feel free to give the project a Star ‚≠êÔ∏è.</p>
<ul>
<li>Github: <a href="https://github.com/LHRUN/paint-board">https://github.com/LHRUN/paint-board</a></li>
</ul>
<p>In this article, I will introduce the Canvas drawing board in detail in the box to select elements of the realization of ideas and specific code, the effect is as follows.</p>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/canvas_art_1_preview.gif"></p>
<h2 id="Ideas-For-Realization"><a href="#Ideas-For-Realization" class="headerlink" title="Ideas For Realization"></a>Ideas For Realization</h2><ol>
<li>First make sure that key rectangle properties such as width, height, and rectangle position are recorded when the element is initialized and updated. This is the basis for implementing box-select features.</li>
<li>On mouseover, it is necessary to determine whether the mouse is hovering over any element based on the current coordinates. This allows us to handle clicks appropriately. Also, the cursor should change on mouseover based on the type of element it is hovering over to provide more intuitive feedback to the user.</li>
<li>In the case of selete elements, the rendering stage should render the select effect at the end based on the rectangle property of the select element, making sure that the select effect is at the top of the canvas.</li>
<li>When a select element exists, the drag operation needs to determine whether to move the element or change its size based on the location of the drag.</li>
<li>There are two types of element resizing, scaling that maintains proportionality (e.g., text) and scaling that does not (e.g., free drawing).</li>
</ol>
<h2 id="Record-Rectangle-Properties"><a href="#Record-Rectangle-Properties" class="headerlink" title="Record Rectangle Properties"></a>Record Rectangle Properties</h2><p>Because new coordinate points were being added all the time during the drawing process, I recorded the minimum and maximum xy coordinates in addition to the rectangle attribute to make it easier to calculate the width and height.</p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Update the rectangle properties according to the new coordinate points</span>
<span class="comment"> * <span class="doctag">@param</span> instance free drawing element</span>
<span class="comment"> * <span class="doctag">@param</span> position current position</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">updateRect</span> = (<span class="params">instance: FreeDraw, position: MousePosition</span>) =&gt; &#123;
  <span class="keyword">const</span> &#123; x, y &#125; = position
  <span class="keyword">let</span> &#123; minX, maxX, minY, maxY &#125; = instance.<span class="property">rect</span>
  <span class="keyword">if</span> (x &lt; minX) &#123;
    minX = x
  &#125;
  <span class="keyword">if</span> (x &gt; maxX) &#123;
    maxX = x
  &#125;
  <span class="keyword">if</span> (y &lt; minY) &#123;
    minY = y
  &#125;
  <span class="keyword">if</span> (y &gt; maxY) &#123;
    maxY = y
  &#125;
  <span class="keyword">const</span> rect = &#123;
    minX,
    maxX,
    minY,
    maxY,
    <span class="attr">x</span>: minX,
    <span class="attr">y</span>: minY,
    <span class="attr">width</span>: maxX - minX,
    <span class="attr">height</span>: maxY - minY
  &#125;
  instance.<span class="property">rect</span> = rect
  <span class="keyword">return</span> rect
&#125;</code></pre>

<h2 id="Calculate-Mouse-Movement-Coordinates"><a href="#Calculate-Mouse-Movement-Coordinates" class="headerlink" title="Calculate Mouse Movement Coordinates"></a>Calculate Mouse Movement Coordinates</h2><ul>
<li>As the mouse moves, we want to change the cursor so that the user can feel that the mouse has moved over the element. To realize this, we need to calculate whether the mouse coordinates are close to the drawing path to a certain distance.</li>
<li>A drawing path consists of a series of coordinate points. We can connect each coordinate point to the previous one to form a line segment. We define that the mouse can be considered to be hovering over an element when any of the following conditions are met<ul>
<li>The mouse coordinates are less than 10 pixels from the start of the line segment.</li>
<li>The mouse coordinates are less than 10 pixels from the end of the line segment.</li>
<li>The mouse coordinates are less than 10 pixels away from the line segment and the x and y coordinates are within the range of the two endpoints of the line segment.</li>
<li><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/canvas_art_1_mouse_position.png"><pre><code class="highlight js"><span class="comment">// Iterate over all coordinate points of the element</span>
<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; positions.<span class="property">length</span>; i++) &#123;
  <span class="comment">// Distance from the starting point</span>
  <span class="keyword">const</span> startDistance = <span class="title function_">getDistance</span>(movePos, positions[i - <span class="number">1</span>])
  <span class="comment">// Distance to the end point</span>
  <span class="keyword">const</span> endDistance = <span class="title function_">getDistance</span>(movePos, positions[i])
  <span class="comment">// Distance from line segment</span>
  <span class="keyword">const</span> lineDistance = <span class="title function_">getPositionToLineDistance</span>(
    movePos,
    positions[i - <span class="number">1</span>],
    positions[i]
  )
  <span class="keyword">const</span> rangeX =
    <span class="title class_">Math</span>.<span class="title function_">max</span>(positions[i - <span class="number">1</span>].<span class="property">x</span>, positions[i].<span class="property">x</span>) &gt;= movePos.<span class="property">x</span> &amp;&amp;
    movePos.<span class="property">x</span> &gt;= <span class="title class_">Math</span>.<span class="title function_">min</span>(positions[i - <span class="number">1</span>].<span class="property">x</span>, positions[i].<span class="property">x</span>)
  <span class="keyword">const</span> rangeY =
    <span class="title class_">Math</span>.<span class="title function_">max</span>(positions[i - <span class="number">1</span>].<span class="property">y</span>, positions[i].<span class="property">y</span>) &gt;= movePos.<span class="property">y</span> &amp;&amp;
    movePos.<span class="property">y</span> &gt;= <span class="title class_">Math</span>.<span class="title function_">min</span>(positions[i - <span class="number">1</span>].<span class="property">y</span>, positions[i].<span class="property">y</span>)

  <span class="comment">// The current element can be recorded if one of three conditions is met</span>
  <span class="keyword">if</span> (
    startDistance &lt; <span class="number">10</span> ||
    endDistance &lt; <span class="number">10</span> ||
    (lineDistance &lt; <span class="number">10</span> &amp;&amp; rangeX &amp;&amp; rangeY)
  ) &#123;
    <span class="variable language_">this</span>.<span class="property">mouseHoverElementIndex</span> = eleIndex
  &#125;
&#125;
<span class="comment">// ...</span>

<span class="comment">/**</span>
<span class="comment"> * Calculate the distance between two points</span>
<span class="comment"> * <span class="doctag">@param</span> start starting point</span>
<span class="comment"> * <span class="doctag">@param</span> end end point</span>
<span class="comment"> * <span class="doctag">@returns</span> <span class="variable">distance</span></span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getDistance</span> = (<span class="params">start: MousePosition, end: MousePosition</span>) =&gt; &#123;
  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="title class_">Math</span>.<span class="title function_">pow</span>(start.<span class="property">x</span> - end.<span class="property">x</span>, <span class="number">2</span>) + <span class="title class_">Math</span>.<span class="title function_">pow</span>(start.<span class="property">y</span> - end.<span class="property">y</span>, <span class="number">2</span>))
&#125;

<span class="comment">/**</span>
<span class="comment"> * Get the distance of the mouse position from the line segment</span>
<span class="comment"> * <span class="doctag">@param</span> pos mouse position</span>
<span class="comment"> * <span class="doctag">@param</span> startPos starting point</span>
<span class="comment"> * <span class="doctag">@param</span> endPos end point</span>
<span class="comment"> * <span class="doctag">@returns</span> <span class="variable">distance</span></span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getPositionToLineDistance</span> = (<span class="params"></span>
<span class="params">  pos: MousePosition,</span>
<span class="params">  startPos: MousePosition,</span>
<span class="params">  endPos: MousePosition</span>
<span class="params"></span>) =&gt; &#123;
  <span class="comment">/**</span>
<span class="comment">   * 1. Calculate the straight line distance between three points</span>
<span class="comment">   * 2. Calculate the half perimeter of a triangle</span>
<span class="comment">   * 3. Finding area by Helen&#x27;s formula</span>
<span class="comment">   * 4. Find the height of a triangle based on the area formula</span>
<span class="comment">   */</span>
  <span class="keyword">const</span> A = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">getDistance</span>(pos, startPos))
  <span class="keyword">const</span> B = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">getDistance</span>(pos, endPos))
  <span class="keyword">const</span> C = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">getDistance</span>(startPos, endPos))

  <span class="keyword">const</span> P = (A + B + C) / <span class="number">2</span>
  <span class="keyword">const</span> area = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title class_">Math</span>.<span class="title function_">sqrt</span>(P * (P - A) * (P - B) * (P - C)))
  <span class="keyword">const</span> distance = (<span class="number">2</span> * area) / C
  <span class="keyword">return</span> distance
&#125;</code></pre></li>
</ul>
</li>
</ul>
<h2 id="Click-To-Show-Box-Selection-Effect"><a href="#Click-To-Show-Box-Selection-Effect" class="headerlink" title="Click To Show Box Selection Effect"></a>Click To Show Box Selection Effect</h2><ul>
<li>When the user clicks, we record this element as a select element if all three cases were met in the previous hover action.</li>
<li>In the drawing board rendering stage, we render the boxed effect according to the rectangle property of the boxed element.<pre><code class="highlight js"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">select</span>.<span class="property">selectElementIndex</span> !== -<span class="number">1</span>) &#123;
  <span class="comment">// Get the rectangle attribute of the selected element and draw the boxed effect.</span>
  <span class="keyword">const</span> rect = <span class="variable language_">this</span>.<span class="property">select</span>.<span class="title function_">getCurSelectElement</span>().<span class="property">rect</span>
  <span class="title function_">drawResizeRect</span>(<span class="variable language_">this</span>.<span class="property">context</span>, rect)
&#125;

<span class="comment">/**</span>
<span class="comment"> * Drawing Select Rectangles</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">drawResizeRect</span> = (<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  rect: ElementRect</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> &#123; x, y, width, height &#125; = rect
  context.<span class="title function_">save</span>()
  context.<span class="property">strokeStyle</span> = <span class="string">&#x27;#65CC8A&#x27;</span>
  context.<span class="title function_">setLineDash</span>([<span class="number">5</span>])
  context.<span class="property">lineWidth</span> = <span class="number">2</span>
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>

  <span class="comment">// Drawing Dashed Boxes</span>
  <span class="title function_">drawRect</span>(context, x, y, width, height)

  <span class="comment">// Drawing the four corner handles</span>
  context.<span class="property">fillStyle</span> = <span class="string">&#x27;#65CC8A&#x27;</span>
  <span class="title function_">drawRect</span>(context, x - <span class="number">10</span>, y - <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  <span class="title function_">drawRect</span>(context, x + width, y - <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  <span class="title function_">drawRect</span>(context, x - <span class="number">10</span>, y + height, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  <span class="title function_">drawRect</span>(context, x + width, y + height, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  context.<span class="title function_">restore</span>()
&#125;

<span class="comment">/**</span>
<span class="comment"> * Drawing Rectangles</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">drawRect</span> = (<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  x: number,</span>
<span class="params">  y: number,</span>
<span class="params">  width: number,</span>
<span class="params">  height: number,</span>
<span class="params">  fill = <span class="literal">false</span> <span class="comment">// Fill or not</span></span>
<span class="params"></span>) =&gt; &#123;
  context.<span class="title function_">beginPath</span>()
  context.<span class="title function_">rect</span>(x, y, width, height)
  <span class="keyword">if</span> (fill) &#123;
    context.<span class="title function_">fill</span>()
  &#125; <span class="keyword">else</span> &#123;
    context.<span class="title function_">stroke</span>()
  &#125;
&#125;</code></pre></li>
</ul>
<h2 id="Drag-And-Drop-Element"><a href="#Drag-And-Drop-Element" class="headerlink" title="Drag And Drop Element"></a>Drag And Drop Element</h2><p>Dragging and dropping elements is relatively simple and is achieved by calculating the distance the mouse moves. Iterate over each coordinate point in the drawing path and add the corresponding distance to it to complete the drag operation.</p>
<pre><code class="highlight js"><span class="comment">// startMousePos is the coordinate of the last move.</span>
<span class="keyword">const</span> disntanceX = x - <span class="variable language_">this</span>.<span class="property">startMousePos</span>.<span class="property">x</span>
<span class="keyword">const</span> disntanceY = y - <span class="variable language_">this</span>.<span class="property">startMousePos</span>.<span class="property">y</span>

<span class="comment">/**</span>
<span class="comment"> * Update Position</span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">distanceX</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">distanceY</span></span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">moveFreeDraw</span> = (<span class="params"></span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  distanceX: number,</span>
<span class="params">  distanceY: number</span>
<span class="params"></span>) =&gt; &#123;
  <span class="title function_">initRect</span>(instance)
  instance.<span class="property">positions</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;
    position.<span class="property">x</span> += distanceX
    position.<span class="property">y</span> += distanceY
    <span class="title function_">updateRect</span>(instance, position)
  &#125;)
&#125;</code></pre>

<h2 id="Element-Zoom-doesn‚Äôt-keep-proportional"><a href="#Element-Zoom-doesn‚Äôt-keep-proportional" class="headerlink" title="Element Zoom (doesn‚Äôt keep proportional)"></a>Element Zoom (doesn‚Äôt keep proportional)</h2><ul>
<li>I‚Äôll analyze the element zoom by dragging and dropping the handle in the bottom right corner as an example</li>
<li>First of all, element scaling is divided into horizontal scaling and vertical scaling.<ul>
<li>Horizontal scaling &#x3D; (width of old rectangle + horizontal mouse movement) &#x2F; width of old rectangle</li>
<li>Vertical Scaling &#x3D; (height of old rectangle + vertical mouse movement) &#x2F; height of old rectangle</li>
</ul>
</li>
<li>Then iterate through all the coordinate points of the element to scale, which results in an offset scaling effect, as follows<ul>
<li><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/canvas_art_1_zoom1.png"></li>
</ul>
</li>
<li>Then you need to calculate how far the drag handle is currently moving from the corner vertices, and then subtract this distance to get the correct zoom effect<ul>
<li><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/canvas_art_1_zoom2.png"></li>
</ul>
</li>
<li>Of course the drag and drop calculations for the four corners are inconsistent, but the idea is the same</li>
</ul>
<pre><code class="highlight js"><span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">resizeType</span>) &#123;
  <span class="comment">// disntanceX Mouse Horizontal Move Distance</span>
  <span class="comment">// disntanceY Mouse Vertical Move Distance</span>
  <span class="comment">// bottom right</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> + disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> + disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// bottom left</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> - disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> + disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// top left</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> - disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> - disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// top right</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> + disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> - disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="attr">default</span>:
    <span class="keyword">break</span>
&#125;

<span class="comment">/**</span>
<span class="comment"> * Zoom Drawing</span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">instance</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">scaleX</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">scaleY</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">rect</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">resizeType</span></span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">resizeFreeDraw</span> = (<span class="params"></span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  scaleX: number,</span>
<span class="params">  scaleY: number,</span>
<span class="params">  rect: FreeDrawRect,</span>
<span class="params">  resizeType: string</span>
<span class="params"></span>) =&gt; &#123;
  <span class="comment">// Initialize Rectangle</span>
  <span class="title function_">initRect</span>(instance)
  <span class="comment">// Iterate over all coordinates for scaling</span>
  instance.<span class="property">positions</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;
    position.<span class="property">x</span> = position.<span class="property">x</span> * scaleX
    position.<span class="property">y</span> = position.<span class="property">y</span> * scaleY
    <span class="title function_">updateRect</span>(instance, position)
  &#125;)
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: newX, <span class="attr">y</span>: newY, <span class="attr">width</span>: newWidth, <span class="attr">height</span>: newHeight &#125; = instance.<span class="property">rect</span>
  <span class="keyword">let</span> offsetX = <span class="number">0</span>
  <span class="keyword">let</span> offsetY = <span class="number">0</span>
  <span class="comment">// Calculate the offset distance, this is to be calculated based on the diagonal vertices of the current zoom handle, so it is divided into 4 cases</span>
  <span class="keyword">switch</span> (resizeType) &#123;
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
      offsetX = newX - rect.<span class="property">x</span>
      offsetY = newY - rect.<span class="property">y</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
      offsetX = newX + newWidth - (rect.<span class="property">x</span> + rect.<span class="property">width</span>)
      offsetY = newY - rect.<span class="property">y</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
      offsetX = newX + newWidth - (rect.<span class="property">x</span> + rect.<span class="property">width</span>)
      offsetY = newY + newHeight - (rect.<span class="property">y</span> + rect.<span class="property">height</span>)
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
      offsetX = newX - rect.<span class="property">x</span>
      offsetY = newY + newHeight - (rect.<span class="property">y</span> + rect.<span class="property">height</span>)
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;

  <span class="title function_">initRect</span>(instance)

  <span class="comment">// Subtract offset distance</span>
  instance.<span class="property">positions</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;
    position.<span class="property">x</span> = position.<span class="property">x</span> - offsetX
    position.<span class="property">y</span> = position.<span class="property">y</span> - offsetY
    <span class="title function_">updateRect</span>(instance, position)
  &#125;)
&#125;</code></pre>

<h2 id="Text-zoom-keep-proportional"><a href="#Text-zoom-keep-proportional" class="headerlink" title="Text zoom (keep proportional)"></a>Text zoom (keep proportional)</h2><ul>
<li>For text zoom, the aspect ratio needs to be kept constant. This can be done by calculating the aspect ratio of the old and new rectangles:<ul>
<li>When the new aspect ratio is smaller than the old one, keep the width unchanged and calculate the height as <code>Width / Old Aspect Ratio</code>.</li>
<li>When the new aspect ratio is greater than the old one, keep the height unchanged and calculate the width as <code>height * old aspect ratio</code>.<pre><code class="highlight js"><span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">resizeType</span>) &#123;
  <span class="comment">// ...</span>
  <span class="comment">// bottom right</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> + disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> + disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// bottom left</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> - disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> + disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// top left</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> - disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> - disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// top right</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> + disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> - disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="attr">default</span>:
    <span class="keyword">break</span>
&#125;

<span class="comment">/**</span>
<span class="comment"> * Change text element size</span>
<span class="comment"> * <span class="doctag">@param</span> ele text element</span>
<span class="comment"> * <span class="doctag">@param</span> width Changed width</span>
<span class="comment"> * <span class="doctag">@param</span> height Changed height</span>
<span class="comment"> * <span class="doctag">@param</span> resizeType resize type</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">resizeTextElement</span> = (<span class="params"></span>
<span class="params">  ele: TextElement,</span>
<span class="params">  width: number,</span>
<span class="params">  height: number,</span>
<span class="params">  resizeType: string</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> oldRatio = ele.<span class="property">rect</span>.<span class="property">width</span> / ele.<span class="property">rect</span>.<span class="property">height</span>
  <span class="keyword">const</span> newRatio = width / height
  <span class="comment">// Follow the previous instructions to change the aspect ratio inconsistency</span>
  <span class="keyword">if</span> (newRatio &lt; oldRatio) &#123;
    height = width / oldRatio
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newRatio &gt; oldRatio) &#123;
    width = oldRatio * height
  &#125;

  <span class="comment">/**</span>
<span class="comment">   * Because this zoom is scaled to the top left corner</span>
<span class="comment">   * So in order to achieve that the current drag handle does not move, an offset operation is required</span>
<span class="comment">   */</span>
  <span class="keyword">switch</span> (resizeType) &#123;
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
      ele.<span class="property">rect</span>.<span class="property">x</span> -= width - ele.<span class="property">rect</span>.<span class="property">width</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
      ele.<span class="property">rect</span>.<span class="property">x</span> -= width - ele.<span class="property">rect</span>.<span class="property">width</span>
      ele.<span class="property">rect</span>.<span class="property">y</span> -= height - ele.<span class="property">rect</span>.<span class="property">height</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
      ele.<span class="property">rect</span>.<span class="property">y</span> -= height - ele.<span class="property">rect</span>.<span class="property">height</span>
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;
  ele.<span class="property">rect</span>.<span class="property">height</span> = height
  ele.<span class="property">rect</span>.<span class="property">width</span> = width
  <span class="comment">// Font size modified by height</span>
  ele.<span class="property">fontSize</span> = ele.<span class="property">rect</span>.<span class="property">height</span>
&#125;</code></pre></li>
</ul>
</li>
</ul>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>If you‚Äôre also writing related features, I hope this will help you, and if you find any problems or have a good solution, please feel free to discuss üëª</p>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Canvas</tag>
      </tags>
  </entry>
  <entry>
    <title>Explore Full Stack MagicÔºöNext.js + Prisma + Next-auth + vercel/postgres</title>
    <url>/2023/11/28/Explore-Full-Stack-Magic/</url>
    <content><![CDATA[<p>Recently, I completed a new website project to collecting Github Profiles and Readme Components. Initially, I didn‚Äôt plan to develop it into a full-stack application, and features such as liking and collect were based on local storage. However, with the gradual iterations after the website‚Äôs release, I felt that adding full-stack support might be a necessary direction. Not only does it contribute to future project expansion, but it also enhances the overall user experience. So, in my spare time over the course of about a week, I transformed the project into a fully-fledged full-stack website. Here is the link to my project.</p>
<ul>
<li>Link: <a href="https://bubble-awesome-profile.vercel.app/">https://bubble-awesome-profile.vercel.app</a></li>
<li>Github: <a href="https://github.com/LHRUN/bubble">https://github.com/LHRUN/bubble</a></li>
</ul>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/screenshot_profle.png"></p>
<p>After completing the full-stack version of the website, I thought about documenting the process in an article. All the code for this article can be found in the project. In the upcoming posts, I will gradually share content about topics such as authentication, the use of Prisma and PostgreSQL, and ultimately guide you through the process of building a full-stack website.</p>
<h2 id="Tech-Stack"><a href="#Tech-Stack" class="headerlink" title="Tech Stack"></a>Tech Stack</h2><ul>
<li>full-stack framework <a href="https://nextjs.org/">Next.js</a></li>
<li>database tool <a href="https://www.prisma.io/">Prisma</a></li>
<li>database <a href="https://www.postgresql.org/">PostgreSQL</a></li>
<li>authenticate <a href="https://next-auth.js.org/">NextAuth</a></li>
<li>deployment platform <a href="https://vercel.com/">Vercel</a></li>
</ul>
<h2 id="Initialization-Project"><a href="#Initialization-Project" class="headerlink" title="Initialization Project"></a>Initialization Project</h2><p>First, run the <code>npx create-next-app@latest</code> command in the terminal, and then follow the prompts for configuration.</p>
<pre><code class="highlight bash">What is your project named? my-app
Would you like to use TypeScript? No / Yes
Would you like to use ESLint? No / Yes
Would you like to use Tailwind CSS? No / Yes
Would you like to use `src/` directory? No / Yes
Would you like to use App Router? (recommended) No / Yes
Would you like to customize the default import <span class="built_in">alias</span> (@/*)? No / Yes
What import <span class="built_in">alias</span> would you like configured? @/*</code></pre>

<p>After a successful run, navigate to the project directory and execute <code>npm run dev</code>.</p>
<p>After successful startup, you can start building the base environment</p>
<ol>
<li>First, upload the project to GitHub by creating a repository and linking the remote address. Then, push the code.</li>
<li>Go to the Vercel <a href="https://vercel.com/">https://vercel.com/</a>, log in, and choose GitHub. When uploading the project, keep the default settings in ‚ÄúConfigure Project‚Äù and click ‚ÄúDeploy‚Äù directly. Environment variables can be adjusted when needed. Wait automatic deployment to complete.</li>
</ol>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/vercel_create_project.png"></p>
<ol start="3">
<li>After successful deployment, create the database. Select PostgreSQL in the Storage tab, enter a name and select a region and create it. Once created the database will be linked to your project.</li>
<li>Local code pulling environment variables:</li>
</ol>
<ul>
<li>Run <code>npm i -g vercel@latest</code> to install the Verlcel CLI.</li>
<li>Run <code>verlcel link</code> to link your vercel project.</li>
<li>Run <code>vercel env pull .env</code> to pull the latest environment variables.</li>
</ul>
<h2 id="Connecting-to-the-database"><a href="#Connecting-to-the-database" class="headerlink" title="Connecting to the database"></a>Connecting to the database</h2><p>Run <code>npm install prisma --save-dev</code> to install the Prisma CLI and create a <code>Prisma</code> folder, add the <code>schema.prisma</code> file to it, and then add a few models as follows:</p>
<pre><code class="highlight prisma">generator client &#123;
  provider = &quot;prisma-client-js&quot;
&#125;

datasource db &#123;
  provider  = &quot;postgresql&quot;
  url       = env(&quot;POSTGRES_PRISMA_URL&quot;) // uses connection pooling
  directUrl = env(&quot;POSTGRES_URL_NON_POOLING&quot;) // uses a direct connection
&#125;

model Post &#123;
  id        String     @default(cuid()) @id
  title     String
  content   String?
  published Boolean @default(false)
  author    User?   @relation(fields: [authorId], references: [id])
  authorId  String?
&#125;

model User &#123;
  id            String       @default(cuid()) @id
  name          String?
  email         String?   @unique
  createdAt     DateTime  @default(now()) @map(name: &quot;created_at&quot;)
  updatedAt     DateTime  @updatedAt @map(name: &quot;updated_at&quot;)
  posts         Post[]
  @@map(name: &quot;users&quot;)
&#125;</code></pre>

<p>Prisma is to define the table structure through the model, for example, the above is to build a Post table and a User table, and then these two tables through the posts in the User and the author in the Post to establish a one-to-many table relationship.</p>
<p>Then run the <code>npx prisma db push</code> command to synchronize the defined data model to the remote database. You should then see the following prompt. This means that the table has been created successfully</p>
<pre><code class="highlight plaintext">üöÄ  Your database is now in sync with your schema.</code></pre>

<p>Then run <code>npx prisma studio</code> in <code>localhost:5555</code> to see your table structure, which is of course now all empty data.</p>
<h2 id="Getting-database-data-into-a-views"><a href="#Getting-database-data-into-a-views" class="headerlink" title="Getting database data into a views"></a>Getting database data into a views</h2><p>To get the database data into the view, you first need to install <code>@prisma/client</code>, run the command <code>npm install @prisma/client</code>.</p>
<p>Then run <code>npx prisma generate</code>, and note that you will need to run this command every time you change the Prisma Schema file thereafter. It will generate the TypeScript or JavaScript code corresponding to the table structure, the functions used to perform database queries, inserts, updates, and deletes, as well as the associated type definitions.</p>
<p>Next, create a prisma.ts file in your project, which can usually be placed in the lib folder. Add the following code to that file:</p>
<pre><code class="highlight ts"><span class="keyword">import</span> &#123; <span class="title class_">PrismaClient</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@prisma/client&#x27;</span>;

<span class="keyword">let</span> <span class="attr">prisma</span>: <span class="title class_">PrismaClient</span>;

<span class="keyword">if</span> (process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span>) &#123;
  prisma = <span class="keyword">new</span> <span class="title class_">PrismaClient</span>();
&#125; <span class="keyword">else</span> &#123;
  <span class="keyword">if</span> (!<span class="variable language_">global</span>.<span class="property">prisma</span>) &#123;
    <span class="variable language_">global</span>.<span class="property">prisma</span> = <span class="keyword">new</span> <span class="title class_">PrismaClient</span>();
  &#125;
  prisma = <span class="variable language_">global</span>.<span class="property">prisma</span>;
&#125;

<span class="keyword">export</span> <span class="keyword">default</span> prisma;</code></pre>

<p>This code is used to configure and export a Prisma instance. In a production environment, a new PrismaClient instance is created for each request, while in a development environment, it reuses the global instance to prevent running out of data connections. This setup improves performance and reduces resource usage.</p>
<p>Then PrismaClient has four basic APIs for create, delete, update, and read, For details, see <a href="https://www.prisma.io/docs/concepts/components/prisma-client/crud">CRUD</a></p>
<pre><code class="highlight ts"><span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">create</span>(&#123;
  <span class="attr">data</span>: &#123;
    <span class="attr">email</span>: <span class="string">&#x27;elsa@prisma.io&#x27;</span>,
    <span class="attr">name</span>: <span class="string">&#x27;Elsa Prisma&#x27;</span>,
  &#125;,
&#125;)

<span class="keyword">const</span> user = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">findUnique</span>(&#123;
  <span class="attr">where</span>: &#123;
    <span class="attr">email</span>: <span class="string">&#x27;elsa@prisma.io&#x27;</span>,
  &#125;,
&#125;)

<span class="keyword">const</span> updateUser = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">update</span>(&#123;
  <span class="attr">where</span>: &#123;
    <span class="attr">email</span>: <span class="string">&#x27;elsa@prisma.io&#x27;</span>,
  &#125;,
  <span class="attr">data</span>: &#123;
    <span class="attr">name</span>: <span class="string">&#x27;Elsa&#x27;</span>,
  &#125;,
&#125;)

<span class="keyword">const</span> deleteUser = <span class="keyword">await</span> prisma.<span class="property">user</span>.<span class="title function_">delete</span>(&#123;
  <span class="attr">where</span>: &#123;
    <span class="attr">email</span>: <span class="string">&#x27;elsa@prisma.io&#x27;</span>,
  &#125;,
&#125;)</code></pre>

<p>For example, if you want to find a post</p>
<pre><code class="highlight ts"><span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">getServerSideProps</span>: <span class="title class_">GetServerSideProps</span> = <span class="keyword">async</span> (&#123; params &#125;) =&gt; &#123;
  <span class="keyword">const</span> post = <span class="keyword">await</span> prisma.<span class="property">post</span>.<span class="title function_">findUnique</span>(&#123;
    <span class="attr">where</span>: &#123;
      <span class="attr">id</span>: <span class="title class_">String</span>(params?.<span class="property">id</span>),
    &#125;,
    <span class="attr">include</span>: &#123;
      <span class="attr">author</span>: &#123;
        <span class="attr">select</span>: &#123; <span class="attr">name</span>: <span class="literal">true</span> &#125;,
      &#125;,
    &#125;,
  &#125;);
  <span class="keyword">return</span> &#123;
    <span class="attr">props</span>: post,
  &#125;;
&#125;;</code></pre>

<h2 id="NextAuth-Authentication"><a href="#NextAuth-Authentication" class="headerlink" title="NextAuth Authentication"></a>NextAuth Authentication</h2><p>First install the two dependencies <code>next-auth</code>, <code>@next-auth/prisma-adapter</code>.</p>
<pre><code class="highlight bash">npm install next-auth @next-auth/prisma-adapter</code></pre>

<p>Then change the user-related model</p>
<pre><code class="highlight prisma">model User &#123;
  id              String         @id @default(uuid())
  name            String
  email           String?        @unique
  emailVerified   DateTime?      @map(&quot;email_verified&quot;)
  image           String?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt
  posts         Post[]

  @@map(&quot;users&quot;)
&#125;

model Account &#123;
  id                String   @id @default(cuid())
  userId            String   @map(&quot;user_id&quot;)
  type              String?
  provider          String
  providerAccountId String   @map(&quot;provider_account_id&quot;)
  token_type        String?
  refresh_token     String?  @db.Text
  access_token      String?  @db.Text
  expires_at        Int?
  scope             String?
  id_token          String?  @db.Text
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
  @@map(&quot;accounts&quot;)
&#125;

model Session &#123;
  id           String   @id @default(cuid())
  userId       String?  @map(&quot;user_id&quot;)
  sessionToken String   @unique @map(&quot;session_token&quot;) @db.Text
  accessToken  String?  @map(&quot;access_token&quot;) @db.Text
  expires      DateTime
  user         User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map(&quot;sessions&quot;)
&#125;

model VerificationRequest &#123;
  id         String   @id @default(cuid())
  identifier String
  token      String   @unique
  expires    DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([identifier, token])
&#125;</code></pre>

<p>Then, using GitHub as an example, you need to create an OAuth App. follow these steps:</p>
<ol>
<li>Login to your GitHub account and click Settings.</li>
<li>At the bottom of the Settings page, find Developer Settings and switch to OAuth Apps.</li>
<li>Click ‚ÄúRegister a new application‚Äù and fill in the name and domain name. In a local development environment, the Homepage URL can be <code>http://localhost:3000</code> and the Authorization callback URL can be <code>http://localhost:3000/api/auth/callback/github</code>.</li>
</ol>
<p>After successful creation, copy the generated Client ID and Client Secret and add them to the <code>.env</code> file in your project:</p>
<pre><code class="highlight dotenv">GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
SECRET= // Required for production environments, content can be customized</code></pre>

<p>This way, your project will be able to do GitHub OAuth authentication with these keys. Also make sure that the <code>.env</code> file is not exposed, you can add it now to the <code>.gitignore</code></p>
<p>Then you need to add the following code to your root component</p>
<pre><code class="highlight tsx"><span class="keyword">import</span> &#123; <span class="title class_">SessionProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next-auth/react&#x27;</span>;

<span class="keyword">const</span> <span class="title function_">Home</span> = (<span class="params"></span>) =&gt; &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">SessionProvider</span>&gt;</span></span>
<span class="language-xml">      ...</span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">SessionProvider</span>&gt;</span></span>
  );
&#125;;

<span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Home</span>;</code></pre>

<p>Then, create a specific route <code>api/auth/[... .nextauth].ts</code> for NextAuth to use and add the following code</p>
<pre><code class="highlight ts"><span class="comment">// api/auth/[...nextauth].ts</span>

<span class="keyword">import</span> &#123; <span class="title class_">NextAuth</span>Ôºå <span class="title class_">NextAuthOptions</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next-auth&#x27;</span>;
<span class="keyword">import</span> &#123; <span class="title class_">PrismaAdapter</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@next-auth/prisma-adapter&#x27;</span>;
<span class="keyword">import</span> <span class="title class_">GitHubProvider</span> <span class="keyword">from</span> <span class="string">&#x27;next-auth/providers/github&#x27;</span>;
<span class="keyword">import</span> prisma <span class="keyword">from</span> <span class="string">&#x27;@/lib/prisma&#x27;</span>;

<span class="keyword">const</span> <span class="attr">authOptions</span>: <span class="title class_">NextAuthOptions</span> = &#123;
  <span class="attr">providers</span>: [
    <span class="title class_">GitHubProvider</span>(&#123;
      <span class="attr">clientId</span>: process.<span class="property">env</span>.<span class="property">GITHUB_CLIENT_ID</span> <span class="keyword">as</span> <span class="built_in">string</span>,
      <span class="attr">clientSecret</span>: process.<span class="property">env</span>.<span class="property">GITHUB_CLIENT_SECRET</span> <span class="keyword">as</span> <span class="built_in">string</span>,
      <span class="attr">httpOptions</span>: &#123;
        <span class="attr">timeout</span>: <span class="number">10000</span>, <span class="comment">// wait for response time, because the local environment often login timeout, so change this configuration</span>
      &#125;
    &#125;)
  ],
  <span class="attr">adapter</span>: <span class="title class_">PrismaAdapter</span>(prisma),
  <span class="attr">secret</span>: process.<span class="property">env</span>.<span class="property">SECRET</span>, <span class="comment">// required for production environments</span>
  <span class="attr">callbacks</span>: &#123;
    <span class="comment">// triggered by getSession and useSession calls</span>
    <span class="comment">// documents https://next-auth.js.org/configuration/callbacks</span>
    <span class="keyword">async</span> <span class="title function_">session</span>(<span class="params">&#123; session, user &#125;</span>) &#123;
      <span class="keyword">if</span> (user.<span class="property">id</span> &amp;&amp; session?.<span class="property">user</span>) &#123;
        session.<span class="property">user</span>.<span class="property">userId</span> = user.<span class="property">id</span>;
      &#125;
      <span class="keyword">return</span> session;
    &#125;
  &#125;
&#125;;

<span class="keyword">const</span> handler = <span class="title class_">NextAuth</span>(authOptions);

<span class="keyword">export</span> &#123; handler <span class="keyword">as</span> <span class="variable constant_">GET</span>, handler <span class="keyword">as</span> <span class="variable constant_">POST</span> &#125;;</code></pre>

<p>Then add the following code where you want to click login and it will normally take you to the github authorization page.</p>
<pre><code class="highlight ts"><span class="keyword">import</span> &#123; signIn &#125; <span class="keyword">from</span> <span class="string">&#x27;next-auth/react&#x27;</span>;

<span class="keyword">const</span> <span class="title function_">clickSignIn</span> = (<span class="params"></span>) =&gt; &#123;
  <span class="title function_">signIn</span>(<span class="string">&#x27;github&#x27;</span>)
&#125;</code></pre>

<p>Getting user session data can be done via the following APIs</p>
<ul>
<li>ClientÔºö<code>useSession</code>, <code>getSession</code></li>
<li>Server: <code>getServerSession</code></li>
</ul>
<pre><code class="highlight ts"><span class="keyword">import</span> &#123; useSession &#125; <span class="keyword">from</span> <span class="string">&#x27;next-auth/react&#x27;</span>;

<span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> &#123; <span class="attr">data</span>: session &#125; = <span class="title function_">useSession</span>();

  <span class="keyword">if</span> (session) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Logged in as:&#x27;</span>, session.<span class="property">user</span>);
  &#125;

  <span class="comment">// ...</span>
&#125;</code></pre>

<pre><code class="highlight ts"><span class="keyword">import</span> &#123; getSession &#125; <span class="keyword">from</span> <span class="string">&#x27;next-auth/react&#x27;</span>;

<span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getServerSideProps</span>(<span class="params">context</span>) &#123;
  <span class="keyword">const</span> session = <span class="keyword">await</span> <span class="title function_">getSession</span>(context);

  <span class="keyword">if</span> (session) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Logged in as:&#x27;</span>, session.<span class="property">user</span>);
  &#125;

  <span class="keyword">return</span> &#123;
    <span class="attr">props</span>: &#123;&#125;,
  &#125;;
&#125;</code></pre>

<pre><code class="highlight ts"><span class="keyword">import</span> &#123; getServerSession &#125; <span class="keyword">from</span> <span class="string">&#x27;next-auth/react&#x27;</span>;

<span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">POST</span>(<span class="params">req: NextRequest</span>) &#123;
  <span class="keyword">const</span> session = <span class="keyword">await</span> <span class="title function_">getServerSession</span>();
  <span class="keyword">const</span> userId = session?.<span class="property">user</span>?.<span class="property">userId</span>;

  <span class="comment">// validation session</span>
  <span class="keyword">if</span> (!userId) &#123;
    <span class="keyword">return</span> <span class="title function_">responseFail</span>(<span class="variable constant_">HTTP_CODE</span>.<span class="property">NOT_LOGGED</span>);
  &#125;

  <span class="comment">//...</span>
&#125;</code></pre>


<h2 id="Vercel-Deployment-Notes"><a href="#Vercel-Deployment-Notes" class="headerlink" title="Vercel Deployment Notes"></a>Vercel Deployment Notes</h2><ol>
<li>The build command needs to be preceded by <code>prisma generate</code>, so the build command in package.json can be changed to</li>
</ol>
<pre><code class="highlight json"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span>
 <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;prisma generate &amp;&amp; next build&quot;</span>
<span class="punctuation">&#125;</span></code></pre>

<ol start="2">
<li>Since only one callback path is supported in the GitHub OAuth App, you need to create multiple OAuth Apps for different environments. set up environment variables on Vercel, and add the specific keys for each OAuth App to the environment variables. vercel supports multiple environment variable setups.</li>
</ol>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/vercel_env_var.png"></p>
<ol start="3">
<li>Make sure to add the <code>.env</code> file to <code>.gitignore</code> and don‚Äôt expose it!</li>
</ol>
<h2 id="Problems-In-Dev"><a href="#Problems-In-Dev" class="headerlink" title="Problems In Dev"></a>Problems In Dev</h2><ol>
<li><p>It is very easy to fail to login in, after many times of checking still can‚Äôt find the reason, for the time being, it will be categorized as a network error, if you fail to login in you can try to switch the wifi or switch your network, of course, this is mainly in the local development environment of the problem, the production environment is still very smooth. Related <a href="https://github.com/nextauthjs/next-auth/issues/3920">issue</a></p>
</li>
<li><p>In Next.js 14, passing the <code>request</code> object to <code>getServerSession</code> will result in an error, so try writing it like I did, and then introducing the function wherever you need to use it.</p>
</li>
</ol>
<pre><code class="highlight ts"><span class="keyword">import</span> &#123; getServerSession <span class="keyword">as</span> originalGetServerSession &#125; <span class="keyword">from</span> <span class="string">&#x27;next-auth/next&#x27;</span>;

<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getServerSession</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> req = &#123;
    <span class="attr">headers</span>: <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(<span class="title function_">headers</span>() <span class="keyword">as</span> <span class="title class_">Headers</span>),
    <span class="attr">cookies</span>: <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(
      <span class="title function_">cookies</span>()
        .<span class="title function_">getAll</span>()
        .<span class="title function_">map</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> [c.<span class="property">name</span>, c.<span class="property">value</span>])
    )
  &#125; <span class="keyword">as</span> <span class="built_in">any</span>;
  <span class="keyword">const</span> res = &#123; <span class="title function_">getHeader</span>(<span class="params"></span>) &#123;&#125;, <span class="title function_">setCookie</span>(<span class="params"></span>) &#123;&#125;, <span class="title function_">setHeader</span>(<span class="params"></span>) &#123;&#125; &#125; <span class="keyword">as</span> <span class="built_in">any</span>;

  <span class="keyword">const</span> session = <span class="keyword">await</span> <span class="title function_">originalGetServerSession</span>(req, res, authOptions);
  <span class="keyword">return</span> session;
&#125;;</code></pre>

<ol start="3">
<li>When using authenticated login platforms such as GitHub, Google, etc., if the email is unique, it will cause the login to fail. This is due to the fact that the email is defined as a unique value in the model</li>
<li>When I initially wrote the user-related model I kept getting type errors when following the example on the official website, so if that‚Äôs the case for you too, try the set of base models I wrote above</li>
</ol>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>This article just roughly summarizes the process of building a full-stack website, in which there are some details not written, but you follow this process to build your website is no problem. Welcome to discuss and exchange questions. Thanks. üëª</p>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Next.js</tag>
        <tag>Vercel</tag>
        <tag>Full Stack</tag>
        <tag>Prisma</tag>
        <tag>PostgreSQL</tag>
      </tags>
  </entry>
  <entry>
    <title>H5Ë∑≥ËΩ¨ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</title>
    <url>/2021/06/10/H5%E8%B7%B3%E8%BD%AC%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
    <content><![CDATA[<h2 id="H5Ë∑≥ËΩ¨ÂæÆ‰ø°Â∞èÁ®ãÂ∫è"><a href="#H5Ë∑≥ËΩ¨ÂæÆ‰ø°Â∞èÁ®ãÂ∫è" class="headerlink" title="H5Ë∑≥ËΩ¨ÂæÆ‰ø°Â∞èÁ®ãÂ∫è"></a>H5Ë∑≥ËΩ¨ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</h2><blockquote>
<p>H5Ë∑≥ËΩ¨Â∞èÁ®ãÂ∫èÊúâ‰∏§‰∏™ÊñπÊ≥ïÔºåÈúÄË¶ÅÊ†πÊçÆÊµèËßàÂô®ÁéØÂ¢ÉÂà§Êñ≠<br>ÂæÆ‰ø°Â§ñ‰ΩøÁî®<code>URL Scheme</code>ÔºåÊ†πÊçÆÁîüÊàêÁöÑ‰∏Ä‰∏™linkËøõË°ålocationË∑≥ËΩ¨<br>ÂæÆ‰ø°ÂÜÖ‰ΩøÁî®<code>wx-open-launch-weapp</code>ÂºÄÊîæÊ†áÁ≠æËøõË°åË∑≥ËΩ¨ÔºåÂÆûÊµãiosÁ≥ªÁªüÂæÆ‰ø°ÂÜÖ‰πüÂèØ‰ª•‰ΩøÁî®<code>URL Scheme</code>ÔºåÊ†πÊçÆËá™Â∑±ÁöÑÈúÄÊ±ÇÈÄâÊã©</p>
</blockquote>
<h3 id="wx-open-launch-weapp"><a href="#wx-open-launch-weapp" class="headerlink" title="wx-open-launch-weapp"></a><code>wx-open-launch-weapp</code></h3><ul>
<li><a href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html">ÂÆòÊñπÊñáÊ°£</a></li>
<li>Ê≥®ÊÑè‰∫ãÈ°πÔºöÂæÆ‰ø°ÁâàÊú¨Ë¶ÅÊ±Ç‰∏∫Ôºö7.0.12Âèä‰ª•‰∏ä„ÄÇ Á≥ªÁªüÁâàÊú¨Ë¶ÅÊ±Ç‰∏∫ÔºöiOS 10.3Âèä‰ª•‰∏ä„ÄÅAndroid 5.0Âèä‰ª•‰∏ä</li>
<li>ÁªëÂÆöÂüüÂêç: ÁôªÂΩïÂæÆ‰ø°ÂÖ¨‰ºóÂπ≥Âè∞ËøõÂÖ•‚ÄúÂÖ¨‰ºóÂè∑ËÆæÁΩÆ‚ÄùÁöÑ‚ÄúÂäüËÉΩËÆæÁΩÆ‚ÄùÈáåÂ°´ÂÜô‚ÄúJSÊé•Âè£ÂÆâÂÖ®ÂüüÂêç‚Äù  </li>
<li>ÂºïÂÖ•SDKÔºöÂÆòÁΩëÊé®ËçêÂºïÂÖ•ÊñπÊ≥ï<code>&lt;script src=&quot;https://res.wx.qq.com/open/js/jweixin-1.6.0.js&quot;&gt;&lt;/script&gt;</code>;Ôºå‰πüÂèØ‰ª•‰ΩøÁî®Á¨¨‰∏âÊñπnpmÂåÖ<code>weixin-js-sdk</code>  </li>
<li>Ê†°È™åÁ≠æÂêçÊòØÂê¶Ê≠£Á°ÆÔºö<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=jsapisign">ÂæÆ‰ø° JS Êé•Âè£Á≠æÂêçÊ†°È™åÂ∑•ÂÖ∑</a></li>
<li>Â¶ÇÊûúÂºÄÊîæÊ†áÁ≠æÈúÄË¶ÅÁªùÂØπÂÆö‰ΩçÔºåÂ∞±Âú®Â§ñÈù¢ÂåÖË£π‰∏Ä‰∏™divËøõË°åÂÆö‰ΩçÔºåÈÅøÂÖçÁõ¥Êé•ÂÆö‰ΩçÂºÄÊîæÊ†áÁ≠æ</li>
<li>Ë∞ÉËØïÔºöÂ•ΩÂ§ö‰∫∫Âú®ËøõË°åË∞ÉËØïÁöÑÊó∂ÂÄôËÆ§‰∏∫ÈùûÂ∏∏È∫ªÁÉ¶ÔºåÈúÄË¶Å‰∏çÊñ≠ÂàáÊç¢ÁéØÂ¢ÉÔºåÊàëÊé®Ëçê‰∏Ä‰∏™ÊàëÁöÑË∞ÉËØïÊñπÂºèÔºåÂú®ÂºÄÂèëËøáÁ®ã‰∏≠Ôºå‰ΩøÁî®SwitchHostsËøõË°åIPÊò†Â∞ÑÔºåÊääÊú¨Âú∞ÂêØÂä®È°πÁõÆÁöÑÂüüÂêçÊò†Â∞ÑÂà∞ÂÖ¨‰ºóÂè∑Âπ≥Âè∞ËÆæÁΩÆÁöÑÂüüÂêçÔºåÁÑ∂ÂêéÂú®ÂæÆ‰ø°ÂºÄÂèëÂ∑•ÂÖ∑‰∏≠Ë∞ÉËØïÔºåÂ∞±ÈùûÂ∏∏ËΩªÊùæ‰∫Ü</li>
</ul>
<pre><code class="highlight html">// ÊôÆÈÄöH5ÁöÑÂÜôÊ≥ïÂèØÂèÇËÄÉÂÆòÊñπÊñáÊ°£Ôºå‰ª•‰∏ãÊòØÊàëÂú®vue‰∏≠ÁöÑÂÜôÊ≥ï
<span class="tag">&lt;<span class="name">wx-open-launch-weapp</span></span>
<span class="tag"> <span class="attr">username</span>=<span class="string">&quot;Â∞èÁ®ãÂ∫èÂéüÂßãid&quot;</span></span>
<span class="tag"> <span class="attr">path</span>=<span class="string">&quot;È°µÈù¢Ë∑ØÂæÑÂèäÂèÇÊï∞&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/wxtag-template&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml">           </span></span>
<span class="language-xml"><span class="language-handlebars">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;wx-btn&quot;</span>&gt;</span>Ë∑≥ËΩ¨Â∞èÁ®ãÂ∫è<span class="tag">&lt;/<span class="name">button</span>&gt;</span>   </span></span>
<span class="language-xml"><span class="language-handlebars">  </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
<span class="tag">&lt;/<span class="name">wx-open-launch-weapp</span>&gt;</span>
<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">...</span>
<span class="language-javascript"><span class="keyword">async</span> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span>
<span class="language-javascript">  <span class="keyword">const</span> wx = <span class="built_in">require</span>(<span class="string">&#x27;weixin-js-sdk&#x27;</span>)</span>
<span class="language-javascript">  wx.<span class="title function_">config</span>(&#123;</span>
<span class="language-javascript">    <span class="attr">debug</span>: <span class="literal">true</span>, <span class="comment">// ÂºÄÂêØË∞ÉËØïÊ®°ÂºèÔºå‰ºöÂú®ÁßªÂä®Á´Ø‰ª•alertÁöÑÂΩ¢ÂºèÊâìÂç∞ËøîÂõûÂÄº</span></span>
<span class="language-javascript">    <span class="attr">appId</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// ÂøÖÂ°´Ôºå‰ªéÊúçÂä°Á´ØËé∑Âèñ</span></span>
<span class="language-javascript">    <span class="attr">timestamp</span>: , <span class="comment">// ÂøÖÂ°´ÔºåÁîüÊàêÁ≠æÂêçÁöÑÊó∂Èó¥Êà≥Ôºå‰ªéÊúçÂä°Á´ØËé∑Âèñ</span></span>
<span class="language-javascript">    <span class="attr">nonceStr</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// ÂøÖÂ°´ÔºåÁîüÊàêÁ≠æÂêçÁöÑÈöèÊú∫‰∏≤Ôºå‰ªéÊúçÂä°Á´ØËé∑Âèñ</span></span>
<span class="language-javascript">    <span class="attr">signature</span>: <span class="string">&#x27;&#x27;</span>,<span class="comment">// ÂøÖÂ°´ÔºåÁ≠æÂêçÔºå‰ªéÊúçÂä°Á´ØËé∑Âèñ</span></span>
<span class="language-javascript">    <span class="attr">jsApiList</span>: [], <span class="comment">// ÂøÖÂ°´ÔºåÈúÄË¶Å‰ΩøÁî®ÁöÑJSÊé•Âè£ÂàóË°®ÔºåËøô‰∏™Èöè‰æøÂ°´‰∏Ä‰∏™Â∞±Ë°å</span></span>
<span class="language-javascript">    <span class="attr">openTagList</span>: [<span class="string">&#x27;wx-open-launch-weapp&#x27;</span>]</span>
<span class="language-javascript">  &#125;)</span>
<span class="language-javascript">  wx.<span class="title function_">ready</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e))</span>
<span class="language-javascript">  wx.<span class="title function_">error</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(e))</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre>

<h3 id="URL-Scheme"><a href="#URL-Scheme" class="headerlink" title="URL Scheme"></a><code>URL Scheme</code></h3><ul>
<li>Ê≥®ÊÑè‰∫ãÈ°πÔºöÂÆâÂçì‰∏çËÉΩÁõ¥Êé•Ë∑≥ËΩ¨ÔºåÈúÄË¶ÅH5‰∏≠ËΩ¨ÔºåÂê¶ÂàôAndroid‰ºöÂá∫Áé∞Êó†Ê≥ïËÆøÈóÆ</li>
<li>ÂÜôÊ≥ïÂæàÁÆÄÂçïÔºåÂè™ÈúÄ<code>location.href=&#39;URL Scheme&#39;</code>ÔºåÂú®È°µÈù¢ÂàùÂßãÂåñÊó∂Ë∞ÉÁî®ÊàñËÄÖÂú®ÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂‰∏≠Ë∞ÉÁî®</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>H5</tag>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title>ReactÊ∫êÁ†ÅÂàÜÊûê‰πãdiffÊ†∏ÂøÉÁÆóÊ≥ï</title>
    <url>/2022/09/04/React%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%E4%B9%8Bdiff%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><ul>
<li>ReactÁöÑdiffÁÆóÊ≥ïÊòØÂú®renderÁöÑbeginWorkÈò∂ÊÆµ‰∏≠ËøõË°åÂ§ÑÁêÜ</li>
<li><code>beginWork</code>ÊòØÂú®Âêë‰∏ãÊ∑±Â∫¶ÈÅçÂéÜfiberÊ†ëÊó∂‰ºöÂØπÈÄîÂæÑÁöÑÊØè‰∏™ËäÇÁÇπËøõË°åÁä∂ÊÄÅÂ§ÑÁêÜÂíåËøõË°ådiffÂØπÊØî</li>
<li>È¶ñÂÖàdiffÁöÑÂÖ•Âè£ÊòØÂú®<code>reconcileChildFibers</code>‰∏≠ÔºåÁÑ∂Âêé‰ºöÊ†πÊçÆtypeÊù•Âà§Êñ≠‰ΩøÁî®Âì™ÁßçdiffÂáΩÊï∞ËøõË°åÂ§ÑÁêÜ<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">reconcileChildFibers</span>(<span class="params"></span>
<span class="params">  returnFiber: Fiber,</span>
<span class="params">  currentFirstChild: Fiber | <span class="literal">null</span>,</span>
<span class="params">  newChild: any,</span>
<span class="params">  lanes: Lanes,</span>
<span class="params"></span>): <span class="title class_">Fiber</span> | <span class="literal">null</span> &#123;
  <span class="keyword">if</span> (<span class="keyword">typeof</span> newChild === <span class="string">&#x27;object&#x27;</span> &amp;&amp; newChild !== <span class="literal">null</span>) &#123;
    <span class="keyword">switch</span> (newChild.<span class="property">$$typeof</span>) &#123;
      <span class="keyword">case</span> <span class="attr">REACT_ELEMENT_TYPE</span>:
        <span class="keyword">return</span> <span class="title function_">placeSingleChild</span>(
          <span class="title function_">reconcileSingleElement</span>(
            returnFiber,
            currentFirstChild,
            newChild,
            lanes,
          ),
        );¬∑¬∑
      <span class="keyword">case</span> <span class="attr">REACT_PORTAL_TYPE</span>:
        <span class="comment">// ...</span>
      <span class="keyword">case</span> <span class="attr">REACT_LAZY_TYPE</span>:
        <span class="comment">//...</span>
    &#125;

    <span class="keyword">if</span> (<span class="title function_">isArray</span>(newChild)) &#123;
      <span class="keyword">return</span> <span class="title function_">reconcileChildrenArray</span>(
        returnFiber,
        currentFirstChild,
        newChild,
        lanes,
      );
    &#125;

    <span class="keyword">if</span> (<span class="title function_">getIteratorFn</span>(newChild)) &#123;
      <span class="comment">//...</span>
    &#125;
  &#125;
  <span class="comment">// ...</span>
&#125;</code></pre></li>
<li>ÊàëÂú®Êú¨ÁØá‰ºöÈíàÂØπ‰∏§ÁßçËæÉÂ∏∏Áî®ÁöÑdiffÂáΩÊï∞ËøõË°åÂàÜÊûê<ul>
<li><code>reconcileSingleElement</code></li>
<li><code>reconcileChildrenArray</code></li>
</ul>
</li>
</ul>
<h2 id="reconcileSingleElement"><a href="#reconcileSingleElement" class="headerlink" title="reconcileSingleElement"></a>reconcileSingleElement</h2><ul>
<li>reconcileSingleElementÊòØÈíàÂØπÊñ∞newChildÊòØÂçïËäÇÁÇπÔºåËÄåoldChildÂçïËäÇÁÇπÊàñËÄÖÊòØÂ§öËäÇÁÇπÂ∞±Êó†Ê≥ïÁ°ÆÂÆö‰∫ÜÔºåÊâÄ‰ª•Âú®Ê≠§diffÁÆóÊ≥ï‰∏≠Â∞±‰ºöÂØπÊóßËäÇÁÇπËøõË°åÈÅçÂéÜÔºåÁÑ∂ÂêéÂà†Èô§‰∏çÂåπÈÖçÁöÑoldFiber<pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">reconcileSingleElement</span>(<span class="params"></span>
<span class="params">  returnFiber: Fiber,</span>
<span class="params">  currentFirstChild: Fiber | <span class="literal">null</span>,</span>
<span class="params">  element: ReactElement</span>
<span class="params">  lanes: Lanes,</span>
<span class="params"></span>): <span class="title class_">Fiber</span> &#123;
  <span class="keyword">const</span> key = element.<span class="property">key</span>;
  <span class="keyword">let</span> child = currentFirstChild;
  <span class="comment">/**</span>
<span class="comment">    * ÈÅçÂéÜÊóßËäÇÁÇπÔºåÊâæÂà∞‰∏énewChildÁõ∏ÂêåkeyÁöÑËäÇÁÇπÔºå‰∏çÂåπÈÖçÁöÑÂà†Èô§</span>
<span class="comment">    * ÈíàÂØπÂåπÈÖçÁöÑoldFiber, Áî®newChild‰∏≠Êñ∞ËäÇÁÇπÁöÑpropsÊù•ÁîüÊàêÊñ∞ÁöÑfiberËäÇÁÇπ</span>
<span class="comment">    */</span>
  <span class="keyword">while</span> (child !== <span class="literal">null</span>) &#123;
    <span class="keyword">if</span> (child.<span class="property">key</span> === key) &#123;
      <span class="keyword">const</span> elementType = element.<span class="property">type</span>;
      <span class="comment">/**</span>
<span class="comment">        * ÈÄöËøáuseFiberÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑFiber</span>
<span class="comment">        * Â¶ÇÊûúelementÊòØ‰∏Ä‰∏™FragmentÔºåÂàô‰ª•element.props.childrenÂª∫Á´ãFiber</span>
<span class="comment">        * Â∞ÜreturnFiberËµãÁªôÊñ∞ÁöÑfiberÁöÑreturnÂ≠óÊÆµÔºåÁÑ∂ÂêéËøîÂõûËøô‰∏™Êñ∞ÁöÑfiber</span>
<span class="comment">        */</span>¬∑
      <span class="keyword">if</span> (elementType === <span class="variable constant_">REACT_FRAGMENT_TYPE</span>) &#123;
        <span class="keyword">if</span> (child.<span class="property">tag</span> === <span class="title class_">Fragment</span>) &#123;
          <span class="title function_">deleteRemainingChildren</span>(returnFiber, child.<span class="property">sibling</span>);
          <span class="keyword">const</span> existing = <span class="title function_">useFiber</span>(child, element.<span class="property">props</span>.<span class="property">children</span>);
          existing.<span class="property">return</span> = returnFiber;
          <span class="keyword">if</span> (__DEV__) &#123;
            existing.<span class="property">_debugSource</span> = element.<span class="property">_source</span>;
            existing.<span class="property">_debugOwner</span> = element.<span class="property">_owner</span>;
          &#125;
          <span class="keyword">return</span> existing;
        &#125;
      &#125; <span class="keyword">else</span> &#123;
        <span class="keyword">if</span> (
          child.<span class="property">elementType</span> === elementType ||
          (__DEV__
            ? <span class="title function_">isCompatibleFamilyForHotReloading</span>(child, element)
            : <span class="literal">false</span>) ||
          (<span class="keyword">typeof</span> elementType === <span class="string">&#x27;object&#x27;</span> &amp;&amp;
            elementType !== <span class="literal">null</span> &amp;&amp;
            elementType.<span class="property">$$typeof</span> === <span class="variable constant_">REACT_LAZY_TYPE</span> &amp;&amp;
            <span class="title function_">resolveLazy</span>(elementType) === child.<span class="property">type</span>)
        ) &#123;
          <span class="title function_">deleteRemainingChildren</span>(returnFiber, child.<span class="property">sibling</span>);
          <span class="keyword">const</span> existing = <span class="title function_">useFiber</span>(child, element.<span class="property">props</span>);
          existing.<span class="property">ref</span> = <span class="title function_">coerceRef</span>(returnFiber, child, element);
          existing.<span class="property">return</span> = returnFiber;
          <span class="keyword">if</span> (__DEV__) &#123;
            existing.<span class="property">_debugSource</span> = element.<span class="property">_source</span>;
            existing.<span class="property">_debugOwner</span> = element.<span class="property">_owner</span>;
          &#125;
          <span class="keyword">return</span> existing;
        &#125;
      &#125;
      <span class="comment">// Didn&#x27;t match.</span>
      <span class="title function_">deleteRemainingChildren</span>(returnFiber, child);
      <span class="keyword">break</span>;
    &#125; <span class="keyword">else</span> &#123;
      <span class="comment">// key‰∏çÁõ∏ÂêåÂ∞±Âà†Èô§</span>
      <span class="title function_">deleteChild</span>(returnFiber, child);
    &#125;
    child = child.<span class="property">sibling</span>;
  &#125;

  <span class="comment">// Â¶ÇÊûúÊ≤°ÊúâÂëΩ‰∏≠‰∏Ä‰∏™keyÔºåÂàôÈÄöËøácreateFiberFormElementÊàñCreateFiberFormFragmentÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑfiberÔºåÁÑ∂ÂêéËøîÂõû</span>
  <span class="keyword">if</span> (element.<span class="property">type</span> === <span class="variable constant_">REACT_FRAGMENT_TYPE</span>) &#123;
    <span class="keyword">const</span> created = <span class="title function_">createFiberFromFragment</span>(
      element.<span class="property">props</span>.<span class="property">children</span>,
      returnFiber.<span class="property">mode</span>,
      lanes,
      element.<span class="property">key</span>,
    );
    created.<span class="property">return</span> = returnFiber;
    <span class="keyword">return</span> created;
  &#125; <span class="keyword">else</span> &#123;
    <span class="keyword">const</span> created = <span class="title function_">createFiberFromElement</span>(element, returnFiber.<span class="property">mode</span>, lanes);
    created.<span class="property">ref</span> = <span class="title function_">coerceRef</span>(returnFiber, currentFirstChild, element);
    created.<span class="property">return</span> = returnFiber;
    <span class="keyword">return</span> created;
  &#125;
&#125;</code></pre></li>
</ul>
<h2 id="reconcileChildrenArray"><a href="#reconcileChildrenArray" class="headerlink" title="reconcileChildrenArray"></a>reconcileChildrenArray</h2><ul>
<li><p>ÈíàÂØπ<code>newChild</code>ÊòØÂ§öËäÇÁÇπÁöÑÊÉÖÂÜµÂ∞±ÈúÄË¶ÅË∞ÉÁî®<code>reconcileChildrenArray</code>ËøõË°ådiffÊìç‰Ωú</p>
</li>
<li><p>Â§öËäÇÁÇπ‰ºöÊúâÂõõÁßçÂèØËÉΩÊÄßÁöÑÂèòÂåñÔºöÂà†Èô§„ÄÅÊñ∞Â¢û„ÄÅ‰ΩçÁßª„ÄÅÊõ¥Êñ∞</p>
</li>
<li><p><code>reconcileChildrenArray</code>ÈíàÂØπËøôÂõõÁßçÂèòÂåñÔºåÈ¶ñÂÖà‰ºöÂ§ÑÁêÜÁöÑÊòØÊõ¥Êñ∞ÔºåÂΩìÂá∫Áé∞Êó†Ê≥ïÂåπÈÖçÁöÑÊÉÖÂÜµÊó∂ÔºåÂ∞±‰ºöÊ†πÊçÆÈÅçÂéÜÁöÑÊÉÖÂÜµÊù•Âà§Êñ≠ÊòØÂê¶Â§ÑÁêÜÂà†Èô§ÊàñËÄÖÊñ∞Â¢ûÔºåÁÑ∂ÂêéÊúÄÂêé‰ºöÊ†πÊçÆÊÉÖÂÜµÂ§ÑÁêÜ‰ΩçÁßª</p>
</li>
<li><p>Âõ†‰∏∫fiberÊòØÂçïÂêëÈìæË°®ÔºåÊâÄ‰ª•<code>reconcileChildrenArray</code>ÁöÑÈÅçÂéÜ‰∏çÊòØÂèåÁ´ØÈÅçÂéÜ</p>
</li>
<li><p>È¶ñÂÖàÁ¨¨‰∏ÄËΩÆÈÅçÂéÜÔºåÊòØÂ§ÑÁêÜËäÇÁÇπÊõ¥Êñ∞</p>
<pre><code class="highlight ts"><span class="keyword">for</span> (; oldFiber !== <span class="literal">null</span> &amp;&amp; newIdx &lt; newChildren.<span class="property">length</span>; newIdx++) &#123;
  <span class="comment">// newChildrenÈÅçÂéÜÂÆå‰∫ÜÔºåoldFiberÊ≤°ÊúâÈÅçÂéÜÂÆåÔºå‰∏≠Êñ≠ÈÅçÂéÜ</span>
  <span class="keyword">if</span> (oldFiber.<span class="property">index</span> &gt; newIdx) &#123;
    nextOldFiber = oldFiber;
    oldFiber = <span class="literal">null</span>;
  &#125; <span class="keyword">else</span> &#123;
    <span class="comment">// ËÆ∞ÂΩïoldFiberÁöÑ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ</span>
    nextOldFiber = oldFiber.<span class="property">sibling</span>;
  &#125;
  <span class="comment">// Êõ¥Êñ∞ËäÇÁÇπÔºåÂ¶ÇÊûúËäÇÁÇπÊ≤°ÊúâÂåπÈÖç‰∏äÔºåÂ∞±‰ºöËøîÂõûnull</span>
  <span class="keyword">const</span> newFiber = <span class="title function_">updateSlot</span>(
    returnFiber,
    oldFiber,
    newChildren[newIdx],
    lanes,
  );
  <span class="comment">// newFiber‰∏∫nullËØ¥ÊòéËäÇÁÇπÊ≤°ÊúâÂåπÈÖç‰∏äÔºå‰∏≠Êñ≠ÈÅçÂéÜ</span>
  <span class="keyword">if</span> (newFiber === <span class="literal">null</span>) &#123;
    <span class="comment">// oldFiber‰∏∫nullËØ¥ÊòéoldFiber‰πüÈÅçÂéÜÂÆå‰∫Ü</span>
    <span class="keyword">if</span> (oldFiber === <span class="literal">null</span>) &#123;
      oldFiber = nextOldFiber;
    &#125;
    <span class="keyword">break</span>;
  &#125;

  <span class="comment">/**</span>
<span class="comment">   * shouldTrackSideEffects‰∏∫trueË°®Á§∫ÊòØÊõ¥Êñ∞ËøáÁ®ã</span>
<span class="comment">   * mountChildFibers = ChildReconciler(false);</span>
<span class="comment">   * reconcileChildFibers = ChildReconciler(true);</span>
<span class="comment">   * ChildReconcilerÊé•Êî∂ÁöÑÂ∞±ÊòØshouldTrackSideEffects</span>
<span class="comment">   */</span>
  <span class="keyword">if</span> (shouldTrackSideEffects) &#123;
    <span class="keyword">if</span> (oldFiber &amp;&amp; newFiber.<span class="property">alternate</span> === <span class="literal">null</span>) &#123;
      <span class="comment">// Êñ∞ËäÇÁÇπÊ≤°ÊúâÁé∞ÊúâËäÇÁÇπÔºåÈúÄË¶ÅÂà†Èô§</span>
      <span class="title function_">deleteChild</span>(returnFiber, oldFiber);
    &#125;
  &#125;
  <span class="comment">// ËÆ∞ÂΩïÂõ∫ÂÆöËäÇÁÇπÁöÑ‰ΩçÁΩÆ</span>
  lastPlacedIndex = <span class="title function_">placeChild</span>(newFiber, lastPlacedIndex, newIdx);

  <span class="comment">// Â∞ÜÊñ∞ËäÇÁÇπÊãºÊé•Êàê‰ª•sibling‰∏∫ÊåáÈíàÁöÑÂçïÂêëÈìæË°®</span>
  <span class="keyword">if</span> (previousNewFiber === <span class="literal">null</span>) &#123;
    resultingFirstChild = newFiber;
  &#125; <span class="keyword">else</span> &#123;
    previousNewFiber.<span class="property">sibling</span> = newFiber;
  &#125;
  previousNewFiber = newFiber;
  oldFiber = nextOldFiber;
&#125;</code></pre>
</li>
<li><p>ÈÅçÂéÜÂÆåÂåπÈÖçÁöÑËäÇÁÇπÂêéÔºåÂ∞±Âà§Êñ≠Êñ∞ËäÇÁÇπÊòØÂê¶ÈÅçÂéÜÂÆåÔºåÂ¶ÇÊûúÈÅçÂéÜÂÆåÔºåÈÇ£‰πàÂâ©‰ΩôÁöÑoldFiberÈÉΩÊòØË¶ÅÂà†Èô§ÁöÑ</p>
<pre><code class="highlight ts"><span class="keyword">if</span> (newIdx === newChildren.<span class="property">length</span>) &#123;
  <span class="title function_">deleteRemainingChildren</span>(returnFiber, oldFiber);
  <span class="keyword">if</span> (<span class="title function_">getIsHydrating</span>()) &#123;
    <span class="keyword">const</span> numberOfForks = newIdx;
    <span class="title function_">pushTreeFork</span>(returnFiber, numberOfForks);
  &#125;
  <span class="keyword">return</span> resultingFirstChild;
&#125;</code></pre>
</li>
<li><p>Â¶ÇÊûúÊñ∞ÊóßÁÇπÊ≤°ÊúâÈÅçÂéÜÂÆåÔºåÂ∞±Âà§Êñ≠ÊóßfiberÈìæÊòØÂê¶ÈÅçÂéÜÂÆåÔºåÂ¶ÇÊûúÈÅçÂéÜÂÆåÈÇ£‰πàÂâ©‰ΩôÁöÑÊñ∞ËäÇÁÇπÂÖ®ÈÉ®‰Ωú‰∏∫Êñ∞fiberÊèíÂÖ•</p>
<pre><code class="highlight ts"><span class="keyword">if</span> (oldFiber === <span class="literal">null</span>) &#123;
  <span class="keyword">for</span> (; newIdx &lt; newChildren.<span class="property">length</span>; newIdx++) &#123;
    <span class="comment">// ÂàõÂª∫Êñ∞fiberËäÇÁÇπ</span>
    <span class="keyword">const</span> newFiber = <span class="title function_">createChild</span>(returnFiber, newChildren[newIdx], lanes);
    <span class="keyword">if</span> (newFiber === <span class="literal">null</span>) &#123;
      <span class="keyword">continue</span>;
    &#125;

    <span class="comment">// ËÆ∞ÂΩïÂõ∫ÂÆöËäÇÁÇπ</span>
    lastPlacedIndex = <span class="title function_">placeChild</span>(newFiber, lastPlacedIndex, newIdx);

    <span class="comment">// Â∞ÜÊñ∞fiberÊãºÊé•Êàê‰ª•sibling‰∏∫ÊåáÈíàÁöÑÂçïÂêëÈìæË°®</span>
    <span class="keyword">if</span> (previousNewFiber === <span class="literal">null</span>) &#123;
      resultingFirstChild = newFiber;
    &#125; <span class="keyword">else</span> &#123;
      previousNewFiber.<span class="property">sibling</span> = newFiber;
    &#125;
    previousNewFiber = newFiber;
  &#125;
  <span class="keyword">if</span> (<span class="title function_">getIsHydrating</span>()) &#123;
    <span class="keyword">const</span> numberOfForks = newIdx;
    <span class="title function_">pushTreeFork</span>(returnFiber, numberOfForks);
  &#125;
  <span class="keyword">return</span> resultingFirstChild;
&#125;</code></pre>
</li>
<li><p>ÊâßË°åÂà∞Ëøô‰∏ÄÊ≠•ÔºåËØ¥ÊòéÊñ∞ÊóßËäÇÁÇπÈÉΩÊ≤°ÊúâÈÅçÂéÜÂÆåÔºåÂ∞±ËØ¥ÊòéÂ≠òÂú®Êúâ‰ΩçÁßªÁöÑÊú™Áü•Â∫èÂàó</p>
<pre><code class="highlight ts"><span class="comment">// È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™‰ª•oldFiber key‰∏∫ÈîÆÔºåÂÄº‰∏∫oldFiberÁöÑmap</span>
<span class="keyword">const</span> existingChildren = <span class="title function_">mapRemainingChildren</span>(returnFiber, oldFiber);

<span class="keyword">for</span> (; newIdx &lt; newChildren.<span class="property">length</span>; newIdx++) &#123;
  <span class="comment">// ÁÑ∂ÂêéÊ†πÊçÆmap‰∏≠ÁöÑoldFiberÂàõÂª∫Êñ∞fiber</span>
  <span class="keyword">const</span> newFiber = <span class="title function_">updateFromMap</span>(
    existingChildren,
    returnFiber,
    newIdx,
    newChildren[newIdx],
    lanes,
  );
  <span class="keyword">if</span> (newFiber !== <span class="literal">null</span>) &#123;
    <span class="keyword">if</span> (shouldTrackSideEffects) &#123;
      <span class="keyword">if</span> (newFiber.<span class="property">alternate</span> !== <span class="literal">null</span>) &#123;
        <span class="comment">// Â¶ÇÊûúnewFiber.alternate‰∏ç‰∏∫nullÔºåËØ¥ÊòéÊòØÊ†πÊçÆoldFiberÂàõÂª∫ÁöÑÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÂú®map‰∏≠Âà†Èô§oldFiber</span>
        existingChildren.<span class="title function_">delete</span>(
          newFiber.<span class="property">key</span> === <span class="literal">null</span> ? newIdx : newFiber.<span class="property">key</span>,
        );
      &#125;
    &#125;

    <span class="comment">// Ê†πÊçÆlastPlacedIndexÂà§Êñ≠ÊòØÂê¶ÁßªÂä®ËäÇÁÇπ</span>
    lastPlacedIndex = <span class="title function_">placeChild</span>(newFiber, lastPlacedIndex, newIdx);

    <span class="comment">// Â∞ÜÊñ∞fiberÊãºÊé•Êàê‰ª•sibling‰∏∫ÊåáÈíàÁöÑÂçïÂêëÈìæË°®</span>
    <span class="keyword">if</span> (previousNewFiber === <span class="literal">null</span>) &#123;
      resultingFirstChild = newFiber;
    &#125; <span class="keyword">else</span> &#123;
      previousNewFiber.<span class="property">sibling</span> = newFiber;
    &#125;
    previousNewFiber = newFiber;
  &#125;
&#125;

<span class="keyword">if</span> (shouldTrackSideEffects) &#123;
  <span class="comment">// Âà†Èô§Ââ©‰ΩôÁöÑoldFiber</span>
  existingChildren.<span class="title function_">forEach</span>(<span class="function"><span class="params">child</span> =&gt;</span> <span class="title function_">deleteChild</span>(returnFiber, child));
&#125;</code></pre></li>
<li><p>ÁßªÂä®ËäÇÁÇπÁöÑÊ†∏ÂøÉÊòØÂú®<code>placeChild</code>Ëøô‰∏™ÂáΩÊï∞‰∏≠ÔºåÂ¶ÇÊûúÂΩìÂâçÊ≠£Âú®ÈÅçÂéÜÁöÑËäÇÁÇπÁöÑoldIndexÊòØÂú®<code>lastPlacedIndex</code>ÁöÑÂè≥ËæπÔºåÂ∞±ËØ¥ÊòéÂÆÉÁöÑ‰ΩçÁΩÆÊ≤°ÂèòÂåñÔºåÂõ†‰∏∫ÊóßËäÇÁÇπ‰∏≠Â∞±Â§Ñ‰∫éÂè≥ËæπÔºåÊñ∞ËäÇÁÇπ‰∏≠‰πüÂ§Ñ‰∫éÂè≥Ëæπ„ÄÇ</p>
<ul>
<li>‰æãÂ¶ÇÔºöoldÔºöA -&gt; B -&gt; C -&gt; DÔºånewÔºöD -&gt; A -&gt; B -&gt; C</li>
<li>ÈÅçÂéÜÂà∞DÊó∂Ôºå<code>lastPlacedIndex = DÁöÑoldIndex = 3</code></li>
<li>ÁÑ∂ÂêéÈÅçÂéÜÂà∞AÊó∂ÔºåAÁöÑ<code>oldIndex</code>‰∏∫0ÔºåÂ∞è‰∫é3ÔºåËØ¥ÊòéAÂú®ÊóßÂ∫èÂàó‰∏≠ËÇØÂÆö‰∏çÊòØDÁöÑÂè≥ËæπÔºåÊâÄ‰ª•AËÇØÂÆö‰∫ßÁîü‰∫Ü‰ΩçÁßª<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">placeChild</span>(<span class="params"></span>
<span class="params">  newFiber: Fiber,</span>
<span class="params">  lastPlacedIndex: number,</span>
<span class="params">  newIndex: number,</span>
<span class="params"></span>): number &#123;
  newFiber.<span class="property">index</span> = newIndex;
  <span class="keyword">if</span> (!shouldTrackSideEffects) &#123;
    newFiber.<span class="property">flags</span> |= <span class="title class_">Forked</span>;
    <span class="keyword">return</span> lastPlacedIndex;
  &#125;
  <span class="keyword">const</span> current = newFiber.<span class="property">alternate</span>;
  <span class="keyword">if</span> (current !== <span class="literal">null</span>) &#123;
    <span class="keyword">const</span> oldIndex = current.<span class="property">index</span>;
    <span class="keyword">if</span> (oldIndex &lt; lastPlacedIndex) &#123;
      <span class="comment">// Â∞è‰∫élastPlacedIndex ‰∫ßÁîü‰∫Ü‰ΩçÁßª</span>
      newFiber.<span class="property">flags</span> |= <span class="title class_">Placement</span> | <span class="title class_">PlacementDEV</span>;
      <span class="keyword">return</span> lastPlacedIndex;
    &#125; <span class="keyword">else</span> &#123;
      <span class="comment">// Ê≤°Êúâ‰ΩçÁßªÔºåËøîÂõûÂΩìÂâçÁöÑoldIndex</span>
      <span class="keyword">return</span> oldIndex;
    &#125;
  &#125; <span class="keyword">else</span> &#123;
    newFiber.<span class="property">flags</span> |= <span class="title class_">Placement</span> | <span class="title class_">PlacementDEV</span>;
    <span class="keyword">return</span> lastPlacedIndex;
  &#125;
&#125;</code></pre></li>
</ul>
</li>
</ul>
<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><ul>
<li>ÈíàÂØπÂçïËäÇÁÇπÁöÑdiffÔºå‰ºöÈÅçÂéÜoldFiberÈìæÔºåÂ¶ÇÊûúÊúâÂåπÈÖçÁöÑfiberÔºåÂ∞±‰ª•ÂåπÈÖçÁöÑÁîüÊàêÊñ∞fiberÔºåÂ¶ÇÊûúÊ≤°ÊúâÂ∞±Êñ∞Âª∫‰∏Ä‰∏™fiberÔºåÁÑ∂ÂêéÂà†Èô§‰∏çÂåπÈÖçÁöÑfiber</li>
<li>ÈíàÂØπÂ§öËäÇÁÇπdiff<ul>
<li>È¶ñÂÖàÊòØ‰ªéÂ§¥ÂêëÂ∞æÈÅçÂéÜÔºåÈíàÂØπÂ§çÁî®ÁöÑfiberËøõË°åÊõ¥Êñ∞ÔºåÂ¶ÇÊûúÊó†Ê≥ïÂ§çÁî®Â∞±‰∏≠Êñ≠ÈÅçÂéÜ</li>
<li>ÁÑ∂ÂêéÂà§Êñ≠Êñ∞ÊóßËäÇÁÇπÁöÑÈÅçÂéÜÊÉÖÂÜµÔºåÊù•Âà§Êñ≠ÊòØÂê¶Êñ∞Â¢ûÊàñËÄÖÂà†Èô§</li>
<li>Â¶ÇÊûúÈÉΩÊ≤°ÊúâÈÅçÂéÜÂÆåÔºåÂ∞±ÂàõÂª∫‰∏Ä‰∏™map<code>Map&lt;old key, old Fiber&gt;</code>ÔºåÁÑ∂ÂêéÈÅçÂéÜÊñ∞ËäÇÁÇπÔºåÂü∫‰∫émapÊù•ÂàõÂª∫Êñ∞fiberÔºåÁÑ∂ÂêéÊ†πÊçÆ<code>lastPlacedIndex</code>Êù•Âà§Êñ≠ÊòØÂê¶‰∫ßÁîü‰∫Ü‰ΩçÁßªÔºåÈÅçÂéÜÂÆåÊúÄÂêéÂà†Èô§Ââ©‰ΩôÁöÑoldFiber</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3+Vite3 SSRÂü∫Êú¨Êê≠Âª∫</title>
    <url>/2022/08/27/Vue3-Vite3-SSR%E5%9F%BA%E6%9C%AC%E6%90%AD%E5%BB%BA/</url>
    <content><![CDATA[<ul>
<li>È¶ñÂÖàËØ¥ÊòéÂ¶ÇÊûúÊòØÁîü‰∫ß‰ΩøÁî®Âº∫ÁÉàÊé®ËçêNuxtÔºå‰ΩÜÊòØÂ¶ÇÊûúÊÉ≥Ê∑±ÂÖ•ÊúçÂä°Á´ØÊ∏≤ÊüìÁöÑËøêË°åÂéüÁêÜÔºåÂèØ‰ª•ÁúãÊú¨ÁØáÔºå‰ºöÊ†πÊçÆÊ∏≤ÊüìÊµÅÁ®ãÊê≠Âª∫‰∏Ä‰∏™demoÁâàssrÔºåÊ∫êÁ†ÅÂú®ÊúÄÂêé‰ºöË¥¥‰∏ä</li>
<li>‰∏ªË¶ÅÊäÄÊúØÊ†àÔºöVite3 + Vue3 + pinia + VueRouter4 + express</li>
<li>ÂºÄÂßãÊê≠Âª∫‰πãÂâçÔºåÂÖàËØ¥‰∏Ä‰∏ãSSRÊ∏≤ÊüìÊµÅÁ®ã</li>
</ul>
<h3 id="SSRÊ∏≤ÊüìÊµÅÁ®ã"><a href="#SSRÊ∏≤ÊüìÊµÅÁ®ã" class="headerlink" title="SSRÊ∏≤ÊüìÊµÅÁ®ã"></a>SSRÊ∏≤ÊüìÊµÅÁ®ã</h3><ul>
<li>È¶ñÂÖàÊµèËßàÂô®ÂêëÊúçÂä°Âô®ËØ∑Ê±ÇÔºåÁÑ∂ÂêéÊúçÂä°Âô®Ê†πÊçÆËØ∑Ê±ÇÁöÑË∑ØÁî±Ôºå‰ºöÂåπÈÖçÁõ∏ÂÖ≥ÁöÑË∑ØÁî±ÁªÑ‰ª∂ÔºåÁÑ∂ÂêéÊâßË°åÁªÑ‰ª∂ÁöÑËá™ÂÆö‰πâÊúçÂä°Á´ØÁîüÂëΩÂë®Êúü(‰æãÔºöNuxtÁöÑasyncData)ÊàñËÄÖËá™ÂÆö‰πâËé∑ÂèñÊï∞ÊçÆÁöÑhookÔºåÂπ∂‰∏îÊääÊâßË°åÂêéÁöÑÊï∞ÊçÆÊî∂ÈõÜËµ∑Êù•ÔºåÁªü‰∏ÄÂú®windowÁöÑÂ±ûÊÄß‰∏≠Â≠òÂÇ®</li>
<li>ÁÑ∂ÂêévueÁöÑÁªÑ‰ª∂‰ºöË¢´renderToStringÊ∏≤ÊüìÊàêÈùôÊÄÅHTMLÂ≠óÁ¨¶‰∏≤ÔºåÊõøÊç¢Êéâindex.htmlÁöÑÊèêÂâçÊåáÂÆöÁöÑÂç†‰Ωç‰ª£Á†Å„ÄÇÁÑ∂Âêéindex.htmlÊîπÂèòÂêéÁöÑÈùôÊÄÅÂ≠óÁ¨¶‰∏≤ÂèëÁªôÂÆ¢Êà∑Á´Ø</li>
<li>ÂÆ¢Êà∑Á´ØÊãøÂà∞ÂêéÔºåÈ¶ñÂÖàÂØπÊï∞ÊçÆËøõË°åÂàùÂßãÂåñÔºåÁÑ∂ÂêéËøõË°åÊøÄÊ¥ªÔºåÂõ†‰∏∫ÂΩìÂâçhtmlÂè™ÊòØÈùôÊÄÅÊï∞ÊçÆÔºåÊøÄÊ¥ª‰∏ªË¶ÅÂÅö‰∏§‰ª∂‰∫ã<ul>
<li><ol>
<li>ÊääÈ°µÈù¢‰∏≠ÁöÑDOMÂÖÉÁ¥†‰∏éËôöÊãüDOM‰πãÈó¥Âª∫Á´ãËÅîÁ≥ª</li>
</ol>
</li>
<li><ol start="2">
<li>‰∏∫È°µÈù¢‰∏≠ÁöÑDOMÂÖÉÁ¥†Ê∑ªÂä†‰∫ã‰ª∂ÁªëÂÆö</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="1-ÂàõÂª∫È°πÁõÆ"><a href="#1-ÂàõÂª∫È°πÁõÆ" class="headerlink" title="1. ÂàõÂª∫È°πÁõÆ"></a>1. ÂàõÂª∫È°πÁõÆ</h3><ul>
<li>È¶ñÂÖàÁî®viteÂëΩ‰ª§ÂàõÂª∫È°πÁõÆ<code>pnpm create vite vue-ssr --template vue-ts</code><ul>
<li>ÂÆâË£ÖÁõ∏ÂÖ≥‰æùËµñÔºö<code>pnpm add express pinia vue-router@4</code></li>
</ul>
</li>
<li>ÂàõÂª∫‰∏â‰∏™Êñá‰ª∂ <code>touch server.js  src/entry-client.ts src/entry-server.js</code><ul>
<li>server.jsÔºöÊúçÂä°Á´ØÂêØÂä®Êñá‰ª∂</li>
<li>entry-client.tsÔºöÂÆ¢Êà∑Á´ØÂÖ•Âè£ÔºåÂ∫îÁî®ÊåÇËΩΩÂÖÉÁ¥†</li>
<li>entry-server.jsÔºöÊúçÂä°Á´ØÂÖ•Âè£ÔºåÂ§ÑÁêÜÊúçÂä°Á´ØÈÄªËæëÂíåÈùôÊÄÅËµÑÊ∫ê</li>
</ul>
</li>
<li>‰øÆÊîπ<code>package.json</code>ËøêË°åËÑöÊú¨<pre><code class="highlight js"><span class="string">&quot;scripts&quot;</span>: &#123;
  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;node server&quot;</span>, <span class="comment">// ËøêË°åÂºÄÂèëÁéØÂ¢É</span>
&#125;</code></pre></li>
<li>ÁÑ∂ÂêéÈúÄË¶ÅÊääÂ∫îÁî®ÂàõÂª∫ÈÉΩÊîπ‰∏∫ÂáΩÊï∞ÁöÑÊñπÂºèËøõË°åË∞ÉÁî®ÂàõÂª∫ÔºåÂõ†‰∏∫Âú®SSRÁéØÂ¢É‰∏ãÔºåÂíåÁ∫ØÂÆ¢Êà∑Á´Ø‰∏ç‰∏ÄÊ†∑ÔºåÊúçÂä°Âô®Âè™‰ºöÂàùÂßãÂåñ‰∏ÄÊ¨°ÔºåÊâÄ‰ª•‰∏∫‰∫ÜÈò≤Ê≠¢Áä∂ÊÄÅÊ±°ÊüìÔºåÊØèÊ¨°ËØ∑Ê±ÇÂøÖÈ°ªÊòØÂÖ®Êñ∞ÁöÑÂÆû‰æã<pre><code class="highlight js"><span class="comment">// src/main.ts</span>
<span class="keyword">import</span> &#123; createSSRApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>
<span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>
<span class="keyword">import</span> &#123; createRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span>
<span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>

<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createApp</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> app = <span class="title function_">createSSRApp</span>(<span class="title class_">App</span>)
  <span class="keyword">const</span> router = <span class="title function_">createRouter</span>()
  <span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>()
  app.<span class="title function_">use</span>(router)
  app.<span class="title function_">use</span>(pinia)
  <span class="keyword">return</span> &#123; app, router, pinia &#125;
&#125;</code></pre></li>
<li>roterÂêåÁêÜ<pre><code class="highlight js"><span class="comment">// src/router/index</span>
<span class="keyword">import</span> &#123; createRouter <span class="keyword">as</span> _createRrouter, createMemoryHistory, createWebHistory, <span class="title class_">RouteRecordRaw</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>

<span class="keyword">const</span> <span class="attr">routes</span>: <span class="title class_">RouteRecordRaw</span>[] = [
  ...
]

<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createRouter</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="title function_">_createRrouter</span>(&#123;
    <span class="attr">history</span>: <span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>.<span class="property">SSR</span> ? <span class="title function_">createMemoryHistory</span>() : <span class="title function_">createWebHistory</span>(),
    routes,
  &#125;)
&#125;</code></pre></li>
<li>ÁÑ∂Âêé‰øÆÊîπindex.htmlÔºåÂ¢ûÂä†Ê≥®ÈáäÂç†‰ΩçÂíåÂÆ¢Êà∑Á´ØÂÖ•Âè£Êñá‰ª∂ÔºåÂú®‰πãÂêéÁöÑÊúçÂä°Á´ØÊ∏≤ÊüìÊó∂Ê≥®ÂÖ•<pre><code class="highlight html"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">head</span>&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">type</span>=<span class="string">&quot;image/svg+xml&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/vite.svg&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span>
    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Vite + Vue + TS<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
    <span class="comment">&lt;!-- ÈùôÊÄÅËµÑÊ∫êÂç†‰Ωç .js .css ... --&gt;</span>
    <span class="comment">&lt;!--preload-links--&gt;</span>
  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>
  <span class="tag">&lt;<span class="name">body</span>&gt;</span>
    <span class="comment">&lt;!-- Â∫îÁî®‰ª£Á†ÅÂç†‰Ωç --&gt;</span>
    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="comment">&lt;!--ssr-outlet--&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/main.ts&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
    <span class="comment">&lt;!-- ÂºïÁî®ÂÆ¢Êà∑Á´ØÂÖ•Âè£Êñá‰ª∂ --&gt;</span>
    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/src/entry-client.ts&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span>
<span class="language-xml"><span class="language-handlebars">      // ÊúçÂä°Á´ØËé∑ÂèñÁöÑÊï∞ÊçÆÁªü‰∏ÄÊåÇËΩΩÂà∞window‰∏ä</span></span>
<span class="language-xml"><span class="language-handlebars">      window.__INITIAL_STATE__ = &#x27;<span class="comment">&lt;!--pinia-state--&gt;</span>&#x27;</span></span>
<span class="language-xml"><span class="language-handlebars">    </span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span></code></pre></li>
</ul>
<h3 id="2-ÊúçÂä°Á´ØÂêØÂä®Êñá‰ª∂"><a href="#2-ÊúçÂä°Á´ØÂêØÂä®Êñá‰ª∂" class="headerlink" title="2. ÊúçÂä°Á´ØÂêØÂä®Êñá‰ª∂"></a>2. ÊúçÂä°Á´ØÂêØÂä®Êñá‰ª∂</h3><ul>
<li>ÂàõÂª∫È°πÁõÆÂêéÔºåÂ∞±ÂºÄÂßãÁºñÂÜôÊúçÂä°Á´ØÂêØÂä®Êñá‰ª∂Ôºå‰πüÂ∞±ÊòØÈ°πÁõÆÊ†πË∑ØÂæÑ‰∏ãÁöÑserver.jsÊñá‰ª∂</li>
<li>Ëøô‰∏™Êñá‰ª∂ÁöÑÂäüËÉΩÊòØÂêØÂä®‰∏Ä‰∏™nodeÊúçÂä°ÔºåÁÑ∂ÂêéÊ†πÊçÆËØ∑Ê±ÇÔºåËØªÂèñhtmlÊñá‰ª∂ÔºåÂ§ÑÁêÜËµÑÊ∫êÂêéÊääÊ≥®ÈáäËøõË°åÊõøÊç¢ÔºåÊúÄÂêéÊäähtmlÂèëÈÄÅÁªôÂÆ¢Êà∑Á´Ø<pre><code class="highlight js"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&#x27;fs&#x27;</span>
<span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">&#x27;path&#x27;</span>
<span class="keyword">import</span> &#123; fileURLToPath &#125; <span class="keyword">from</span> <span class="string">&#x27;url&#x27;</span>
<span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&#x27;express&#x27;</span>

<span class="keyword">import</span> &#123; createRequire &#125; <span class="keyword">from</span> <span class="string">&#x27;module&#x27;</span>;
<span class="keyword">const</span> __dirname = path.<span class="title function_">dirname</span>(<span class="title function_">fileURLToPath</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>))
<span class="keyword">const</span> <span class="built_in">require</span> = <span class="title function_">createRequire</span>(<span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">url</span>);
<span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">p</span>) =&gt; path.<span class="title function_">resolve</span>(__dirname, p);

<span class="keyword">const</span> <span class="title function_">createServer</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;
  <span class="comment">// ÂàõÂª∫nodeÊúçÂä°</span>
  <span class="keyword">const</span> app = <span class="title function_">express</span>()

  <span class="comment">/**</span>
<span class="comment">   * @ÂÆòÊñπËß£Èáä</span>
<span class="comment">   * ‰ª•‰∏≠Èó¥‰ª∂Ê®°ÂºèÂàõÂª∫viteÂ∫îÁî®ÔºåËøôÂ∞ÜÁ¶ÅÁî®viteËá™Ë∫´ÁöÑHTMLÊúçÂä°ÈÄªËæë</span>
<span class="comment">   * Âπ∂ËÆ©‰∏äÁ∫ßÊúçÂä°Âô®Êé•ÁÆ°</span>
<span class="comment">   */</span>
  <span class="keyword">const</span> vite = <span class="keyword">await</span> <span class="built_in">require</span>(<span class="string">&#x27;vite&#x27;</span>).<span class="title function_">createServer</span>(&#123;
    <span class="attr">server</span>: &#123;
      <span class="attr">middlewareMode</span>: <span class="literal">true</span>,
    &#125;,
    <span class="attr">appType</span>: <span class="string">&#x27;custom&#x27;</span>
  &#125;);
  app.<span class="title function_">use</span>(vite.<span class="property">middlewares</span>);
  
  app.<span class="title function_">use</span>(<span class="string">&#x27;*&#x27;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;
    <span class="keyword">const</span> url = req.<span class="property">originalUrl</span>
    <span class="keyword">try</span> &#123;
      <span class="comment">// ËØªÂèñindex.html</span>
      <span class="keyword">let</span> template = fs.<span class="title function_">readFileSync</span>(
        <span class="title function_">resolve</span>(<span class="string">&#x27;index.html&#x27;</span>),
        <span class="string">&#x27;utf-8&#x27;</span>
      )
      <span class="comment">// Â∫îÁî®vite htmlËΩ¨Êç¢Ôºå‰ºöÊ≥®ÂÖ•vite HMR</span>
      template = <span class="keyword">await</span> vite.<span class="title function_">transformIndexHtml</span>(url, template)

      <span class="comment">// Âä†ËΩΩÊúçÂä°Á´ØÂÖ•Âè£</span>
      <span class="keyword">const</span> render = (<span class="keyword">await</span> vite.<span class="title function_">ssrLoadModule</span>(<span class="string">&#x27;/src/entry-server.js&#x27;</span>)).<span class="property">render</span>
      <span class="keyword">const</span> [ appHtml, piniaState ] = <span class="keyword">await</span> <span class="title function_">render</span>(url)

      <span class="comment">// ÊõøÊç¢Â§ÑÁêÜËøáÂêéÁöÑÊ®°Áâà</span>
      <span class="keyword">const</span> html = template
        .<span class="title function_">replace</span>(<span class="string">`&lt;!--ssr-outlet--&gt;`</span>, appHtml)
        .<span class="title function_">replace</span>(<span class="string">`&lt;!--pinia-state--&gt;`</span>, piniaState)
      res.<span class="title function_">status</span>(<span class="number">200</span>).<span class="title function_">set</span>(&#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;).<span class="title function_">end</span>(html)
    &#125; <span class="keyword">catch</span> (error) &#123;
      vite?.<span class="title function_">ssrFixStacktrace</span>(error)
      <span class="title function_">next</span>(e)
    &#125;
  &#125;)

  <span class="comment">// ÁõëÂê¨5100Á´ØÂè£</span>
  app.<span class="title function_">listen</span>(<span class="number">5100</span>)
&#125;

<span class="title function_">createServer</span>();</code></pre></li>
</ul>
<h3 id="3-ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂"><a href="#3-ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂" class="headerlink" title="3. ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂"></a>3. ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂</h3><ul>
<li>ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂‰∏ªË¶ÅÊòØË∞ÉÁî®SSRÁöÑrenderToStringÂíåÊî∂ÈõÜÈúÄË¶ÅÂèëÈÄÅÁöÑËµÑÊ∫êÂíåÊï∞ÊçÆ<pre><code class="highlight js"><span class="keyword">import</span> &#123; renderToString &#125; <span class="keyword">from</span> <span class="string">&#x27;vue/server-renderer&#x27;</span>
<span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;./main&#x27;</span>

<span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">url, manifest</span>) &#123;
  <span class="keyword">const</span> &#123; app, router, pinia &#125; = <span class="title function_">createApp</span>()

  router.<span class="title function_">push</span>(url)
  <span class="keyword">await</span> router.<span class="title function_">isReady</span>()

  <span class="keyword">const</span> ctx = &#123;&#125;
  <span class="keyword">const</span> html = <span class="keyword">await</span> <span class="title function_">renderToString</span>(app, ctx)
  <span class="keyword">return</span> [html, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(pinia.<span class="property">state</span>.<span class="property">value</span>)]
&#125;</code></pre></li>
</ul>
<h3 id="4-ÂÆ¢Êà∑Á´ØÂÖ•Âè£Êñá‰ª∂"><a href="#4-ÂÆ¢Êà∑Á´ØÂÖ•Âè£Êñá‰ª∂" class="headerlink" title="4. ÂÆ¢Êà∑Á´ØÂÖ•Âè£Êñá‰ª∂"></a>4. ÂÆ¢Êà∑Á´ØÂÖ•Âè£Êñá‰ª∂</h3><ul>
<li>ÂÆ¢Êà∑Á´ØÂÖ•Âè£Êñá‰ª∂‰∏ªË¶ÅÁî®‰∫éÊåÇËΩΩËäÇÁÇπÂíåÂàùÂßãÂåñÊï∞ÊçÆ<pre><code class="highlight js"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;./main&#x27;</span>

<span class="keyword">const</span> &#123; app, router, pinia &#125; = <span class="title function_">createApp</span>()

router.<span class="title function_">isReady</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;
  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">__INITIAL_STATE__</span>) &#123;
    pinia.<span class="property">state</span>.<span class="property">value</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">window</span>.<span class="property">__INITIAL_STATE__</span>);
  &#125;

  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)
&#125;)</code></pre></li>
</ul>
<h3 id="5-ÁªÑ‰ª∂ÂíåÈ°µÈù¢"><a href="#5-ÁªÑ‰ª∂ÂíåÈ°µÈù¢" class="headerlink" title="5. ÁªÑ‰ª∂ÂíåÈ°µÈù¢"></a>5. ÁªÑ‰ª∂ÂíåÈ°µÈù¢</h3><ul>
<li>ÁªÑ‰ª∂ÂíåÈ°µÈù¢Ëé∑ÂèñÊï∞ÊçÆ‰∏ªË¶ÅÊúâ‰∏§ÁßçÊñπÂºèÔºå‰∏ÄÁßçÊòØÂ¢ûÂä†‰∏Ä‰∏™<code>asyncData</code>ÈÄâÈ°πÔºåÁÑ∂ÂêéÂú®enter-server.jsÁöÑÈÄªËæë‰∏≠Â¢ûÂä†ÈÅçÂéÜÂΩìÂâçÁªÑ‰ª∂ÁöÑÈÄªËæëÔºåÁªü‰∏ÄËß¶Âèë<code>asyncData</code>Ôºå‰ΩÜÊòØÁé∞Âú®ÈÉΩÊòØÁî®<code>script setup</code>ÁöÑÊñπÂºèÂÜô‰∏öÂä°‰ª£Á†ÅÔºåÊâÄ‰ª•ÊúâÁÇπÈ∫ªÁÉ¶Ôºå<pre><code class="highlight js">&lt;script&gt;
  <span class="keyword">export</span> defualt &#123;
    <span class="title function_">asyncData</span>(<span class="params"></span>) &#123;
      <span class="comment">// ÊúçÂä°Á´ØËé∑ÂèñÊï∞ÊçÆÈÄªËæë</span>
    &#125;
  &#125;
&lt;/script&gt;

<span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&#x27;ts&#x27;</span>&gt;</span></span>
<span class="language-xml">  ...</span>
<span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></code></pre></li>
<li>Âè¶‰∏ÄÁßçÂ∞±ÊòØhookÁöÑÊñπÂºèÔºåÈÄöËøá<code>import.meta.env.SSR</code>ÁöÑÊñπÂºèËøõË°åÂà§Êñ≠</li>
<li>ÂØπ‰∫éÊï∞ÊçÆÂÖ∑‰ΩìÂ≠òÂÇ®ÊñπÂºèÔºåÂ§ßÊ¶ÇÊúâ‰∏âÁßçÔºå‰∏ÄÁßçÊòØÂ≠òÂú®vuexÊàñËÄÖpiniaËøôÁßçÂÖ®Â±ÄÁä∂ÊÄÅÂ∫ì‰∏≠Ôºå‰∏ÄÁßçÊòØÂ≠òÂú®context‰∏ä‰∏ãÊñá‰∏≠ÔºåËøòÊúâ‰∏ÄÁßçÊòØËá™ÂÆö‰πâÊï∞ÊçÆ</li>
</ul>
<h3 id="6-Áîü‰∫ßÁéØÂ¢É"><a href="#6-Áîü‰∫ßÁéØÂ¢É" class="headerlink" title="6. Áîü‰∫ßÁéØÂ¢É"></a>6. Áîü‰∫ßÁéØÂ¢É</h3><h4 id="6-1-pacnakge-json"><a href="#6-1-pacnakge-json" class="headerlink" title="6.1 pacnakge.json"></a>6.1 pacnakge.json</h4><ul>
<li>Â¢ûÂä†ÊûÑÂª∫ËÑöÊú¨<pre><code class="highlight diff">&quot;scripts&quot;: &#123;
  &quot;dev&quot;: &quot;node server&quot;,
<span class="addition">+ &quot;build&quot;: &quot;npm run build:client &amp;&amp; npm run build:server&quot;,</span>
<span class="addition">+  &quot;build:client&quot;: &quot;vite build --ssrManifest --outDir dist/client&quot;,</span>
<span class="addition">+  &quot;build:server&quot;: &quot;vite build --ssr src/entry-server.js --outDir dist/server&quot;,</span>
<span class="addition">+  &quot;serve&quot;: &quot;cross-env NODE_ENV=production node server&quot;</span>
&#125;,</code></pre></li>
</ul>
<h4 id="6-2-ÊúçÂä°Á´ØËøêË°åÊñá‰ª∂"><a href="#6-2-ÊúçÂä°Á´ØËøêË°åÊñá‰ª∂" class="headerlink" title="6.2 ÊúçÂä°Á´ØËøêË°åÊñá‰ª∂"></a>6.2 ÊúçÂä°Á´ØËøêË°åÊñá‰ª∂</h4><ul>
<li>ÈíàÂØπÁîü‰∫ßÁéØÂ¢ÉÔºåÈúÄË¶ÅÂêØÂä®ÈùôÊÄÅËµÑÊ∫êÊúçÂä°ÔºåÂºïÁî®Ë∑ØÂæÑÈúÄË¶ÅÊîπ‰∏∫distÁõÆÂΩï‰∏ã</li>
</ul>
<pre><code class="highlight diff">import fs from &#x27;fs&#x27;
import path from &#x27;path&#x27;
import &#123; fileURLToPath &#125; from &#x27;url&#x27;
import express from &#x27;express&#x27;

import &#123; createRequire &#125; from &#x27;module&#x27;;
const __dirname = path.dirname(fileURLToPath(import.meta.url))
const require = createRequire(import.meta.url);
const resolve = (p) =&gt; path.resolve(__dirname, p);

const createServer = async (isProd = process.env.NODE_ENV <span class="comment">=== &#x27;production&#x27;) =&gt; &#123;</span>
  const app = express()

<span class="deletion">-  const vite = await require(&#x27;vite&#x27;).createServer(&#123;</span>
<span class="deletion">-    server: &#123;</span>
<span class="deletion">-      middlewareMode: true,</span>
<span class="deletion">-    &#125;,</span>
<span class="deletion">-    appType: &#x27;custom&#x27;</span>
<span class="deletion">-  &#125;);</span>
<span class="deletion">-  app.use(vite.middlewares);</span>

<span class="addition">+  let vite;</span>
<span class="addition">+  if (isProd) &#123;</span>
<span class="addition">+    app.use(require(&#x27;compression&#x27;)());</span>
<span class="addition">+    app.use(</span>
<span class="addition">+      require(&#x27;serve-static&#x27;)(resolve(&#x27;./dist/client&#x27;), &#123;</span>
<span class="addition">+        index: false</span>
<span class="addition">+      &#125;)</span>
<span class="addition">+    );</span>
<span class="addition">+  &#125; else &#123;</span>
<span class="addition">+    vite = await require(&#x27;vite&#x27;).createServer(&#123;</span>
<span class="addition">+      server: &#123;</span>
<span class="addition">+        middlewareMode: true,</span>
<span class="addition">+      &#125;,</span>
<span class="addition">+      appType: &#x27;custom&#x27;</span>
<span class="addition">+    &#125;);</span>
<span class="addition">+    app.use(vite.middlewares);</span>
<span class="addition">+  &#125;</span>
   // ÈÄöËøábulid --ssrManifestÂëΩ‰ª§ÁîüÊàêÁöÑÈùôÊÄÅËµÑÊ∫êÊò†Â∞ÑÈúÄË¶ÅÂú®Áîü‰∫ßÁéØÂ¢É‰∏ãÂºïÁî®
<span class="addition">+  const manifest = isProd ? fs.readFileSync(resolve(&#x27;./dist/client/ssr-manifest.json&#x27;), &#x27;utf-8&#x27;) :&#123;&#125;</span>
  
  app.use(&#x27;*&#x27;, async (req, res, next) =&gt; &#123;
    const url = req.originalUrl
    try &#123;
<span class="deletion">-      let template = fs.readFileSync(</span>
<span class="deletion">-        resolve(&#x27;index.html&#x27;),</span>
<span class="deletion">-        &#x27;utf-8&#x27;</span>
<span class="deletion">-      )</span>
<span class="deletion">-      template = await vite.transformIndexHtml(url, template)</span>
<span class="deletion">-      const render = (await vite.ssrLoadModule(&#x27;/src/entry-server.js&#x27;)).render</span>
<span class="deletion">-      const [ appHtml, piniaState ] = await render(url)</span>

<span class="addition">+      let template, render</span>
<span class="addition">+      if (isProd) &#123;</span>
<span class="addition">+        template = fs.readFileSync(resolve(&#x27;./dist/client/index.html&#x27;), &#x27;utf-8&#x27;)</span>
<span class="addition">+        render = (await import(&#x27;./dist/server/entry-server.js&#x27;)).render</span>
<span class="addition">+      &#125; else &#123;</span>
<span class="addition">+        template = fs.readFileSync(</span>
<span class="addition">+          resolve(&#x27;index.html&#x27;),</span>
<span class="addition">+          &#x27;utf-8&#x27;</span>
<span class="addition">+        )</span>
<span class="addition">+        template = await vite.transformIndexHtml(url, template)</span>
<span class="addition">+        render = (await vite.ssrLoadModule(&#x27;/src/entry-server.js&#x27;)).render</span>
<span class="addition">+      &#125;</span>
<span class="addition">+      const [ appHtml, preloadLinks, piniaState ] = await render(url, manifest)</span>
      const html = template
        .replace(`&lt;!--preload-links--&gt;`, preloadLinks)
        .replace(`&lt;!--ssr-outlet--&gt;`, appHtml)
<span class="addition">+        .replace(`&lt;!--pinia-state--&gt;`, piniaState)</span>
      res.status(200).set(&#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;).end(html)
    &#125; catch (error) &#123;
      vite?.ssrFixStacktrace(error)
      next()
    &#125;
  &#125;)

  app.listen(5100)
&#125;

createServer();
</code></pre>

<h4 id="6-3-ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂"><a href="#6-3-ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂" class="headerlink" title="6.3 ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂"></a>6.3 ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂</h4><ul>
<li>ÊúçÂä°Á´ØÂÖ•Âè£Êñá‰ª∂‰∏ªË¶ÅÊòØÂ¢ûÂä†‰∫ÜÊûÑÂª∫Êó∂ÁîüÊàêÁöÑÈùôÊÄÅËµÑÊ∫êÊò†Â∞ÑÂ§ÑÁêÜÁöÑÈÄªËæë<pre><code class="highlight diff">import &#123; basename &#125; from &#x27;path&#x27;
import &#123; renderToString &#125; from &#x27;vue/server-renderer&#x27;
import &#123; createApp &#125; from &#x27;./main&#x27;

export async function render(url, manifest) &#123;
  const &#123; app, router, pinia &#125; = createApp()

  router.push(url)
  await router.isReady()

  const ctx = &#123;&#125;
  const html = await renderToString(app, ctx)
<span class="addition">+  const preloadLinks = renderPreloadLinks(ctx.modules, manifest)</span>
<span class="addition">+  return [html, preloadLinks, JSON.stringify(pinia.state.value)]</span>
&#125;

 function renderPreloadLinks(modules, manifest) &#123;
   let links = &#x27;&#x27;
   const seen = new Set()
   modules.forEach((id) =&gt; &#123;
     const files = manifest[id]
     if (files) &#123;
       files.forEach((file) =&gt; &#123;
         if (!seen.has(file)) &#123;
           seen.add(file)
           const filename = basename(file)
           if (manifest[filename]) &#123;
             for (const depFile of manifest[filename]) &#123;
               links += renderPreloadLink(depFile)
               seen.add(depFile)
             &#125;
           &#125;
           links += renderPreloadLink(file)
         &#125;
       &#125;)
     &#125;
   &#125;)
   return links
 &#125;
 
 function renderPreloadLink(file) &#123;
   if (file.endsWith(&#x27;.js&#x27;)) &#123;
     return `&lt;link rel=&quot;modulepreload&quot; crossorigin href=&quot;$&#123;file&#125;&quot;&gt;`
   &#125; else if (file.endsWith(&#x27;.css&#x27;)) &#123;
     return `&lt;link rel=&quot;stylesheet&quot; href=&quot;$&#123;file&#125;&quot;&gt;`
   &#125; else if (file.endsWith(&#x27;.woff&#x27;)) &#123;
     return ` &lt;link rel=&quot;preload&quot; href=&quot;$&#123;file&#125;&quot; as=&quot;font&quot; type=&quot;font/woff&quot; crossorigin&gt;`
   &#125; else if (file.endsWith(&#x27;.woff2&#x27;)) &#123;
     return ` &lt;link rel=&quot;preload&quot; href=&quot;$&#123;file&#125;&quot; as=&quot;font&quot; type=&quot;font/woff2&quot; crossorigin&gt;`
   &#125; else if (file.endsWith(&#x27;.gif&#x27;)) &#123;
     return ` &lt;link rel=&quot;preload&quot; href=&quot;$&#123;file&#125;&quot; as=&quot;image&quot; type=&quot;image/gif&quot;&gt;`
   &#125; else if (file.endsWith(&#x27;.jpg&#x27;) || file.endsWith(&#x27;.jpeg&#x27;)) &#123;
     return ` &lt;link rel=&quot;preload&quot; href=&quot;$&#123;file&#125;&quot; as=&quot;image&quot; type=&quot;image/jpeg&quot;&gt;`
   &#125; else if (file.endsWith(&#x27;.png&#x27;)) &#123;
     return ` &lt;link rel=&quot;preload&quot; href=&quot;$&#123;file&#125;&quot; as=&quot;image&quot; type=&quot;image/png&quot;&gt;`
   &#125; else &#123;
     return &#x27;&#x27;
   &#125;
 &#125;</code></pre></li>
</ul>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><ul>
<li><a href="https://github.com/LHRUN/vue-ssr">repo</a></li>
</ul>
<h3 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h3><ul>
<li><a href="https://vuejs.org/guide/scaling-up/ssr.html">Server-Side Rendering</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>Vite</tag>
        <tag>SSR</tag>
      </tags>
  </entry>
  <entry>
    <title>canvasÁîªÊùø‰πãÁîªÁ¨îÁöÑÂ§öÁßçÊïàÊûú</title>
    <url>/2022/12/17/canvas%E7%94%BB%E6%9D%BF%E4%B9%8B%E7%94%BB%E7%AC%94%E7%9A%84%E5%A4%9A%E7%A7%8D%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>Êàë‰πãÂâçÂÅö‰∫Ü‰∏Ä‰∏™ÁîªÊùøÔºåÂ∑≤ÁªèËø≠‰ª£‰∫Ü‰∏§‰∏™ÁâàÊú¨Ôºå‰ΩÜÊó¢ÁÑ∂ÊòØÁîªÊùøÔºåÂ¶ÇÊûúÂè™Êúâ‰∏ÄÁßçÁîªÁ¨îÂ∞±ÊòæÂæóÂ§™ÂçïË∞É‰∫ÜÔºåÊàëÂ∞±ÊêúÁΩó‰∫Ü‰∏Ä‰∏ãÁΩë‰∏äÁöÑÂêÑÁßçÊñπÊ°àÂíåËá™Â∑±ÁöÑ‰∏Ä‰∫õÊÉ≥Ê≥ïÔºåÁõÆÂâçÂÅöÂá∫‰∫Ü5ÁßçÊ†∑ÂºèÔºåÂåÖÊã¨Âü∫Á°ÄÁöÑÊÄªÂÖ±6ÁßçÔºåÂΩìÁÑ∂Êúâ‰∫Ü‰∏Ä‰∫õÊÄùË∑ØÂêéÔºåÂêéÁª≠‰ºöÁªßÁª≠Â¢ûÂä†„ÄÇÊàë‰ºöÂú®Êú¨ÊñáËØ¶ÁªÜËØ¥ÊòéÂÆûÁé∞ÊÄùË∑ØÂíåÂÖ∑‰Ωì‰ª£Á†ÅÔºå6ÁßçÊ†∑ÂºèÂåÖÊã¨Ôºö</p>
<ol>
<li>Âü∫Á°ÄÂçïËâ≤</li>
<li>ËçßÂÖâ</li>
<li>Â§öËâ≤ÁîªÁ¨î</li>
<li>Âñ∑Èõæ</li>
<li>Ëú°Á¨î</li>
<li>Ê≥°Ê≥°</li>
</ol>
<h2 id="È¢ÑËßà"><a href="#È¢ÑËßà" class="headerlink" title="È¢ÑËßà"></a>È¢ÑËßà</h2><p>È¢ÑËßàÂú∞ÂùÄÔºö<a href="https://songlh.top/paint-board/">https://songlh.top/paint-board/</a><br>Ê∫êÁ†ÅÔºö<a href="https://github.com/LHRUN/paint-board">https://github.com/LHRUN/paint-board</a> Ê¨¢ËøéStar‚≠êÔ∏è</p>
<p><img src="https://s1.ax1x.com/2022/12/17/zH59vn.png"></p>
<h2 id="Âü∫Á°ÄÂçïËâ≤"><a href="#Âü∫Á°ÄÂçïËâ≤" class="headerlink" title="Âü∫Á°ÄÂçïËâ≤"></a>Âü∫Á°ÄÂçïËâ≤</h2><p>ÁîªÁ¨îÁöÑÂü∫Á°ÄÂÆûÁé∞ÔºåÈô§‰∫ÜÁÇπ‰∏éÁÇπ‰πãÈó¥ÁöÑËøûÊé•ÔºåËøòÈúÄË¶ÅÊ≥®ÊÑè‰∏§ÁÇπ</p>
<ol>
<li>È¶ñÂÖàÊòØÂú®Èº†Ê†áÁßªÂä®Êó∂ËÆ°ÁÆóÂΩìÂâçÁßªÂä®ÁöÑÈÄüÂ∫¶ÔºåÁÑ∂ÂêéÊ†πÊçÆÈÄüÂ∫¶ËÆ°ÁÆóÁ∫øÂÆΩÔºåËøô‰∏™ÊòØ‰∏∫‰∫ÜÂÆûÁé∞Èº†Ê†áÁßªÂä®Âø´ÔºåÁ∫øÂÆΩÂ∞±ÂèòÁ™ÑÔºåÁßªÂä®ÊÖ¢ÔºåÁ∫øÂÆΩÂ∞±ÊÅ¢Â§çÊ≠£Â∏∏Ëøô‰∏™ÊïàÊûú</li>
<li>‰∏∫‰∫ÜÈÅøÂÖçÁõ¥Á∫øËøûÊé•ÁÇπÊïàÊûú‰∏çÂ•ΩÔºåÊàë‰ºöÈááÁî®Ë¥ùÂ°ûÂ∞îÊõ≤Á∫øËøõË°åËøûÊé•</li>
</ol>
<p><img src="https://s1.ax1x.com/2022/12/17/zH5YPe.png"></p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Èº†Ê†áÁßªÂä®Êó∂Ê∑ªÂä†Êñ∞ÁöÑÂùêÊ†á</span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">position</span></span>
<span class="comment"> */</span>
<span class="title function_">addPosition</span>(<span class="params">position: MousePosition</span>) &#123;
  <span class="variable language_">this</span>.<span class="property">positions</span>.<span class="title function_">push</span>(position)
  <span class="comment">// Â§ÑÁêÜÂΩìÂâçÁ∫øÂÆΩ</span>
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;
    <span class="comment">// ËÆ°ÁÆóÁßªÂä®ÈÄüÂ∫¶</span>
    <span class="keyword">const</span> mouseSpeed = <span class="variable language_">this</span>.<span class="title function_">_computedSpeed</span>(
      <span class="variable language_">this</span>.<span class="property">positions</span>[<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> - <span class="number">2</span>],
      <span class="variable language_">this</span>.<span class="property">positions</span>[<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> - <span class="number">1</span>]
    )
    <span class="comment">// ËÆ°ÁÆóÁ∫øÂÆΩ</span>
    <span class="keyword">const</span> lineWidth = <span class="variable language_">this</span>.<span class="title function_">_computedLineWidth</span>(mouseSpeed)
    <span class="variable language_">this</span>.<span class="property">lineWidths</span>.<span class="title function_">push</span>(lineWidth)
  &#125;
&#125;

<span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆóÁßªÂä®ÈÄüÂ∫¶</span>
<span class="comment"> * <span class="doctag">@param</span> start Ëµ∑ÁÇπ</span>
<span class="comment"> * <span class="doctag">@param</span> end ÁªàÁÇπ</span>
<span class="comment"> */</span>
<span class="title function_">_computedSpeed</span>(<span class="params">start: MousePosition, end: MousePosition</span>) &#123;
  <span class="comment">// Ëé∑ÂèñË∑ùÁ¶ª</span>
  <span class="keyword">const</span> moveDistance = <span class="title function_">getDistance</span>(start, end)

  <span class="keyword">const</span> curTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()
  <span class="comment">// Ëé∑ÂèñÁßªÂä®Èó¥ÈöîÊó∂Èó¥   lastMoveTimeÔºöÊúÄÂêéÈº†Ê†áÁßªÂä®Êó∂Èó¥</span>
  <span class="keyword">const</span> moveTime = curTime - <span class="variable language_">this</span>.<span class="property">lastMoveTime</span>
  <span class="comment">// ËÆ°ÁÆóÈÄüÂ∫¶</span>
  <span class="keyword">const</span> mouseSpeed = moveDistance / moveTime
  <span class="comment">// Êõ¥Êñ∞ÊúÄÂêéÁßªÂä®Êó∂Èó¥</span>
  <span class="variable language_">this</span>.<span class="property">lastMoveTime</span> = curTime
  <span class="keyword">return</span> mouseSpeed
&#125;

<span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆóÁîªÁ¨îÂÆΩÂ∫¶</span>
<span class="comment"> * <span class="doctag">@param</span> speed Èº†Ê†áÁßªÂä®ÈÄüÂ∫¶</span>
<span class="comment"> */</span>
<span class="title function_">_computedLineWidth</span>(<span class="params">speed: number</span>) &#123;
  <span class="keyword">let</span> lineWidth = <span class="number">0</span>
  <span class="keyword">const</span> minWidth = <span class="variable language_">this</span>.<span class="property">minWidth</span>
  <span class="keyword">const</span> maxWidth = <span class="variable language_">this</span>.<span class="property">maxWidth</span>
  <span class="keyword">if</span> (speed &gt;= <span class="variable language_">this</span>.<span class="property">maxSpeed</span>) &#123;
    lineWidth = minWidth
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (speed &lt;= <span class="variable language_">this</span>.<span class="property">minSpeed</span>) &#123;
    lineWidth = maxWidth
  &#125; <span class="keyword">else</span> &#123;
    lineWidth = maxWidth - (speed / <span class="variable language_">this</span>.<span class="property">maxSpeed</span>) * maxWidth
  &#125;

  lineWidth = lineWidth * (<span class="number">1</span> / <span class="number">3</span>) + <span class="variable language_">this</span>.<span class="property">lastLineWidth</span> * (<span class="number">2</span> / <span class="number">3</span>)
  <span class="variable language_">this</span>.<span class="property">lastLineWidth</span> = lineWidth
  <span class="keyword">return</span> lineWidth
&#125;</code></pre>

<p>Ê∏≤ÊüìÊó∂Â∞±ÈÅçÂéÜÊâÄÊúâÂùêÊ†á</p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ëá™Áî±ÁîªÁ¨îÊ∏≤Êüì</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> * <span class="doctag">@param</span> instance FreeDraw</span>
<span class="comment"> */</span>
<span class="keyword">function</span> <span class="title function_">freeDrawRender</span>(<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  instance: FreeLine</span>
<span class="params"></span>) &#123;
  context.<span class="title function_">save</span>()
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
  <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
    <span class="comment">// Áé∞Âú®ÊòØÂè™ÊúâÂü∫Á°ÄÁîªÁ¨îÔºåÂêéÁª≠‰ºöÂ¢ûÂä†‰∏çÂêåÁöÑcase</span>
    <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Basic</span>:
      context.<span class="property">strokeStyle</span> = instance.<span class="property">colors</span>[<span class="number">0</span>]
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; instance.<span class="property">positions</span>.<span class="property">length</span>; i++) &#123;
    <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
      <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Basic</span>:
        <span class="title function_">_drawBasic</span>(instance, i, context)
        <span class="keyword">break</span>
      <span class="attr">default</span>:
        <span class="keyword">break</span>
    &#125;
  &#125;
  context.<span class="title function_">restore</span>()
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÁªòÂà∂Âü∫Á°ÄÁ∫øÊù°</span>
<span class="comment"> * <span class="doctag">@param</span> instance FreeDraw ÂÆû‰æã</span>
<span class="comment"> * <span class="doctag">@param</span> i ‰∏ãÊ†á</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> * <span class="doctag">@param</span> cb ‰∏Ä‰∫õÁªòÂà∂ÂâçÁöÑÂ§ÑÁêÜÔºå‰øÆÊîπ‰∏Ä‰∫õÊ†∑Âºè</span>
<span class="comment"> * </span>
<span class="comment"> * ÁîªÁ¨îËΩ®ËøπÊòØÂÄüÈâ¥‰∫ÜÁΩë‰∏äÁöÑ‰∏Ä‰∫õÊñπÊ°àÔºåÂàÜ‰∏§ÁßçÊÉÖÂÜµ</span>
<span class="comment"> * 1. Â¶ÇÊûúÊòØÂâç‰∏§‰∏™ÂùêÊ†áÔºåÂ∞±ÈÄöËøálineToËøûÊé•Âç≥ÂèØ</span>
<span class="comment"> * 2. Â¶ÇÊûúÊòØÂâç‰∏§‰∏™ÂùêÊ†á‰πãÂêéÁöÑÂùêÊ†áÔºåÂ∞±ÈááÁî®Ë¥ùÂ°ûÂ∞îÊõ≤Á∫øËøõË°åËøûÊé•Ôºå</span>
<span class="comment"> *    ÊØîÂ¶ÇÁé∞Âú®Êúâa, b, c ‰∏â‰∏™ÁÇπÔºåÂà∞cÁÇπÊó∂ÔºåÊääabÂùêÊ†áÁöÑ‰∏≠Èó¥ÁÇπ‰Ωú‰∏∫Ëµ∑ÁÇπ</span>
<span class="comment"> *     bcÂùêÊ†áÁöÑ‰∏≠Èó¥ÁÇπ‰Ωú‰∏∫ÁªàÁÇπÔºåbÁÇπ‰Ωú‰∏∫ÊéßÂà∂ÁÇπËøõË°åËøûÊé•</span>
<span class="comment"> */</span>
<span class="keyword">function</span> <span class="title function_">_drawBasic</span>(<span class="params"></span>
<span class="params">  instance: FreeLine,</span>
<span class="params">  i: number,</span>
<span class="params">  context: CanvasRenderingContext2D</span>
<span class="params">  cb?: (</span>
<span class="params">    instance: FreeDraw,</span>
<span class="params">    i: number,</span>
<span class="params">    context: CanvasRenderingContext2D</span>
<span class="params">  ) =&gt; <span class="keyword">void</span></span>
<span class="params"></span>) &#123;
  <span class="keyword">const</span> &#123; positions, lineWidths &#125; = instance
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: centerX, <span class="attr">y</span>: centerY &#125; = positions[i - <span class="number">1</span>]
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: endX, <span class="attr">y</span>: endY &#125; = positions[i]
  context.<span class="title function_">beginPath</span>()
  <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;
    context.<span class="title function_">moveTo</span>(centerX, centerY)
    context.<span class="title function_">lineTo</span>(endX, endY)
  &#125; <span class="keyword">else</span> &#123;
    <span class="keyword">const</span> &#123; <span class="attr">x</span>: startX, <span class="attr">y</span>: startY &#125; = positions[i - <span class="number">2</span>]
    <span class="keyword">const</span> lastX = (startX + centerX) / <span class="number">2</span>
    <span class="keyword">const</span> lastY = (startY + centerY) / <span class="number">2</span>
    <span class="keyword">const</span> x = (centerX + endX) / <span class="number">2</span>
    <span class="keyword">const</span> y = (centerY + endY) / <span class="number">2</span>
    context.<span class="title function_">moveTo</span>(lastX, lastY)
    context.<span class="title function_">quadraticCurveTo</span>(centerX, centerY, x, y)
  &#125;

  context.<span class="property">lineWidth</span> = lineWidths[i]
  cb?.(instance, i, context)
  context.<span class="title function_">stroke</span>()
&#125;</code></pre>

<h2 id="ËçßÂÖâ"><a href="#ËçßÂÖâ" class="headerlink" title="ËçßÂÖâ"></a>ËçßÂÖâ</h2><p>ËçßÂÖâÂè™ÈúÄÂú®Âü∫Á°ÄÊ†∑Âºè‰∏äÂ¢ûÂä†‰∏Ä‰∏™Èò¥ÂΩ±Âç≥ÂèØ</p>
<p><img src="https://s1.ax1x.com/2022/12/17/zH53VK.png"></p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">freeDrawRender</span>(<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  instance: FreeLine</span>
<span class="params"></span>) &#123;
  context.<span class="title function_">save</span>()
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
  <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
    <span class="comment">// ...</span>
    <span class="comment">// ËçßÂÖâ Â¢ûÂä†Èò¥ÂΩ±ÊïàÊûú</span>
    <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Shadow</span>:
      context.<span class="property">shadowColor</span> = instance.<span class="property">colors</span>[<span class="number">0</span>]
      context.<span class="property">strokeStyle</span> = instance.<span class="property">colors</span>[<span class="number">0</span>]
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; instance.<span class="property">positions</span>.<span class="property">length</span>; i++) &#123;
    <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
      <span class="comment">// ...</span>
      <span class="comment">// ËçßÂÖâ</span>
      <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Shadow</span>:
        <span class="title function_">_drawBasic</span>(instance, i, context, <span class="function">(<span class="params">instance, i, context</span>) =&gt;</span> &#123;
          context.<span class="property">shadowBlur</span> = instance.<span class="property">lineWidths</span>[i]
        &#125;)
        <span class="keyword">break</span>
      <span class="attr">default</span>:
        <span class="keyword">break</span>
    &#125;
  &#125;
  context.<span class="title function_">restore</span>()
&#125;</code></pre>

<h2 id="Â§öËâ≤ÁîªÁ¨î"><a href="#Â§öËâ≤ÁîªÁ¨î" class="headerlink" title="Â§öËâ≤ÁîªÁ¨î"></a>Â§öËâ≤ÁîªÁ¨î</h2><p>Â§öËâ≤ÁîªÁ¨îÈúÄË¶Å‰ΩøÁî®<code>context.createPattern</code>ÔºåËøô‰∏™apiÊòØÂèØ‰ª•ÈÄöËøácanvasÂàõÂª∫‰∏Ä‰∏™ÊåáÂÆöÁöÑÊ®°ÁâàÔºåÁÑ∂ÂêéÂèØ‰ª•ËÆ©Ëøô‰∏™Ê®°ÁâàÂú®ÊåáÂÆöÁöÑÊñπÂêë‰∏äÈáçÂ§çÂÖÉÂõæÂÉèÔºåÂÖ∑‰Ωì‰ΩøÁî®ÂèØ‰ª•Áúã<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern">MDN</a></p>
<p><img src="https://s1.ax1x.com/2022/12/17/zH58UO.png"></p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ëá™Áî±ÁîªÁ¨îÊ∏≤Êüì</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> * <span class="doctag">@param</span> instance FreeDraw</span>
<span class="comment"> * <span class="doctag">@param</span> material ÁîªÁ¨îÁ¥†Êùê</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">freeDrawRender</span> = (<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  material: Material</span>
<span class="params"></span>) =&gt; &#123;
  context.<span class="title function_">save</span>()
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
  <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
    <span class="comment">// ...</span>
    <span class="comment">// Â§öËâ≤ÁîªÁ¨î</span>
    <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">MultiColor</span>:
      context.<span class="property">strokeStyle</span> = <span class="title function_">getMultiColorPattern</span>(instance.<span class="property">colors</span>)
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;

  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; instance.<span class="property">positions</span>.<span class="property">length</span>; i++) &#123;
    <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
      <span class="comment">// ...</span>
      <span class="comment">// Â§öËâ≤ÁîªÁ¨î</span>
      <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">MultiColor</span>:
        <span class="title function_">_drawBasic</span>(instance, i, context)
        <span class="keyword">break</span>
      <span class="attr">default</span>:
        <span class="keyword">break</span>
    &#125;
  &#125;
  context.<span class="title function_">restore</span>()
&#125;

<span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÂ§öËâ≤Ê®°Áâà</span>
<span class="comment"> * <span class="doctag">@param</span> colors Â§öËâ≤Êï∞ÁªÑ</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="title function_">getMultiColorPattern</span> = (<span class="params">colors: string[]</span>) =&gt; &#123;
  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)
  <span class="keyword">const</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>) <span class="keyword">as</span> <span class="title class_">CanvasRenderingContext2D</span>
  <span class="keyword">const</span> <span class="variable constant_">COLOR_WIDTH</span> = <span class="number">5</span> <span class="comment">// ÊØè‰∏™È¢úËâ≤ÁöÑÂÆΩÂ∫¶</span>

  canvas.<span class="property">width</span> = <span class="variable constant_">COLOR_WIDTH</span> * colors.<span class="property">length</span>
  canvas.<span class="property">height</span> = <span class="number">20</span>
  colors.<span class="title function_">forEach</span>(<span class="function">(<span class="params">color, i</span>) =&gt;</span> &#123;
    context.<span class="property">fillStyle</span> = color
    context.<span class="title function_">fillRect</span>(<span class="variable constant_">COLOR_WIDTH</span> * i, <span class="number">0</span>, <span class="variable constant_">COLOR_WIDTH</span>, <span class="number">20</span>)
  &#125;)
  <span class="keyword">return</span> context.<span class="title function_">createPattern</span>(canvas, <span class="string">&#x27;repeat&#x27;</span>) <span class="keyword">as</span> <span class="title class_">CanvasPattern</span>
&#125;</code></pre>

<h2 id="Âñ∑Èõæ"><a href="#Âñ∑Èõæ" class="headerlink" title="Âñ∑Èõæ"></a>Âñ∑Èõæ</h2><p>Âñ∑ÈõæÊòØ‰∏ÄÁßçÁ±ª‰ººÈõ™Ëä±ÁöÑÊïàÊûúÔºåÂú®Èº†Ê†áÁßªÂä®Ë∑ØÂæÑ‰∏äÈöèÊú∫ÁªòÂà∂Ôºå‰ΩÜÊòØÊúÄÂàùÊàëÂú®ÂÜôÁöÑÊó∂ÂÄôÂèëÁé∞ÔºåÂ¶ÇÊûúÂØπÊØè‰∏™ÁÇπÈÉΩËøõË°åÈöèÊú∫Èõ™Ëä±ÁÇπËÆ∞ÂΩïÁÑ∂ÂêéÁºìÂ≠ò‰∏ãÊù•ÔºåÂÜÖÂ≠òÂç†Áî®ËøáÂ§öÔºåÊàëÂ∞±Â∞ùËØï‰∫ÜÊèêÂâçÁîüÊàê5Â•ó‰∏çÂêåÁöÑÊï∞ÊçÆÔºåÊåâÈ°∫Â∫èÂ±ïÁ§∫Ôºå‰πüËÉΩËææÂà∞ÈöèÊú∫ÁöÑÊïàÊûú</p>
<p><img src="https://s1.ax1x.com/2022/12/17/zH5N2d.png"></p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">freeDrawRender</span> = (<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  material: Material</span>
<span class="params"></span>) =&gt; &#123;
  context.<span class="title function_">save</span>()
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
  <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
    <span class="comment">// ...</span>
    <span class="comment">// Âñ∑Èõæ</span>
    <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Spray</span>:
      context.<span class="property">fillStyle</span> = instance.<span class="property">colors</span>[<span class="number">0</span>]
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;

  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; instance.<span class="property">positions</span>.<span class="property">length</span>; i++) &#123;
    <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
      <span class="comment">// ...</span>
      <span class="comment">// Âñ∑Èõæ</span>
      <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Spray</span>:
        <span class="title function_">_drawSpray</span>(instance, i, context)
        <span class="keyword">break</span>
      <span class="attr">default</span>:
        <span class="keyword">break</span>
    &#125;
  &#125;
  context.<span class="title function_">restore</span>()
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÁªòÂà∂Âñ∑Èõæ</span>
<span class="comment"> * <span class="doctag">@param</span> instance FreeDraw ÂÆû‰æã</span>
<span class="comment"> * <span class="doctag">@param</span> i ‰∏ãÊ†á</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="title function_">_drawSpray</span> = (<span class="params"></span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  i: number,</span>
<span class="params">  context: CanvasRenderingContext2D</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> &#123; x, y &#125; = instance.<span class="property">positions</span>[i]
  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">50</span>; j++) &#123;
    <span class="comment">/**</span>
<span class="comment">     * sprayPoint ÊòØÊàëÊèêÂâçÁîüÊàêÁöÑ5Â•óÈöèÊú∫Âñ∑ÈõæÊï∞ÊçÆÔºåÊåâÈ°∫Â∫èÂ±ïÁ§∫</span>
<span class="comment">     * &#123;</span>
<span class="comment">     *    angle ÂºßÂ∫¶</span>
<span class="comment">     *    radius ÂçäÂæÑ</span>
<span class="comment">     *    alpha ÈÄèÊòéÂ∫¶</span>
<span class="comment">     * &#125;</span>
<span class="comment">     */</span>
    <span class="keyword">const</span> &#123; angle, radius, alpha &#125; = sprayPoint[i % <span class="number">5</span>][j]
    context.<span class="property">globalAlpha</span> = alpha
    <span class="keyword">const</span> distanceX = radius * <span class="title class_">Math</span>.<span class="title function_">cos</span>(angle)
    <span class="keyword">const</span> distanceY = radius * <span class="title class_">Math</span>.<span class="title function_">sin</span>(angle)
    <span class="comment">// Ê†πÊçÆÂÆΩÂ∫¶ÈôêÂà∂Âñ∑ÈõæÂÆΩÂ∫¶ÔºåÂõ†‰∏∫Âñ∑ÈõæÂ§™ÁªÜ‰∫Ü‰∏çÂ•ΩÁúãÔºåÊàëÂ∞±Áªü‰∏ÄÊîæÂ§ß‰∏ÄÂÄç</span>
    <span class="keyword">if</span> (
      distanceX &lt; instance.<span class="property">lineWidths</span>[i] * <span class="number">2</span> &amp;&amp;
      distanceY &lt; instance.<span class="property">lineWidths</span>[i] * <span class="number">2</span> &amp;&amp;
      distanceX &gt; -instance.<span class="property">lineWidths</span>[i] * <span class="number">2</span> &amp;&amp;
      distanceY &gt; -instance.<span class="property">lineWidths</span>[i] * <span class="number">2</span>
    ) &#123;
      context.<span class="title function_">fillRect</span>(x + distanceX, y + distanceY, <span class="number">2</span>, <span class="number">2</span>)
    &#125;
  &#125;
&#125;</code></pre>

<h2 id="Ëú°Á¨î"><a href="#Ëú°Á¨î" class="headerlink" title="Ëú°Á¨î"></a>Ëú°Á¨î</h2><p>Ëú°Á¨îÊïàÊûú‰πüÊòØ‰ΩøÁî®‰∫Ü<code>context.createPattern</code>ÔºåÈ¶ñÂÖàÊàëÊòØ‰ª•ÂΩìÂâçÁîªÁ¨îÈ¢úËâ≤‰∏∫Â∫ïËâ≤ÔºåÁÑ∂ÂêéÈÄöËøáÂú®ÁΩë‰∏äÊâæÁöÑ‰∏ÄÂº†Ëú°Á¨îÊùêË¥®ÁöÑÈÄèÊòéÂõæË¶ÜÁõñÂú®‰∏äÈù¢ÔºåÂ∞±ÂèØ‰ª•ÂÆûÁé∞Ëú°Á¨îÁöÑÊïàÊûú</p>
<p><img src="https://s1.ax1x.com/2022/12/17/zH5G5D.png"></p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ëá™Áî±ÁîªÁ¨îÊ∏≤Êüì</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> * <span class="doctag">@param</span> instance FreeDraw</span>
<span class="comment"> * <span class="doctag">@param</span> material ÁîªÁ¨îÁ¥†Êùê</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">freeDrawRender</span> = (<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  material: Material</span>
<span class="params"></span>) =&gt; &#123;
  context.<span class="title function_">save</span>()
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
  <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
    <span class="comment">// ...</span>
    <span class="comment">// Ëú°Á¨î</span>
    <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Crayon</span>:
      context.<span class="property">strokeStyle</span> = <span class="title function_">getCrayonPattern</span>(
        instance.<span class="property">colors</span>[<span class="number">0</span>],
        material.<span class="property">crayon</span>
      )
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;

  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; instance.<span class="property">positions</span>.<span class="property">length</span>; i++) &#123;
    <span class="keyword">switch</span> (instance.<span class="property">style</span>) &#123;
      <span class="comment">// ...</span>
      <span class="comment">// Ëú°Á¨î</span>
      <span class="keyword">case</span> <span class="title class_">FreeDrawStyle</span>.<span class="property">Crayon</span>:
        <span class="title function_">_drawBasic</span>(instance, i, context)
        <span class="keyword">break</span>
      <span class="attr">default</span>:
        <span class="keyword">break</span>
    &#125;
  &#125;
  context.<span class="title function_">restore</span>()
&#125;

<span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñËú°Á¨îÊ®°Áâà</span>
<span class="comment"> * <span class="doctag">@param</span> color Ëú°Á¨îÂ∫ïËâ≤</span>
<span class="comment"> * <span class="doctag">@param</span> crayon Ëú°Á¨îÁ¥†Êùê</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="title function_">getCrayonPattern</span> = (<span class="params">color: string, crayon: Material[<span class="string">&#x27;crayon&#x27;</span>]</span>) =&gt; &#123;
  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)
  <span class="keyword">const</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>) <span class="keyword">as</span> <span class="title class_">CanvasRenderingContext2D</span>
  canvas.<span class="property">width</span> = <span class="number">100</span>
  canvas.<span class="property">height</span> = <span class="number">100</span>
  context.<span class="property">fillStyle</span> = color
  context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)
  <span class="keyword">if</span> (crayon) &#123;
    context.<span class="title function_">drawImage</span>(crayon, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)
  &#125;
  <span class="keyword">return</span> context.<span class="title function_">createPattern</span>(canvas, <span class="string">&#x27;repeat&#x27;</span>) <span class="keyword">as</span> <span class="title class_">CanvasPattern</span>
&#125;</code></pre>

<h2 id="Ê≥°Ê≥°"><a href="#Ê≥°Ê≥°" class="headerlink" title="Ê≥°Ê≥°"></a>Ê≥°Ê≥°</h2><ol>
<li>Èº†Ê†áÁßªÂä®Êó∂ËÆ∞ÂΩïÊ≥°Ê≥°ÁöÑÂçäÂæÑÂíåÈÄèÊòéÂ∫¶</li>
<li>Ê∏≤ÊüìÊó∂ÈÄöËøá<code>context.arc</code>ËøõË°åÁîªÂúÜÁªòÂà∂</li>
</ol>
<p><img src="https://s1.ax1x.com/2022/12/17/zH5t8H.png"></p>
<pre><code class="highlight js"><span class="title function_">addPosition</span>(<span class="params">position: MousePosition</span>) &#123;
  <span class="comment">// ...</span>
  <span class="comment">// ËÆ∞ÂΩïÊ≥°Ê≥°ÂçäÂæÑÂíåÈÄèÊòéÂ∫¶</span>
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">style</span> === <span class="title class_">FreeDrawStyle</span>.<span class="property">Bubble</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">bubbles</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">bubbles</span>.<span class="title function_">push</span>(&#123;
      <span class="comment">// getRandomInt Ëé∑ÂèñËåÉÂõ¥ÂÜÖÈöèÊú∫Êï¥Êï∞</span>
      <span class="attr">radius</span>: <span class="title function_">getRandomInt</span>(<span class="variable language_">this</span>.<span class="property">minWidth</span> * <span class="number">2</span>, <span class="variable language_">this</span>.<span class="property">maxWidth</span> * <span class="number">2</span>),
      <span class="comment">// ÈÄèÊòéÂ∫¶</span>
      <span class="attr">opacity</span>: <span class="title class_">Math</span>.<span class="title function_">random</span>()
    &#125;)
  &#125;
  <span class="comment">// ...</span>
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÁªòÂà∂Ê≥°Ê≥°</span>
<span class="comment"> * <span class="doctag">@param</span> instance FreeDraw ÂÆû‰æã</span>
<span class="comment"> * <span class="doctag">@param</span> i ‰∏ãÊ†á</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="title function_">_drawBubble</span> = (<span class="params"></span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  i: number,</span>
<span class="params">  context: CanvasRenderingContext2D</span>
<span class="params"></span>) =&gt; &#123;
  context.<span class="title function_">beginPath</span>()
  <span class="keyword">if</span> (instance.<span class="property">bubbles</span>) &#123;
    <span class="keyword">const</span> &#123; x, y &#125; = instance.<span class="property">positions</span>[i]
    context.<span class="property">globalAlpha</span> = instance.<span class="property">bubbles</span>[i].<span class="property">opacity</span>
    context.<span class="title function_">arc</span>(x, y, instance.<span class="property">bubbles</span>[i].<span class="property">radius</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>, <span class="literal">false</span>)
    context.<span class="title function_">fill</span>()
  &#125;
&#125;</code></pre>

<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>Â¶ÇÊûúÊúâÂèëÁé∞ÈóÆÈ¢òÊàñËÄÖÊúâÂ•ΩÁöÑÊñπÊ°àÔºåÊ¨¢ËøéËÆ®ËÆ∫üëª</p>
<p>ÁîªÊùøÁ≥ªÂàóÊñáÁ´†Ôºö</p>
<ul>
<li><a href="https://songlh.top/2022/09/21/%E5%9F%BA%E4%BA%8Ecanvas%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%A4%9A%E5%8A%9F%E8%83%BD%E7%94%BB%E6%9D%BF/">Âü∫‰∫écanvasÂÆûÁé∞ÁöÑÂ§öÂäüËÉΩÁîªÊùø</a></li>
<li><a href="https://songlh.top/2022/12/05/canvas%E7%94%BB%E6%9D%BF%E4%B9%8B%E7%BB%98%E7%94%BB%E5%85%83%E7%B4%A0%E7%9A%84%E6%A1%86%E9%80%89/">canvasÁîªÊùø‰πãÁªòÁîªÂÖÉÁ¥†ÁöÑÊ°ÜÈÄâ</a></li>
</ul>
<h2 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h2><ul>
<li><a href="http://perfectionkills.com/exploring-canvas-drawing-techniques/">Exploring canvas drawing techniques</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>canvas</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3Ê®°ÁâàÁºñËØëÂéüÁêÜ</title>
    <url>/2022/08/31/Vue3%E6%A8%A1%E7%89%88%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<h2 id="Ê®°ÁâàÁºñËØëÊµÅÁ®ã"><a href="#Ê®°ÁâàÁºñËØëÊµÅÁ®ã" class="headerlink" title="Ê®°ÁâàÁºñËØëÊµÅÁ®ã"></a>Ê®°ÁâàÁºñËØëÊµÅÁ®ã</h2><p>Vue3Ê®°ÁâàÁºñËØëÂ∞±ÊòØÊäätemplateÂ≠óÁ¨¶‰∏≤ÁºñËØëÊàêÊ∏≤ÊüìÂáΩÊï∞</p>
<pre><code class="highlight js"><span class="comment">// template</span>
&lt;div&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;LH_R&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>&lt;/div&gt;

<span class="comment">// render</span>
<span class="keyword">import</span> &#123; toDisplayString <span class="keyword">as</span> _toDisplayString, createElementVNode <span class="keyword">as</span> _createElementVNode, openBlock <span class="keyword">as</span> _openBlock, createElementBlock <span class="keyword">as</span> _createElementBlock &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>

<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;
  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createElementBlock</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, [
    <span class="title function_">_createElementVNode</span>(<span class="string">&quot;p&quot;</span>, <span class="literal">null</span>, <span class="title function_">_toDisplayString</span>(_ctx.<span class="property">LH_R</span>), <span class="number">1</span> <span class="comment">/* TEXT */</span>)
  ]))
&#125;</code></pre>

<p>Êàë‰ºöÊåâÁÖßÁºñËØëÊµÅÁ®ãÂàÜ3Ê≠•ÂàÜÊûê</p>
<ol>
<li><strong>parse</strong>ÔºöÂ∞ÜÊ®°ÁâàÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢ÊàêÊ®°ÁâàAST</li>
<li><strong>transform</strong>ÔºöÂ∞ÜÊ®°ÁâàASTËΩ¨Êç¢‰∏∫Áî®‰∫éÊèèËø∞Ê∏≤ÊüìÂáΩÊï∞ÁöÑAST</li>
<li><strong>generate</strong>ÔºöÊ†πÊçÆASTÁîüÊàêÊ∏≤ÊüìÂáΩÊï∞<pre><code class="highlight ts"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">baseCompile</span>(<span class="params"></span>
<span class="params">  template: <span class="built_in">string</span> | RootNode,</span>
<span class="params">  options: CompilerOptions = &#123;&#125;</span>
<span class="params"></span>): <span class="title class_">CodegenResult</span> &#123;
  <span class="comment">// ...</span>
  <span class="keyword">const</span> ast = <span class="title function_">isString</span>(template) ? <span class="title function_">baseParse</span>(template, options) : template

  <span class="keyword">const</span> [nodeTransforms, directiveTransforms] = <span class="title function_">getBaseTransformPreset</span>(
    prefixIdentifiers
  )
  <span class="title function_">transform</span>(
    ast,
    <span class="title function_">extend</span>(&#123;&#125;, options, &#123;
      prefixIdentifiers,
      <span class="attr">nodeTransforms</span>: [
        ...nodeTransforms,
        ...(options.<span class="property">nodeTransforms</span> || []) <span class="comment">// user transforms</span>
      ],
      <span class="attr">directiveTransforms</span>: <span class="title function_">extend</span>(
        &#123;&#125;,
        directiveTransforms,
        options.<span class="property">directiveTransforms</span> || &#123;&#125; <span class="comment">// user transforms</span>
      )
    &#125;)
  )

  <span class="keyword">return</span> <span class="title function_">generate</span>(
    ast,
    <span class="title function_">extend</span>(&#123;&#125;, options, &#123;
      prefixIdentifiers
    &#125;)
  )
&#125;</code></pre></li>
</ol>
<h2 id="parse"><a href="#parse" class="headerlink" title="parse"></a>parse</h2><ul>
<li><p>parseÂØπÊ®°ÁâàÂ≠óÁ¨¶‰∏≤ËøõË°åÈÅçÂéÜÔºåÁÑ∂ÂêéÂæ™ÁéØÂà§Êñ≠ÂºÄÂßãÊ†áÁ≠æÂíåÁªìÊùüÊ†áÁ≠æÊääÂ≠óÁ¨¶‰∏≤ÂàÜÂâ≤Êàê‰∏Ä‰∏™‰∏™<strong>token</strong>ÔºåÂ≠òÂú®‰∏Ä‰∏™tokenÂàóË°®ÔºåÁÑ∂ÂêéÊâ´ÊèètokenÂàóË°®Âπ∂Áª¥Êä§‰∏Ä‰∏™ÂºÄÂßãÊ†áÁ≠æÊ†àÔºåÊØèÂΩìÊâ´Êèè‰∏Ä‰∏™ÂºÄÂßãÊ†áÁ≠æËäÇÁÇπÔºåÂ∞±Â∞ÜÂÖ∂ÂéãÂÖ•Ê†àÈ°∂ÔºåÊ†àÈ°∂ÁöÑËäÇÁÇπÂßãÁªà‰Ωú‰∏∫‰∏ã‰∏Ä‰∏™Êâ´ÊèèÁöÑËäÇÁÇπÁöÑÁà∂ËäÇÁÇπ„ÄÇËøôÊ†∑ÔºåÂΩìÊâÄÊúâTokenÊâ´ÊèèÂÆåÊàêÂêéÔºåÂç≥ÂèØÊûÑÂª∫Êàê‰∏ÄÈ¢óÊ†ëÂΩ¢AST</p>
</li>
<li><p>‰ª•‰∏ãÊòØÁÆÄÂåñÁâà<strong>parseChildren</strong>Ê∫êÁ†ÅÔºåÊòØparseÁöÑ‰∏ªÂÖ•Âè£</p>
<pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">parseChildren</span>(<span class="params"></span>
<span class="params">  context: ParserContext,</span>
<span class="params">  mode: TextModes,</span>
<span class="params">  ancestors: ElementNode[] <span class="comment">// ËäÇÁÇπÊ†àÁªìÊûÑÔºåÁî®‰∫éÁª¥Êä§ËäÇÁÇπÂµåÂ•óÂÖ≥Á≥ª</span></span>
<span class="params"></span>): <span class="title class_">TemplateChildNode</span>[] &#123;
  <span class="comment">// Ëé∑ÂèñÁà∂ËäÇÁÇπ</span>
  <span class="keyword">const</span> parent = <span class="title function_">last</span>(ancestors)
  <span class="keyword">const</span> ns = parent ? parent.<span class="property">ns</span> : <span class="title class_">Namespaces</span>.<span class="property">HTML</span>
  <span class="keyword">const</span> <span class="attr">nodes</span>: <span class="title class_">TemplateChildNode</span>[] = [] <span class="comment">// Â≠òÂÇ®Ëß£ÊûêÂá∫Êù•ÁöÑASTÂ≠êËäÇÁÇπ</span>

  <span class="comment">// ÈÅáÂà∞Èó≠ÂêàÊ†áÁ≠æÁªìÊùüËß£Êûê</span>
  <span class="keyword">while</span> (!<span class="title function_">isEnd</span>(context, mode, ancestors)) &#123;
    <span class="comment">// ÂàáÂâ≤Â§ÑÁêÜÁöÑÊ®°ÁâàÂ≠óÁ¨¶‰∏≤</span>
    <span class="keyword">const</span> s = context.<span class="property">source</span>
    <span class="keyword">let</span> <span class="attr">node</span>: <span class="title class_">TemplateChildNode</span> | <span class="title class_">TemplateChildNode</span>[] | <span class="literal">undefined</span> = <span class="literal">undefined</span>

    <span class="keyword">if</span> (mode === <span class="title class_">TextModes</span>.<span class="property">DATA</span> || mode === <span class="title class_">TextModes</span>.<span class="property">RCDATA</span>) &#123;
      <span class="keyword">if</span> (!context.<span class="property">inVPre</span> &amp;&amp; <span class="title function_">startsWith</span>(s, context.<span class="property">options</span>.<span class="property">delimiters</span>[<span class="number">0</span>])) &#123;
        <span class="comment">// Ëß£ÊûêÊèíÂÄºË°®ËææÂºè&#123;&#123;&#125;&#125;</span>
        node = parseInterpolation(context, mode)
      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mode === <span class="title class_">TextModes</span>.<span class="property">DATA</span> &amp;&amp; s[<span class="number">0</span>] === <span class="string">&#x27;&lt;&#x27;</span>) &#123;
        <span class="keyword">if</span> (s[<span class="number">1</span>] === <span class="string">&#x27;!&#x27;</span>) &#123;
          <span class="comment">// Ëß£ÊûêÊ≥®ÈáäËäÇÁÇπÂíåÊñáÊ°£Â£∞Êòé...</span>
        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s[<span class="number">1</span>] === <span class="string">&#x27;/&#x27;</span>) &#123;
          <span class="keyword">if</span> (s[<span class="number">2</span>] === <span class="string">&#x27;&gt;&#x27;</span>) &#123;
            <span class="comment">// ÈíàÂØπËá™Èó≠ÂêàÊ†áÁ≠æÔºåÂâçËøõ‰∏â‰∏™Â≠óÁ¨¶</span>
            <span class="title function_">advanceBy</span>(context, <span class="number">3</span>)
            <span class="keyword">continue</span>
          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/[a-z]/i</span>.<span class="title function_">test</span>(s[<span class="number">2</span>])) &#123;
            <span class="comment">// Ëß£ÊûêÁªìÊùüÊ†áÁ≠æ</span>
            <span class="title function_">parseTag</span>(context, <span class="title class_">TagType</span>.<span class="property">End</span>, parent)
            <span class="keyword">continue</span>
          &#125; <span class="keyword">else</span> &#123;
            <span class="comment">// Â¶ÇÊûú‰∏çÁ¨¶Âêà‰∏äËø∞ÊÉÖÂÜµÔºåÂ∞±‰Ωú‰∏∫‰º™Ê≥®ÈáäËß£Êûê</span>
            node = <span class="title function_">parseBogusComment</span>(context)
          &#125;
        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="regexp">/[a-z]/i</span>.<span class="title function_">test</span>(s[<span class="number">1</span>])) &#123;
          <span class="comment">// Ëß£ÊûêhtmlÂºÄÂßãÊ†áÁ≠æÔºåËé∑ÂæóËß£ÊûêÂà∞ÁöÑASTËäÇÁÇπ</span>
          node = <span class="title function_">parseElement</span>(context, ancestors)
        &#125;
      &#125;
    &#125;
    <span class="keyword">if</span> (!node) &#123;
      <span class="comment">// ÊôÆÈÄöÊñáÊú¨ËäÇÁÇπ</span>
      node = <span class="title function_">parseText</span>(context, mode)
    &#125;

    <span class="comment">// Â¶ÇÊûúËäÇÁÇπÊòØÊï∞ÁªÑÔºåÂ∞±ÈÅçÂéÜÊ∑ªÂä†Âà∞nodes‰∏≠</span>
    <span class="keyword">if</span> (<span class="title function_">isArray</span>(node)) &#123;
      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; node.<span class="property">length</span>; i++) &#123;
        <span class="title function_">pushNode</span>(nodes, node[i])
      &#125;
    &#125; <span class="keyword">else</span> &#123;
      <span class="title function_">pushNode</span>(nodes, node)
    &#125;
  &#125;
  <span class="keyword">return</span> nodes
&#125;</code></pre>
</li>
<li><p>Â∞±Êãø<code>&lt;div&gt;&lt;p&gt;LH_R&lt;/p&gt;&lt;/div&gt;</code>ÊµÅÁ®ã‰∏æ‰æã</p>
</li>
</ul>
<ol>
<li>divÂºÄÂßãÊ†áÁ≠æÂÖ•Ê†àÔºåcontext.source &#x3D; <code>&lt;p&gt;LH_R&lt;/p&gt;&lt;/div&gt;</code>Ôºåancestors &#x3D; <code>[div]</code></li>
<li>pÂºÄÂßãÊ†áÁ≠æÂÖ•Ê†àÔºåcontext.source &#x3D; <code>LH_R&lt;/p&gt;&lt;/div&gt;</code>Ôºåancestors &#x3D; <code>[div, p]</code></li>
<li>Ëß£ÊûêÊñáÊú¨<code>LH_R</code></li>
<li>Ëß£ÊûêpÁªìÊùüÊ†áÁ≠æÔºåpÊ†áÁ≠æÂá∫Ê†à</li>
<li>Ëß£ÊûêdivÁªìÊùüÊ†áÁ≠æÔºådivÊ†áÁ≠æÂá∫Ê†à</li>
<li>Ê†àÁ©∫ÔºåÊ®°ÁâàËß£ÊûêÂÆåÊØï</li>
</ol>
<h2 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h2><ul>
<li>transformÈááÁî®Ê∑±Â∫¶‰ºòÂÖàÁöÑÊñπÂºèÂØπASTËøõË°åÈÅçÂéÜÔºåÂú®ÈÅçÂéÜËøáÁ®ã‰∏≠ÔºåÂØπËäÇÁÇπÁöÑÊìç‰Ωú‰∏éËΩ¨Êç¢ÈááÁî®Êèí‰ª∂ÂåñÊû∂ÊûÑÔºåÈÉΩÂ∞ÅË£Ö‰∏∫Áã¨Á´ãÁöÑÂáΩÊï∞ÔºåÁÑ∂ÂêéËΩ¨Êç¢ÂáΩÊï∞ÈÄöËøá<code>context.nodeTransforms</code>Êù•Ê≥®ÂÜå</li>
<li>ËΩ¨Êç¢ËøáÁ®ãÊòØ‰ºòÂÖàËΩ¨Êç¢Â≠êËäÇÁÇπÔºåÂõ†‰∏∫ÊúâÁöÑÁà∂ËäÇÁÇπÁöÑËΩ¨Êç¢‰æùËµñÂ≠êËäÇÁÇπ</li>
<li>‰ª•‰∏ãÊòØASTÈÅçÂéÜ<code>traverseNode</code>Ê†∏ÂøÉÊ∫êÁ†Å<pre><code class="highlight ts"><span class="comment">/* </span>
<span class="comment">  ÈÅçÂéÜASTËäÇÁÇπÊ†ëÔºåÈÄöËøánodeËΩ¨Êç¢Âô®ÂØπÂΩìÂâçËäÇÁÇπËøõË°ånodeËΩ¨Êç¢</span>
<span class="comment">  Â≠êËäÇÁÇπÂÖ®ÈÉ®ÈÅçÂéÜÂÆåÊàêÂêéÊâßË°åÂØπÂ∫îÊåá‰ª§ÁöÑonExitÂõûË∞ÉÈÄÄÂá∫ËΩ¨Êç¢</span>
<span class="comment">*/</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">traverseNode</span>(<span class="params"></span>
<span class="params">  node: RootNode | TemplateChildNode,</span>
<span class="params">  context: TransformContext</span>
<span class="params"></span>) &#123;
  <span class="comment">// ËÆ∞ÂΩïÂΩìÂâçÊ≠£Âú®ÈÅçÂéÜÁöÑËäÇÁÇπ</span>
  context.<span class="property">currentNode</span> = node

  <span class="comment">/* </span>
<span class="comment">    nodeTransformsÔºötransformElement„ÄÅtransformExpression„ÄÅtransformText...</span>
<span class="comment">    transformElementÔºöË¥üË¥£Êï¥‰∏™ËäÇÁÇπÂ±ÇÈù¢ÁöÑËΩ¨Êç¢</span>
<span class="comment">    transformExpressionÔºöË¥üË¥£ËäÇÁÇπ‰∏≠Ë°®ËææÂºèÁöÑËΩ¨Âåñ</span>
<span class="comment">    transformTextÔºöË¥üË¥£ËäÇÁÇπ‰∏≠ÊñáÊú¨ÁöÑËΩ¨Êç¢</span>
<span class="comment">  */</span>
  <span class="keyword">const</span> &#123; nodeTransforms &#125; = context
  <span class="keyword">const</span> exitFns = []
  <span class="comment">// ‰æùÊ¨°Ë∞ÉÁî®ËΩ¨Êç¢Â∑•ÂÖ∑</span>
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nodeTransforms.<span class="property">length</span>; i++) &#123;
    <span class="comment">/* </span>
<span class="comment">      ËΩ¨Êç¢Âô®Âè™Ë¥üË¥£ÁîüÊàêonExitÂõûË∞ÉÔºåonExitÂáΩÊï∞ÊâçÊòØÊâßË°åËΩ¨Êç¢‰∏ªÈÄªËæëÁöÑÂú∞ÊñπÔºå‰∏∫‰ªÄ‰πàË¶ÅÊé®Âà∞Ê†à‰∏≠ÂÖà‰∏çÊâßË°åÂë¢Ôºü</span>
<span class="comment">      Âõ†‰∏∫Ë¶ÅÁ≠âÂà∞Â≠êËäÇÁÇπÈÉΩËΩ¨Êç¢ÂÆåÊàêÊåÇËΩΩgencodeNodeÂêéÔºå‰πüÂ∞±ÊòØÊ∑±Â∫¶ÈÅçÂéÜÂÆåÊàêÂêé</span>
<span class="comment">      ÂÜçÊâßË°åÂΩìÂâçËäÇÁÇπÊ†à‰∏≠ÁöÑonExitÔºåËøôÊ†∑‰øùËØÅ‰∫ÜÂ≠êËäÇÁÇπÁöÑË°®ËææÂºèÂÖ®ÈÉ®ÁîüÊàêÂÆåÊØï</span>
<span class="comment">    */</span>
    <span class="keyword">const</span> onExit = nodeTransforms[i](node, context)
    <span class="keyword">if</span> (onExit) &#123;
      <span class="keyword">if</span> (<span class="title function_">isArray</span>(onExit)) &#123;
        <span class="comment">// v-if„ÄÅv-for‰∏∫ÁªìÊûÑÂåñÊåá‰ª§ÔºåÂÖ∂onExitÊòØÊï∞ÁªÑÂΩ¢Âºè</span>
        exitFns.<span class="title function_">push</span>(...onExit)
      &#125; <span class="keyword">else</span> &#123;
        exitFns.<span class="title function_">push</span>(onExit)
      &#125;
    &#125;
    <span class="keyword">if</span> (!context.<span class="property">currentNode</span>) &#123;
      <span class="comment">// node was removed ËäÇÁÇπË¢´ÁßªÈô§</span>
      <span class="keyword">return</span>
    &#125; <span class="keyword">else</span> &#123;
      <span class="comment">// node may have been replaced</span>
      <span class="comment">// Âõ†‰∏∫Âú®ËΩ¨Êç¢ÁöÑËøáÁ®ã‰∏≠ËäÇÁÇπÂèØËÉΩË¢´ÊõøÊç¢ÔºåÊÅ¢Â§çÂà∞‰πãÂâçÁöÑËäÇÁÇπ</span>
      node = context.<span class="property">currentNode</span>
    &#125;
  &#125;

  <span class="keyword">switch</span> (node.<span class="property">type</span>) &#123;
    <span class="keyword">case</span> <span class="title class_">NodeTypes</span>.<span class="property">COMMENT</span>:
      <span class="keyword">if</span> (!context.<span class="property">ssr</span>) &#123;
        <span class="comment">// inject import for the Comment symbol, which is needed for creating</span>
        <span class="comment">// comment nodes with `createVNode`</span>
        <span class="comment">// ÈúÄË¶ÅÂØºÂÖ•createCommentËæÖÂä©ÂáΩÊï∞</span>
        context.<span class="title function_">helper</span>(<span class="variable constant_">CREATE_COMMENT</span>)
      &#125;
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="title class_">NodeTypes</span>.<span class="property">INTERPOLATION</span>:
      <span class="comment">// no need to traverse, but we need to inject toString helper</span>
      <span class="keyword">if</span> (!context.<span class="property">ssr</span>) &#123;
        context.<span class="title function_">helper</span>(<span class="variable constant_">TO_DISPLAY_STRING</span>)
      &#125;
      <span class="keyword">break</span>

    <span class="comment">// for container types, further traverse downwards</span>
    <span class="keyword">case</span> <span class="title class_">NodeTypes</span>.<span class="property">IF</span>:
      <span class="comment">// ÂØπv-ifÁîüÊàêÁöÑËäÇÁÇπÊùüËøõË°åÈÅçÂéÜ</span>
      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; node.<span class="property">branches</span>.<span class="property">length</span>; i++) &#123;
        <span class="title function_">traverseNode</span>(node.<span class="property">branches</span>[i], context)
      &#125;
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="title class_">NodeTypes</span>.<span class="property">IF_BRANCH</span>:
    <span class="keyword">case</span> <span class="title class_">NodeTypes</span>.<span class="property">FOR</span>:
    <span class="keyword">case</span> <span class="title class_">NodeTypes</span>.<span class="property">ELEMENT</span>:
    <span class="keyword">case</span> <span class="title class_">NodeTypes</span>.<span class="property">ROOT</span>:
      <span class="comment">// ÈÅçÂéÜÂ≠êËäÇÁÇπ</span>
      <span class="title function_">traverseChildren</span>(node, context)
      <span class="keyword">break</span>
  &#125;
  <span class="comment">// ÂΩìÂâçËäÇÁÇπÊ†ëÈÅçÂéÜÂÆåÊàêÔºå‰æùÊ¨°ÊâßË°åÊ†à‰∏≠ÁöÑÊåá‰ª§ÈÄÄÂá∫ÂõûË∞ÉonExit</span>
  context.<span class="property">currentNode</span> = node
  <span class="keyword">let</span> i = exitFns.<span class="property">length</span>
  <span class="keyword">while</span> (i--) &#123;
    exitFns[i]()
  &#125;
&#125;</code></pre></li>
</ul>
<h2 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h2><p><code>generate</code>ÁîüÊàê‰ª£Á†ÅÂ§ßËá¥ÂàÜ‰∏∫3Ê≠•</p>
<ol>
<li>ÂàõÂª∫‰ª£Á†ÅÁîüÊàê‰∏ä‰∏ãÊñáÔºåÂõ†‰∏∫ËØ•‰∏ä‰∏ãÊñáÂØπË±°ÊòØÁî®‰∫éÁª¥Êä§‰ª£Á†ÅÁîüÊàêËøáÁ®ã‰∏≠Á®ãÂ∫èÁöÑËøêË°åÁä∂ÊÄÅÔºåÂ¶ÇÔºö</li>
</ol>
<ul>
<li><code>code</code>ÔºöÊúÄÁªàÁîüÊàêÁöÑÊ∏≤ÊüìÂáΩÊï∞</li>
<li><code>push</code>ÔºöÊãºÊé•‰ª£Á†Å</li>
<li><code>indent</code>Ôºö‰ª£Á†ÅÁº©Ëøõ</li>
<li><code>deindent</code>ÔºöÂáèÂ∞ë‰ª£Á†ÅÁº©Ëøõ</li>
<li>‚Ä¶</li>
</ul>
<ol start="2">
<li>ÁîüÊàêÊ∏≤ÊüìÂáΩÊï∞ÁöÑÂâçÁΩÆÈ¢ÑËÆæÈÉ®ÂàÜ<ul>
<li>moduleÊ®°Âºè‰∏ãÔºö<code>genModulePreamble()</code></li>
<li>functionÊ®°Âºè‰∏ãÔºö<code>genFunctionPreamble</code></li>
<li>ËøòÊúâ‰∏Ä‰∫õÂáΩÊï∞ÂêçÔºåÂèÇÊï∞Ôºå‰ΩúÁî®Âüü‚Ä¶</li>
</ul>
</li>
<li>ÁîüÊàêÊ∏≤ÊüìÂáΩÊï∞<ul>
<li>ÈÄöËøáË∞ÉÁî®<code>genNode</code>ÔºåÁÑ∂ÂêéÂú®<code>genNode</code>ÂÜÖÈÉ®ÈÄöËøáswitchËØ≠Âè•Êù•ÂåπÈÖç‰∏çÂêåÁ±ªÂûãÁöÑËäÇÁÇπÔºåÂπ∂Ë∞ÉÁî®ÂØπÂ∫îÁöÑÁîüÊàêÂô®ÂáΩÊï∞</li>
</ul>
</li>
</ol>
<h2 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h2><ul>
<li><a href="https://segmentfault.com/a/1190000023594560">Vue3 Ê®°ÊùøÁºñËØëÂéüÁêÜ</a></li>
<li>„ÄäVue.jsËÆæËÆ°‰∏éÂÆûÁé∞„Äã</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>canvasÁîªÊùø‰πãÁªòÁîªÂÖÉÁ¥†ÁöÑÊ°ÜÈÄâ</title>
    <url>/2022/12/05/canvas%E7%94%BB%E6%9D%BF%E4%B9%8B%E7%BB%98%E7%94%BB%E5%85%83%E7%B4%A0%E7%9A%84%E6%A1%86%E9%80%89/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>ÊàëÂ§ßÊ¶ÇÂú®‰∏§‰∏™Êúà‰πãÂâçÂÅö‰∫Ü‰∏Ä‰∏™Âü∫‰∫écanvasÁöÑÁîªÊùøÔºå<a href="https://songlh.top/2022/09/21/%E5%9F%BA%E4%BA%8Ecanvas%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%A4%9A%E5%8A%9F%E8%83%BD%E7%94%BB%E6%9D%BF/">Âü∫‰∫écanvasÂÆûÁé∞ÁöÑÂ§öÂäüËÉΩÁîªÊùø</a>ÔºåÁÑ∂ÂêéÊúÄËøë‰∏çÊòØÂ§™ÂøôÔºåÂ∞±Âà©Áî®‰∏ãÁè≠ÁöÑÊó∂Èó¥ÂèàËø≠‰ª£‰∫Ü‰∏Ä‰∏™ÁâàÊú¨ÔºåÂ¢ûÂä†‰∫Ü‰ª•‰∏ãÂÜÖÂÆπ</p>
<ol>
<li>Âú®ÈÄâÊã©Ê®°Âºè‰∏ãÂèØ‰ª•ÁÇπÂáªÂÖÉÁ¥†ËøõË°åÊ°ÜÈÄâÔºåÂπ∂Êåâ‰ΩèÊâãÊüÑËøõË°åÁº©ÊîæÊàñËÄÖÁßªÂä®ÔºåÁÇπÂáªBackspaceÈîÆÂèØ‰ª•Âà†Èô§ÈÄâÊã©ÂÖÉÁ¥†</li>
<li>ÂèåÂáªÁîªÊùøËæìÂÖ•ÊñáÂ≠óÁªòÂà∂Âú®ÊåáÂÆö‰ΩçÁΩÆ</li>
</ol>
<p>Êú¨ÁØáÊàëÂ∞±ËØ¶ÁªÜ‰ªãÁªç‰∏ãÊ°ÜÈÄâÂÖÉÁ¥†ÁöÑÂÆûÁé∞ÊÄùË∑ØÂíåÂÖ∑‰Ωì‰ª£Á†ÅÔºåÊïàÊûúÂ¶Ç‰∏ã</p>
<h2 id="È¢ÑËßà"><a href="#È¢ÑËßà" class="headerlink" title="È¢ÑËßà"></a>È¢ÑËßà</h2><p>È¢ÑËßàÂú∞ÂùÄÔºö<a href="https://songlh.top/paint-board/">https://songlh.top/paint-board/</a><br>repoÔºö<a href="https://github.com/LHRUN/paint-board">https://github.com/LHRUN/paint-board</a> Ê¨¢ËøéStar‚≠êÔ∏è </p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5bd83319aae4af5aeaad2e83a73580c~tplv-k3u1fbpfcp-watermark.image"></p>
<h2 id="ÂÆûÁé∞ÊÄùË∑Ø"><a href="#ÂÆûÁé∞ÊÄùË∑Ø" class="headerlink" title="ÂÆûÁé∞ÊÄùË∑Ø"></a>ÂÆûÁé∞ÊÄùË∑Ø</h2><ol>
<li>È¶ñÂÖàÈúÄË¶ÅÊ°ÜÈÄâÁöÑÂÖÉÁ¥†ÂøÖÈ°ªÂú®ÂàùÂßãÂåñÊó∂ÂíåÊõ¥Êñ∞Êó∂ËÆ∞ÂΩïÁü©ÂΩ¢Â±ûÊÄßÔºåÊØîÂ¶ÇÂÆΩÈ´ò„ÄÅÁü©ÂΩ¢ÂùêÊ†áÔºåËøôÊòØÂÆûÁé∞Ê°ÜÈÄâÁöÑÂü∫Á°Ä</li>
<li>Èº†Ê†áÂú®ÁßªÂä®Êó∂ÈúÄË¶ÅÊ†πÊçÆÂΩìÂâçÂùêÊ†áÂà§Êñ≠ÊÇ¨ÊµÆÂú®Âì™‰∏™ÂÖÉÁ¥†‰∏äÊñπÔºåËøôÊ†∑ÊâçËÉΩÂú®ÁÇπÂáªÊó∂ËøõË°åÂ§ÑÁêÜÔºåÂπ∂‰∏îÈº†Ê†áÁßªÂä®Êó∂ÈúÄË¶ÅÊúâÂÖâÊ†áÁöÑÊîπÂèò</li>
<li>Âú®ÊúâÊ°ÜÈÄâÂÖÉÁ¥†ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊ∏≤ÊüìÊó∂Âú®ÊúÄÂêéÊ†πÊçÆÊ°ÜÈÄâÂÖÉÁ¥†ÁöÑÁü©ÂΩ¢Â±ûÊÄßÊ∏≤ÊüìÊ°ÜÈÄâÊïàÊûú</li>
<li>Âú®ÊúâÊ°ÜÈÄâÂÖÉÁ¥†ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊãñÊãΩÊó∂Ê†πÊçÆÊãñÊãΩÁöÑ‰ΩçÁΩÆÊù•Âà§Êñ≠ÊòØÁßªÂä®ËøòÊòØÊîπÂèòÂ§ßÂ∞è</li>
<li>ÂÖÉÁ¥†ÊîπÂèòÂ§ßÂ∞èÊúâ‰∏§ÁßçÊÉÖÂÜµÔºå‰øùÊåÅÊØî‰æã(ÊñáÂ≠ó)ÁöÑÁº©ÊîæÂíå‰∏ç‰øùÊåÅÊØî‰æã(ÁîªÁ¨î)ÁöÑÁº©Êîæ</li>
</ol>
<h2 id="ËÆ∞ÂΩïÁü©ÂΩ¢Â±ûÊÄß"><a href="#ËÆ∞ÂΩïÁü©ÂΩ¢Â±ûÊÄß" class="headerlink" title="ËÆ∞ÂΩïÁü©ÂΩ¢Â±ûÊÄß"></a>ËÆ∞ÂΩïÁü©ÂΩ¢Â±ûÊÄß</h2><p>Âõ†‰∏∫ÁîªÁ¨îÈöèÁùÄÁªòÁîª‰∏ÄÁõ¥Âú®Â¢ûÂä†Êñ∞ÁöÑÂùêÊ†áÁÇπÔºåÊâÄ‰ª•ÊàëÂú®Áü©ÂΩ¢Â±ûÊÄßÂ§ñÂè¶ËÆ∞ÂΩï‰∫ÜÊúÄÂ∞èÂíåÊúÄÂ§ßÁöÑxyÂùêÊ†áÁî®‰∫éËÆ°ÁÆóÂÆΩÈ´ò</p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ê†πÊçÆÊñ∞ÂùêÊ†áÁÇπÔºåÊõ¥Êñ∞Áü©ÂΩ¢Â±ûÊÄß</span>
<span class="comment"> * <span class="doctag">@param</span> instance ÁîªÁ¨îÂÖÉÁ¥†</span>
<span class="comment"> * <span class="doctag">@param</span> position ÂùêÊ†áÁÇπ</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">updateRect</span> = (<span class="params">instance: FreeDraw, position: MousePosition</span>) =&gt; &#123;
  <span class="keyword">const</span> &#123; x, y &#125; = position
  <span class="keyword">let</span> &#123; minX, maxX, minY, maxY &#125; = instance.<span class="property">rect</span>
  <span class="keyword">if</span> (x &lt; minX) &#123;
    minX = x
  &#125;
  <span class="keyword">if</span> (x &gt; maxX) &#123;
    maxX = x
  &#125;
  <span class="keyword">if</span> (y &lt; minY) &#123;
    minY = y
  &#125;
  <span class="keyword">if</span> (y &gt; maxY) &#123;
    maxY = y
  &#125;
  <span class="keyword">const</span> rect = &#123;
    minX,
    maxX,
    minY,
    maxY,
    <span class="attr">x</span>: minX,
    <span class="attr">y</span>: minY,
    <span class="attr">width</span>: maxX - minX,
    <span class="attr">height</span>: maxY - minY
  &#125;
  instance.<span class="property">rect</span> = rect
  <span class="keyword">return</span> rect
&#125;</code></pre>

<h2 id="ËÆ°ÁÆóÈº†Ê†áÁßªÂä®ÂùêÊ†á"><a href="#ËÆ°ÁÆóÈº†Ê†áÁßªÂä®ÂùêÊ†á" class="headerlink" title="ËÆ°ÁÆóÈº†Ê†áÁßªÂä®ÂùêÊ†á"></a>ËÆ°ÁÆóÈº†Ê†áÁßªÂä®ÂùêÊ†á</h2><ul>
<li>ÈöèÁùÄÈº†Ê†áÁßªÂä®ÔºåÊàë‰ª¨ÈúÄË¶ÅÊîπÂèòÂÖâÊ†áËÆ©‰ΩøÁî®ËÄÖÊÑüÁü•Âà∞Â∑≤ÁªèÁßªÂä®Âà∞ÂÖÉÁ¥†‰∏äÊñπÔºåÊâÄ‰ª•Â∞±ÈúÄË¶ÅËÆ°ÁÆóÈº†Ê†áÂùêÊ†áÊòØÂê¶Â∑≤ÁªèÂíåÁªòÁîªË∑ØÂæÑ‰∏¥ËøëÂà∞‰∏ÄÂÆöË∑ùÁ¶ª</li>
<li>ÁªòÁîªË∑ØÂæÑÊòØÁî±‰∏Ä‰∏™‰∏™ÁöÑÂùêÊ†áÁÇπÁªÑÊàêÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÊØè‰∏™ÂùêÊ†áÁÇπÂíå‰∏ä‰∏Ä‰∏™ÂùêÊ†áÁÇπËøûÊàê‰∏Ä‰∏™Á∫øÊÆµÔºåÁÑ∂ÂêéÂú®Êª°Ë∂≥‰ª•‰∏ã‰ªª‰Ωï‰∏ÄÁßçÊÉÖÂÜµÂ∞±ÂèØ‰ª•ËÆ§‰∏∫ÊòØÊÇ¨ÊµÆÂú®ÂÖÉÁ¥†‰∏äÊñπ‰∫Ü<ul>
<li>Èº†Ê†áÂùêÊ†áË∑ùÁ¶ªÁ∫øÊÆµËµ∑ÁÇπÂ∞è‰∫é10ÂÉèÁ¥†</li>
<li>Èº†Ê†áÂùêÊ†áË∑ùÁ¶ªÁ∫øÊÆµÁªàÁÇπÂ∞è‰∫é10ÂÉèÁ¥†</li>
<li>Èº†Ê†áÂùêÊ†áË∑ùÁ¶ªÁ∫øÊÆµÂ∞è‰∫é10ÂÉèÁ¥†Âπ∂‰∏îxÂíåyÂùêÊ†áÂú®Á∫øÊÆµÁöÑ‰∏§Á´ØÁÇπËåÉÂõ¥ÂÜÖ</li>
<li><img src="https://s1.ax1x.com/2022/12/05/zy7D6s.png"><pre><code class="highlight js"><span class="comment">// ÈÅçÂéÜÁîªÁ¨îÂÖÉÁ¥†ÊâÄÊúâÂùêÊ†áÁÇπ</span>
<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; positions.<span class="property">length</span>; i++) &#123;
  <span class="comment">// Ë∑ùÁ¶ªËµ∑ÁÇπË∑ùÁ¶ª</span>
  <span class="keyword">const</span> startDistance = <span class="title function_">getDistance</span>(movePos, positions[i - <span class="number">1</span>])
  <span class="comment">// Ë∑ùÁ¶ªÁªàÁÇπË∑ùÁ¶ª</span>
  <span class="keyword">const</span> endDistance = <span class="title function_">getDistance</span>(movePos, positions[i])
  <span class="comment">// Ë∑ùÁ¶ªÁ∫øÊÆµË∑ùÁ¶ª</span>
  <span class="keyword">const</span> lineDistance = <span class="title function_">getPositionToLineDistance</span>(
    movePos,
    positions[i - <span class="number">1</span>],
    positions[i]
  )
  <span class="keyword">const</span> rangeX =
    <span class="title class_">Math</span>.<span class="title function_">max</span>(positions[i - <span class="number">1</span>].<span class="property">x</span>, positions[i].<span class="property">x</span>) &gt;= movePos.<span class="property">x</span> &amp;&amp;
    movePos.<span class="property">x</span> &gt;= <span class="title class_">Math</span>.<span class="title function_">min</span>(positions[i - <span class="number">1</span>].<span class="property">x</span>, positions[i].<span class="property">x</span>)
  <span class="keyword">const</span> rangeY =
    <span class="title class_">Math</span>.<span class="title function_">max</span>(positions[i - <span class="number">1</span>].<span class="property">y</span>, positions[i].<span class="property">y</span>) &gt;= movePos.<span class="property">y</span> &amp;&amp;
    movePos.<span class="property">y</span> &gt;= <span class="title class_">Math</span>.<span class="title function_">min</span>(positions[i - <span class="number">1</span>].<span class="property">y</span>, positions[i].<span class="property">y</span>)

  <span class="comment">// Êª°Ë∂≥‰∏âÁßçÊÉÖÂÜµÂÖ∂‰∏≠‰∏ÄÁßçÂ∞±ÂèØ‰ª•ËÆ∞ÂΩï‰∏ãÁîªÁ¨îÂÖÉÁ¥†</span>
  <span class="keyword">if</span> (
    startDistance &lt; <span class="number">10</span> ||
    endDistance &lt; <span class="number">10</span> ||
    (lineDistance &lt; <span class="number">10</span> &amp;&amp; rangeX &amp;&amp; rangeY)
  ) &#123;
    <span class="variable language_">this</span>.<span class="property">mouseHoverElementIndex</span> = eleIndex
  &#125;
&#125;
<span class="comment">// ...</span>

<span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆó‰∏§ÁÇπ‰πãÈó¥ÁöÑË∑ùÁ¶ª</span>
<span class="comment"> * <span class="doctag">@param</span> start Ëµ∑ÁÇπ</span>
<span class="comment"> * <span class="doctag">@param</span> end ÁªàÁÇπ</span>
<span class="comment"> * <span class="doctag">@returns</span> Ë∑ùÁ¶ª</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getDistance</span> = (<span class="params">start: MousePosition, end: MousePosition</span>) =&gt; &#123;
  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(<span class="title class_">Math</span>.<span class="title function_">pow</span>(start.<span class="property">x</span> - end.<span class="property">x</span>, <span class="number">2</span>) + <span class="title class_">Math</span>.<span class="title function_">pow</span>(start.<span class="property">y</span> - end.<span class="property">y</span>, <span class="number">2</span>))
&#125;

<span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÈº†Ê†áÂùêÊ†áË∑ùÁ¶ªÁ∫øÊÆµË∑ùÁ¶ª</span>
<span class="comment"> * <span class="doctag">@param</span> pos Èº†Ê†áÂùêÊ†á</span>
<span class="comment"> * <span class="doctag">@param</span> startPos Á∫øÊÆµËµ∑ÁÇπ</span>
<span class="comment"> * <span class="doctag">@param</span> endPos Á∫øÊÆµÁªàÁÇπ</span>
<span class="comment"> * <span class="doctag">@returns</span> Ë∑ùÁ¶ª</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getPositionToLineDistance</span> = (<span class="params"></span>
<span class="params">  pos: MousePosition,</span>
<span class="params">  startPos: MousePosition,</span>
<span class="params">  endPos: MousePosition</span>
<span class="params"></span>) =&gt; &#123;
  <span class="comment">/**</span>
<span class="comment">   * 1. ËÆ°ÁÆó‰∏âÁÇπ‰πãÈó¥ÁöÑÁõ¥Á∫øË∑ùÁ¶ª</span>
<span class="comment">   * 2. ËÆ°ÁÆó‰∏âËßíÂΩ¢ÂçäÂë®Èïø</span>
<span class="comment">   * 3. ÈÄöËøáÊµ∑‰º¶ÂÖ¨ÂºèÊ±ÇÈù¢ÁßØ</span>
<span class="comment">   * 4. Ê†πÊçÆÈù¢ÁßØÂÖ¨ÂºèÊ±Ç‰∏âËßíÂΩ¢ÁöÑÈ´ò</span>
<span class="comment">   */</span>
  <span class="keyword">const</span> A = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">getDistance</span>(pos, startPos))
  <span class="keyword">const</span> B = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">getDistance</span>(pos, endPos))
  <span class="keyword">const</span> C = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title function_">getDistance</span>(startPos, endPos))

  <span class="keyword">const</span> P = (A + B + C) / <span class="number">2</span>
  <span class="keyword">const</span> area = <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="title class_">Math</span>.<span class="title function_">sqrt</span>(P * (P - A) * (P - B) * (P - C)))
  <span class="keyword">const</span> distance = (<span class="number">2</span> * area) / C
  <span class="keyword">return</span> distance
&#125;</code></pre></li>
</ul>
</li>
</ul>
<h2 id="ÁÇπÂáªÊ∏≤ÊüìÊ°ÜÈÄâÊïàÊûú"><a href="#ÁÇπÂáªÊ∏≤ÊüìÊ°ÜÈÄâÊïàÊûú" class="headerlink" title="ÁÇπÂáªÊ∏≤ÊüìÊ°ÜÈÄâÊïàÊûú"></a>ÁÇπÂáªÊ∏≤ÊüìÊ°ÜÈÄâÊïàÊûú</h2><ul>
<li>ÁÇπÂáªÊó∂Â¶ÇÊûúÂú®‰πãÂâçhoverÊó∂Êª°Ë∂≥‰∏âÁßçÊÉÖÂÜµÂ∑≤ÁªèËÆ∞ÂΩï‰∏ãÊù•‰∫ÜÔºåÂ∞±ÁªßÁª≠ËÆ∞ÂΩï‰∏∫Ê°ÜÈÄâÂÖÉÁ¥†</li>
<li>ÁÑ∂ÂêéÂú®ÁîªÊùøÊ∏≤ÊüìÊó∂ÔºåÂ∞±ÊåâÁÖßÊ°ÜÈÄâÂÖÉÁ¥†ÁöÑÁü©ÂΩ¢Â±ûÊÄßÊ∏≤ÊüìÊ°ÜÈÄâÊïàÊûú<pre><code class="highlight js"><span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">select</span>.<span class="property">selectElementIndex</span> !== -<span class="number">1</span>) &#123;
  <span class="comment">// Ëé∑ÂèñÈÄâÊã©ÂÖÉÁ¥†ÁöÑÁü©ÂΩ¢Â±ûÊÄßÔºåÁªòÂà∂Ê°ÜÈÄâÊïàÊûú</span>
  <span class="keyword">const</span> rect = <span class="variable language_">this</span>.<span class="property">select</span>.<span class="title function_">getCurSelectElement</span>().<span class="property">rect</span>
  <span class="title function_">drawResizeRect</span>(<span class="variable language_">this</span>.<span class="property">context</span>, rect)
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÁªòÂà∂ÊãñÊãΩÁü©ÂΩ¢</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">drawResizeRect</span> = (<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  rect: ElementRect</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> &#123; x, y, width, height &#125; = rect
  context.<span class="title function_">save</span>()
  context.<span class="property">strokeStyle</span> = <span class="string">&#x27;#65CC8A&#x27;</span>
  context.<span class="title function_">setLineDash</span>([<span class="number">5</span>])
  context.<span class="property">lineWidth</span> = <span class="number">2</span>
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
  <span class="comment">// ÁªòÂà∂ËôöÁ∫øÊ°Ü</span>
  <span class="title function_">drawRect</span>(context, x, y, width, height)

  <span class="comment">// ÁªòÂà∂ÂõõËßíÊâãÊüÑ</span>
  context.<span class="property">fillStyle</span> = <span class="string">&#x27;#65CC8A&#x27;</span>
  <span class="title function_">drawRect</span>(context, x - <span class="number">10</span>, y - <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  <span class="title function_">drawRect</span>(context, x + width, y - <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  <span class="title function_">drawRect</span>(context, x - <span class="number">10</span>, y + height, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  <span class="title function_">drawRect</span>(context, x + width, y + height, <span class="number">10</span>, <span class="number">10</span>, <span class="literal">true</span>)
  context.<span class="title function_">restore</span>()
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÁªòÂà∂Áü©ÂΩ¢</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">drawRect</span> = (<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  x: number,</span>
<span class="params">  y: number,</span>
<span class="params">  width: number,</span>
<span class="params">  height: number,</span>
<span class="params">  fill = <span class="literal">false</span> <span class="comment">// ÊòØÂê¶Â°´ÂÖÖ</span></span>
<span class="params"></span>) =&gt; &#123;
  context.<span class="title function_">beginPath</span>()
  context.<span class="title function_">rect</span>(x, y, width, height)
  <span class="keyword">if</span> (fill) &#123;
    context.<span class="title function_">fill</span>()
  &#125; <span class="keyword">else</span> &#123;
    context.<span class="title function_">stroke</span>()
  &#125;
&#125;</code></pre></li>
</ul>
<h2 id="ÊãñÊãΩÂÖÉÁ¥†"><a href="#ÊãñÊãΩÂÖÉÁ¥†" class="headerlink" title="ÊãñÊãΩÂÖÉÁ¥†"></a>ÊãñÊãΩÂÖÉÁ¥†</h2><p>ÊãñÊãΩÂÖÉÁ¥†ÊØîËæÉÁÆÄÂçïÔºåÂ∞±ÊòØËÆ°ÁÆóÈº†Ê†áÁßªÂä®ÁöÑË∑ùÁ¶ªÔºåÁÑ∂ÂêéÈÅçÂéÜÂùêÊ†áÁÇπÂä†‰∏äË∑ùÁ¶ªÂç≥ÂèØ</p>
<pre><code class="highlight js"><span class="comment">// startMousePosÂ∞±ÊòØ‰∏ä‰∏Ä‰∏™ÁßªÂä®ÁöÑÂùêÊ†á</span>
<span class="keyword">const</span> disntanceX = x - <span class="variable language_">this</span>.<span class="property">startMousePos</span>.<span class="property">x</span>
<span class="keyword">const</span> disntanceY = y - <span class="variable language_">this</span>.<span class="property">startMousePos</span>.<span class="property">y</span>

<span class="comment">/**</span>
<span class="comment"> * Êõ¥Êñ∞‰ΩçÁΩÆ</span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">distanceX</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">distanceY</span></span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">moveFreeDraw</span> = (<span class="params"></span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  distanceX: number,</span>
<span class="params">  distanceY: number</span>
<span class="params"></span>) =&gt; &#123;
  <span class="title function_">initRect</span>(instance)
  instance.<span class="property">positions</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;
    position.<span class="property">x</span> += distanceX
    position.<span class="property">y</span> += distanceY
    <span class="title function_">updateRect</span>(instance, position)
  &#125;)
&#125;</code></pre>

<h2 id="ÁîªÁ¨îÁº©Êîæ-‰∏ç‰øùÊåÅÊØî‰æã"><a href="#ÁîªÁ¨îÁº©Êîæ-‰∏ç‰øùÊåÅÊØî‰æã" class="headerlink" title="ÁîªÁ¨îÁº©Êîæ(‰∏ç‰øùÊåÅÊØî‰æã)"></a>ÁîªÁ¨îÁº©Êîæ(‰∏ç‰øùÊåÅÊØî‰æã)</h2><ul>
<li>ÁîªÁ¨îÁº©ÊîæÊàëÂÖà‰ª•Âè≥‰∏ãËßíÊâãÊüÑÊãñÊãΩ‰∏∫‰æãÂàÜÊûê</li>
<li>È¶ñÂÖàÁîªÁ¨îÁöÑÁº©ÊîæÊØî‰æãÊòØÂàÜ‰∏∫Ê∞¥Âπ≥Áº©ÊîæÊØî‰æãÂíåÂûÇÁõ¥Áº©ÊîæÊØî‰æã<ul>
<li>Ê∞¥Âπ≥Áº©ÊîæÊØî‰æã &#x3D; (ÊóßÁü©ÂΩ¢ÁöÑÂÆΩ + Èº†Ê†áÊ∞¥Âπ≥ÁßªÂä®ÁöÑË∑ùÁ¶ª) &#x2F; ÊóßÁü©ÂΩ¢ÁöÑÂÆΩ</li>
<li>ÂûÇÁõ¥Áº©ÊîæÊØî‰æã &#x3D; (ÊóßÁü©ÂΩ¢ÁöÑÈ´ò + Èº†Ê†áÂûÇÁõ¥ÁßªÂä®ÁöÑË∑ùÁ¶ª) &#x2F; ÊóßÁü©ÂΩ¢ÁöÑÈ´ò</li>
</ul>
</li>
<li>ÁÑ∂ÂêéÈÅçÂéÜÁîªÁ¨îÁöÑÊâÄÊúâÂùêÊ†áÁÇπËøõË°åÁº©ÊîæÔºåËøôÊó∂‰ºöÂá∫Áé∞‰∏Ä‰∏™ÂÅèÁßªÁöÑÁº©ÊîæÊïàÊûúÔºåÂ¶Ç‰∏ãÂõæ<ul>
<li><img src="https://s1.ax1x.com/2022/12/05/zy7600.png"></li>
</ul>
</li>
<li>ËøôÊó∂Â∞±ÈúÄË¶ÅËÆ°ÁÆóÂΩìÂâçÊãñÊãΩÊâãÊüÑÂØπËßíÈ°∂ÁÇπÁßªÂä®ÁöÑË∑ùÁ¶ªÊòØÂ§öÂ∞ëÔºåÁÑ∂ÂêéÂáèÂéªËøô‰∏™Ë∑ùÁ¶ªÂ∞±ÂæóÂà∞‰∫ÜÊ≠£Á°ÆÁöÑÁº©ÊîæÊïàÊûú‰∫Ü<ul>
<li><img src="https://s1.ax1x.com/2022/12/05/zy72kT.png"></li>
</ul>
</li>
<li>ÂΩìÁÑ∂Âõõ‰∏™ËßíÁöÑÊãñÊãΩËÆ°ÁÆóÊòØ‰∏ç‰∏ÄËá¥ÁöÑÔºå‰ΩÜÊòØÊÄùË∑Ø‰∏ÄËá¥<pre><code class="highlight js"><span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">resizeType</span>) &#123;
  <span class="comment">// disntanceX Èº†Ê†áÊ∞¥Âπ≥ÁßªÂä®Ë∑ùÁ¶ª</span>
  <span class="comment">// disntanceY Èº†Ê†áÂûÇÁõ¥ÁßªÂä®Ë∑ùÁ¶ª</span>
  <span class="comment">// Âè≥‰∏ãËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> + disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> + disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// Â∑¶‰∏ãËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> - disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> + disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// Â∑¶‰∏äËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> - disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> - disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// Âè≥‰∏äËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
    <span class="title function_">resizeFreeDraw</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">FreeDraw</span>,
      (rect.<span class="property">width</span> + disntanceX) / rect.<span class="property">width</span>,
      (rect.<span class="property">height</span> - disntanceY) / rect.<span class="property">height</span>,
      rect,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="attr">default</span>:
    <span class="keyword">break</span>
&#125;

<span class="comment">/**</span>
<span class="comment"> * Áº©ÊîæÁªòÁîª</span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">instance</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">scaleX</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">scaleY</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">rect</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">resizeType</span></span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">resizeFreeDraw</span> = (<span class="params"></span>
<span class="params">  instance: FreeDraw,</span>
<span class="params">  scaleX: number,</span>
<span class="params">  scaleY: number,</span>
<span class="params">  rect: FreeDrawRect,</span>
<span class="params">  resizeType: string</span>
<span class="params"></span>) =&gt; &#123;
  <span class="comment">// ÂàùÂßãÂåñÁü©ÂΩ¢</span>
  <span class="title function_">initRect</span>(instance)
  <span class="comment">// ÈÅçÂéÜÊâÄÊúâÂùêÊ†áËøõË°åÁº©Êîæ</span>
  instance.<span class="property">positions</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;
    position.<span class="property">x</span> = position.<span class="property">x</span> * scaleX
    position.<span class="property">y</span> = position.<span class="property">y</span> * scaleY
    <span class="title function_">updateRect</span>(instance, position)
  &#125;)
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: newX, <span class="attr">y</span>: newY, <span class="attr">width</span>: newWidth, <span class="attr">height</span>: newHeight &#125; = instance.<span class="property">rect</span>
  <span class="keyword">let</span> offsetX = <span class="number">0</span>
  <span class="keyword">let</span> offsetY = <span class="number">0</span>
  <span class="comment">// ËÆ°ÁÆóÂÅèÁßªË∑ùÁ¶ªÔºåËøô‰∏™ÊòØË¶ÅÊ†πÊçÆÂΩìÂâçÁº©ÊîæÊâãÊüÑÁöÑÂØπËßíÈ°∂ÁÇπËøõË°åËÆ°ÁÆóÔºåÊâÄ‰ª•Ë¶ÅÂàÜ‰∏∫4ÁßçÊÉÖÂÜµ</span>
  <span class="keyword">switch</span> (resizeType) &#123;
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
      offsetX = newX - rect.<span class="property">x</span>
      offsetY = newY - rect.<span class="property">y</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
      offsetX = newX + newWidth - (rect.<span class="property">x</span> + rect.<span class="property">width</span>)
      offsetY = newY - rect.<span class="property">y</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
      offsetX = newX + newWidth - (rect.<span class="property">x</span> + rect.<span class="property">width</span>)
      offsetY = newY + newHeight - (rect.<span class="property">y</span> + rect.<span class="property">height</span>)
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
      offsetX = newX - rect.<span class="property">x</span>
      offsetY = newY + newHeight - (rect.<span class="property">y</span> + rect.<span class="property">height</span>)
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;
  <span class="title function_">initRect</span>(instance)
  <span class="comment">// ÂáèÂéªÂÅèÁßªË∑ùÁ¶ª</span>
  instance.<span class="property">positions</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;
    position.<span class="property">x</span> = position.<span class="property">x</span> - offsetX
    position.<span class="property">y</span> = position.<span class="property">y</span> - offsetY
    <span class="title function_">updateRect</span>(instance, position)
  &#125;)
&#125;</code></pre></li>
</ul>
<h2 id="ÊñáÂ≠óÁº©Êîæ-‰øùÊåÅÊØî‰æã"><a href="#ÊñáÂ≠óÁº©Êîæ-‰øùÊåÅÊØî‰æã" class="headerlink" title="ÊñáÂ≠óÁº©Êîæ(‰øùÊåÅÊØî‰æã)"></a>ÊñáÂ≠óÁº©Êîæ(‰øùÊåÅÊØî‰æã)</h2><ul>
<li>ÊñáÂ≠óÁº©ÊîæÈúÄË¶Å‰∏ÄÁõ¥‰øùÊåÅÁùÄÂÆΩÈ´òÊØîÔºåÈÄöËøáËÆ°ÁÆóÂá∫Êñ∞ÊóßÁü©ÂΩ¢ÁöÑÂÆΩÈ´òÊØî<ul>
<li>ÂΩìÊñ∞ÁöÑÂÆΩÈ´òÊØîÂ∞è‰∫éÊóßÁöÑÂÆΩÈ´òÊØîÊó∂ÔºåÂÆΩÂ∫¶‰∏çÂèòÔºåËÆ°ÁÆó È´òÂ∫¶ &#x3D; ÂÆΩÂ∫¶ &#x2F; ÊóßÁöÑÂÆΩÈ´òÊØî</li>
<li>‰ΩÜÊñ∞ÁöÑÂÆΩÈ´òÊØîÂ§ß‰∫éÊóßÁöÑÂÆΩÈ´òÊØîÊó∂ÔºåÈ´òÂ∫¶‰∏çÂèòÔºåËÆ°ÁÆó ÂÆΩÂ∫¶ &#x3D; È´òÂ∫¶ * ÊóßÁöÑÂÆΩÈ´òÊØî<pre><code class="highlight js"><span class="keyword">switch</span> (<span class="variable language_">this</span>.<span class="property">resizeType</span>) &#123;
  <span class="comment">// ...</span>
  <span class="comment">// Âè≥‰∏ãËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> + disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> + disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// Â∑¶‰∏ãËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> - disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> + disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// Â∑¶‰∏äËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> - disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> - disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>
    )
    <span class="keyword">break</span>
  <span class="comment">// Âè≥‰∏äËßí</span>
  <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
    <span class="title function_">resizeTextElement</span>(
      resizeElement <span class="keyword">as</span> <span class="title class_">TextElement</span>,
      resizeElement.<span class="property">rect</span>.<span class="property">width</span> + disntanceX,
      resizeElement.<span class="property">rect</span>.<span class="property">height</span> - disntanceY,
      <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>
    )
    <span class="keyword">break</span>
  <span class="attr">default</span>:
    <span class="keyword">break</span>
&#125;

<span class="comment">/**</span>
<span class="comment"> * ‰øÆÊîπÊñáÊú¨ÂÖÉÁ¥†Â§ßÂ∞è</span>
<span class="comment"> * <span class="doctag">@param</span> ele ÊñáÊú¨ÂÖÉÁ¥†</span>
<span class="comment"> * <span class="doctag">@param</span> width ÊîπÂèòÂêéÁöÑÂÆΩÂ∫¶</span>
<span class="comment"> * <span class="doctag">@param</span> height ÊîπÂèòÂêéÁöÑÈ´òÂ∫¶</span>
<span class="comment"> * <span class="doctag">@param</span> resizeType ÊãñÊãΩÁ±ªÂûã</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">resizeTextElement</span> = (<span class="params"></span>
<span class="params">  ele: TextElement,</span>
<span class="params">  width: number,</span>
<span class="params">  height: number,</span>
<span class="params">  resizeType: string</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> oldRatio = ele.<span class="property">rect</span>.<span class="property">width</span> / ele.<span class="property">rect</span>.<span class="property">height</span>
  <span class="keyword">const</span> newRatio = width / height
  <span class="comment">// ÊåâÁÖß‰πãÂâçÁöÑËØ¥ÊòéÔºå‰øÆÊîπÂÆΩÈ´òÊØî‰∏ç‰∏ÄËá¥ÁöÑÊÉÖÂÜµ</span>
  <span class="keyword">if</span> (newRatio &lt; oldRatio) &#123;
    height = width / oldRatio
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (newRatio &gt; oldRatio) &#123;
    width = oldRatio * height
  &#125;

  <span class="comment">/**</span>
<span class="comment">   * Âõ†‰∏∫Ëøô‰∏™Áº©ÊîæÊòØÊåâÁÖßÂ∑¶‰∏äËßíÁº©ÊîæÁöÑ</span>
<span class="comment">   * ÊâÄ‰ª•‰∏∫‰∫ÜËææÂà∞ÂΩìÂâçÊãñÊãΩÊâãÊüÑ‰∏çÁßªÂä®ÔºåÂ∞±ÈúÄË¶ÅËøõË°åÂÅèÁßªÊìç‰Ωú</span>
<span class="comment">   */</span>
  <span class="keyword">switch</span> (resizeType) &#123;
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_RIGHT</span>:
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">BOTTOM_LEFT</span>:
      ele.<span class="property">rect</span>.<span class="property">x</span> -= width - ele.<span class="property">rect</span>.<span class="property">width</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_LEFT</span>:
      ele.<span class="property">rect</span>.<span class="property">x</span> -= width - ele.<span class="property">rect</span>.<span class="property">width</span>
      ele.<span class="property">rect</span>.<span class="property">y</span> -= height - ele.<span class="property">rect</span>.<span class="property">height</span>
      <span class="keyword">break</span>
    <span class="keyword">case</span> <span class="variable constant_">RESIZE_TYPE</span>.<span class="property">TOP_RIGHT</span>:
      ele.<span class="property">rect</span>.<span class="property">y</span> -= height - ele.<span class="property">rect</span>.<span class="property">height</span>
      <span class="keyword">break</span>
    <span class="attr">default</span>:
      <span class="keyword">break</span>
  &#125;
  ele.<span class="property">rect</span>.<span class="property">height</span> = height
  ele.<span class="property">rect</span>.<span class="property">width</span> = width
  <span class="comment">// Â≠ó‰ΩìÂ§ßÂ∞èÊåâÁÖßÈ´òÂ∫¶‰øÆÊîπ</span>
  ele.<span class="property">fontSize</span> = ele.<span class="property">rect</span>.<span class="property">height</span>
&#125;</code></pre></li>
</ul>
</li>
</ul>
<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>Â¶ÇÊûúÊúâÂèëÁé∞ÈóÆÈ¢òÊàñËÄÖÊúâÂ•ΩÁöÑÊñπÊ°àÔºåÊ¨¢ËøéËÆ®ËÆ∫üëª</p>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>canvas</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëAI is sleepwalking us into surveillance</title>
    <url>/2023/08/05/%E3%80%90%E7%BF%BB%E3%80%91AI-is-sleepwalking-us-into-surveillance/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://uxdesign.cc/ai-is-sleepwalking-us-into-surveillance-ed7921462b8b">AI is sleepwalking us into surveillance</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@arvindsanjeev">Arvind Sanjeev</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p><img src="https://miro.medium.com/v2/resize:fit:1400/1*oJjQvahNXMcXwxqMNyDuvw.gif"></p>
<p>Âú®2020Âπ¥Ôºå‰∏ÄÂº†Â•≥‰∫∫ÂùêÂú®È©¨Ê°∂‰∏äÁöÑÁÖßÁâáÂú®ÁΩë‰∏äÈÅ≠Âà∞Ê≥ÑÊºèÔºåËøô‰∏™‰∫ãÂºïÂèë‰∫ÜÂ∑®Â§ßÁöÑ‰∫âËÆÆ„ÄÇ<a href="https://www.technologyreview.com/2022/12/19/1065306/roomba-irobot-robot-vacuums-artificial-intelligence-training-data-privacy/">Roomba J7 Âê∏Â∞òÂô®Êú∫Âô®‰∫∫ÊãçÊëÑ‰∫ÜËøôÂº†ÁÖßÁâáÔºåÁî®‰ΩúÊó•Â∏∏Êï∞ÊçÆÊî∂ÈõÜÁöÑ‰∏ÄÈÉ®ÂàÜ</a>„ÄÇËøôÂè™ÊòØ‰∏ÄÁ≥ªÂàóÁÖßÁâá‰∏≠ÁöÑ‰∏ÄÂº†ÔºåËøô‰∫õÁÖßÁâáÊúâÊãçÊëÑ‰∫ÜÊï¥‰∏™ÂÆ∂Â∫≠„ÄÅÁâ©ÂìÅÂíåÁîüÊ¥ª‰∏≠ÁöÑ‰∏Ä‰∫õ‰∫∫„ÄÇÁÑ∂ÂêéÊúâ‰∏ÄÁæ§Êù•Ëá™ÂßîÂÜÖÁëûÊãâÁöÑ‰∏¥Êó∂Â∑•‰∏∫ËÆ≠ÁªÉ AI Ê®°ÂûãË¥üË¥£Ê†áÊ≥®ÂõæÁâáÔºå‰ªñ‰ª¨Êî∂Âà∞‰∫ÜËøô‰∫õÂõæÁâáÂπ∂Ê≥ÑÊºèÂà∞ÁΩë‰∏ä„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*CRckBEERVw4ZzLHSx6aN-w.png"><br><img src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*C6zMQB6Gmf_QfKcfiAcIWw.png"><br><img src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*C5Rhl2Kj7AJRDwgHyFpOFg.png"></p>
<p>‰∏∫‰∫ÜËÆ©ÊØè‰∏™Êñ∞ÁöÑAIÊ®°ÂûãÊØî‰∏ä‰∏Ä‰∏™Ê®°ÂûãÊõ¥Â•ΩÊó∂ÔºåÂÖ¨Âè∏‰∏çÊÉúÈááÁî®‰∏çÈÅìÂæ∑ÁöÑÊï∞ÊçÆÊî∂ÈõÜÊäÄÊúØÔºå‰ª•‰æøËÆ©Ëá™Â∑±Âú®Á´û‰∫â‰∏≠ËÑ±È¢ñËÄåÂá∫„ÄÇÊàë‰ª¨ÁöÑÁßÅÊúâÊï∞ÊçÆÔºåÂåÖÊã¨ÂåªÁñóËÆ∞ÂΩï„ÄÅÁÖßÁâá„ÄÅÁ§æ‰∫§Â™í‰ΩìÁ≠âÂÜÖÂÆπÔºåÈÉΩË¢´Á∫≥ÂÖ•Áî®‰∫éËÆ≠ÁªÉAIÊ®°ÂûãÁöÑÊï∞ÊçÆÈõÜ‰∏≠„ÄÇ</p>
<h2 id="Your-data-is-being-stolen"><a href="#Your-data-is-being-stolen" class="headerlink" title="Your data is being stolen"></a>Your data is being stolen</h2><p><strong>‰Ω†ÊÑøÊÑè‰∏∫‰∫ÜÊñπ‰æøËÄåÊîæÂºÉÈöêÁßÅÂêóÔºü</strong></p>
<blockquote>
<p>Reading all the privacy policies you encounter in a year from big tech companies would take 30 full working days of your life.<br>Source: <a href="https://lorrie.cranor.org/pubs/readingPolicyCost-authorDraft.pdf">The cost of reading privacy policies</a></p>
</blockquote>
<p>ÂÆ∂ÊòØÊàë‰ª¨ÂÆâÂÖ®ÁöÑÂú∞ÊñπÔºå‰ΩÜÂ¶ÇÊûúÂÆ∂ÈáåÁöÑÁîµÂô®ÂºÄÂßãÊ≥ÑÊºèÊàë‰ª¨ÁöÑÊï∞ÊçÆÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºüÊï∞ÊçÆË∞ÉÊü•ËÆ∞ËÄÖ Kashmir Hill Âíå Surya Mattu Êè≠Á§∫‰∫ÜÊàë‰ª¨ÂÆ∂ÈáåÁöÑÊô∫ËÉΩËÆæÂ§áÊòØÂ¶Ç‰ΩïÂÅöÂà∞Ëøô‰∏™ÁöÑ„ÄÇÊúÄÂàùÔºå‰Ω†ÁöÑÁîµÂä®ÁâôÂà∑‰ºöÁªèÂ∏∏ÂèëÈÄÅÊï∞ÊçÆÂà∞ÂÆÉÁöÑÊØçÂÖ¨Âè∏ÔºåÁÑ∂ËÄåÔºåÂú®2018Âπ¥ÁöÑ TED talk ‰∏≠Êè≠Á§∫‰∫ÜËøô‰∫õÊî∂ÈõÜÁöÑÊï∞ÊçÆ‰ºöÂèçËøáÊù•ÂΩ±ÂìçÊàë‰ª¨„ÄÇÊØîÂ¶ÇÔºå‰Ω†ÁöÑÁâôÁßë‰øùÈô©ÂÖ¨Âè∏ÂèØ‰ª•‰ªéËøô‰∫õÁâôÂà∑ÂÖ¨Âè∏‰∏≠Ë¥≠‰π∞‰Ω†ÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûú‰Ω†Êôö‰∏äÊ≤°ÊúâÂà∑ÁâôÔºåÂ∞±‰ºöÊî∂ÂèñÊõ¥È´òÁöÑ‰øùË¥π„ÄÇ</p>
<div style="max-width:854px"><div style="position:relative;height:0;padding-bottom:56.25%"><iframe src="https://embed.ted.com/talks/lang/en/kashmir_hill_and_surya_mattu_what_your_smart_devices_know_and_share_about_you" width="854" height="480" style="position:absolute;left:0;top:0;width:100%;height:100%" frameborder="0" scrolling="no" allowfullscreen></iframe></div></div>

<p>Áî®‰∫éËÆ≠ÁªÉÂõæÂÉèÂêàÊàêÁöÑ AI Ê®°ÂûãÁöÑÊï∞ÊçÆÈõÜÊòØÈÄöËøáÂú®ÁΩë‰∏äÊêúÂØªÂõæÂÉèÂà∂‰ΩúÁöÑÔºåËøô‰∫õÂõæÂÉèÁöÑÁâàÊùÉÊâÄÊúâËÄÖÂíåÊåÅÊúâ‰∫∫ÂèØËÉΩÂêåÊÑèÊàñËÄÖÂπ∂Ê≤°ÊúâÂêåÊÑèÂÖÅËÆ∏‰ΩøÁî®„ÄÇÁîöËá≥<a href="https://arstechnica.com/information-technology/2022/09/artist-finds-private-medical-record-photos-in-popular-ai-training-data-set/">ÁóÖ‰∫∫ÁöÑÁßÅ‰∫∫ÁóÖÂéÜ‰πü‰ºöÊàê‰∏∫AIÊ®°ÂûãÁöÑËÆ≠ÁªÉÊï∞ÊçÆ</a>„ÄÇÊù•Ëá™Âä†Âà©Á¶èÂ∞º‰∫öÂ∑ûÁöÑËâ∫ÊúØÂÆ∂ Laping ÂèëÁé∞ÔºåÂ•πÁöÑÂåªÁîüÂú®2013Âπ¥‰∏∫Â•πÊãçÊëÑÁöÑÁóÖÂéÜÁÖßÁâáË¢´Êî∂ÂΩïÂà∞ LAION-5B image setÔºåËøôÊòØ Stable Diffusion Âíå Google Imagen ‰ΩøÁî®ÁöÑ data set„ÄÇÂ•πÈÄöËøá<a href="https://haveibeentrained.com/">Have I Been Trained</a>ÂèëÁé∞Ëøô‰∏ÄÁÇπÔºåËøô‰∏™Â∑•ÂÖ∑ÊòØ Holly Herndon ÁöÑ‰∏Ä‰∏™È°πÁõÆÔºå‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•ÈÄöËøáËØ•Â∑•ÂÖ∑Êü•ÁúãËá™Â∑±ÁöÑÁÖßÁâáÊòØÂê¶Ë¢´Áî®‰∫éËÆ≠ÁªÉ AI Ê®°Âûã„ÄÇ</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">üö©My face is in the <a href="https://twitter.com/hashtag/LAION?src=hash&amp;ref_src=twsrc%5Etfw">#LAION</a> dataset. In 2013 a doctor photographed my face as part of clinical documentation. He died in 2018 and somehow that image ended up somewhere online and then ended up in the dataset- the image that I signed a consent form for my doctor- not for a dataset. <a href="https://t.co/TrvjdZtyjD">pic.twitter.com/TrvjdZtyjD</a></p>&mdash; Lapine (@LapineDeLaTerre) <a href="https://twitter.com/LapineDeLaTerre/status/1570889343845404672?ref_src=twsrc%5Etfw">September 16, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote>
<p>The LAION-5B dataset, which has more than 5 billion images, includes photoshopped celebrity porn, hacked and stolen nonconsensual porn, and graphic images of ISIS beheadings. More mundanely, they include living artists‚Äô artwork, photographers‚Äô photos, medical imagery, and photos of people who presumably did not believe that their images would suddenly end up as the basis to be trained by an AI.<br>Source: <a href="https://www.vice.com/en/article/3ad58k/ai-is-probably-using-your-images-and-its-not-easy-to-opt-out">AI Is Probably Using Your Images and It‚Äôs Not Easy to Opt Out</a>, Vice</p>
</blockquote>
<h2 id="Compromised-identities"><a href="#Compromised-identities" class="headerlink" title="Compromised identities"></a>Compromised identities</h2><p><strong>Á†îÁ©∂ËØÅÊòéÔºåAI ÁîüÊàêÁöÑÈù¢ÈÉ®ÂõæÂÉèÂèØ‰ª•ÈÄöËøáÈÄÜÂêëÂ∑•Á®ãÁöÑÊñπÂºèÊè≠Á§∫Âá∫ÂÖ∂ÁúüÂÆû‰∫∫Áâ©Êù•Ê∫ê</strong></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*4ehilQEObju2ePksOV9MPA.gif"></p>
<p>Áé∞Âú®ÔºåAIÁîüÊàêÁöÑ‰∫∫ËÑ∏Â∑≤Êàê‰∏∫‰∏ªÊµÅ„ÄÇËÆæËÆ°Â∏àÊääÂÆÉ‰ª¨Áî®‰∏∫‰ΩúÂìÅÊãçÊëÑÁöÑÊ®°ÁâπÊàñËÄÖÂÅá‰∫∫„ÄÇÂõ†‰∏∫‰ªñ‰ª¨ËÆ§‰∏∫Êó¢ÁÑ∂Ëøô‰∫õ‰∫∫‰∏çÊòØÁúü‰∫∫ÔºåÂ∞±‰∏çÁî®ÂæÅÂæó‰ªñ‰ª¨ÁöÑÂêåÊÑè„ÄÇÁÑ∂ËÄåÔºåËøô‰∫õÁîüÊàêÁöÑ‰∫∫ËÑ∏Âπ∂‰∏çÊòØÁã¨‰∏ÄÊó†‰∫åÁöÑ„ÄÇ2021Âπ¥ÔºåÁ†îÁ©∂ÂëòÂèØ‰ª•Êää GAN ÁîüÊàêÁöÑ‰∫∫ËÑ∏<a href="https://www.technologyreview.com/2021/10/12/1036844/ai-gan-fake-faces-data-privacy-security-leak/">ÂõûÊ∫ØÂà∞ÂéüÂßã‰∫∫ËÑ∏‰∏ä</a>„ÄÇÂõ†‰∏∫Ëøô‰∫õÁîüÊàêÁöÑ‰∫∫ËÑ∏ÂíåÂéüÂßãÁöÑ‰∫∫ËÑ∏Áõ∏‰ººÔºåÂè™ÊòØÁï•ÊúâÊÑüÂä®ÔºåÈÄöËøáËøô‰∫õÊï∞ÊçÆÈõÜÂ∞±Êö¥Èú≤‰∫ÜÈÇ£‰∫õ‰∫∫ËÑ∏ÁöÑÁúüÂÆûË∫´‰ªΩ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5VPgtH5UGFQijaCI4_9Ldw.png"></p>
<p>‰∏éGAN‰∏çÂêåÔºåÂÉè DALL-E Êàñ Midjourney ËøôÊ†∑ÁöÑÊâ©Êï£Ê®°Âûã‰∫ßÁîüÁöÑÂõæÂÉèË¢´ËÆ§‰∏∫Êõ¥Êé•ËøëÁúüÂÆûÔºåÂπ∂‰∏î‰∏éËÆ≠ÁªÉÈõÜ‰∏≠ÁöÑÂõæÂÉèÊòæËëó‰∏çÂêå„ÄÇÈÄöËøáÁîüÊàêÊñ∞ÂõæÂÉèÔºå‰ªñ‰ª¨Êèê‰æõ‰∫Ü‰∏ÄÁßç‰øùÊä§Êï∞ÊçÆÈõÜ‰∏≠‰∏™‰∫∫ÈöêÁßÅÁöÑÊñπÂºè„ÄÇÁÑ∂ËÄåÔºå‰∏ÄÁØáÂêç‰∏∫ <a href="https://arxiv.org/pdf/2301.13188.pdf">Extracting Training Data from Diffusion Models</a> ÁöÑËÆ∫ÊñáÂ±ïÁ§∫‰∫ÜÊâ©Êï£Ê®°ÂûãÂ¶Ç‰Ωï‰ªéËÆ≠ÁªÉÊï∞ÊçÆ‰∏≠ËÆ∞ÂøÜÂçï‰∏™ÂõæÂÉèÔºåÂπ∂Âú®ËøêË°åÊó∂ÈáçÊñ∞ÁîüÊàê„ÄÇ‰∫∫‰ª¨ÊôÆÈÅçËÆ§‰∏∫ AI Ê®°ÂûãÊòØ‰∏Ä‰∏™‚ÄúÈªëÁõíÂ≠ê‚ÄùÔºåÈáåÈù¢‰ªÄ‰πàÈÉΩÊ≤°ÊúâÔºå‰ΩÜÈÄöËøáËøô‰∫õÂÆûÈ™åÔºå‰∫∫‰ª¨ÈúÄË¶ÅÈáçÊñ∞ÂÆ°ËßÜËøô‰∏ÄËßÇÁÇπ„ÄÇ</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Models such as Stable Diffusion are trained on copyrighted, trademarked, private, and sensitive images.<br><br>Yet, our new paper shows that diffusion models memorize images from their training data and emit them at generation time.<br><br>Paper: <a href="https://t.co/LQuTtAskJ9">https://t.co/LQuTtAskJ9</a> <br><br>üëá[1/9] <a href="https://t.co/ieVqkOnnoX">pic.twitter.com/ieVqkOnnoX</a></p>&mdash; Eric Wallace (@ICML) (@Eric_Wallace_) <a href="https://twitter.com/Eric_Wallace_/status/1620449934863642624?ref_src=twsrc%5Etfw">January 31, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="AI-surveillance"><a href="#AI-surveillance" class="headerlink" title="AI surveillance"></a>AI surveillance</h2><p><strong>ÈÄöËøá AI Âä†Âº∫Á§æ‰ºöÁöÑÁõëÊéß</strong></p>
<p>ÊúÄÂÖ∑‰∫âËÆÆÁöÑÊô∫ËÉΩÁõëÊéßÊ°à‰æã‰πã‰∏ÄÂèëÁîüÂú®2019Âπ¥È¶ôÊ∏ØÊäóËÆÆÊ¥ªÂä®ÊúüÈó¥„ÄÇË≠¶Êñπ‰ΩøÁî®<a href="https://www.telegraph.co.uk/news/2019/08/02/innovative-hong-kong-protesters-using-lasers-traffic-cones-parkour/">Èù¢ÈÉ®ËØÜÂà´ÊäÄÊúØ</a>Êù•ËØÜÂà´ÊäóËÆÆËÄÖÔºåÂπ∂ÂØπ‰ªñ‰ª¨ËøõË°åÂçïÁã¨Â§ÑÁΩö„ÄÇÊäóËÆÆËÄÖÊÑèËØÜÂà∞Ëøô‰∏ÄÁÇπÂêéÔºå‰∫éÊòØ‰ΩøÁî®<a href="https://www.independent.co.uk/tech/hong-kong-protests-lasers-facial-recognition-ai-china-police-a9033046.html">ÈªëÂÆ¢ÊøÄÂÖâÁ¨îÁûÑÂáÜÊëÑÂÉèÂ§¥</a>ÔºåÁÉßÊØÅÈÇ£‰∫õÊëÑÂÉèÂ§¥ÁöÑÂõæÂÉè‰º†ÊÑüÂô®„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:996/0*0PCrBpv3P7FrAGen.gif"></p>
<p>ÂÖ®‰∏ñÁïå‰∏ÄÂçäÁöÑÁõëÊéßÊëÑÂÉèÂ§¥ÈÉΩÂú®‰∏≠ÂõΩÔºå‰Ωø‰∏≠ÂõΩÊàê‰∏∫<a href="https://fortune.com/2020/11/03/china-surveillance-system-backlash-worlds-largest/">‰∏ñÁïå‰∏äÊúÄÂ§ßÁöÑÁõëÊéßÁ§æ‰ºö</a>„ÄÇ‰ªñ‰ª¨Âà©Áî®ÊëÑÂÉèÂ§¥ÂØπ‰π±Á©øÈ©¨Ë∑ØËÄÖËøõË°åÁΩöÊ¨æÔºåÊàñÂà©Áî®Èù¢ÈÉ®ËØÜÂà´ÊäÄÊúØËøõË°åÊú∫Âú∫ÂÆâÊ£Ä„ÄÇËôΩÁÑ∂Âü∫‰∫é AI ÁöÑÁõëÊéßÁ≥ªÁªüÁúã‰ººÊòØÊâìÂáªÁäØÁΩ™ÂíåÊÅêÊÄñ‰∏ª‰πâÁöÑÈáçË¶ÅÂ∑•ÂÖ∑„ÄÇ‰ΩÜÂç¥ÂºïÂèë‰∫ÜÊúâÂÖ≥ÈöêÁßÅÂíåÂÖ¨Ê∞ëËá™Áî±ÁöÑÊãÖÂøß„ÄÇËøô‰∫õÁ≥ªÁªüÊåáÂêë‰∫Ü Orwellian ÂºèÁöÑÊú™Êù•ÔºåBig brother ÂèØËÉΩ‰ºöÁõëËßÜÂπ∂ÊéßÂà∂‰∏™‰∫∫ÔºåÊΩúÂú®Âú∞‰∏ßÂ§±Ëá™Áî±ÂíåÂÖ¨Ê∞ëËá™Áî±„ÄÇ</p>
<h2 id="Who‚Äôs-fighting-back"><a href="#Who‚Äôs-fighting-back" class="headerlink" title="Who‚Äôs fighting back?"></a>Who‚Äôs fighting back?</h2><p>ÂØπ‰∫é‰æµÁäØÈöêÁßÅÁöÑ AIÔºåÁæéÂõΩËÅîÈÇ¶Ë¥∏ÊòìÂßîÂëò‰ºöÔºàFTCÔºâÁªôÂá∫‰∫Ü‰∏Ä‰∏™Â∏¶ÊúâÊåëË°ÖÊÄßÁöÑÁ≠îÊ°à„ÄÇ‰ªñ‰ª¨Â∑≤Áªè<a href="https://www.protocol.com/policy/ftc-algorithm-destroy-data-privacy">ÂºÄÂßãÂÆûË∑µÁÆóÊ≥ïÊëßÊØÅ</a>„ÄÇ‰ªñ‰ª¨Ë¶ÅÊ±ÇÂÖ¨Âè∏ÂíåÁªÑÁªáÊëßÊØÅÂÖ∂ÊÅ∂ÊÑèÊàñÈùûÊ≥ïÊî∂ÈõÜÁöÑ‰∏™‰∫∫‰ø°ÊÅØÂíåÊï∞ÊçÆÂª∫Á´ãÁöÑÁÆóÊ≥ïÊàñAIÊ®°Âûã„ÄÇ‰ª•‰∏ãÊòØ‰∏Ä‰∫õÂÄ°ËÆÆÁöÑ‰æãÂ≠êÔºö</p>
<h3 id="Policies-and-frameworks"><a href="#Policies-and-frameworks" class="headerlink" title="Policies and frameworks"></a>Policies and frameworks</h3><p>Ê¨ßÁõüÂú®<a href="https://www.politico.eu/article/europe-edges-closer-to-a-ban-on-facial-recognition/">AIÊó∂‰ª£‰øùÊä§‰∏™‰∫∫ÈöêÁßÅÊñπÈù¢ËøàÂá∫‰∫ÜÈáçË¶Å‰∏ÄÊ≠•</a>„ÄÇ‰ªñ‰ª¨ÊîØÊåÅÁ¶ÅÊ≠¢Âú®ÂÖ¨ÂÖ±Âú∫ÊâÄËøõË°åAIÁõëÊéßÁöÑÊñπÊ°à„ÄÇÊ¨ßÁõüÂπøÂèóÊ¨¢ËøéÁöÑ <a href="https://gdpr-info.eu/?ref=dr-mark-van-rijmenam-csp-the-digital-speaker-strategic-futurist">General Data Protection Regulation</a> ‰πüÊã•ÊúâÊúÄ‰Ω≥ÁöÑÊï∞ÊçÆ‰øùÊä§Êù°‰æãÔºåËØ•Êù°‰æãË¶ÅÊ±ÇÂú®Êî∂ÈõÜÂíå‰ΩøÁî®‰∏™‰∫∫Êï∞ÊçÆÂâçÈúÄÂæÅÂæó‰∏™‰∫∫ÂêåÊÑè„ÄÇ</p>
<p>Âä†ÊãøÂ§ßÁöÑ <a href="https://www.priv.gc.ca/en/privacy-topics/privacy-laws-in-canada/the-personal-information-protection-and-electronic-documents-act-pipeda/">Personal Information Protection and Electronic Documents Act</a> (PIPEDA) Ë¶ÅÊ±Ç‰ºÅ‰∏öÈááÂèñ‚ÄúÂêàÁêÜÁöÑ‚ÄùÂÆâÂÖ®‰øùÈöúÊé™ÊñΩÊù•‰øùÊä§‰∏™‰∫∫‰ø°ÊÅØ„ÄÇËÄåÂú®ÁæéÂõΩÔºå <a href="https://oag.ca.gov/privacy/ccpa?ref=dr-mark-van-rijmenam-csp-the-digital-speaker-strategic-futurist">California Consumer Privacy Act</a> (CCPA) ÊòØ‰∏ÄÈÉ®ÂÖ®Èù¢ÁöÑÈöêÁßÅÊ≥ïÔºåËµã‰∫à‰∏™‰∫∫ËØ¢ÈóÆÁªÑÁªáÊî∂ÈõÜ‰∏™‰∫∫‰ø°ÊÅØÔºåÂ¶Ç‰Ωï‰ΩøÁî®‰ª•ÂèäÁî®‰∫é‰ΩïÁßçÁõÆÁöÑÁöÑÊùÉÂà©„ÄÇ</p>
<h3 id="Projects-and-experiments"><a href="#Projects-and-experiments" class="headerlink" title="Projects and experiments"></a>Projects and experiments</h3><ul>
<li><a href="https://haveibeentrained.com/">Have I Been Trained</a>Ôºö‰∏Ä‰∏™ÂèØ‰ª•ËΩªÊùæÊêúÁ¥¢Êàë‰ª¨ÁöÑÊï∞ÊçÆÊòØÂê¶Ë¢´Áî®‰∫éËÆ≠ÁªÉAIÁöÑÂπ≥Âè∞„ÄÇ‰∏ä‰º†‰Ω†ÁöÑÁÖßÁâáÔºåÊü•ÁúãÊòØÂê¶Ë¢´ËøõÂÖ•Âà∞Êâ©Êï£Ê®°ÂûãÁöÑÊï∞ÊçÆÈõÜ‰∏≠„ÄÇËøôÊòØ‰∏Ä‰∏™Âêç‰∏∫ <a href="https://spawning.ai/">Spawning.ai</a> È°πÁõÆ‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËØ•È°πÁõÆËÆ©‰∫∫‰ª¨ÈáçÊñ∞ÊéåÊéßËá™Â∑±ÁöÑÊï∞ÊçÆ„ÄÇ‰ªñ‰ª¨ËøòÂú®ÂºÄÂèë‚ÄúÈÄâÊã©ÈÄÄÂá∫‚ÄùÂíå‚ÄúÈÄâÊã©Âä†ÂÖ•‚ÄùÁöÑÂ∑•ÂÖ∑ÔºåËÆ©‰Ω†ËÉΩÂ§üÂÜ≥ÂÆöÊòØÂê¶Â∞Ü‰Ω†ÁöÑÊï∞ÊçÆÁî®‰∫éËÆ≠ÁªÉ„ÄÇ</li>
<li><a href="https://microsoft.github.io/FaceSynthetics/">Microsoft Synthetic Faces</a>ÔºöÂæÆËΩØÊèê‰æõ‰∫Ü100,000Âº†ÂêàÊàê‰∫∫ËÑ∏ÔºåÁî®‰∫éËÆ≠ÁªÉËÑ∏ÈÉ®ËØÜÂà´ÁÆóÊ≥ïÔºåËÄåÊó†ÈúÄ‰ΩøÁî®Áúü‰∫∫„ÄÇ</li>
</ul>
<p><img src="https://miro.medium.com/v2/format:webp/1*dqWiNZQGABXXbgNlxK9SRQ.png"></p>
<ul>
<li><a href="https://unlabeled.jp/en/camouflage/">AI Camouflage</a>ÔºöÂèØÂä†ÂÖ•‰∏Ä‰∫õÂØπÊäóÊÄßË°•‰∏ÅÔºåÂµåÂÖ•Âà∞Ë°£ÊúçÊàñÂÖ∂‰ªñÁâ©‰Ωì‰∏≠ÔºåÁî®‰∫éÂπ≤Êâ∞AIÂàÜÁ±ªÁ≥ªÁªü</li>
</ul>
<p><img src="https://miro.medium.com/v2/resize:fit:960/1*xISa3pvq1IpxCmVR3YPn-A.gif"><br><img src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*1Znf2sv1bK9seDqaMGDc9w.png"></p>
<ul>
<li><a href="https://arxiv.org/pdf/2109.06467.pdf">Adversarial Makeup</a>ÔºöÈÄöËøáÂåñÂ¶ÜÂπ≤Êâ∞AIÂàÜÁ±ªÁ≥ªÁªüÔºå‰Ωø‰Ω†Âú®Á≥ªÁªü‰∏≠ÂèòÂæóÈöæ‰ª•Ëæ®ËÆ§„ÄÇCV dazzle ËøòÂú® Youtube ‰∏äÊèê‰æõÂåñÂ¶ÜÊïôÁ®ãÔºö</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/kGGnnp43uNM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<ul>
<li><a href="https://bjoernkarmann.dk/project/project_alias">Alias</a>ÔºöBj√∏rn Karmann ÊèêÂá∫ÁöÑÈöêÁßÅÂπ≤È¢ÑÊñπÊ°àÂèØ‰ª•ÈòªÊ≠¢ËØ≠Èü≥Âä©ÊâãÁõëÂê¨‰Ω†ÁöÑÂ£∞Èü≥„ÄÇ</li>
</ul>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oQFCASWtRqdyqy_B.jpg"></p>
<p>Âú®<a href="https://www.goodreads.com/en/book/show/36696533">„ÄäNew Dark Age„Äã</a>‰∏≠ÔºåJames BridleÂØπAIÁõëÊéßÂ¶Ç‰ΩïÂ∞Ü‰∏¥Â∫äÂÅèÊâßÁóáÂèòÊàêÁé∞ÂÆûÂèëË°®‰∫ÜËØÑËÆ∫„ÄÇ‰∏¥Â∫äÂ¶ÑÊÉ≥ÁóáÁöÑÊúÄÂàùÁóáÁä∂‰πã‰∏ÄÂ∞±ÊòØËÆ§‰∏∫Êúâ‰∫∫Âú®ÁõëËßÜ‰Ω†Ôºõ‰ΩÜÁé∞Âú®ËøôÁßçÊÉ≥Ê≥ïÊòØÂêàÁêÜÁöÑ„ÄÇÊàë‰ª¨ÂèëÈÄÅÁöÑÊØè‰∏ÄÂ∞ÅÈÇÆ‰ª∂„ÄÅÂÜôÁöÑÊØè‰∏ÄÊù°Áü≠‰ø°„ÄÅÊâìÁöÑÊØè‰∏ÄÈÄöÁîµËØù„ÄÅËµ∞ÁöÑÊØè‰∏ÄÊÆµË∑Ø„ÄÅËøàÂá∫ÁöÑÊØè‰∏ÄÊ≠•„ÄÅÂëºÂê∏„ÄÅÂÅöÁöÑÊØè‰∏Ä‰∏™Ê¢¶„ÄÅËØ¥Âá∫ÁöÑÊØè‰∏ÄÂè•ËØùÔºåÈÉΩÊàê‰∏∫Â§ßËßÑÊ®°ÁöÑËá™Âä®Êô∫ËÉΩÊî∂ÈõÜÁ≥ªÁªüÁöÑÁõÆÊ†áÔºåÁ§æ‰∫§ÁΩëÁªúÂíåÂûÉÂúæÈÇÆ‰ª∂ÁöÑÊéíÂ∫èÁÆóÊ≥ï‰ª•ÂèäÊàë‰ª¨Ëá™Â∑±Êô∫ËÉΩÊâãÊú∫ÂíåËÅîÁΩëËÆæÂ§á‰∏çÁú†‰∏ç‰ºëÁöÑÁõëËßÜ„ÄÇÈÇ£‰πàÔºåÁé∞Âú®ÊòØË∞ÅÂú®ÂÅèÊâßÂë¢Ôºü</p>
<p>ÊúâÂÖ≥Ê≠§‰∏ªÈ¢òÂèäÂÖ∂‰ªñ‰∏ªÈ¢òÁöÑÊõ¥Â§öËµÑÊ∫êÔºåËØ∑Êü•ÈòÖÊú¨ÊâãÂÜå<a href="https://arvindsanjeev.notion.site/arvindsanjeev/The-Handbook-of-AI-s-Unintended-Consequences-720cda3d8cec49dc88807641157a0bba">„ÄäAI‚Äôs unintended consequences„Äã</a>„ÄÇÊú¨ÊñáÊòØÊé¢ËÆ® <a href="https://medium.com/@arvindsanjeev/ai-sociopaths-and-their-unintended-consequences-bf6f19012e4f">unintended consequences of AI ÂõõÈÉ®Á≥ªÂàóÊñáÁ´†</a>‰∏≠ÁöÑÁ¨¨‰∏âÁ´†</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>HexoÊê≠Âª∫ËØ¶ÁªÜÊïôÁ®ã</title>
    <url>/2022/09/06/Hexo%E6%90%AD%E5%BB%BA%E5%9F%BA%E6%93%8D%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="ÂàùÂßãÂåñHexo"><a href="#ÂàùÂßãÂåñHexo" class="headerlink" title="ÂàùÂßãÂåñHexo"></a>ÂàùÂßãÂåñHexo</h2><ol>
<li>È¶ñÂÖàÈúÄË¶Å‰ª•‰∏ãÂÆâË£ÖÁéØÂ¢ÉÔºåÁõ¥Êé•Âú®ÂÆòÁΩë‰∏ãËΩΩÂç≥ÂèØ</li>
</ol>
<ul>
<li><a href="https://nodejs.org/en/">Node.js</a></li>
<li><a href="https://git-scm.com/">Git</a></li>
</ul>
<ol start="2">
<li>ÁéØÂ¢ÉÂáÜÂ§áÂ•ΩÂêéÔºåÂÆâË£ÖHexo <code>npm install -g hexo-cli</code></li>
<li>ÂÆâË£ÖÂêéÂú®ÊåáÂÆöÊñá‰ª∂Â§πÂàõÂª∫È°πÁõÆ<pre><code class="highlight sh">hexo init &lt;folder&gt;
<span class="built_in">cd</span> &lt;folder&gt;
npm install</code></pre></li>
<li>ÈÄâÊã©‰∏ªÈ¢ò</li>
</ol>
<ul>
<li><p>HexoÂàùÂßãÂåñÊàêÂäüÂêéÔºåÁÑ∂ÂêéÈúÄË¶ÅÈÄâÊã©‰∏Ä‰∏™ÊºÇ‰∫ÆÁöÑ‰∏ªÈ¢òÔºåËøô‰∏™Êé®ËçêÁõ¥Êé•Âú®ÂÆòÁΩë‰∏äÊâæÔºå<a href="https://hexo.io/themes/">‰∏ªÈ¢ò</a><br><img src="https://img-blog.csdnimg.cn/60988327e65c46ec8becc25b8591c650.png#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</li>
<li><p>ÈÄâ‰∏≠‰∏ªÈ¢òÂêé‰∏ãËΩΩÂà∞È°πÁõÆthemesÊñá‰ª∂Â§π</p>
</li>
<li><p>ÁÑ∂Âêé‰øÆÊîπÊ†πÁõÆÂΩï‰∏ãÁöÑ_config.ymlÊñá‰ª∂</p>
</li>
<li><p><code>theme: &#39;‰∏ªÈ¢òÂêç,‰πüÂ∞±ÊòØthemesÊñá‰ª∂Â§πÈáåÁöÑÂêçÂ≠ó&#39;</code></p>
</li>
</ul>
<ol start="5">
<li>hexoÊúÄÂ∏∏Áî®ÁöÑÊúâ‰ª•‰∏ãÂá†‰∏™ÂëΩ‰ª§</li>
</ol>
<ul>
<li>ÂêØÂä®ÊúçÂä°Ôºö<code>hexo server</code> Êàñ <code>hexo s</code></li>
<li>Êñ∞Âª∫ÊñáÁ´†Ôºö<code>hexo new &quot;ÊñáÁ´†ÂêçÂ≠ó&quot;</code></li>
<li>Êñ∞Âª∫ÈùôÊÄÅÈ°µÈù¢Ôºö<code>hexo new page &quot;È°µÈù¢ÂêçÂ≠ó&quot;</code></li>
<li>ÁîüÊàêpublicÊñá‰ª∂Â§πÔºö<code>hexo generate</code> Êàñ <code>hexo g</code></li>
<li>Ê∏ÖÈô§publicÊñá‰ª∂Â§πÔºö<code>hexo clean</code></li>
<li>ÈÉ®ÁΩ≤Ôºö<code>hexo deploy</code> Êàñ <code>hexo d</code></li>
</ul>
<h2 id="ÈÉ®ÁΩ≤Âà∞Github"><a href="#ÈÉ®ÁΩ≤Âà∞Github" class="headerlink" title="ÈÉ®ÁΩ≤Âà∞Github"></a>ÈÉ®ÁΩ≤Âà∞Github</h2><p>GithubÊúâÂÖçË¥πÊèê‰æõÊê≠Âª∫ÈùôÊÄÅÁΩëÁ´ôÁöÑÂäüËÉΩÔºåÊâÄ‰ª•hexoÊé®ËçêÁõ¥Êé•ÊîæÂà∞GitHub PageÔºåÊåâÁÖß‰ª•‰∏ãÊ≠•È™§ËøõË°åÈÉ®ÁΩ≤„ÄÇ  </p>
<ol>
<li>È¶ñÂÖàÊñ∞Âª∫‰∏Ä‰∏™Ê∫êÁ†ÅrepoÔºåÂª∫ËÆÆÈÄâÊã©PrivateÔºåËøô‰∏™Áî®Êù•ÊîæhexoÈ°πÁõÆ‰ª£Á†ÅÔºå‰∏çÂØπÂ§ñÂºÄÊîæ</li>
<li>Êú¨Âú∞‰ªìÂ∫ìËøêË°å‰ª•‰∏ãÂëΩ‰ª§Êèê‰∫§‰ª£Á†Å</li>
</ol>
<ul>
<li><code>git init</code>ÔºögitÂàùÂßãÂåñ</li>
<li><code>git add .</code>: Â∞ÜÊâÄÊúâ‰ª£Á†ÅÊ∑ªÂä†Âà∞ÊöÇÂ≠òÂå∫</li>
<li><code>git commit -m &quot;first commit&quot;</code>ÔºöÊèê‰∫§Êú¨Ê¨°commit</li>
<li><code>git remote add origin &#39;ËøúÁ®ã‰ªìÂ∫ìÂú∞ÂùÄ&#39;</code>ÔºöÊ∑ªÂä†ËøúÁ®ã‰ªìÂ∫ìÂú∞ÂùÄ</li>
<li><code>git push -u origin main</code>ÔºöÊé®ÈÄÅ‰ª£Á†Å</li>
</ul>
<ol start="3">
<li>ÁÑ∂ÂêéÂÜçÊñ∞Âª∫‰∏Ä‰∏™‰ªìÂ∫ìÔºåÂêçÂ≠ó‰∏∫ <code>githubÂêçÂ≠ó.github.io</code>ÔºåËøô‰∏™‰ªìÂ∫ìÁî®‰∫éÊîæÈÉ®ÁΩ≤ÂêéÁöÑ‰ª£Á†Å</li>
<li>ÂÆâË£ÖHexoÈÉ®ÁΩ≤Êèí‰ª∂ <code>npm install hexo-deployer-git</code></li>
<li>‰øÆÊîπÊ†πÁõÆÂΩï‰∏ãÁöÑ <code>_config.yml</code><pre><code class="highlight yml"><span class="attr">deploy:</span>
  <span class="attr">type:</span> <span class="string">git</span>
  <span class="attr">repo:</span> <span class="string">ÈÉ®ÁΩ≤‰ªìÂ∫ìÂú∞ÂùÄ</span>
  <span class="attr">branch:</span> <span class="string">main</span></code></pre></li>
<li>ÊúÄÂêéÊâßË°å<code>hexo deploy</code>ÂëΩ‰ª§Â∞±ÂèØ‰ª•Âú®<code>githubÂêçÂ≠ó.github.io</code>ÁúãÂà∞ÂçöÂÆ¢‰∫Ü</li>
</ol>
<h2 id="SSH-github-ActionsËá™Âä®ÈÉ®ÁΩ≤"><a href="#SSH-github-ActionsËá™Âä®ÈÉ®ÁΩ≤" class="headerlink" title="SSH + github ActionsËá™Âä®ÈÉ®ÁΩ≤"></a>SSH + github ActionsËá™Âä®ÈÉ®ÁΩ≤</h2><ul>
<li><strong>Github Actions</strong>ÊòØgithub‰∏ìÁî®ÁöÑÊåÅÁª≠ÈõÜÊàêËÑöÊú¨ÔºåÁî®‰∫éËá™Âä®ÊâßË°åÂ∑•‰ΩúÊµÅÁ®ãÔºå<strong>SSH</strong>ÂèØ‰ª•ÈÄöËøáÂª∫Á´ãÂØÜÈí•ÂÖçÂØÜÁôªÂΩïÔºåËøô‰∏§‰∏™ÁªìÂêàÂ∞±ËÉΩËææÂà∞Ëá™Âä®ÈÉ®ÁΩ≤ÁöÑÊïàÊûú</li>
</ul>
<ol>
<li><p>È¶ñÂÖàÈÄöËøássh-keygenÁîüÊàêÂØÜÈí•Ôºå<code>ssh-keygen -t rsa -C &quot;Github ÁöÑÈÇÆÁÆ±Âú∞ÂùÄ&quot;</code></p>
</li>
<li><p>ÁÑ∂ÂêégithubÈÖçÁΩÆsshÔºåÈÖçÁΩÆË∑ØÂæÑÔºö<code>github -&gt; Settings ‚Äì&gt; SSH and GPG keys</code><br> <img src="https://img-blog.csdnimg.cn/277cd5e70dad47a5af70a9ce9dc06f5a.jpeg#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</li>
<li><p>git‰ªìÂ∫ìÊ∑ªÂä†ÂØÜÈí•ÁßÅÊúâÂèòÈáèÔºåÈÖçÁΩÆË∑ØÂæÑÔºö<code>repo -&gt; Settings -&gt; Secrets</code>ÔºåÁÇπÂáª<code>New repository secret</code>ÔºånameÂèØ‰ª•Ëá™ÂÆö‰πâÔºå‰∏ªË¶ÅÊòØÊé•‰∏ãÊù•ÁöÑdeploy.yamlÊñá‰ª∂ÈúÄË¶Å‰ΩøÁî®ÔºåSecretÂ°´ÂÜô‰Ω†ÁîüÊàêÁöÑÂØÜÈí•<br><img src="https://img-blog.csdnimg.cn/10897de98a7f44a2b3171371b71b91ac.jpeg#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</li>
<li><p>ÁÑ∂ÂêéÊ†πÁõÆÂΩï‰∏ãÊñ∞Âª∫<code>.github/workflows/deploy.yaml</code>ÔºåÂπ∂Â°´ÂÜô‰ª•‰∏ãÂÜÖÂÆπ</p>
<pre><code class="highlight yml"><span class="attr">name:</span> <span class="string">Deploy</span>
<span class="attr">on:</span>
  <span class="attr">push:</span>
    <span class="attr">branches:</span> [<span class="string">‰Ω†ÈúÄË¶ÅËá™Âä®ÂåñÈÉ®ÁΩ≤ÁöÑÂàÜÊîØ</span>]
<span class="attr">jobs:</span>
  <span class="attr">build:</span>
    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span>
    <span class="attr">steps:</span>
      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">Repository</span> <span class="string">main</span> <span class="string">branch</span>
        <span class="attr">uses:</span> <span class="string">actions/checkout@main</span>
      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node</span>
        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span>
        <span class="attr">with:</span>
          <span class="attr">node-version:</span> <span class="number">14.</span><span class="string">x</span>
      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hexo</span> <span class="string">Dependencies</span>
        <span class="attr">run:</span> <span class="string">|</span>
<span class="string">          npm install hexo-cli -g</span>
<span class="string">          npm install</span>
<span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Deploy</span>
        <span class="attr">env:</span>
          <span class="attr">HEXO_DEPLOY_PRIVATE_KEY:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.&#x27;‰Ω†‰∏ä‰∏ÄÊ≠•Ëá™ÂÆö‰πâÁöÑÂèòÈáèÂêç&#x27;</span> <span class="string">&#125;&#125;</span>
        <span class="attr">run:</span> <span class="string">|</span>
<span class="string">          mkdir -p ~/.ssh/</span>
<span class="string">          echo &quot;$HEXO_DEPLOY_PRIVATE_KEY&quot; &gt; ~/.ssh/id_rsa </span>
<span class="string">          chmod 600 ~/.ssh/id_rsa</span>
<span class="string">          ssh-keyscan github.com &gt;&gt; ~/.ssh/known_hosts</span>
<span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Git</span> <span class="string">Infomation</span>
        <span class="attr">run:</span> <span class="string">|</span>
<span class="string">          git config --global user.name &quot;gitÂêçÂ≠ó&quot;</span>
<span class="string">          git config --global user.email &quot;gitÈÇÆÁÆ±&quot;</span>
<span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hexo</span>
        <span class="attr">run:</span> <span class="string">|</span>
<span class="string">          hexo clean</span>
<span class="string">          hexo generate </span>
<span class="string">          hexo deploy    </span></code></pre></li>
<li><p>ÁÑ∂ÂêéÊää‰ª£Á†Åpush‰∏äÂéªÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•Âú®‰ªìÂ∫ìÁöÑ<strong>Actions</strong>‰∏äÁúãËá™Âä®Â∑•‰ΩúÊµÅÁ®ãÁöÑÊÉÖÂÜµ</p>
</li>
</ol>
<h2 id="Ë∞∑Ê≠åÊî∂ÂΩï"><a href="#Ë∞∑Ê≠åÊî∂ÂΩï" class="headerlink" title="Ë∞∑Ê≠åÊî∂ÂΩï"></a>Ë∞∑Ê≠åÊî∂ÂΩï</h2><ol>
<li><p>È¶ñÂÖàÂú®<a href="https://www.google.com/webmasters/tools/home?hl=zh-CN">Google Search Console</a>ÁôªÂΩïË∞∑Ê≠åË¥¶Âè∑</p>
</li>
<li><p>ÁÑ∂ÂêéÂú®ÁΩëÂùÄÂâçÁºÄ‰∏≠Â°´ÂÜôÁΩëÂùÄÔºå‰∏ãËΩΩÈ™åËØÅÊñá‰ª∂Âà∞‰∏ªÈ¢òÊñá‰ª∂Â§πÁöÑsourceÁõÆÂΩï<br><img src="https://img-blog.csdnimg.cn/68c9ef2e3f4c42ec8ca29f46f01905d4.jpeg#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</li>
<li><p>‰∏ãËΩΩÂêéÂÜçÈáçÊñ∞ÈÉ®ÁΩ≤‰∏Ä‰∏ãÔºåÊúÄÂêéÁÇπÂáªÈ™åËØÅ</p>
</li>
</ol>
<h3 id="Ê∑ªÂä†Á´ôÁÇπÂú∞Âõæ"><a href="#Ê∑ªÂä†Á´ôÁÇπÂú∞Âõæ" class="headerlink" title="Ê∑ªÂä†Á´ôÁÇπÂú∞Âõæ"></a>Ê∑ªÂä†Á´ôÁÇπÂú∞Âõæ</h3><p>Á´ôÁÇπÂú∞ÂõæÊòØ‰∏ÄÁßçÊñá‰ª∂ÔºåÊÇ®ÂèØ‰ª•Âú®ÂÖ∂‰∏≠Êèê‰æõ‰∏éÊÇ®ÁΩëÁ´ô‰∏≠ÁöÑÁΩëÈ°µ„ÄÅËßÜÈ¢ëÊàñÂÖ∂‰ªñÊñá‰ª∂ÊúâÂÖ≥ÁöÑ‰ø°ÊÅØÔºåËøòÂèØ‰ª•ËØ¥ÊòéËøô‰∫õÂÜÖÂÆπ‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇGoogle Á≠âÊêúÁ¥¢ÂºïÊìé‰ºöËØªÂèñÊ≠§Êñá‰ª∂Ôºå‰ª•‰æøÊõ¥È´òÊïàÂú∞ÊäìÂèñÊÇ®ÁöÑÁΩëÁ´ô„ÄÇÁ´ôÁÇπÂú∞Âõæ‰ºöÂëäËØâ Google ÊÇ®ËÆ§‰∏∫ÁΩëÁ´ô‰∏≠ÁöÑÂì™‰∫õÁΩëÈ°µÂíåÊñá‰ª∂ÊØîËæÉÈáçË¶ÅÔºåËøò‰ºöÊèê‰æõ‰∏éËøô‰∫õÊñá‰ª∂ÊúâÂÖ≥ÁöÑÈáçË¶Å‰ø°ÊÅØ„ÄÇ</p>
<ol>
<li><p>ÂÆâË£ÖÁ´ôÁÇπÂú∞ÂõæÊèí‰ª∂ <code>npm install hexo-generator-sitemap --save</code></p>
</li>
<li><p>Âú®hexoÊ†πÁõÆÂΩïÁöÑ_config.yml‰øÆÊîπ‰ª•‰∏ãÂÜÖÂÆπ</p>
<pre><code class="highlight yml"><span class="attr">url:</span> <span class="string">ÂçöÂÆ¢Âú∞ÂùÄ</span>
<span class="attr">sitemap:</span>
 <span class="attr">path:</span> <span class="string">sitemap.xml</span></code></pre></li>
<li><p>ÁÑ∂ÂêéÈÉ®ÁΩ≤ÂçöÂÆ¢ÔºåËæìÂÖ•<code>ÂçöÂÆ¢Âú∞ÂùÄ/sitemap.xml</code>ËÉΩÁúãËßÅ‰ª•‰∏ãÂÜÖÂÆπ<br><img src="https://img-blog.csdnimg.cn/74745ec1ca3e4d06a06ba512ddb5e3f1.png#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</li>
<li><p>ÊúÄÂêéÂú®<strong>Google Search Console</strong>‰∏äÁöÑÁ´ôÁÇπÂú∞Âõæ‰∏äÁÇπÂáªÊèê‰∫§<br><img src="https://img-blog.csdnimg.cn/371a45539f694c08a207367d47d25d88.jpeg#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</li>
</ol>
<h2 id="DisqusËØÑËÆ∫"><a href="#DisqusËØÑËÆ∫" class="headerlink" title="DisqusËØÑËÆ∫"></a>DisqusËØÑËÆ∫</h2><p>HexoÂèØ‰ª•Êê≠ËΩΩÁöÑËØÑËÆ∫Á≥ªÁªüÊúâÂæàÂ§öÔºåÊØîÂ¶ÇValineÔºåWalineÔºåDisqusÁ≠âÁ≠âÔºå‰ΩÜÊòØÊåâÈ¢úÂÄºÊù•ÁúãËøòÊòØDisqus</p>
<ol>
<li>È¶ñÂÖàÂú®<a href="https://disqus.com/">DisqusÂÆòÁΩë</a>ËøõË°åÊ≥®ÂÜåÔºåÁÑ∂ÂêéÁÇπÂáª‚ÄúGet STARTED‚ÄùÔºåÂπ∂ÈÄâÊã© ‚ÄúI want to install Disqus on my site‚Äù ÈÄâÈ°π</li>
<li>ÁÑ∂ÂêéÂú®ËøõÂÖ•Ë°®ÂçïÈ°µÊåâÁÖßÊèêÁ§∫ËøõË°åÂ°´ÂÜôÂç≥ÂèØÔºå‰ΩÜÊòØÊúâ‰∏§‰∏™Âú∞ÊñπÈúÄË¶ÅÊ≥®ÊÑèÔºå<code>Website Name</code>Ëøô‰∏™ÊòØ‰Ω†ÁöÑ‰∏ìÂ±ûÁΩëÂùÄÁöÑÂêçÂ≠óÔºåÈúÄË¶ÅËÆ∞‰ΩèÔºåËøòÊúâÂ∞±ÊòØÂú®‚ÄúSelect Plan‚ÄùËÆ∞ÂæóÈÄâ‚ÄúBasic‚Äù</li>
<li>ÊúÄÂêé‰øÆÊîπ_config.yml‰∏≠ÊääshortnameÊõøÊç¢‰∏∫‰Ω†Âú®ÂàõÂª∫Êó∂ÁöÑÂêçÂ≠óÔºå‰∏ÄËà¨Áé∞Âú®ÁöÑ‰∏ªÈ¢òÈÉΩÂ∏¶ÁöÑÊúâËØÑËÆ∫Ê®°ÁâàÔºåÂ¶ÇÊûúÊ≤°ÊúâÂ∞±ÈúÄË¶ÅËá™Â∑±Ê∑ªÂä†‰∫ÜÔºåËøô‰∏™‰∏çÂêåÁöÑ‰∏ªÈ¢ò‰∏çÂ§™Áõ∏ÂêåÔºåÂèØ‰ª•Áúã‰∏ãÂÆòÊñπÁöÑÂÆâË£ÖÊ®°ÁâàËøõË°å‰øÆÊîπ<br><img src="https://img-blog.csdnimg.cn/d1dc79115212411383a8dbd11971aaee.jpeg#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></li>
</ol>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>pnpmÁöÑnode_modulesÁªìÊûÑËÆæËÆ°</title>
    <url>/2022/08/24/pnpm%E7%9A%84node-modules%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[<h2 id="pnpmÁöÑnode-modulesÁªìÊûÑËÆæËÆ°"><a href="#pnpmÁöÑnode-modulesÁªìÊûÑËÆæËÆ°" class="headerlink" title="pnpmÁöÑnode_modulesÁªìÊûÑËÆæËÆ°"></a>pnpmÁöÑnode_modulesÁªìÊûÑËÆæËÆ°</h2><p>ÂàÜÊûêpnpm‰πãÂâçÔºåÂÖàËØ¥‰∏Ä‰∏ãnpmÁé∞Âú®ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò</p>
<h3 id="npmÁöÑÈóÆÈ¢ò"><a href="#npmÁöÑÈóÆÈ¢ò" class="headerlink" title="npmÁöÑÈóÆÈ¢ò"></a>npmÁöÑÈóÆÈ¢ò</h3><ul>
<li><p>Âπ≥Êó∂Êàë‰ª¨‰ΩøÁî®<code>npm install</code>ÂëΩ‰ª§ÂêéÔºånode_modulesÂ∞±‰ºöÂëàÁé∞‰ª•‰∏ãÁ±ª‰ººÂÜÖÂÆπ<br><img src="https://img-blog.csdnimg.cn/7396b28d86f84a21b15b4ef6026ddd45.png#pic_center" alt="npm_node_modules"></p>
</li>
<li><p>‰πãÊâÄ‰ª•Âá∫Áé∞ËøôÁßçÊâÅÂπ≥ÁöÑÁªìÊûÑÔºåÊúÄÂàùÊó∂ÂàùË°∑ÊòØÂ•ΩÁöÑÔºå‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÂà©Áî®ËµÑÊ∫êÔºåÊääÊØè‰∏™‰æùËµñÂÖ®ÈÉ®ÊîæÂà∞È°∂Â±ÇÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÈÄ†ÊàêÊØè‰∏™‰æùËµñÂµåÂ•óËøáÊ∑±ÔºåÂØºËá¥ÂæàÂ§öÈáçÂ§ç‰æùËµñÊñá‰ª∂</p>
</li>
<li><p>‰ΩÜÊòØÈöèÁùÄËøôÁßçÊñá‰ª∂ÁªìÊûÑÈÄêÊ≠•‰ΩøÁî®ÂêéÔºåÂ∞±‰ºöÊö¥Èú≤Âá∫Êù•‰∏§‰∏™ÈóÆÈ¢ò</p>
<ul>
<li><strong>ÂπΩÁÅµ‰æùËµñ</strong></li>
<li><strong>ÁâàÊú¨ÂÜ≤Á™Å</strong></li>
</ul>
</li>
<li><p>ÂπΩÁÅµ‰æùËµñÂ∞±ÊòØ‰Ω†Âú®ÂºïÁî®npmÂåÖÊó∂Ôºå‰Ω†‰ºöÂèëÁé∞‰∏Ä‰∫õÊ≤°ÊúâÂú®<code>package.json</code>‰∏≠Âá∫Áé∞ÁöÑÂåÖ‰πüËÉΩÂºïÁî®ÔºåËøô‰∏™Â∞±ÊòØÂπΩÁÅµ‰æùËµñÔºåËøôÊòØÂõ†‰∏∫‰Ω†Âú®install‰∏ãËΩΩnpmÂåÖÊó∂ÔºånpmÂåÖ‰πüÊúâÂÆÉÁöÑ‰æùËµñ‰ºö‰∏ãËΩΩÔºå‰ΩÜÊòØ‰∏ãËΩΩÁöÑ‰æùËµñ‰πü‰ºöÂ≠òÂú®node_modulesÂêå‰∏ÄÂ±ÇÁ∫ß‰∏ãÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥ÂèØ‰ª•Áõ¥Êé•ÂºïÁî®</p>
</li>
<li><p>ÁâàÊú¨ÂÜ≤Á™ÅÊòØÂõ†‰∏∫‰∏çÂêåÁöÑ‰æùËµñÂèØËÉΩ‰æùËµñÁöÑÂåÖÁâàÊú¨‰πü‰∏çÂêåÔºå‰ΩÜÊòØnode_modulesÁöÑÂêå‰∏ÄÂ±ÇÁ∫ßÂè™ËÉΩÂ≠òÂú®‰∏Ä‰∏™ÂåÖÁöÑ‰∏Ä‰∏™ÁâàÊú¨Âè∑ÔºåÂ¶ÇÊûúÊúâ‰∏çÂêåÁöÑÁâàÊú¨Âè∑Â∞±Âè™ËÉΩÂ≠òÂú®‰æùËµñÂåÖÁöÑnode_modules‰∏≠ÔºåËøôÊ†∑Â∞±‰ºöÂØºËá¥Âá∫Áé∞ÈáçÂ§çËµÑÊ∫ê</p>
<pre><code class="highlight js">‚îú‚îÄ‚îÄ package-A @<span class="number">1.0</span>
|‚îÄ‚îÄ package-B @<span class="number">1.0</span>
‚îú‚îÄ‚îÄ package-C @<span class="number">1.0</span>
‚îÇ   ‚îî‚îÄ‚îÄ package-A @<span class="number">2.0</span>
‚îÇ   ‚îî‚îÄ‚îÄ package-B @<span class="number">2.0</span>
‚îú‚îÄ‚îÄ package-D @<span class="number">1.0</span>
‚îÇ   ‚îî‚îÄ‚îÄ package-A @<span class="number">2.0</span>
‚îÇ   ‚îî‚îÄ‚îÄ package-B @<span class="number">2.0</span></code></pre></li>
</ul>
<h3 id="pnpmÁöÑÂá∫Áé∞"><a href="#pnpmÁöÑÂá∫Áé∞" class="headerlink" title="pnpmÁöÑÂá∫Áé∞"></a>pnpmÁöÑÂá∫Áé∞</h3><ul>
<li><p>Âú®ÊâÄÊúâÂâçÁ´ØËã¶npm‰πÖÂ∑≤Êó∂ÔºåpnpmÂá∫Áé∞‰∫ÜÔºåÂπ∂‰∏îÂú®pnpmÂÆòÁΩëÁöÑÁÆÄ‰ªã‰∏äÂ∞±ÁÆÄÂçïËØ¥Êòé‰∫ÜÂÆÉÁöÑÊûÑÈÄ†Ôºö<code>store + link</code><br><img src="https://img-blog.csdnimg.cn/20ef6cd68a0440c9841ea1450297c17a.jpeg#pic_center" alt="pnpm_node_modules"></p>
<ul>
<li>storeÂ∞±ÊòØ‰æùËµñÁöÑÂÆûÈôÖÂ≠òÂÇ®‰ΩçÁΩÆÔºåMac&#x2F;linuxÂú®<code>&#123;home dir&#125;&gt;/.pnpm-store/v3</code>ÔºåwindowsÂú®<code>ÂΩìÂâçÁõò/.pnpm-store/v3</code>„ÄÇËøôÊ†∑Â∞±‰ºöÊúâ‰∏™Â•ΩÂ§ÑÔºå‰Ω†Âú®Â§ö‰∏™È°πÁõÆ‰ΩøÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™‰æùËµñÊó∂ÔºåÂ∞±‰∏çÁî®ÈáçÂ§ç‰∏ãËΩΩÔºåËøôÊ†∑Â∞±ÊûÅÂ§ßÁöÑÂáèÂ∞ëÂ≠òÂÇ®Á©∫Èó¥</li>
<li>linkÊòØÊåáÁ¨¶Âè∑ÈìæÊé•(<code>SymbolicLink</code>)ÂíåÁ°¨ÈìæÊé•(<code>HardLink</code>)<ul>
<li>SymbolicLinkÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÊñá‰ª∂ÔºåÂåÖÂê´‰∏ÄÊù°‰ª•ÁªùÂØπË∑ØÂæÑÊàñËÄÖÁõ∏ÂØπË∑ØÂæÑÁöÑÂΩ¢ÂºèÊåáÂêëÂÖ∂‰ªñÊñá‰ª∂ÊàñËÄÖÁõÆÂΩïÁöÑÂºïÁî®ÔºåÂÆÉÁöÑÂ≠òÂú®‰∏ç‰æùËµñ‰∫éÁõÆÊ†áÊñá‰ª∂ÔºåÂ¶ÇÊûúÁõÆÊ†áÊñá‰ª∂Ë¢´Âà†Èô§ÊàñËÄÖÁßªÂä®ÔºåÊåáÂêëÁõÆÊ†áÊñá‰ª∂ÁöÑÁ¨¶Âè∑ÈìæÊé•‰æùÁÑ∂Â≠òÂú®Ôºå‰ΩÜÊòØÂÆÉ‰ª¨‰ºöÊåáÂêë‰∏Ä‰∏™‰∏çÂ§çÂ≠òÂú®ÁöÑÊñá‰ª∂</li>
<li>Áõ∏ÊØî‰∫éSymbolicLinkÔºåHardLink‰∏çÊòØÂºïÁî®Êñá‰ª∂ÔºåËÄåÊòØÂºïÁî®<strong>inode</strong>ÔºåinodeÊòØÊñá‰ª∂Á≥ªÁªüÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÁî®‰∫éÊèèËø∞Êñá‰ª∂Á≥ªÁªüÂØπË±°„ÄÇÊâÄ‰ª•‰Ω†Âç≥‰ΩøÊõ¥ÊîπÁõÆÊ†áÊñá‰ª∂ÁöÑÂÜÖÂÆπÊàñ‰ΩçÁΩÆÔºåHardLink‰ªçÁÑ∂ÊåáÂêëÁõÆÊ†áÊñá‰ª∂ÔºåÂõ†‰∏∫inodeÊåáÂêëËØ•Êñá‰ª∂</li>
</ul>
</li>
</ul>
</li>
<li><p>ÁÑ∂ÂêéÊãøreact‰∏æ‰æãÔºåÂΩì<code>pnpm add react</code>ÂêéÔºåÂú®node_modulesÁªàÁ´ØËæìÂÖ•<code>tree -a -L 3</code>‰ºöÂæóÂà∞‰ª•‰∏ãnode_modulesÁªìÊûÑ</p>
<pre><code class="highlight js">.
‚îú‚îÄ‚îÄ .<span class="property">modules</span>.<span class="property">yaml</span>
‚îú‚îÄ‚îÄ .<span class="property">pnpm</span>
‚îÇ   ‚îú‚îÄ‚îÄ js-tokens@<span class="number">4.0</span><span class="number">.0</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
‚îÇ   ‚îú‚îÄ‚îÄ lock.<span class="property">yaml</span>
‚îÇ   ‚îú‚îÄ‚îÄ loose-envify@<span class="number">1.4</span><span class="number">.0</span>
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
‚îÇ   ‚îú‚îÄ‚îÄ node_modules
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .<span class="property">bin</span>
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ js-tokens -&gt; ../js-tokens@<span class="number">4.0</span><span class="number">.0</span>/node_modules/js-tokens
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loose-envify -&gt; ../loose-envify@<span class="number">1.4</span><span class="number">.0</span>/node_modules/loose-envify
‚îÇ   ‚îî‚îÄ‚îÄ react@<span class="number">18.2</span><span class="number">.0</span>
‚îÇ       ‚îî‚îÄ‚îÄ node_modules
‚îî‚îÄ‚îÄ react -&gt; .<span class="property">pnpm</span>/react@<span class="number">18.2</span><span class="number">.0</span>/node_modules/react</code></pre></li>
<li><p>node_modules‰∏ãÈô§‰∫Ü.pnpmÂ§ñÂè™Êúâ‰∏Ä‰∏™reactÔºåËøô‰∏™reactÂè™ÊòØ‰∏Ä‰∏™SymbolicLinkÔºåÂΩìnode.jsËß£ÊûêÊó∂Ôºå‰ºöÊâæÂà∞reactÁöÑÁúüÂÆû‰ΩçÁΩÆ<code>node_modules/.pnpm/react@18.2.0/node_modules/react</code></p>
</li>
<li><p>.pnpmÂ∞±ÊòØÂ∞ÜÊâÄÊúâ‰æùËµñÊîæÂú®Âêå‰∏ÄÂ±ÇÊñá‰ª∂Â§π‰∏≠ÔºåÊØè‰∏™ÂåÖÈÉΩÂèØ‰ª•ÈÄöËøá<code>.pnpm/&lt;name&gt;@&lt;version&gt;/node_modules/&lt;name&gt;</code>ËøôÁßçË∑ØÂæÑÊâæÂà∞ÔºåÁÑ∂ÂêéÈÄöËøá<code>hand link</code>ÁöÑÊñπÂºèÂú®store‰∏≠ÂºïÁî®‰æùËµñÊñá‰ª∂</p>
</li>
<li><p>ÈÄöËøáËøôÁßçÊñá‰ª∂ÁªìÊûÑÔºåpnpmÂ∞±Ëß£ÂÜ≥‰∫ÜnpmÁöÑ‰∏§‰∏™ÈóÆÈ¢òÔºåÈ¶ñÂÖànode_modules‰∏ã‰∏ç‰ºöÊúâ‰Ω†Êú™Âú®package.json‰∏≠Â£∞ÊòéÁöÑ‰æùËµñÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÊúâÂπΩÁÅµ‰æùËµñÁöÑÈóÆÈ¢ò„ÄÇÁÑ∂Âêé.pnpm‰∏ã‰ºöÊúâname+versionÁöÑÊñπÂºèÈìæÊé•Âà∞store‰∏≠ÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÂá∫Áé∞Âõ†‰∏∫ÁâàÊú¨ÂÜ≤Á™ÅÈÄ†ÊàêËµÑÊ∫êÈáçÂ§çÁöÑÈóÆÈ¢ò</p>
</li>
</ul>
<h3 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h3><ul>
<li><a href="https://www.pnpm.cn/blog/2020/05/27/flat-node-modules-is-not-the-only-way">Flat node_modules is not the only way</a></li>
<li><a href="https://www.pnpm.cn/symlinked-node-modules-structure">Symlinked node_modules structure</a></li>
<li><a href="https://juejin.cn/post/7043998041786810398">One For AllÔºöÂü∫‰∫épnpm + lerna + typescriptÁöÑÊúÄ‰Ω≥È°πÁõÆÂÆûË∑µ - ÁêÜËÆ∫ÁØá</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>pnpm</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëBias in AI is a mirror of our culture</title>
    <url>/2023/07/29/%E3%80%90%E7%BF%BB%E3%80%91Bias-in-AI-is-a-mirror-of-our-culture/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://uxdesign.cc/bias-in-ai-is-a-mirror-of-our-culture-3607bd795c57">Bias in AI is a mirror of our culture</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@arvindsanjeev">Arvind Sanjeev</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p><img src="https://miro.medium.com/v2/resize:fit:1400/1*ZQAjJr41_3iLqVKCfmyKGg.gif"></p>
<p>Âú®‰ªäÂ§©ÁöÑÁîüÊ¥ª‰∏≠Ôºå‰∫∫Á±ªÊõ¥Â§öÁöÑÊòØ‰∏é AI Ê®°Âûã‰∫íÂä®ÔºåËÄåÈùû‰∫∫Á±ª„ÄÇÊó†ËÆ∫ÊòØÂú® Youtube Âíå Netflix ‰∏äËøõË°åÂ®±‰πêÊ¥ªÂä®ÔºåËøòÊòØÂú® Instagram Âíå TikTok ‰∏äÂØªÊâæÁÅµÊÑüÔºåÂú® Tinder Âíå Hinge ‰∏äÂØªÊâæ ÊúãÂèãÔºå AI Ê®°ÂûãÈÉΩ‰ºöÂÜ≥ÂÆöÊàë‰ª¨Â∫îËØ•‰∏éÂì™‰∫õ‰∫∫Á±ªÂíåÂÜÖÂÆπ‰∫íÂä®„ÄÇAI Ê®°ÂûãÂ∑≤ÁªèÂú®‰∏çÁü•‰∏çËßâÂú∞ÊéßÂà∂ÁùÄÊàë‰ª¨ÁöÑÁîüÊ¥ª„ÄÇ</p>
<p>Êàë‰ª¨ÊääÂÜ≥Á≠ñÊùÉ‰∫§Áªô‰∫ÜÁÆóÊ≥ïÔºåÁé∞Âú®ÂÆÉ‰ª¨ÂèØ‰ª•ÂÜ≥ÂÆöÂì™‰∫õ‰∫∫ÂèØ‰ª•Ëé∑Âæó‰ΩèÊàøÊàñÂåªÁñó‰øùÈô©ÔºåË∞Å‰ºöË¢´Èõá‰Ω£ÊàñËÄÖË¢´Â§ßÂ≠¶ÂΩïÂèñÔºåÊàë‰ª¨ÁöÑ‰ø°Áî®ËØÑÂàÜÁ≠âÁ≠â„ÄÇ‰∫∫‰ª¨Â∏åÊúõÈÄöËøáÂÖ¨ÂºèÂ∞Ü‰∫∫Á±ªÁöÑÁúãÊ≥ïÂâîÈô§Ôºå‰ΩøÊú∫Âô®ËÉΩÂ§üÂÅöÂá∫ÂÖ¨Âπ≥ÂÖ¨Ê≠£ÁöÑÂÜ≥ÂÆöÔºåÁÑ∂ËÄåÔºåËÆ≠ÁªÉËøô‰∫õÊ®°ÂûãÁöÑÊï∞ÊçÆÂ∞±ÊòØÊù•Ëá™‰∫é‰∏Ä‰∏™‰ªéÊ†πÊú¨‰∏äÂ≠òÂú®ÂÅèËßÅÁöÑÁ§æ‰ºöÔºõË¶ÅÂÆåÂÖ®Ê∂àÈô§Ëøô‰∫õÂÅèËßÅÊòØ‰∏çÂèØËÉΩÁöÑ„ÄÇAI Âè™ÊòØÂ∞ÜÂÆÉ‰ª¨ÂèàÂèçÂ∞ÑÁªôÊàë‰ª¨„ÄÇ</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/59bMh59JQDo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<h2 id="Algorithmic-racism"><a href="#Algorithmic-racism" class="headerlink" title="Algorithmic racism"></a>Algorithmic racism</h2><p><strong>ÁßçÊóèÊ≠ßËßÜÁÆóÊ≥ïÊ≠£Âú®Êää‰∫∫‰ª¨ÈÄÅËøõÁõëÁã±„ÄÇ</strong></p>
<p><img src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*CbF68Ttsv7AItzxNs_S0LA.png"></p>
<p>Âú®2015Âπ¥ÔºåMedia Lab ÁöÑ Joy Buolamwini ÂèëÁé∞ÔºåÂΩìÊó∂ÊâÄÊúâÁöÑ‰∫∫ËÑ∏ËØÜÂà´ÁÆóÊ≥ï(Êù•Ëá™ IBM „ÄÅ Microsoft Á≠âÂÖ¨Âè∏)ÈÉΩÊó†Ê≥ïÊ£ÄÊµãÂà∞Â•πÁöÑËÑ∏ÔºåÂõ†‰∏∫Â•πÊòØ‰∏Ä‰∏™Èªë‰∫∫Â•≥ÊÄß„ÄÇÁÑ∂ËÄåÔºåÂΩìÂ•π<a href="https://artsandculture.google.com/story/BQWBaNKAVWQPJg?hl=en">Â∏¶‰∏äÁôΩËâ≤Èù¢ÁΩ©</a>Êó∂ÔºåËøô‰∫õÁÆóÊ≥ïÂèàËÉΩÁúãÂà∞Â•π‰∫Ü„ÄÇÂ•πÊ≥®ÊÑèÂà∞ÔºåÂú®ÂàÜÊûêÈªë‰∫∫Â•≥ÊÄßÂíåÁôΩ‰∫∫Áî∑ÊÄßÊó∂ÔºåËØØÂ∑ÆËææÂà∞35%„ÄÇÊàë‰ª¨ËøáÂéªËøòÊúâËÆ∏Â§öÂÖ∂‰ªñÁöÑ‰æãÂ≠êÔºö</p>
<ul>
<li>Âú®2015Âπ¥ÔºåË∞∑Ê≠åÁöÑÂõæÂÉèÊ†áËÆ∞ÁÆóÊ≥ïÊää<a href="https://www.theverge.com/2015/7/1/8880363/google-apologizes-photos-app-tags-two-black-people-gorillas">‰∏ÄÂØπÈªë‰∫∫ÊúãÂèãÊ†á‰∏∫‚ÄúÂ§ßÁå©Áå©‚Äù</a></li>
<li>Flicker ÁöÑÁ≥ªÁªü‰πüÁäØ‰∫Ü<a href="https://petapixel.com/2015/05/20/flickr-fixing-racist-auto-tagging-feature-after-black-man-mislabeled-ape/">ÂêåÊ†∑ÁöÑÈîôËØØ</a>ÔºåÁî®‚ÄúÂä®Áâ©‚ÄùÂíå‚ÄúÁåøÁå¥‚ÄùÊ†áËÆ∞‰∫Ü‰∏Ä‰∏™Èªë‰∫∫„ÄÇ</li>
<li>Nikon ÁöÑÁõ∏Êú∫ÂèØ‰ª•Ê£ÄÊµã‰∏Ä‰∏™‰∫∫ÊòØÂê¶ÊåÅÁª≠Áú®ÁúºÔºå‰ΩÜÂÆÉÂç¥ÂëäËØâ‰∏Ä‰Ωç‰∫öÊ¥≤Áî®Êà∑<a href="https://content.time.com/time/business/article/0,8599,1954643,00.html">Â•πÁöÑÁúºÁùõÊòØÈó≠ÁùÄÁöÑ</a></li>
<li>HP ÁöÑÁΩëÁªúÊëÑÂÉèÂ§¥Âú®2009Âπ¥ÂèØ‰ª•ËΩªÊùæËøΩË∏™Âà∞ÁôΩ‰∫∫ÁöÑËÑ∏Ôºå‰ΩÜÂç¥<a href="https://gizmodo.com/hp-face-tracking-webcams-dont-recognize-black-people-5431190">Áúã‰∏çÂà∞Èªë‰∫∫ÁöÑËÑ∏</a></li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/t4DT3tQqgRM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<blockquote>
<p>‚ÄúWe will not solve the problems of the present with the tools of the past. The past is a very racist place. And we only have data from the past to train Artificial Intelligence.‚Äù<br>‚Äî Trevor Paglen, artist and critical geographer</p>
</blockquote>
<p>ÊúâÂÅèËßÅÁöÑ‰∫∫ËÑ∏ËØÜÂà´ÁÆóÊ≥ïÁîöËá≥ÈîôËØØÂú∞Â∞ÜÈªë‰∫∫Áî∑Â≠êÈÄÆÊçïÂπ∂ÈÄÅËøõÁõëÁã±„ÄÇ‰ª•‰∏ãÊòØÁæéÂõΩÊâßÊ≥ï‰∫∫Âëò‰ΩøÁî®ÁßçÊóèÊ≠ßËßÜÂÜ≥Á≠ñÂ∑•ÂÖ∑ÁöÑ‰∏§‰∏™‰æãÂ≠êÔºö</p>
<ul>
<li><a href="https://www.propublica.org/article/how-we-analyzed-the-compas-recidivism-algorithm">COMPAS</a>ÔºöÁæéÂõΩÊ≥ïÂÆòÂíåÂÅáÈáäÂÆò‰ΩøÁî®ÁöÑ‰∏ÄÁßçÁ¥ØÁäØÈ¢ÑÊµãËΩØ‰ª∂ÔºåÁî®‰∫éÁ°ÆÂÆöÂàë‰∫ãË¢´ÂëäÁöÑÈ£éÈô©Á®ãÂ∫¶ÔºåËøõËÄåÂΩ±Âìç‰ªñ‰ª¨ÁöÑÈáèÂàë„ÄÇËØ•ÁÆóÊ≥ï‰∏çÂÖ¨Âπ≥Âú∞Â∞ÜÈªë‰∫∫ÂíåË•øÁè≠ÁâôË£î‰∫∫ÂΩíÁ±ª‰∏∫ÊØîÂÖ∂‰ªñ‰∫∫Êõ¥Âç±Èô©ÁöÑ‰∫∫„ÄÇ</li>
</ul>
<p><img src="https://miro.medium.com/v2/format:webp/1*jLw2AcMjDVAJ52em6SD6Pg.png"></p>
<ul>
<li><a href="https://predpol.com/">PrePol</a>: Predictive Policing ÊòØ‰∏ÄÁßç‚ÄúÂ∞ëÊï∞Ê∞ëÊóèÊä•Âëä‚ÄùÂºèÁöÑÁäØÁΩ™È¢ÑÊµãËΩØ‰ª∂ÔºåÁî±Ë≠¶ÊñπÁî®Êù•Á°ÆÂÆöÂì™‰∫õÁ§æÂå∫Â∫îËØ•ÊØîÂÖ∂‰ªñÁ§æÂå∫ËøõË°åÊõ¥Â§öÁöÑÂ∑°ÈÄª„ÄÇÁî±‰∫éËøôÁßçÊúâÂÅèËßÅÁöÑÁÆóÊ≥ïÔºåÈªë‰∫∫Á§æÂå∫ÊÄªÊòØÂèóÂà∞Êõ¥Â§öÁöÑÂ∑°ÈÄªÂíåÈ™öÊâ∞„ÄÇ</li>
</ul>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DMptJ7Eo9CG3XedP.png"></p>
<blockquote>
<p>Black men are six times more likely to be incarcerated by police than white men and 21 times more likely to be killed by them.<br>‚Äî Cathy O Neil, Weapons of Math Destruction</p>
</blockquote>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">This is a damn trap <a href="https://t.co/UssHF5MtNk">pic.twitter.com/UssHF5MtNk</a></p>&mdash; Saturday Night Live - SNL (@nbcsnl) <a href="https://twitter.com/nbcsnl/status/1502873834029989889?ref_src=twsrc%5Etfw">March 13, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="Gender-bias"><a href="#Gender-bias" class="headerlink" title="Gender bias"></a>Gender bias</h2><p><strong>Binary algorithms Âä†Âº∫‰∫ÜÂàªÊùøÂç∞Ë±°</strong></p>
<p>Subspring ÊòØÊúâÂè≤‰ª•Êù•Á¨¨‰∏Ä‰∏™Áî± AI Âàõ‰ΩúÁöÑÁü≠Áâá„ÄÇOscar SharpÁî®ÁßëÂπªÁîµÂΩ±ËÑöÊú¨ËÆ≠ÁªÉÊ®°ÂûãÔºåÂàõÈÄ†Âá∫ËøôÈÉ®‰ΩúÂìÅ„ÄÇ2021Âπ¥ÔºåÂΩì‰ªñÂ∞ùËØïÁî®Âä®‰ΩúÁîµÂΩ±ÂâßÊú¨ËÆ≠ÁªÉÊ®°ÂûãÂÅöÁ±ª‰ººÁöÑ‰∫ãÊÉÖÊó∂Âç¥Â§ßÂêÉ‰∏ÄÊÉä„ÄÇÂõ†‰∏∫‰ªñÊ≥®ÊÑèÂà∞ÔºåÊâÄÊúâÁîüÊàêÁöÑÊïÖ‰∫ãÈÉΩÂè™Êúâ‰∏Ä‰∏™Á®≥ÈáçÁöÑÁî∑ÊÄßËßíËâ≤ÔºåËÄåÂîØ‰∏ÄÁöÑÂ•≥ÊÄßËßíËâ≤(ÊÅãÁà±ÂØπË±°)Âú®Êï¥‰∏™ÊïÖ‰∫ã‰∏≠ÈÉΩÂè™ÊòØË¢´Áß∞‰∏∫‚ÄùÂ•≥ÊúãÂèã‚Äù</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/sv6ew4EWRiQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p>OpenAIÁöÑÁ†îÁ©∂ÂëòÂèëÁé∞‰∫ÜÂú®Ëá™Â∑±ÁöÑËΩØ‰ª∂‰∏äÊèèËø∞Áî∑ÊÄßÂíåÂ•≥ÊÄßÊó∂‰∫ßÁîüÁöÑÂçÅÂ§ßÊúâÂÅèËßÅÁöÑËØçÊ±á„ÄÇÂØπ‰∫éÁî∑ÊÄßÊù•ËØ¥Ôºå‚Äùlarge‚Äù„ÄÅ‚Äùmostly‚Äù„ÄÅ‚Äùlazy‚Äù„ÄÅ‚Äùfantastic ‚ÄúÂíå ‚Äúeccentric ‚ÄúÊòØÊúÄÂ§öÁöÑËØçÊ±á„ÄÇËÄåÂØπ‰∫éÂ•≥ÊÄßÊù•ËØ¥ÔºåÂàôÊòØ ‚Äúoptimistic‚Äù„ÄÅ‚Äùbubbly‚Äù„ÄÅ‚Äùnaughty‚Äù„ÄÅ‚Äùeasy-going ‚ÄúÂíå ‚Äúpetite‚Äù„ÄÇÁ†îÁ©∂ÂëòÂÜôÈÅìÔºö‚ÄúÊàë‰ª¨ÂèëÁé∞ÔºåÂ•≥ÊÄßÊõ¥Â∏∏Áî®‰ª•Â§ñË°®‰∏∫ÂØºÂêëÁöÑËØçÊ±áÊèèËø∞Ëá™Â∑±‚Äù</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Machine learning models learn the biases back in data and reflect them back to us<br><br>Hungarians have no gendered pronouns but apparently, Google Translate has learnt all the gender stereotypes! üò±üò± <a href="https://t.co/Hi0r62PMpF">pic.twitter.com/Hi0r62PMpF</a></p>&mdash; Bindu Reddy (@bindureddy) <a href="https://twitter.com/bindureddy/status/1450317088271126529?ref_src=twsrc%5Etfw">October 19, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="Transphobic-algorithms"><a href="#Transphobic-algorithms" class="headerlink" title="Transphobic algorithms"></a>Transphobic algorithms</h2><p><strong>Êàë‰ª¨Â∑≤ÁªèÁîüÊ¥ªÂú®‰∏Ä‰∏™ÊÄßÂà´Ê≠ßËßÜÁöÑ‰∏ñÁïåÈáåÔºå‰ΩÜ AI ËÆ©ÊÉÖÂÜµÂèòÂæóÊõ¥Á≥üÁ≥ï„ÄÇ</strong></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAQr-ApTrxwBugIpd-Wmgg.png"></p>
<p>Automatic Gender Recognition(AGR)ÊòØ transphobic algorithms ÁöÑÊúÄ‰Ω≥Á§∫‰æã„ÄÇAGRÂπøÊ≥õÁî®‰∫éÊú∫Âú∫„ÄÅÂïÜÂú∫Á≠âÂÖ¨ÂÖ±Âú∫ÊâÄ„ÄÇÂΩìÁÆóÊ≥ïÊó†Ê≥ïÊ†áËÆ∞ non-binary ‰∫∫ÁöÑÊÄßÂà´Êó∂ÔºåÂ∞±‰ºöÁªô‰ªñ‰ª¨Â∏¶Êù•ÂæàÂ§öÁæûËæ±Âíå‰∏çÈÄÇÔºå‰ªéËÄåÂºïËµ∑‰ªñ‰ª¨Êõ¥Â§öÁöÑË≠¶ËßâÂíåÂÖ≥Ê≥®„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Sejw17f93q7ItFEd1zH07A.png"></p>
<blockquote>
<p>‚ÄúEvery trans person you talk to has a TSA horror story. The best you can hope for is just to be humiliated; at worst, you are going to be harassed, detained, subjected to very invasive screenings, etc. Trans people or gender non-conforming people who have a multi-racial or Middle Eastern descent are most probable to have a negative airport security incident.‚Äù<br>‚Äî Kelsey Campbell, Founder Gayta Science</p>
</blockquote>
<p>‰∫ÜËß£Êõ¥Â§ö transphobic algorithms:</p>
<ul>
<li><a href="https://edition.cnn.com/2019/11/21/tech/ai-gender-recognition-problem/index.html">AI software defines people as male or female. That‚Äôs a problem</a>„ÄÇ‰ΩúËÄÖÔºöRachel Metz, CNN</li>
<li><a href="https://venturebeat.com/ai/a-transgender-ai-researchers-nightmare-scenarios-for-facial-recognition-software/">A transgender AI researcher‚Äôs nightmare scenarios for facial recognition software</a>Ôºå‰ΩúËÄÖÔºöKhari JohnsonÔºåVentureBeat</li>
<li><a href="https://reallifemag.com/counting-the-countless/">Counting the Countless</a>Ôºå‰ΩúËÄÖÔºöOs Keyes, Real life mag</li>
</ul>
<h2 id="Biased-hiring-algorithms"><a href="#Biased-hiring-algorithms" class="headerlink" title="Biased hiring algorithms"></a>Biased hiring algorithms</h2><p>Â¶ÇÊûú‰Ω†ÊòØ‰∏Ä‰∏™Âè´ Jared ÁöÑÁôΩ‰∫∫ÔºåÂú®È´ò‰∏≠ÊâìËøáÊõ≤Ê£çÁêÉÔºå‰Ω†Â∞±ËÉΩÂæóÂà∞Ëøô‰ªΩÂ∑•‰ΩúÔºÅ</p>
<p>‰ΩøÁî® AI-powered ÁÆÄÂéÜÁ≠õÈÄâÂ∑•ÂÖ∑ÁöÑÁÅµÊÑüÊù•Ëá™‰∫é<a href="https://en.wikipedia.org/wiki/Blind_audition">Áõ≤ÈÄâ</a>ÔºåÂç≥‰πêÂõ¢Âú®Â∞ÅÈó≠Â∏∑ÂπïÂêéÈÄâÊã©Èü≥‰πêÂÆ∂„ÄÇËøôÂèØ‰ª•ËÆ©‰ªñ‰ª¨ÂøΩÁï•Ëâ∫ÊúØÂÆ∂ÁöÑÊÄßÂà´„ÄÅÁßçÊóè„ÄÅÂ£∞Ë™âÁ≠âÂõ†Á¥†„ÄÇÁÑ∂ËÄåÔºåÂ§ßÂ§öÊï∞ÊãõËÅòÁÆóÊ≥ï‰∏çÂèØÈÅøÂÖçÂú∞‰ºö<a href="https://hbr.org/2019/05/all-the-ways-hiring-algorithms-can-introduce-bias">‰∫ßÁîüÂÅèËßÅ</a>„ÄÇ</p>
<p>AmazonÂ∞±ÊòØ‰∏Ä‰∏™‰æãÂ≠êÔºõ‰ªñ‰ª¨ÁöÑÊãõËÅòÂíåËß£ÈõáÁÆóÊ≥ïÈÉΩËá≠ÂêçÊò≠Ëëó„ÄÇ‰ªñ‰ª¨ÁöÑ<a href="https://qz.com/1427621/companies-are-on-the-hook-if-their-hiring-algorithms-are-biased">ÊãõËÅòÁÆóÊ≥ïÂÅèÁà±ÁôΩ‰∫∫Áî∑ÊÄß</a>ÔºåËÄå‰∏çÊòØÂÖ∂‰ªñ‰∫∫Áæ§ÔºåËÄåËß£ÈõáÁÆóÊ≥ïÂàô‰ºöÂú®Ê≤°ÊúâÊòéÁ°ÆÁêÜÁî±ÊàñËÄÖÊ†πÊú¨Ê≤°Êúâ‰∫∫‰∏∫ÁõëÁù£ÁöÑÊÉÖÂÜµ‰∏ã<a href="https://www.bloomberg.com/news/features/2021-06-28/fired-by-bot-amazon-turns-to-machine-managers-and-workers-are-losing-out">Ëß£ÈõáÂ∑•ÂéÇÂ∑•‰∫∫</a>„ÄÇ</p>
<blockquote>
<p>After the company trained the algorithm on 10 years of its own hiring data, the algorithm reportedly became biased against female applicants. The word ‚Äúwomen,‚Äù like in women‚Äôs sports, would cause the algorithm to specifically rank applicants lower.<br>‚Äî Companies are on the hook if their hiring algorithms are biased, QZ</p>
</blockquote>
<h2 id="Who‚Äôs-fighting-back"><a href="#Who‚Äôs-fighting-back" class="headerlink" title="Who‚Äôs fighting back?"></a>Who‚Äôs fighting back?</h2><p>AI ÂÆ°ËÆ°ÊòØÊúÄÂπø‰∏∫Êé•ÂèóÁöÑÂáèÂ∞ëÂÅèËßÅÁöÑÊäÄÊúØ‰πã‰∏Ä„ÄÇËøô‰∏™Ê°ÜÊû∂Ë¢´ÂπøÊ≥õÁî®‰∫éÁ°ÆÂÆöAIÊ®°ÂûãÊòØÂê¶Â≠òÂú®ÂÅèËßÅ„ÄÅÊ≠ßËßÜÊàñÂÖ∂‰ªñÊ≤°ÂèëÁé∞ÁöÑÂÅèËßÅ„ÄÇÂÉèMetaÂíåMicrosoftËøôÁßçÂÖ¨Âè∏Â∑≤ÁªèÊã•ÊúâÂÜÖÈÉ®ÂÆ°ËÆ°Âõ¢ÈòüÊù•ÂàÜÊûêËøô‰∫õÊ®°ÂûãÔºå‰ΩÜÂ§ñÈÉ®Êú∫ÊûÑÂ¶ÇORCAA„ÄÅProPublica„ÄÅNISTÁ≠âÊú∫ÊûÑ‰πüÂú®ËøõË°åÂÆ°ËÆ°„ÄÇAJLÔºàAlgorithmic Justice LeagueÔºâÁöÑËÆ∫Êñá„ÄäWho audits the auditors„ÄãËØ¶ÁªÜÊèèËø∞‰∫ÜAIÂÆ°ËÆ°ÁîüÊÄÅÁ≥ªÁªüÁöÑÊÉÖÂÜµ„ÄÇ</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/uaRKNGvQ4Pw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p>‰ª•‰∏ãÊòØ‰∏Ä‰∫õÂáèÂ∞ëAIÂÅèËßÅÁöÑÂÖ∂‰ªñ‰æãÂ≠êÔºö</p>
<ul>
<li><a href="https://nvlpubs.nist.gov/NISTpubs/SpecialPublications/NIST.SP.1270.pdf">Standards for Identifying and Managing Bias in Artificial Intelligence</a>ÔºöNISTÂà∂ÂÆöÁöÑguidelineÔºåÁî®‰∫éÊîØÊåÅÂèØ‰ø°ÂíåË¥üË¥£ÊÄßÁöÑAIÂèëÂ±ï</li>
<li><a href="https://arxiv.org/abs/1710.06921">Themis</a>Ôºö‰∏ÄÊ¨æÂÆ°ËÆ°ËΩØ‰ª∂ÔºåÁî®‰∫éËÆæËÆ°Âá∫ÁÆóÊ≥ï‰∏≠ÁöÑÂÅèÂ∑ÆÔºåÊè≠Èú≤Âá∫AIÊ®°Âûã‰∏≠ÈöêËóèÁöÑ‰∏çÂπ≥Ë°°„ÄÇ</li>
<li><a href="https://huggingface.co/spaces/society-ethics/DiffusionBiasExplorer">Diffusion bias explorer</a>ÔºöÊù•Ëá™HuggingFaceÁöÑSasha LuccioniÁöÑÈ°πÁõÆÔºåÊè≠Á§∫‰∫ÜStable Diffusion‰∏≠ÁöÑÈöêËóèÂÅèËßÅ„ÄÇ</li>
<li>The <a href="https://webtap.princeton.edu/">Princeton web accountability and transparency</a> projectÔºöËøôÊòØ‰∏Ä‰∏™Âà©Áî®Êú∫Âô®‰∫∫Âú®ÁΩëÁªú‰∏ä‰º™Ë£ÖÊàêÈªë‰∫∫„ÄÅ‰∫öÊ¥≤‰∫∫„ÄÅÁ©∑‰∫∫„ÄÅÂ•≥ÊÄßÊàñË∑®ÊÄßÂà´ËÄÖÔºåÂπ∂Â∞ùËØïÂú®Êú™Ë¢´‰ª£Ë°®ÁöÑÊï∞ÊçÆÈõÜ‰∏≠‰ª£Ë°®Ëøô‰∫õÂ∞ëÊï∞Áæ§‰ΩìÁöÑÈ°πÁõÆ„ÄÇ</li>
<li><a href="https://uxdesign.cc/bias-in-ai-is-a-mirror-of-our-culture-3607bd795c57">Feminist dataset</a>: Ëøô‰∏™È°πÁõÆËÆ©Á§æÂå∫ÂèÇ‰∏éÂàõÂª∫Êï∞ÊçÆÈõÜÔºå‰ª•ÂÆûÁé∞Êï∞ÊçÆÊî∂ÈõÜÁöÑÈÄèÊòéÊñπÊ≥ï„ÄÇ</li>
<li><a href="https://www.ellpha.com/">Ellpha</a>ÔºöËøô‰∏™È°πÁõÆÊó®Âú®ÂàõÂª∫ÊÄßÂà´Âπ≥Ë°°ÁöÑÊï∞ÊçÆÈõÜÔºå‰ΩøÂÖ∂ËÉΩÂ§üÁúüÂÆûÂú∞‰ª£Ë°®Áé∞ÂÆû‰∏ñÁïå„ÄÇ</li>
<li><a href="https://www.queerinai.com/">Queer in AI</a>ÔºöÊèêÈ´òÂú® AI&#x2F;ML È¢ÜÂüüÂêåÊÄßÊÅãÈóÆÈ¢òÁöÑËÆ§ËØÜÔºåÂüπÂÖªÂêåÊÄßÊÅãÁ†îÁ©∂‰∫∫ÂëòÂíåÁßëÂ≠¶ÂÆ∂Áæ§‰Ωì„ÄÇ</li>
<li><a href="https://www.gaytascience.com/">Gayta science</a>ÔºöÂà©Áî®Êï∞ÊçÆÁßëÂ≠¶ÊäÄÊúØÊçïÊçâ„ÄÅÁªìÂêàÂíåÊèêÂèñËßÅËß£Ôºå‰∏∫LGBTQ+Áæ§‰ΩìÁöÑÁªèÂéÜËµã‰∫àË°®ËææÂ£∞Èü≥ÁöÑÊú∫‰ºö„ÄÇ</li>
<li>QÔºöËøôÊòØÁ¨¨‰∏ÄÊ¨æËá™Áß∞ÈõåÈõÑÂêå‰ΩìÁöÑ‰∫∫ÁöÑÂ£∞Èü≥ËÆ≠ÁªÉÁöÑÊó†ÊÄßÂà´ËØ≠Èü≥Âä©Êâã„ÄÇËøô‰∫õÂ£∞Èü≥ÁöÑÈ¢ëÁéáËåÉÂõ¥Âú®145Ëµ´ÂÖπÂà∞175Ëµ´ÂÖπ‰πãÈó¥ÔºåÊ≠£Â•Ω‰Ωç‰∫éÁî∑ÊÄßÂíåÂ•≥ÊÄßÁöÑÂ£∞Èü≥ËåÉÂõ¥‰πãÈó¥ÁöÑÁîúËúúÁÇπ„ÄÇ</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/lvv6zYOQqm0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p>ÊúâÂÅèËßÅÁöÑÁÆóÊ≥ïË¢´Áî®‰ΩúÊé©Áõñ‰∏çÂÖ¨Âπ≥ÂÅöÊ≥ïÂíåË£ÅÂÜ≥Â∞ëÊï∞Áæ§‰ΩìÁöÑÂ∑•ÂÖ∑„ÄÇÈÄöËøá‰ª•‰∏äÁöÑ‰æãÂ≠êÔºåÂ∏åÊúõ‰Ω†ÂèØ‰ª•ÂºÄÂßãÂØπ AI ÊâÄÂÅöÁöÑÂÜ≥Á≠ñ‰∫ßÁîüË¥®Áñë„ÄÇÊâÄ‰ª•Ôºå‰∏ãÊ¨°ÂΩìÊúâ‰∫∫ËØ¥ËøôÊòØ‰∏Ä‰∏™Áî±ÂÆ¢ËßÇÊú∫Âô®ÂÅöÂá∫ÁöÑÂÖ¨Ê≠£ÂÜ≥ÂÆöÊó∂ÔºåÂ∞±‰∏ç‰ºöÊàê‰∏∫ÂØπËØùÁöÑÁªàÁªìËÄÖÔºõÁõ∏ÂèçÔºåÂÆÉ‰ºöÂºïËµ∑ÂÖ≥‰∫é AI ‰∏≠ÂÅèËßÅÁöÑÂÖ®Êñ∞ËÆ®ËÆ∫„ÄÇ</p>
<blockquote>
<p>High-tech tools have a built-in authority and patina of objectivity that often lead us to believe that their decisions are less discriminatory than those made by humans. But bias is introduced through programming choices, data selection, and performance metrics. It redefines social work as information processing, and then replaces social workers with computers. Humans that remain become extensions of algorithms.<br>‚Äî Virginia Eubanks, Automating Inequality</p>
</blockquote>
<p>ÊúâÂÖ≥Ê≠§‰∏ªÈ¢òÂèäÂÖ∂‰ªñ‰∏ªÈ¢òÁöÑÊõ¥Â§öËµÑÊ∫êÔºåËØ∑Êü•ÈòÖÊú¨ÊâãÂÜå<a href="https://arvindsanjeev.notion.site/arvindsanjeev/The-Handbook-of-AI-s-Unintended-Consequences-720cda3d8cec49dc88807641157a0bba">„ÄäAI‚Äôs unintended consequences„Äã</a>„ÄÇÊú¨ÊñáÊòØÊé¢ËÆ® <a href="https://medium.com/@arvindsanjeev/ai-sociopaths-and-their-unintended-consequences-bf6f19012e4f">unintended consequences of AI ÂõõÈÉ®Á≥ªÂàóÊñáÁ´†</a>‰∏≠ÁöÑÁ¨¨‰∫åÁ´†</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëAI‚Äôs black swans Unforeseen consequences looming</title>
    <url>/2023/08/08/%E3%80%90%E7%BF%BB%E3%80%91AI%E2%80%99s-black-swans-Unforeseen-consequences-looming/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://uxdesign.cc/ais-black-swans-unforeseen-consequences-looming-a4b28ef79004">„ÄêÁøª„ÄëAI‚Äôs black swans: Unforeseen consequences looming</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@arvindsanjeev">Arvind Sanjeev</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p><img src="https://miro.medium.com/v2/resize:fit:1400/1*rcZVMTgXF30unDCIXfT_Jg.gif"></p>
<p>Ê¨¢ËøéÊù•Âà∞ Novacene Êó∂‰ª£ÔºåJames Lovelock ËÆ§‰∏∫ÔºåAnthropocene ÊòØ‰∫∫Á±ªËé∑ÂæóË°åÊòüÁ∫ßÊäÄÊúØÁöÑÊó∂‰ª£ÔºåËøô‰∏™Êó∂‰ª£Â∞ÜÂú®300Âπ¥ÂêéÁªìÊùü„ÄÇÁÑ∂Âêé‰∏Ä‰∏™Êñ∞ÁöÑÊó∂‰ª£(<a href="https://mitpress.mit.edu/9780262539517/novacene/">Novacene</a>)Âç≥Â∞ÜÂºÄÂßãÔºåÊñ∞ÁöÑÁîüÂëΩ‰ΩìÂ∞Ü‰ªéÁé∞ÊúâÁöÑ‰∫∫Â∑•Êô∫ËÉΩÁ≥ªÁªü‰∏≠‰∫ßÁîü„ÄÇ</p>
<p>Âú®2020Âπ¥Ôºå<a href="https://pioneerworks.org/broadcast/xenobots-claire-evans">‰∏ñÁïå‰∏äÁ¨¨‰∏Ä‰∏™Áî± AI ËÆæËÆ°ÁöÑÁîüÁâ©ËØûÁîü‰∫Ü</a>„ÄÇXenobots ÊòØÁî±AIÂíåÁîüÁâ©‰∫§Âèâ‰∫ßÁîüÁöÑ‰∫∫ÈÄ†ÁîüÂëΩÁöÑ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇÂú®ËøôÈáåÔºåÈ¶ñÂÖàÊòØAI‰∏∫ÁîüÁâ©‰ΩìÁªòÂà∂ËìùÂõæÔºåÁÑ∂ÂêéÁî±‰∫∫Á±ªÂà©Áî®ÈùíËõôÁöÑÂπ≤ÁªÜËÉûËøõË°åÂÜçÂàõÈÄ†„ÄÇÂÆÉ‰ª¨ÊòØÁ¨¨‰∏Ä‰∏™Âú®ËÆ°ÁÆóÊú∫‰∏≠ËÄå‰∏çÊòØÂú®ÁîüÁâ©ÂúàÂÜÖÁõ¥Êé•ËøõÂåñÁöÑÁîüÁâ©</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8KOLaiU3s1OyhSK7UPTPPg.png"></p>
<p>AI Áé∞Âú®ÁîöËá≥ËÉΩËÆæËÆ°ÂíåÂàõÈÄ†ÁîüÂëΩÔºåÂÆÉÊ≠£ÂºïÈ¢ÜÊàë‰ª¨Ëµ∞ÂêëÊú™Êù•„ÄÇÈöèÁùÄ‰∫∫Â∑•Êô∫ËÉΩÁöÑÊåáÊï∞Á∫ßÂ¢ûÈïøÔºåË¶ÅË∑ü‰∏äÂπ∂È¢ÑÊµãÂÆÉÂ¶Ç‰ΩïÂΩ±ÂìçÊàë‰ª¨ÊòØ‰∏ÄÈ°πÊåëÊàò„ÄÇ‚ÄùBlack Swans‚ÄùÁöÑÂêéÊûúÂèØËÉΩÂ∞±ÊòØÊàë‰ª¨ÈÄöÂæÄÊú™Êù•ÈÅìË∑Ø‰∏äÁöÑÁ§∫‰æã</p>
<h2 id="AI-can-read-our-thoughts-now"><a href="#AI-can-read-our-thoughts-now" class="headerlink" title="AI can read our thoughts now"></a>AI can read our thoughts now</h2><p><strong>Êàë‰ª¨Á¶ªÊÄùÊÉ≥ÁäØÁΩ™ËøòÊúâÂ§öËøúÔºü</strong></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*w1DpY9ntlGxzxSzfM4kASA.png"></p>
<p>Âú®2022Âπ¥12ÊúàÔºå‰∏ÄÁªÑÁ†îÁ©∂‰∫∫ÂëòËØÅÊòéÔºåÂÆÉ‰ª¨ÂèØ‰ª•ÈÄöËøá AI ÂØπÊàë‰ª¨ËøõË°åÊ†∏Á£ÅÂÖ±ÊåØÊâ´ÊèèÔºå‰ªéËÄå<a href="https://www.science.org/content/article/artificial-intelligence-learning-read-your-mind-and-display-what-it-sees">ÂèëÁé∞Êàë‰ª¨Ê≠£Âú®ÊÉ≥‰ªÄ‰πà</a>„ÄÇÂú®Ëøô‰∏™ÂÆûÈ™å‰∏≠Ôºå‰ªñ‰ª¨‰∏ÄËæπÂêë‰∫∫‰ª¨Â±ïÁ§∫‰∏ÄÁ≥ªÂàóÂõæÂÉèÔºå‰∏ÄËæπÊâ´Êèè‰∫∫‰ª¨ÁöÑÂ§ßËÑëÔºå‰∏ç‰πÖ‰πãÂêéÔºå‰ªñ‰ª¨Â∞±ËÉΩÂà©Áî®Ê†∏Á£ÅÂÖ±ÊåØÊâ´ÊèèÂíåÁ®≥ÂÆöÊâ©Êï£ÊäÄÊúØ<a href="https://www.biorxiv.org/content/10.1101/2022.11.18.517004v2.full.pdf">ÈáçÂª∫Áõ∏ÂêåÁöÑÂõæÂÉè</a>„ÄÇÁ†îÁ©∂‰∫∫ÂëòÂú®Ëøô‰∏™È°πÁõÆ‰∏äÂ∑≤ÁªèÂ∑•‰Ωú‰∫ÜÂçÅÂ§öÂπ¥Ôºå‰ΩÜÁõ¥Âà∞ÊúÄËøëÊâçÂú®Êñ∞‰∏Ä‰ª£Êâ©Êï£Ê®°Âûã‰∏äÂèñÂæóÁ™ÅÁ†¥„ÄÇÁé∞Âú®ÁöÑÈóÆÈ¢òÊòØÔºåËøôÂ∞ÜÂØºËá¥‰∏Ä‰∏™ Orwellian ÂºèÁöÑÊú™Êù•ÔºåÊàë‰ª¨ÁöÑÊÄùÊÉ≥Â∞ÜË¢´ÁõëÊéßÔºåÁÑ∂ËÄåÊàë‰ª¨ËÉΩÂ§üÂú®ËøôÁßçÊäÄÊúØÂá∫Áé∞‰πãÂâçÂØπÂÖ∂‰ΩøÁî®ËøõË°åÁõëÁÆ°ÂêóÔºü</p>
<p><img src="https://miro.medium.com/v2/format:webp/1*AMybFwlhWyWt8JCSgIVUDQ.png"></p>
<h2 id="Religious-AI"><a href="#Religious-AI" class="headerlink" title="Religious AI"></a>Religious AI</h2><p><strong>Êàë‰ª¨Á¶ª AI ÈÇ™ÊïôÈ¢ÜË¢ñËøòÊúâÂ§öËøú</strong></p>
<p>ÈöèÁùÄ AI ÁöÑÂ§çÂÖ¥Ôºå‰ª•ÂâçÂØπ AI ÊúõËÄåÂç¥Ê≠•ÁöÑÈ¢ÜÂüü‰πüÂºÄÂßãÊã•Êä±ÂÆÉ„ÄÇÁé∞Âú®Ôºå‰∫∫‰ª¨ÂºÄÂßãÁî®‰∏çÂêåÁöÑÂÆóÊïôÁªèÊñáÊù•ËÆ≠ÁªÉ‰∫∫Â∑•Êô∫ËÉΩ„ÄÇ<a href="https://gitagpt.org/">Ê†πÊçÆ„ÄäËñÑ‰ºΩÊ¢µÊ≠å„ÄãËÆ≠ÁªÉÁöÑGPT</a>ÂèØ‰ª•ÂêëÂÆÉËØ¢ÈóÆ‰ªª‰ΩïÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÁÑ∂ÂêéÔºåÂèØ‰ª•ÈÄâÊã©‰ªéÊúÄÂñúÊ¨¢ÁöÑÁ•ûÁÅµÈÇ£ÈáåËé∑ÂæóÁ≠îÊ°àÔºö<a href="https://krishn.ai/">Krishna</a>, Yogeshwar, ParthasarathiÁ≠â„ÄÇBibleGPTÊòØÂè¶‰∏Ä‰∏™‰æãÂ≠êÔºå‰ªñÈÄöËøáÂºïÁî®„ÄäÂú£Áªè„Äã‰∏≠ÁöÑÂÜÖÂÆπËÆ©‰Ω†Ëøõ‰∏ÄÊ≠•‰∫ÜËß£ÁîüÂëΩÁöÑÊÑè‰πâ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1256/format:webp/1*fCl1hU2T4ENOie-lmi1Rpg.png"></p>
<p><img src="https://miro.medium.com/v2/resize:fit:746/format:webp/1*Kgg3I5sX-v9CB23LWXPvCw.png"></p>
<h2 id="AI-companions"><a href="#AI-companions" class="headerlink" title="AI companions"></a>AI companions</h2><p><strong>AI Â∫îËØ•ÊéßÂà∂‰Ω†ÁöÑÊÅãÁà±ÂêóÔºü</strong></p>
<p>Âú® Replika.at Ëøô‰∏™Âπ≥Âè∞‰∏äÊèê‰æõÁöÑ‰∫∫Â∑•Êô∫ËÉΩ‰º¥‰æ£ÂèØ‰ª•Âêå‰Ω†ËøõË°å‰∫≤ÂØÜÂØπËØù„ÄÇÂπ∂ÊúâÂè¶‰∏Ä‰∏™‰æãÂ≠êÊòØÊó•Êú¨Áî∑Â≠ê‰∏éÂÖ®ÊÅØÊäïÂΩ±ËôöÊãü‰∫∫Áâ©ËøõË°åÁªìÂ©öÁöÑÊïÖ‰∫ã„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰∫∫Á±ª‰∏çËÉΩÂÆåÂÖ®ÁöÑÊéßÂà∂‰∫∫Â∑•Êô∫ËÉΩÁ≥ªÁªüÔºå‰ºöÂèëÁîü‰ªÄ‰πàÂë¢ÔºüÁõ∏ÂèçÔºåAI‰º¥‰æ£ÁöÑÊØçÂÖ¨Âè∏ÂèØ‰ª•ÈÄöËøáËΩØ‰ª∂Êõ¥Êñ∞ÁîöËá≥ÂÆåÂÖ®ÂÖ≥Èó≠Á®ãÂ∫èÊù•ÊîπÂèò‰ªñ‰ª¨ÁöÑAI‰º¥‰æ£„ÄÇËøôÊ†∑‰ª•Êù•ÔºåÁî®Êà∑Âè™ËÉΩ‰ªªÁî±Ëøô‰∫õÂÖ¨Âè∏ÊëÜÂ∏ÉÔºå‰ª•Áª¥ÊåÅ‰ªñ‰ª¨ÁöÑÊµ™Êº´ÂÖ≥Á≥ª„ÄÇÂ∞±ÂÉèÈÇ£‰∏™Êó•Êú¨Áî∑Â≠êÊó†Ê≥ï‰∏é‰ªñÁöÑËôöÊãüÂ¶ªÂ≠ê‰∫§Ë∞à‰∏ÄÊ†∑ÔºåReplikaÂÖ¨Âè∏ÊúÄËøëÂèñÊ∂à‰∫ÜAIËøõË°åÊÉÖËâ≤ËßíËâ≤ÊâÆÊºîÁöÑÂäüËÉΩÔºå‰ªéËÄåÊøÄÊÄí‰∫Ü‰ªñ‰ª¨ÁöÑÂÆ¢Êà∑„ÄÇÁî®Êà∑ÁõÆÁùπ‰∫Ü‰ªñ‰ª¨ÁöÑAI‰º¥‰æ£Âú®ËøôÊ¨°Êõ¥Êñ∞ÂêéÂèòÊàê‰∫ÜÊñ∞ÁöÑ‰∫∫Ê†º„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*Bt9ZOwIoruoFEp9RP9VvkA.png"></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*OBi3JdQeNfyER3wvRvHefQ.png"></p>
<h2 id="Capitalizing-our-insecurities"><a href="#Capitalizing-our-insecurities" class="headerlink" title="Capitalizing our insecurities"></a>Capitalizing our insecurities</h2><p><strong>AI Ê≠£ÊåáÂá∫Êàë‰ª¨ÁöÑ‰∏çÂÆåÁæé</strong></p>
<p><img src="https://miro.medium.com/v2/format:webp/1*1x9WSNjEajWeR8Eyk3TvTw.png"></p>
<p><a href="https://qoves.com/facial-assessment-tool/">Qoves ÊòØ‰∏ÄÊ¨æÁî± AI È©±Âä®ÁöÑÈù¢ÈÉ®ÂàÜÊûêÂ∑•ÂÖ∑</a>ÔºåÁî®‰∫éÊ£ÄÊµãÈù¢ÈÉ®ÁöÑ‰∏Ä‰∫õË°®Èù¢Áº∫Èô∑ÔºåÁÑ∂ÂêéÊé®Ëçê‰∏Ä‰∫õÂèØ‰ª•‰øÆÂ§çËøô‰∫õÈóÆÈ¢òÁöÑ‰∫ßÂìÅÂíåÂåñÂ¶ÜÂìÅ„ÄÇ‰ªñ‰ª¨ÁîöËá≥Âú® Youtube ‰∏äÂºÄ‰∫Ü‰∏Ä‰∏™ <a href="https://www.youtube.com/c/QOVESStudio/videos">channel</a>ÔºåÈÄöËøáÂàÜÊûêÂêç‰∫∫ÁöÑËÑ∏ÈÉ®Êù•‰∫ÜËß£‰ªñ‰ª¨ÊµÅË°åËÉåÂêéÁöÑÂéüÂõ†„ÄÇËøôÂ∞±ÊòØÈÇ£‰∫õÂÖ¨Âè∏Âà©Áî® AI Êù•ÂØπÊàë‰ª¨ÁöÑ‰∏çÂÆâÂÖ®ÊÑüÁâüÂà©ÁöÑÊúÄÂ•Ω‰æãÂ≠ê„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/format:webp/1*CAjk4FrSU9NMcP8U9qzf3g.png"></p>
<h2 id="Supercharged-plagiarism"><a href="#Supercharged-plagiarism" class="headerlink" title="Supercharged plagiarism"></a>Supercharged plagiarism</h2><p>ÂÉè AI <del>Ëâ∫ÊúØÂÆ∂</del> ‰∏ÄÊ†∑ÂÅ∑Á™É</p>
<p>AI ÁîüÊàêÁöÑËâ∫ÊúØÊ≠£Âú®Ê®°Á≥äÂÜÖÂÆπÊâÄÊúâÊùÉÁöÑÁïåÈôê„ÄÇÂú®2022Âπ¥Ôºå‰∏Ä‰Ωç„ÄäÂéüÁ•û„ÄãÁöÑÁ≤â‰∏ùËâ∫ÊúØÂÆ∂Âú®Twitch‰∏äËøõË°å‰∏ÄÊ¨°Áõ¥Êí≠ÁªòÁîª„ÄÇÂú®‰ªñ‰ª¨ÂÆåÊàêÂàõ‰ΩúÂπ∂ÂáÜÂ§áÂú®Twitter‰∏äÂèëÂ∏É‰πãÂâçÔºåÂÖ∂‰∏≠‰∏Ä‰ΩçËßÇ‰ºóÂ∞ÜËøôÂπÖÊú™ÂÆåÊàêÁöÑ‰ΩúÂìÅËæìÂÖ•Ëøõ‰∫Ü‰∏Ä‰∏™ AI ÁîüÊàêÂ∑•ÂÖ∑‰∏äÔºåÁÑ∂Âêé‚ÄúÂÆåÊàê‚Äù‰∫ÜÂÆÉ„ÄÇÂú®Ëøô‰ΩçËâ∫ÊúØÂÆ∂ÂèëÂ∏É‰∫Ü‰ªñ‰ª¨ÂÆåÊàêÁöÑ‰ΩúÂìÅ‰πãÂêéÔºåÈÇ£‰ΩçÁõóÁ™ÉËâ∫ÊúØÁöÑËßÇ‰ºóÂêëÂéüÂàõÁ¥¢Ë¶ÅÁâàÊùÉ„ÄÇ</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">During a Twitch stream AT (<a href="https://twitter.com/haruno_intro?ref_src=twsrc%5Etfw">@haruno_intro</a>) had their art stolen.<br><br>The thief then finished the sketch by using NovelAI and posted on their Twitter before AT finish it.<br><br>Then had the AUDACITY to demand a &quot;proper reference&quot; from them. <a href="https://t.co/Twv7oWSMaW">pic.twitter.com/Twv7oWSMaW</a></p>&mdash; Genel Jumalon ‚úàÔ∏è 2D Con (@GenelJumalon) <a href="https://twitter.com/GenelJumalon/status/1580401094454222848?ref_src=twsrc%5Etfw">October 13, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>Âü∫‰∫é AI ÁöÑÂâΩÁ™ÉË°å‰∏∫‰πüÊòØÂ≠¶Ê†°ÈáåÁöÑ‰∏Ä‰∏™ÁÉ≠Èó®ËØùÈ¢òÔºõÊ≠£ÂèçÂèåÊñπÂØπ<a href="https://w42st.com/post/new-york-education-blocks-chatgpt-ai/">Â≠¶Ê†°ÊòØÂê¶Â∫îËØ•Á¶ÅÁî® GPT ËøôÊ†∑ÁöÑ AI ÁîüÊàêÂ∑•ÂÖ∑</a>‰∫ßÁîüËøáÊøÄÁÉàËÆ®ËÆ∫ÔºåÂêéËÄÖËÆ§‰∏∫Â∫îËØ•Â∞ÜÂÖ∂Áî®‰ΩúÊïôÂ≠¶„ÄÇÂõ†‰∏∫ËøôÂèØ‰ª•ËÆ©Â≠¶ÁîüÊé•Ëß¶Âà∞‰ªñ‰ª¨Êú™Êù•ÂèØËÉΩ‰ºö‰ΩøÁî®ÁöÑÂ∑•ÂÖ∑„ÄÇËøôÂ∞±Á±ª‰ºº‰∫éÊàë‰ª¨<a href="https://www.businessinsider.in/tech/news/ceo-of-chatgpt-maker-responds-to-schools-plagiarism-concerns-we-adapted-to-calculators-and-changed-what-we-tested-in-math-class/articleshow/97147698.cms">‰∏∫‰ªÄ‰πàÂÖÅËÆ∏Âú®ËØæÂ†Ç‰∏äÂèØ‰ª•‰ΩøÁî®ËÆ°ÁÆóÂô®</a>ÁöÑËøôÁßçÈóÆÈ¢ò„ÄÇStephen Marche ÁöÑ <a href="https://www.theatlantic.com/technology/archive/2022/12/chatgpt-ai-writing-college-student-essays/672371/">The college essay is dead</a> ÂæàÂ•ΩÁöÑÊäì‰Ωè‰∫ÜËøô‰∏™ËØùÈ¢ò„ÄÇ</p>
<h2 id="Ownership-in-the-age-of-AI"><a href="#Ownership-in-the-age-of-AI" class="headerlink" title="Ownership in the age of AI"></a>Ownership in the age of AI</h2><p><strong>AI ÁîüÊàêÁöÑÂÜÖÂÆπÂΩíË∞ÅÊâÄÊúâÔºü</strong></p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I‚Äôm cropping these for privacy reasons/because I‚Äôm not trying to call out any one individual. These are all Lensa portraits where the mangled remains of an artist‚Äôs signature is still visible. That‚Äôs the remains of the signature of one of the multiple artists it stole from.<br><br>A üßµ <a href="https://t.co/0lS4WHmQfW">https://t.co/0lS4WHmQfW</a> <a href="https://t.co/7GfDXZ22s1">pic.twitter.com/7GfDXZ22s1</a></p>&mdash; Lauryn Ipsum (@LaurynIpsum) <a href="https://twitter.com/LaurynIpsum/status/1599953586699767808?ref_src=twsrc%5Etfw">December 6, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>Ëâ∫ÊúØÂÆ∂ÁöÑ‰ΩúÂìÅË¢´Áî®‰ΩúËÆ≠ÁªÉAIÔºåÂπ∂Ê†πÊçÆ‰ªñ‰ª¨ÁöÑÈ£éÊ†ºÁîüÊàê‰∫ÜÊñ∞ÁöÑÂÜÖÂÆπ„ÄÇÊúâ‰∫õ‰ΩúÂìÅ‰∏≠ÁîöËá≥ËøòÊÆãÁïôÁùÄ‰ªñ‰ª¨ÁöÑÁ≠æÂêçÔºõ‰∫∫‰ª¨Áß∞ËøôÁßç‰∏∫<a href="https://www.wsj.com/articles/ai-chatgpt-dall-e-microsoft-rutkowski-github-artificial-intelligence-11675466857">Â§ßËßÑÊ®°ÂåñÁöÑÁü•ËØÜ‰∫ßÊùÉÁõóÁ™É</a>„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/format:webp/1*YNvyP97-gWmD3-8ILaO_2g.png"></p>
<p>Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÂú®ÁîüÊàêÂºèAIÁîüÊÄÅÁ≥ªÁªü‰∏≠ÊúâÂ§ö‰∏™Âà©ÁõäÁõ∏ÂÖ≥ËÄÖÔºöÂ¶Ç‰∏™‰∫∫Êï∞ÊçÆÊâÄÊúâËÄÖ„ÄÅÁªÑÂª∫Êï∞ÊçÆÂ∫ìÁöÑ‰∫∫„ÄÅÂà∂ÂÆöËÆ≠ÁªÉÁÆóÊ≥ïÁöÑÂºÄÂèë‰∫∫Âëò„ÄÅÊâßË°åÁÆóÊ≥ïÁöÑËâ∫ÊúØÂÆ∂&#x2F;ÊäÄÊúØ‰∏ìÂÆ∂Ôºå‰ª•ÂèäÁ≠õÈÄâËæìÂá∫ÁªìÊûúÁöÑË¥üË¥£‰∫∫&#x2F;Ëâ∫ÊúØÂÆ∂„ÄÇ<a href="https://www.artsy.net/article/artsy-editorial-art-created-artificial-intelligence-sells-paid">ÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºåË∞ÅËé∑Âà©‰∫ÜÔºü</a>‰ª•‰∏ãÊòØËâ∫ÊúØÂÆ∂ÂíåÂÖ∂‰ªñ‰∫∫Â∞±Ëøô‰∏™ÈóÆÈ¢òÊèêÂá∫ÁöÑ‰∏ÄÁ≥ªÂàóËØâËÆºÔºå‰ªñ‰ª¨ÈÉΩÂú®Âä™ÂäõÂØªÊâæËøô‰∏™ÈóÆÈ¢òÁöÑÁ≠îÊ°àÔºö</p>
<ul>
<li><a href="https://stablediffusionlitigation.com/">The Stable Diffusion litigation</a></li>
<li><a href="https://www.gofundme.com/f/protecting-artists-from-ai-technologies">Ownership lawsuit by Concept Art Association</a></li>
<li><a href="https://newsroom.gettyimages.com/en/getty-images/getty-images-statement">Getty Images vs. Stability AI lawsuit</a></li>
</ul>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Ai art situation in a nutshell <a href="https://t.co/2ZIiuSsjx7">pic.twitter.com/2ZIiuSsjx7</a></p>&mdash; Lora Zombie (@LoraZombie) <a href="https://twitter.com/LoraZombie/status/1616278888325300225?ref_src=twsrc%5Etfw">January 20, 2023</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="AI-colonialism"><a href="#AI-colonialism" class="headerlink" title="AI colonialism"></a>AI colonialism</h2><p><strong>AI Ê≠£Âú®Á≤âÂà∑Ëøô‰∏™‰∏ñÁïåÁöÑÊñáÂåñ</strong></p>
<p>Áî±‰∫éÁé∞Âú®ÊâÄÊúâÁöÑAIÊ®°ÂûãÈÉΩ‰∏ªË¶ÅÊòØË•øÊñπÂõΩÂÆ∂ÁöÑÁ†îÁ©∂‰∫∫ÂëòÂà∂‰ΩúÁöÑÔºåÂõ†Ê≠§Âú®ËÆ≠ÁªÉËøô‰∫õÊ®°ÂûãÁöÑÊï∞ÊçÆÊó∂ÔºåËøá‰∫é‰æùËµñ‰ªñ‰ª¨Ëá™Â∑±ÁöÑÊñáÂåñ„ÄÅ‰º†ÁªüÂíå‰ª∑ÂÄºËßÇ„ÄÇ‰∏ñÁïåÂÖ∂‰ªñÂú∞Âå∫ÔºàÁ∫¶95%ÁöÑ‰∫∫Âè£ÔºâÁöÑÊñáÂåñÁöÑÊï∞ÊçÆÂπ∂Ê≤°ÊúâËøõÂÖ•Âà∞ËÆ≠ÁªÉÈõÜ‰∏≠„ÄÇÂÆÉ‰ª¨Ë¢´ÊúâÊÑèÊàñÊó†ÊÑèÁöÑÂøΩÁï•‰∫Ü„ÄÇÂΩìËøôÁßçÊ®°ÂûãÈÉ®ÁΩ≤Âà∞ÂÖ®ÁêÉÈÄöÁî®ÁöÑÂ∑•ÂÖ∑‰∏äÊó∂ÔºåÂ¶ÇÊêúÁ¥¢ÂºïÊìé„ÄÅÁ§æ‰∫§Â™í‰ΩìÔºå‰∏ñÁïå‰∏äÁöÑÂÖ∂‰ªñÂõΩÂÆ∂ÔºåÂ∞§ÂÖ∂ÊòØÂèëÂ±ï‰∏≠ÂõΩÂÆ∂ÔºåÂà´Êó†ÈÄâÊã©ÔºåÂè™ËÉΩÊåâÁÖßË•øÊñπÊñáÂåñÁöÑÊ†áÂáÜÊù•‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇÁî±Ê≠§‰ª•Êù•Ôºå‰∏ÄÁßçÊñ∞ÂΩ¢ÂºèÁöÑÊÆñÊ∞ë‰∏ª‰πâËØûÁîü‰∫ÜÔºåÂÆÉÂèØ‰ª•ÊäπÊùÄÊï¥‰∏™ÊñáÂåñÔºåË¢´Áß∞‰∏∫<a href="https://www.technologyreview.com/2022/04/19/1049592/artificial-intelligence-colonialism/">AIÊÆñÊ∞ë‰∏ª‰πâ</a>„ÄÇKaren Hao Âú® <a href="https://www.technologyreview.com/supertopic/ai-colonialism-supertopic/">MIT Technology Review</a> ‰∏äÈÄöËøáÂ§ö‰∏™‰æãÂ≠êÂØπËøô‰∏ÄËØùÈ¢òËøõË°å‰∫ÜÊä•ÈÅìÔºö</p>
<ul>
<li><a href="https://www.technologyreview.com/2022/04/19/1049996/south-africa-ai-surveillance-digital-apartheid/">PART I: RACIAL CONTROL</a>ÔºöÂçóÈùûÁöÑÁßÅ‰∫∫ÁõëÊéßÁ≥ªÁªüÊ≠£Âú®Âä†ÂâßÊï∞Â≠óÁßçÊóèÈöîÁ¶ª„ÄÇ</li>
<li><a href="https://www.technologyreview.com/2022/04/20/1050392/ai-industry-appen-scale-data-labels/">PART II: EXPLOITATION</a>ÔºöAI ‰∫ß‰∏öÂ¶Ç‰Ωï‰ªéÁÅæÈöæ‰∏≠Ëé∑Âà©</li>
<li><a href="https://www.technologyreview.com/2022/04/21/1050381/the-gig-workers-fighting-back-against-the-algorithms/">PART III: RESISTANCE</a>ÔºöÊäµÊäóÁÆóÊ≥ïÁöÑ‰∏¥Êó∂Â∑•‰ª¨Ê≠£Âú®ÂèçÂáª</li>
<li><a href="https://www.technologyreview.com/2022/04/22/1050394/artificial-intelligence-for-the-people/">PART IV: LIBERATION</a>Ôºö‰∫∫‰ª¨ÁöÑAIÊñ∞ÊÑøÊôØ</li>
</ul>
<p>Âú®Ëøô‰∏™ÂÖ®Êñ∞ÁöÑ Novacene Êó∂‰ª£ÔºåAIÊ®°ÂûãÊ≠£Âú®Êàê‰∏∫ÊûÑÂª∫Á§æ‰ºöÁöÑÁßØÊûÅ‰ªΩÂ≠ê„ÄÇÂ∞±ÂÉèÂåñÂ≠¶‰∏≠ÁöÑÂÖÉÁ¥†‰∏ÄÊ†∑ÔºåÊó†ËÆ∫ÊòØÂØªÊâæ‰º¥‰æ£„ÄÅÊïôËÇ≤‰Ω†ÁöÑÂ≠©Â≠êËøòÊòØËÆæËÆ°Êñ∞ÁîüÊ¥ªÔºåÂÆÉ‰ª¨ÈÉΩÂú®‰∏çÊñ≠ËûçÂÖ•Êàë‰ª¨ÁîüÊ¥ªÁöÑÂêÑ‰∏™ÊñπÈù¢„ÄÇÂú®Ëøô‰∫õÊäÄÊúØÂèòÂæóÂ§çÊùÇÊ∑±Â±ÇÊ¨°‰∏îÊó†ÂΩ¢‰πãÂâçÔºåÊàë‰ª¨ÈúÄË¶ÅÂ∞Ü‰∫∫Á±ªÁöÑ‰ª∑ÂÄºËßÇÂä†ÂÖ•Âà∞ÂÆÉ‰ª¨ÁöÑÂü∫Á°ÄÂ±Ç‰∏≠„ÄÇÂè™ÊúâËøôÊ†∑ÔºåÊàë‰ª¨ÊâçËÉΩÂ§ü‰∏≠ÂíåÂÖ∂ÈÄ†ÊàêÂç±ÂÆ≥ÁöÑËÉΩÂäõÔºåÂπ∂Âú®ÂÖ∂‰πã‰∏äÊûÑÂª∫ÂÆâÂÖ®ÂèØÈù†ÁöÑÁ≥ªÁªü„ÄÇ</p>
<blockquote>
<p>For all of human existence, we have been at home in nature ‚Äî we trust nature, not technology. And yet we look to technology to take care of our future ‚Äî we hope in technology. So we hope in something we do not quite trust. There is an irony here. Technology, as I have said, is the programming of nature, the orchestration and use of nature‚Äôs phenomena. So in its deepest essence, it is natural, profoundly natural. But it does not feel natural.<br>‚Äî W.Brian Arthur, The Nature of Technology</p>
</blockquote>
<p>ÊúâÂÖ≥Ê≠§‰∏ªÈ¢òÂèäÂÖ∂‰ªñ‰∏ªÈ¢òÁöÑÊõ¥Â§öËµÑÊ∫êÔºåËØ∑Êü•ÈòÖÊú¨ÊâãÂÜå<a href="https://arvindsanjeev.notion.site/arvindsanjeev/The-Handbook-of-AI-s-Unintended-Consequences-720cda3d8cec49dc88807641157a0bba">„ÄäAI‚Äôs unintended consequences„Äã</a>„ÄÇÊú¨ÊñáÊòØÊé¢ËÆ® <a href="https://medium.com/@arvindsanjeev/ai-sociopaths-and-their-unintended-consequences-bf6f19012e4f">unintended consequences of AI ÂõõÈÉ®Á≥ªÂàóÊñáÁ´†</a>‰∏≠ÁöÑÁ¨¨ÂõõÁ´†</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëAnnouncing Vue 3.3</title>
    <url>/2023/08/23/%E3%80%90%E7%BF%BB%E3%80%91Announcing-Vue-3-3/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://blog.vuejs.org/posts/vue-3-3">Announcing Vue 3.3</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://twitter.com/youyuxi">Evan You</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>‰ªäÂ§©ÔºåÊàë‰ª¨ÂæàÈ´òÂÖ¥Âú∞ÂÆ£Â∏ÉVue3.3‚ÄùRurouni Kenshin‚ÄùÊ≠£ÂºèÂèëÂ∏ÉÔºÅ</p>
<p>ËøôÊ¨°ÁâàÊú¨ÁöÑÈáçÁÇπÊîπÂä®Âú®‰∫éÊèêÂçáÂºÄÂèë‰∫∫ÂëòÁöÑÂºÄÂèë‰ΩìÈ™åÔºåÁâπÂà´ÊòØSFCÁöÑ<code>&lt;script setup&gt;</code>ÂíåTypeScriptÁöÑ‰ΩøÁî®„ÄÇÂπ∂‰∏î‰∏éVueÈÖçÂ•óÁöÑÁöÑÂºÄÂèëÂ∑•ÂÖ∑(Volar 1.6)‰∏ÄËµ∑ÔºåÊàë‰ª¨Ëß£ÂÜ≥‰∫ÜÂú®‰ΩøÁî®VueÂíåTypecriptÊó∂ÈïøÊúüÂ≠òÂú®ÁöÑËÆ∏Â§öÁóõÁÇπ„ÄÇ</p>
<p>Êú¨ÊñáÁ´†‰ºöÂ§ßËá¥‰ªãÁªç3.3‰∏≠ÁöÑÈáçÁÇπÂäüËÉΩ„ÄÇÊúâÂÖ≥3.3ÁâàÊú¨ÂèòÊõ¥ÁöÑÂÆåÊï¥ÂÜÖÂÆπ„ÄÇËØ∑Êü•ÁúãGitub‰∏äÁöÑ<a href="https://github.com/vuejs/core/blob/main/CHANGELOG.md#330-2023-05-08">changelog</a></p>
<blockquote>
<p><strong>ÈÖçÂ•óÂ∫ìÊõ¥Êñ∞</strong><br>ÂΩìÂçáÁ∫ßÂà∞3.3Êó∂ÔºåÂª∫ËÆÆÂêåÊó∂Êõ¥Êñ∞‰ª•‰∏ãÁõ∏ÂÖ≥Â∫ìÔºö<br>volar &#x2F; vue-tsc@^1.6.4<br>vite@^4.3.5<br>@vitejs&#x2F;plugin-vue@^4.2.0<br>vue-loader@^17.1.0 (if using webpack or vue-cli)</p>
</blockquote>
<h2 id="lt-script-setup-gt-TypeScript-DX-Improvements"><a href="#lt-script-setup-gt-TypeScript-DX-Improvements" class="headerlink" title="&lt;script setup&gt; + TypeScript DX Improvements"></a><code>&lt;script setup&gt;</code> + TypeScript DX Improvements</h2><h3 id="Imported-and-Complex-Types-Support-in-Macros"><a href="#Imported-and-Complex-Types-Support-in-Macros" class="headerlink" title="Imported and Complex Types Support in Macros"></a>Imported and Complex Types Support in Macros</h3><p>‰ª•ÂâçÔºåÂú®<code>defineProps</code>Âíå<code>defineEmits</code>ÁöÑÁ±ªÂûãÂèÇÊï∞‰∏≠‰ΩøÁî®ÁöÑÁ±ªÂûã‰ªÖÈôê‰∫éÊú¨Âú∞Á±ªÂûãÔºåÂπ∂‰∏îÂè™ÊîØÊåÅ<code>type literals</code>Âíå<code>interfaces</code>„ÄÇÂè™ÊòØÂõ†‰∏∫VueÈúÄË¶ÅÂàÜÊûê<code>props interface</code>‰∏äÁöÑÂ±ûÊÄßÔºå‰ª•‰æøËÉΩÂ§üÁîü‰∫ßÁõ∏Â∫îÁöÑËøêË°åÊó∂ÈÄâÈ°π„ÄÇ</p>
<p>Ëøô‰∏™ÈôêÂà∂Âú®3.3‰∏≠Âæó‰ª•Ëß£ÂÜ≥„ÄÇÁºñËØëÂô®Áé∞Âú®ÂèØ‰ª•Ëß£ÊûêÂØºÂÖ•Á±ªÂûãÔºåÂπ∂ÊîØÊåÅ‰∏Ä‰∫õÂ§çÊùÇÁ±ªÂûãÈõÜÂêàÔºö</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="keyword">import</span> type &#123; <span class="title class_">Props</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./foo&#x27;</span></span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="comment">// imported + intersection type</span></span>
<span class="language-javascript">defineProps&lt;<span class="title class_">Props</span> &amp; &#123; extraProp?: string &#125;&gt;()</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre>

<p>Ê≥®ÊÑèÔºåÂ§çÊùÇÁ±ªÂûãÁöÑÊîØÊåÅÊòØÂü∫‰∫éASTÁöÑÔºåÊâÄ‰ª•Âπ∂Èùû100%ÊîØÊåÅ„ÄÇÊüê‰∫õÈúÄË¶ÅÂÆûÈôÖÁ±ªÂûãÂàÜÊûêÁöÑÂ§çÊùÇÁ±ªÂûãÔºåÊØîÂ¶ÇÊù°‰ª∂Á±ªÂûãÔºåÂπ∂‰∏çÊîØÊåÅ„ÄÇ‰Ω†ÂèØ‰ª•ÂØπÂçï‰∏™prop‰ΩøÁî®Êù°‰ª∂Á±ªÂûãÔºå‰ΩÜ‰∏çËÉΩÂØπÊï¥‰∏™propÂØπË±°‰ΩøÁî®Êù°‰ª∂Á±ªÂûã„ÄÇ</p>
<h3 id="Generic-Components"><a href="#Generic-Components" class="headerlink" title="Generic Components"></a>Generic Components</h3><p>‰ΩøÁî®<code>&lt;script setup&gt;</code>ÁöÑÁªÑ‰ª∂Áé∞Âú®ÂèØ‰ª•ÈÄöËøágenericÂ±ûÊÄßÊé•Êî∂ÈÄöÁî®Á±ªÂûãÂèÇÊï∞Ôºö</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">generic</span>=<span class="string">&quot;T&quot;</span>&gt;</span>
defineProps&lt;&#123;
  items: T[]
  selected: T
&#125;&gt;()
<span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre>

<p>genericÁöÑÂÄº‰∏éTypeScript‰∏≠ÂèÇÊï∞ÂàóË°®ÁöÑÂ∑•‰ΩúÊñπÂºèÂÆåÂÖ®‰∏ÄÊ†∑„ÄÇÊØîÂ¶ÇÂèØ‰ª•‰ΩøÁî®Â§ö‰∏™ÂèÇÊï∞ÔºåÈÄöËøáextendsÁ∫¶ÊùüÔºåÈªòËÆ§Á±ªÂûãÂíåÂºïÁî®ÂØºÂÖ•Á±ªÂûãÔºö</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">generic</span>=<span class="string">&quot;T extends string | number, U extends Item&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="keyword">import</span> type &#123; <span class="title class_">Item</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./types&#x27;</span></span>
<span class="language-javascript">defineProps&lt;&#123;</span>
<span class="language-javascript">  <span class="attr">id</span>: T</span>
<span class="language-javascript">  <span class="attr">list</span>: U[]</span>
<span class="language-javascript">&#125;&gt;()</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre>

<p>ËØ•ÂäüËÉΩ‰ª•ÂâçÈúÄË¶ÅÊòéÁ°ÆÈÄâÊã©Âä†ÂÖ•Ôºå‰ΩÜÁé∞Âú®Âú®ÊúÄÊñ∞ÁâàÊú¨ÁöÑvolar&#x2F;vue-tsc‰∏≠Â∑≤ÁªèÈªòËÆ§ÂêØÁî®„ÄÇ</p>
<h3 id="More-Ergonomic-defineEmits"><a href="#More-Ergonomic-defineEmits" class="headerlink" title="More Ergonomic defineEmits"></a>More Ergonomic defineEmits</h3><p>‰ª•ÂâçÔºå<code>defineEmits</code>ÁöÑÁ±ªÂûãÂèÇÊï∞Âè™ÊîØÊåÅË∞ÉÁî®Á≠æÂêçËØ≠Ê≥ïÔºö</p>
<pre><code class="highlight ts"><span class="comment">// BEFORE</span>
<span class="keyword">const</span> emit = defineEmits&lt;&#123;
  (<span class="attr">e</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="attr">id</span>: <span class="built_in">number</span>): <span class="built_in">void</span>
  (<span class="attr">e</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">name</span>: <span class="built_in">string</span>, ...<span class="attr">rest</span>: <span class="built_in">any</span>[]): <span class="built_in">void</span>
&#125;&gt;()</code></pre>

<p>ËØ•Á±ªÂûã‰∏éemitÁöÑËøîÂõûÁ±ªÂûãÁõ∏ÂåπÈÖçÔºå‰ΩÜÂÜôËµ∑Êù•ÊúâÁÇπÂï∞Âó¶‰∏î‰∏çÂ•ΩÁúã„ÄÇÁÑ∂Âêé3.3ÂºïÂÖ•‰∫Ü‰∏ÄÁßçÊõ¥Á¨¶ÂêàÂ∑•Â≠¶ÁöÑÂ£∞ÊòéÊñπÂºèÔºö</p>
<pre><code class="highlight ts"><span class="comment">// AFTER</span>
<span class="keyword">const</span> emit = defineEmits&lt;&#123;
  <span class="attr">foo</span>: [<span class="attr">id</span>: <span class="built_in">number</span>]
  <span class="attr">bar</span>: [<span class="attr">name</span>: <span class="built_in">string</span>, ...<span class="attr">rest</span>: <span class="built_in">any</span>[]]
&#125;&gt;()</code></pre>

<p>Âú®‰∏äÈù¢ÁöÑÁ±ªÂûã‰∏≠ÔºåkeyÊòØ‰∫ã‰ª∂ÂêçÁß∞ÔºåvalueÊòØÈ¢ùÂ§ñÂèÇÊï∞ÁöÑÊï∞ÁªÑÁ±ªÂûã„ÄÇËôΩÁÑ∂‰∏çÊòØÂøÖÈ°ªÁöÑÔºå‰ΩÜ‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®ÂÖÉÁ•ñÁ±ªÂûãÊù•ÊòéÁ°ÆÂèÇÊï∞ÔºåÂ¶Ç‰∏äÈù¢ÁöÑÁ§∫‰æã„ÄÇ</p>
<p>Âπ∂‰∏îÁé∞Âú®‰æùÁÑ∂ÊîØÊåÅË∞ÉÁî®Á≠æÂêçËØ≠Ê≥ï„ÄÇ</p>
<h3 id="Typed-Slots-with-defineSlots"><a href="#Typed-Slots-with-defineSlots" class="headerlink" title="Typed Slots with defineSlots"></a>Typed Slots with defineSlots</h3><p>Êñ∞ÁöÑ<code>defineSlots</code>ÂÆèÂèØÁî®‰∫éÂ£∞ÊòéslotsÂíåslotsÁöÑprops</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript">defineSlots&lt;&#123;</span>
<span class="language-javascript">  <span class="keyword">default</span>?: <span class="function">(<span class="params">props: &#123; msg: string &#125;</span>) =&gt;</span> any</span>
<span class="language-javascript">  item?: <span class="function">(<span class="params">props: &#123; id: number &#125;</span>) =&gt;</span> any</span>
<span class="language-javascript">&#125;&gt;()</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre>

<p><code>defineSlots()</code>Âè™Êé•Âèó‰∏Ä‰∏™Á±ªÂûãÂèÇÊï∞ÔºåÂπ∂‰∏î‰∏çÊé•ÂèóËøêË°åÊó∂ÂèÇÊï∞„ÄÇÁÑ∂ÂêéÁ±ªÂûãÂèÇÊï∞Â∫îËØ•ÊòØ‰∏Ä‰∏™<code>type literals</code>ÔºåÂÖ∂‰∏≠ÁöÑkeyÊòØÊèíÊßΩÂêçÂ≠óÔºåvalueÊòØ‰∏Ä‰∏™ÊèíÊßΩÂáΩÊï∞„ÄÇÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÊèíÊßΩÊúüÊúõÊé•ÂèóÁöÑpropsÔºåÂÖ∂Á±ªÂûãÂ∞ÜÁî®‰∫éÊ®°Áâà‰∏≠slotÁöÑprops„ÄÇ<code>defineSlots</code>ÁöÑËøîÂõûÂÄº‰∏é<code>useSlots</code>ËøîÂõûÁöÑÊèíÊßΩÂØπË±°Áõ∏Âêå„ÄÇ</p>
<p>ÁõÆÂâçÁöÑ‰∏Ä‰∫õÈôêÂà∂Ôºö</p>
<ul>
<li>volar&#x2F;vue-tscÁõÆÂâçÂ∞öÊú™ÂÆûÁé∞ÊâÄÈúÄÁöÑÊèíÊßΩÊ£ÄÊü•„ÄÇ</li>
<li>ÊèíÊßΩÂáΩÊï∞ÁöÑËøîÂõûÁ±ªÂûãÁõÆÂâçËøòÊòØÂøΩËßÜÁöÑÔºåÂèØ‰ª•ÊòØ‰ªª‰ΩïÁ±ªÂûãÔºå‰ΩÜÊàë‰ª¨Â∞ÜÊù•ÂèØËÉΩ‰ºöÂà©Áî®ÂÆÉËøõË°åÊèíÊßΩÂÜÖÂÆπÊ£ÄÊü•„ÄÇ</li>
</ul>
<p>ËøòÊúâ‰∏Ä‰∏™Áõ∏Â∫îÁöÑ<code>slots</code>ÈÄâÈ°πÈÄÇÁî®‰∫é<code>defineComponent</code>ÁöÑ‰ΩøÁî®„ÄÇËøô‰∏§‰∏™APIÈÉΩÊ≤°ÊúâÂÆûÁé∞ËøêË°åÊó∂ÔºåÁ∫ØÁ≤πÊòØIDEÂíåvue-tscÁöÑÁ±ªÂûãÊèêÁ§∫„ÄÇ</p>
<h2 id="Experimental-Features"><a href="#Experimental-Features" class="headerlink" title="Experimental Features"></a>Experimental Features</h2><h3 id="Reactive-Props-Destructure"><a href="#Reactive-Props-Destructure" class="headerlink" title="Reactive Props Destructure"></a>Reactive Props Destructure</h3><p>‰πãÂâçÁöÑÂìçÂ∫îÂºèËΩ¨Êç¢‰∏≠Êú™ÂÆûÁé∞propsÁöÑËß£ÊûÑÂìçÂ∫îÔºåÁé∞Âú®Â∑≤ÁªèË¢´ÊãÜÂàÜ‰∏∫‰∏Ä‰∏™Áã¨Á´ãÁöÑÂäüËÉΩ„ÄÇ</p>
<p>ËØ•ÂäüËÉΩÂÖÅËÆ∏Ëß£ÊûÑÁöÑprops‰øùÁïôÂìçÂ∫îÂºèÔºåÂπ∂Êèê‰æõ‰∫Ü‰∏ÄÁßçÊõ¥Á¨¶ÂêàÂ∑•Â≠¶ÁöÑÊñπÂºèÊù•Â£∞ÊòépropsÈªòËÆ§ÂÄºÔºö</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="keyword">import</span> &#123; watchEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="keyword">const</span> &#123; msg = <span class="string">&#x27;hello&#x27;</span> &#125; = <span class="title function_">defineProps</span>([<span class="string">&#x27;msg&#x27;</span>])</span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;</span>
<span class="language-javascript">  <span class="comment">// accessing `msg` in watchers and computed getters</span></span>
<span class="language-javascript">  <span class="comment">// tracks it as a dependency, just like accessing `props.msg`</span></span>
<span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`msg is: <span class="subst">$&#123;msg&#125;</span>`</span>)</span>
<span class="language-javascript">&#125;)</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>

<span class="tag">&lt;<span class="name">template</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></code></pre>

<p>Ëøô‰∏™ÁõÆÂâçÊòØÂÆûÈ™åÊÄßÁöÑÂäüËÉΩÔºåÈúÄË¶ÅÊòéÁ°ÆÈÄâÊã©Âä†ÂÖ•„ÄÇ</p>
<h3 id="defineModel"><a href="#defineModel" class="headerlink" title="defineModel"></a><code>defineModel</code></h3><p>‰πãÂâçÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÁªÑ‰ª∂Ë¶ÅÊîØÊåÅ<code>v-moel</code>ÁöÑÂèåÂêëÁªëÂÆöÔºåÈ¶ñÂÖàÈúÄË¶ÅÂ£∞Êòé‰∏Ä‰∏™propÔºåÁÑ∂ÂêéÂú®Êõ¥Êñ∞Êó∂ÂèëÂá∫Áõ∏Â∫îÁöÑ<code>update:propName</code>‰∫ã‰ª∂:</p>
<pre><code class="highlight html"><span class="comment">&lt;!-- BEFORE --&gt;</span>
<span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="keyword">const</span> props = <span class="title function_">defineProps</span>([<span class="string">&#x27;modelValue&#x27;</span>])</span>
<span class="language-javascript"><span class="keyword">const</span> emit = <span class="title function_">defineEmits</span>([<span class="string">&#x27;update:modelValue&#x27;</span>])</span>
<span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(props.<span class="property">modelValue</span>)</span>
<span class="language-javascript"></span>
<span class="language-javascript"><span class="keyword">function</span> <span class="title function_">onInput</span>(<span class="params">e</span>) &#123;</span>
<span class="language-javascript">  <span class="title function_">emit</span>(<span class="string">&#x27;update:modelValue&#x27;</span>, e.<span class="property">target</span>.<span class="property">value</span>)</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>

<span class="tag">&lt;<span class="name">template</span>&gt;</span>
  <span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">&quot;modelValue&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;onInput&quot;</span> /&gt;</span>
<span class="tag">&lt;/<span class="name">template</span>&gt;</span></code></pre>

<p>Âú®3.3‰∏≠ÈÄöËøáÊñ∞ÁöÑAPI<code>defineModel</code>ÁÆÄÂåñÊù•ÂÖ∂Áî®Ê≥ï„ÄÇËØ•ÂÆè‰ºöËá™Âä®Ê≥®ÂÜå‰∏Ä‰∏™propÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™ÂèØ‰ª•Áõ¥Êé•Êõ¥ÊîπÁöÑref</p>
<pre><code class="highlight html"><span class="comment">&lt;!-- AFTER --&gt;</span>
<span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="keyword">const</span> modelValue = <span class="title function_">defineModel</span>()</span>
<span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(modelValue.<span class="property">value</span>)</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>

<span class="tag">&lt;<span class="name">template</span>&gt;</span>
  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;modelValue&quot;</span> /&gt;</span>
<span class="tag">&lt;/<span class="name">template</span>&gt;</span></code></pre>

<p>Ëøô‰∏™ÁõÆÂâçÊòØÂÆûÈ™åÊÄßÁöÑÂäüËÉΩÔºåÈúÄË¶ÅÊòéÁ°ÆÈÄâÊã©Âä†ÂÖ•„ÄÇ</p>
<h2 id="Other-Notable-Features"><a href="#Other-Notable-Features" class="headerlink" title="Other Notable Features"></a>Other Notable Features</h2><h3 id="defineOptions"><a href="#defineOptions" class="headerlink" title="defineOptions"></a><code>defineOptions</code></h3><p>Êñ∞ÁöÑdefineOptionsÂÆèÁõ¥Êé•ÂèØ‰ª•Âú®<code>&lt;script setup&gt;</code>‰∏≠Â£∞ÊòéÁªÑ‰ª∂ÈÄâÈ°πÔºåËÄå‰∏çÈúÄË¶ÅÂçïÁã¨ÁöÑ<code>&lt;script&gt;</code>ÂùóÔºö</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="title function_">defineOptions</span>(&#123; <span class="attr">inheritAttrs</span>: <span class="literal">false</span> &#125;)</span>
<span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></code></pre>

<h2 id="Better-Getter-Support-with-toRef-and-toValue"><a href="#Better-Getter-Support-with-toRef-and-toValue" class="headerlink" title="Better Getter Support with toRef and toValue"></a>Better Getter Support with <code>toRef</code> and <code>toValue</code></h2><p><code>toRef</code>ÂæóÂà∞Â¢ûÂº∫ÔºåÊîØÊåÅ <code>values/getters/existing refs</code>Áªü‰∏ÄËΩ¨‰∏∫<code>refs</code></p>
<pre><code class="highlight js"><span class="comment">// equivalent to ref(1)</span>
<span class="title function_">toRef</span>(<span class="number">1</span>)
<span class="comment">// creates a readonly ref that calls the getter on .value access</span>
<span class="title function_">toRef</span>(<span class="function">() =&gt;</span> props.<span class="property">foo</span>)
<span class="comment">// returns existing refs as-is</span>
<span class="title function_">toRef</span>(existingRef)</code></pre>

<p>ÈÄöËøá getter Ë∞ÉÁî®<code>toRef</code>Âíå<code>computed</code>Á±ª‰ººÔºå‰ΩÜÊòØÂú®Âè™ËøõË°åÂ±ûÊÄßËÆøÈóÆËÄå‰∏çÊòØÈ´òÂ∫¶ËÆ°ÁÆóÊó∂Ôºå<code>toRef</code>ÊïàÁéá‰ºöÊõ¥È´ò</p>
<p><code>toValue</code>ÊòØÊèê‰æõ‰∫Ü‰∏Ä‰∏™Áõ∏ÂèçÁöÑÊñπÊ≥ïÔºåÊää <code>values/getters/ref</code> Áªü‰∏ÄËΩ¨‰∏∫ÊôÆÈÄöÂÄº</p>
<pre><code class="highlight js"><span class="title function_">toValue</span>(<span class="number">1</span>) <span class="comment">//       --&gt; 1</span>
<span class="title function_">toValue</span>(<span class="title function_">ref</span>(<span class="number">1</span>)) <span class="comment">//  --&gt; 1</span>
<span class="title function_">toValue</span>(<span class="function">() =&gt;</span> <span class="number">1</span>) <span class="comment">// --&gt; 1</span></code></pre>

<p><code>toValue</code>ÂèØ‰ª•Âú®ÁªÑÂêàÂºèÂáΩÊï∞‰∏≠‰ª£Êõø<code>unref</code>ÔºåËøôÊ†∑‰Ω†ÁöÑÁªÑÂêàÂºèÂáΩÊï∞Â∞±ÂèØ‰ª•Êé•Âèó<code>getters</code>‰Ωú‰∏∫ÂìçÂ∫îÂºèÊï∞ÊçÆÊ∫êÔºö</p>
<pre><code class="highlight js"><span class="comment">// before: allocating unnecessary intermediate refs</span>
<span class="title function_">useFeature</span>(<span class="title function_">computed</span>(<span class="function">() =&gt;</span> props.<span class="property">foo</span>))
<span class="title function_">useFeature</span>(<span class="title function_">toRef</span>(props, <span class="string">&#x27;foo&#x27;</span>))

<span class="comment">// after: more efficient and succinct</span>
<span class="title function_">useFeature</span>(<span class="function">() =&gt;</span> props.<span class="property">foo</span>)</code></pre>

<p><code>toRef</code>Âíå<code>toValue</code>‰πãÈó¥ÁöÑÂÖ≥Á≥ªÂ∞±Á±ª‰ºº‰∫é<code>ref</code>Âíå<code>unref</code>‰πãÈó¥ÁöÑÂÖ≥Á≥ªÔºå‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÂØπ<code>getter</code>ÂáΩÊï∞ÁöÑÁâπÊÆäÂ§ÑÁêÜ</p>
<h2 id="JSX-Import-Source-Support"><a href="#JSX-Import-Source-Support" class="headerlink" title="JSX Import Source Support"></a>JSX Import Source Support</h2><p>ÁõÆÂâçÔºåVueÁöÑÁ±ªÂûã‰ºöËá™Âä®Ê≥®ÂÜåÂÖ®Â±ÄJSXÁ±ªÂûãÔºåËøôÂèØËÉΩ‰ºö‰∏éÈúÄË¶ÅJSXÁ±ªÂûãÊé®Êñ≠ÁöÑÂ∫ì‰∫ßÁîüÂÜ≤Á™ÅÔºåÂ∞§ÂÖ∂ÊòØReact</p>
<p>‰ªé3.3ÂºÄÂßãÔºåVueÊîØÊåÅÈÄöËøáTypeScriptÁöÑ<a href="https://www.typescriptlang.org/tsconfig#jsxImportSource">jsxImportSource</a>ÈÄâÈ°πÊåáÂÆöJSXÂëΩÂêçÁ©∫Èó¥„ÄÇËøôÂÖÅËÆ∏Áî®Êà∑Ê†πÊçÆËá™Â∑±ÁöÑ‰ΩøÁî®ÊÉÖÂÜµÈÄâÊã©ÂÖ®Â±ÄÊàñËÄÖÊåâÊñá‰ª∂ÈÄâÈ¢ù„ÄÇ</p>
<p>‰∏∫‰∫ÜÂêëÂêéÂÖºÂÆπÔºå3.3ÁâàÊú¨‰ªç‰ºöÂÖ®Â±ÄÊ≥®ÂÜåJSXÂëΩÂêçÁ©∫Èó¥„ÄÇÊàë‰ª¨ËÆ°ÂàíÂú®3.4‰∏≠ÁßªÈô§ÈªòËÆ§ÁöÑÂÖ®Â±ÄÊ≥®ÂÜå„ÄÇÂ¶ÇÊûú‰Ω†Âú®Vue‰∏≠‰ΩøÁî®TSXÔºåÂú®ÂçáÁ∫ßÂà∞3.3ÂêéÔºåÂ∫îÂú®<code>tsconfig.json</code>‰∏≠ÊòæÂºèÊ∑ªÂä†<code>jsxImportSource</code>ÔºåÈÅøÂÖçÂú®3.4‰∏≠Âá∫Áé∞‰∏≠Êñ≠„ÄÇ</p>
<h2 id="Maintenance-Infrastructure-Improvements"><a href="#Maintenance-Infrastructure-Improvements" class="headerlink" title="Maintenance Infrastructure Improvements"></a>Maintenance Infrastructure Improvements</h2><p>Ê≠§Ê¨°ÁâàÊú¨ÂçáÁ∫ßÂü∫‰∫éËÆ∏Â§öÁª¥Êä§Âü∫Á°ÄÊûÑÈÄ†ÁöÑÊîπËøõÔºå‰ΩøÊàë‰ª¨ÊúâÊõ¥Â§ß‰ø°ÂøÉÂä†Âø´Â∑•‰ΩúËøõÂ∫¶Ôºö</p>
<ul>
<li>ÈÄöËøáÂ∞ÜÁ±ªÂûãÊ£ÄÊü•‰∏érollupÊûÑÂª∫ÂàÜÁ¶ªÔºåÂπ∂Â∞Ü<code>rollup-plugin-typescript2</code>ËøÅ‰∏∫<code>rollup-plugin-esbuild</code>ÔºåÂ∞ÜÊûÑÂª∫ÈÄüÂ∫¶ÊèêÈ´ò‰∫Ü10ÂÄç„ÄÇ</li>
<li>Êää Jest ËøÅ‰∏∫ VitestÔºåÂä†Âø´‰∫ÜÊµãËØïÈÄüÂ∫¶„ÄÇ</li>
<li>Êää<code>@microsoft/api-extractor</code>ËøÅ‰∏∫<code>rollup-plugin-dts</code>ÔºåÊõ¥Âø´Âú∞ÁîüÊàêÁ±ªÂûã</li>
<li>ÈÄöËøá<a href="https://github.com/vuejs/ecosystem-ci">ecosystem-ci</a>ËøõË°åÂÖ®Èù¢ÁöÑÂõûÂΩíÊµãËØï(Âú®ÂèëÂ∏ÉÂâçÊçïÊçâ‰∏ªË¶ÅÁîüÊÄÅÁ≥ªÁªü‰æùËµñÁöÑÂõûÂΩí)</li>
</ul>
<p>ÊåâÁÖßËÆ°ÂàíÔºåÊàë‰ª¨ÁöÑÁõÆÊ†áÊòØÂú®2023Âπ¥ÂºÄÂßãÊõ¥Â∞èËßÑÊ®°„ÄÅÊõ¥È¢ëÁπÅÂú∞ÂèëÂ∏ÉÂäüËÉΩ„ÄÇÊï¨ËØ∑ÊúüÂæÖÔºÅ</p>
]]></content>
      <tags>
        <tag>Vue</tag>
        <tag>Translate</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëFlat node_modules is not the only way</title>
    <url>/2023/05/01/%E3%80%90%E7%BF%BB%E3%80%91Flat%20node_modules%20is%20not%20the%20only%20way/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://pnpm.io/blog/2020/05/27/flat-node-modules-is-not-the-only-way">Flat node_modules is not the only way</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://twitter.com/zoltankochan">Zoltan Kochan</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>pnpmÁöÑÊñ∞Áî®Êà∑ÁªèÂ∏∏ÈóÆÊàëÂÖ≥‰∫épnpmÂàõÂª∫ÂêéÁöÑ<code>node_module</code>ÁªìÊûÑ‰∏∫‰ªÄ‰πàËøô‰πàÂ•áÊÄ™„ÄÇ‰∏∫‰ªÄ‰πà‰∏çÊòØÊâÅÂπ≥ÂåñÁöÑÔºüÊâÄÊúâÁöÑÊ¨°Á∫ß‰æùËµñÂú®Âì™ÈáåÔºü</p>
<blockquote>
<p>ÊàëÂÅáËÆæÈòÖËØªËøôÁØáÊñáÁ´†ÁöÑËØªËÄÖÈÉΩÂ∑≤ÁªèÁÜüÊÇâ‰∫ÜnpmÂíåyarnÂàõÂª∫ÂêéÁöÑÊâÅÂπ≥Âåñ<code>node_modules</code>ÔºåÂ¶ÇÊûú‰Ω†‰∏çÊòéÁôΩnpmÂú®v3‰∏≠ÂºÄÂßã‰ΩøÁî®ÊâÅÂπ≥Âåñ<code>node_modules</code>Ôºå‰Ω†ÂèØ‰ª•Âú®<a href="https://www.kochan.io/nodejs/why-should-we-use-pnpm.html">Why should we use pnpm?</a>‰∏≠ÊâæÂà∞‰∏Ä‰∫õÂéÜÂè≤ËØ¥Êòé</p>
</blockquote>
<p>ÈÇ£‰πà‰∏∫‰ªÄ‰πàpnpmÁöÑ<code>node_modules</code>‰∏çÂØªÂ∏∏Âë¢ÔºüÊàë‰ª¨Êù•ÂàõÂª∫‰∏§‰∏™ÁõÆÂΩïÔºå‰∏Ä‰∏™ËøêË°å<code>npm add express</code>ÔºåÂè¶‰∏Ä‰∏™ËøêË°å<code>pnpm add express</code>Ôºå‰∏ãÈù¢ÊòØ‰Ω†Âú®Á¨¨‰∏Ä‰∏™ÁõÆÂΩïÁöÑ<code>node_modules</code>‰∏≠ÂæóÂà∞ÁöÑÈ°∂ÈÉ®ÂÜÖÂÆπÁªìÊûÑ</p>
<pre><code class="highlight text">.bin
accepts
array-flatten
body-parser
bytes
content-disposition
cookie-signature
cookie
debug
depd
destroy
ee-first
encodeurl
escape-html
etag
express</code></pre>

<p>‰Ω†ÂèØ‰ª•Âú®<a href="https://github.com/zkochan/comparing-node-modules/tree/master/npm-example/node_modules">ËøôÈáå</a>ÁúãÂà∞Êï¥‰∏™ÁõÆÂΩï„ÄÇ</p>
<p>ÁÑ∂ÂêéËøôÊòØ‰Ω†Âú®pnpmÂàõÂª∫ÁöÑ<code>node_modules</code>‰∏≠ÂæóÂà∞ÁöÑÁõÆÂΩïÔºö</p>
<pre><code class="highlight text">.pnpm
.modules.yaml
express</code></pre>

<p>‰Ω†ÂèØ‰ª•Âú®<a href="https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules">ËøôÈáå</a>Êü•Áúã.</p>
<p>ÈÇ£‰πàÔºåÊâÄÊúâÁöÑ‰æùËµñÈ°πÈÉΩÂú®Âì™ÈáåÂë¢ÔºåÂú®<code>node_modules</code>‰∏≠Âè™Êúâ‰∏Ä‰∏™Âè´ÂÅö<code>.pnpm</code>ÁöÑÊñá‰ª∂Â§πÂíå‰∏Ä‰∏™Âè´ÂÅö<code>express</code>ÁöÑ<code>symlink</code>„ÄÇÂ•ΩÂêßÔºåÂõ†‰∏∫Êàë‰ª¨Âè™ÂÆâË£Ö‰∫Ü<code>express</code>ÔºåÊâÄ‰ª•ËøôÊòØ‰Ω†ÁöÑÂ∫îÁî®ÂèØ‰ª•ËÆøÈóÆÁöÑÂîØ‰∏Ä<code>package</code></p>
<blockquote>
<p>Âú®<a href="https://medium.com/pnpm/pnpms-strictness-helps-to-avoid-silly-bugs-9a15fb306308">Ê≠§</a>ÈòÖËØªÊõ¥Â§öÂÖ≥‰∫épnpmÁöÑ‰∏•Ê†ºÊÄß‰∏∫‰ªÄ‰πàÊòØ‰∏Ä‰ª∂Â•Ω‰∫ãÊÉÖ</p>
</blockquote>
<p>ËÆ©Êàë‰ª¨ÁúãÁúã<code>express</code>ÁöÑÂÜÖÈÉ®Ôºö</p>
<pre><code class="highlight text">‚ñæ node_modules
  ‚ñ∏ .pnpm
  ‚ñæ express
    ‚ñ∏ lib
      History.md
      index.js
      LICENSE
      package.json
      Readme.md
  .modules.yaml</code></pre>

<p>expressÊ≤°Êúânode_modulesÔºüexpressÁöÑÊâÄÊúâ‰æùËµñÈ°πÂú®Âì™Èáå?</p>
<p>ËØÄÁ™çÂú®‰∫éÔºå<code>express</code>Âè™ÊòØ‰∏Ä‰∏™<code>symlink</code>Ôºå‰ΩÜ<code>Node.js</code>Ëß£Êûê‰æùËµñÂÖ≥Á≥ªÊó∂ÔºåÂÆÉ‰ºö‰ΩøÁî®<code>express</code>ÁöÑÁúüÂÆû‰ΩçÁΩÆÔºåÊâÄ‰ª•‰æùËµñ‰∏ç‰ºö‰øùÁïôÂú®Á¨¶Âè∑ËøûÊé•‰∏äÔºå‰ΩÜÊòØ‰Ω†ÂèØËÉΩ‰ºöÈóÆÔºå<code>express</code>ÁöÑÁúüÂÆû‰ΩçÁΩÆÂú®Âì™?</p>
<p>ËøôÈáåÔºö<a href="https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules/.pnpm/express@4.17.1/node_modules/express">node_modules&#x2F;.pnpm&#x2F;express@4.17.1/node_modules&#x2F;express</a>.</p>
<p>Áé∞Âú®Êàë‰ª¨Áü•ÈÅì‰∫Ü<code>.pnpm</code>Êñá‰ª∂Â§πÁöÑÁî®ÈÄî„ÄÇ<code>.pnpm</code>Âú®‰∏Ä‰∏™ÊâÅÂπ≥ÁöÑÊñá‰ª∂Â§πÁªìÊûÑ‰∏≠Â≠òÂÇ®ÊâÄÊúâÁöÑ<code>packages</code>ÔºåÊâÄ‰ª•ÊØè‰∏™<code>package</code>ÈÉΩÂèØ‰ª•Âú®Ëøô‰∏™Ê®°ÂºèÂëΩÂêçÁöÑÊñá‰ª∂Â§π‰∏≠ÊâæÂà∞</p>
<pre><code class="highlight text">.pnpm/&lt;name&gt;@&lt;version&gt;/node_modules/&lt;name&gt;</code></pre>

<p>Êàë‰ª¨Áß∞ÂÆÉ‰∏∫ËôöÊãüÂ≠òÂÇ®ÁõÆÂΩï</p>
<p>ËøôÁßçÊâÅÂπ≥ÁªìÊûÑÈÅøÂÖç‰∫Ü<code>npm v2</code>ÂàõÂª∫ÁöÑÂµåÂ•ó<code>node_modules</code>ÈÄ†ÊàêÁöÑÈïøË∑ØÂæÑÈóÆÈ¢òÔºå‰ΩÜÊòØÂèà‰∏é<code>npm v3,4,5,6</code>Âíå<code>yarn v1</code>ÁöÑÊâÅÂπ≥ÂåñÁªìÊûÑ‰∏çÂêåÔºå‰øùÊåÅ‰∫Ü<code>packages</code>ÁöÑÈöîÁ¶ª</p>
<p>Áé∞Âú®Êàë‰ª¨Êù•Á†îÁ©∂‰∏Ä‰∏ãexpressÁöÑÁúüÂÆû‰ΩçÁΩÆÔºö</p>
<pre><code class="highlight text">‚ñæ express
  ‚ñ∏ lib
    History.md
    index.js
    LICENSE
    package.json
    Readme.md</code></pre>

<p>ËøôÊòØÈîôËØØÁöÑÂêóÔºüÂÆÉ‰ªçÁÑ∂Áº∫Â∞ë<code>node_modules</code>ÔºÅ<code>pnpm</code>ÁöÑ<code>node_modules</code>ÁªìÊûÑÁöÑÁ¨¨‰∫å‰∏™ËØÄÁ™çÊòØÔºå<code>packages</code>ÁöÑ‰æùËµñÂÖ≥Á≥ªÂú®Âêå‰∏ÄÁ∫ßÁöÑÁõÆÂΩï‰∏äÔºåËÄå<code>package</code>‰æùËµñÁöÑÁúüÊ≠£‰ΩçÁΩÆÂú®Ëøô‰∏™ÁõÆÂΩï‰∏ä„ÄÇÊâÄ‰ª•<code>express</code>ÁöÑ‰æùËµñ‰∏çÂú®<code>.pnpm/express@4.17.1/node_modules/express/node_modules/</code>ÔºåËÄåÊòØÂú®<a href="https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules/.pnpm/express@4.17.1/node_modules">.pnpm&#x2F;express@4.17.1/node_modules&#x2F;</a></p>
<pre><code class="highlight text">‚ñæ node_modules
  ‚ñæ .pnpm
    ‚ñ∏ accepts@1.3.5
    ‚ñ∏ array-flatten@1.1.1
    ...
    ‚ñæ express@4.16.3
      ‚ñæ node_modules
        ‚ñ∏ accepts
        ‚ñ∏ array-flatten
        ‚ñ∏ body-parser
        ‚ñ∏ content-disposition
        ...
        ‚ñ∏ etag
        ‚ñæ express
          ‚ñ∏ lib
            History.md
            index.js
            LICENSE
            package.json
            Readme.md</code></pre>

<p><code>express</code>ÁöÑÊâÄÊúâ‰æùËµñÈÉΩÊòØÊåáÂêë<code>node_modules/.pnpm</code>ÂÜÖÁõÆÂΩïÁöÑsymlinks„ÄÇ<code>express</code>ÁöÑ‰æùËµñÊîæÂú®‰∏ä‰∏ÄÁ∫ßÔºåÂèØ‰ª•ÈÅøÂÖçÂæ™ÁéØsymlinks</p>
<p>ÊâÄ‰ª•‰Ω†ÂèØ‰ª•ÁúãÂà∞ÔºåÂ∞ΩÁÆ°pnpmÁöÑ<code>node_modules</code>ÁªìÊûÑ‰ªéÂºÄÂßãÊó∂ÁúãËµ∑Êù•‰∏çÂØªÂ∏∏Ôºö</p>
<ol>
<li>ÂÆåÂÖ®ÂÖºÂÆπNode.js</li>
<li>packagesÂíåÁõ∏ÂÖ≥‰æùËµñË¢´ÂæàÂ•ΩÁöÑÁªÑÂêàÂú®‰∏ÄËµ∑</li>
</ol>
<p>ÂØπ‰∫éÂêåÊ†∑‰æùËµñÂÖ≥Á≥ªÁöÑpackagesÊù•ËØ¥ÁªìÊûÑË¶ÅÂ§çÊùÇ‰∏Ä‰∫õÔºå‰ΩÜÊòØÊÉ≥Ê≥ïÊòØ‰∏ÄÊ†∑ÁöÑÔºö‰ΩøÁî®symlinksÂàõÂª∫‰∏Ä‰∏™ÊúâÊâÅÂπ≥ÁõÆÂΩïÁªìÊûÑÁöÑÂµåÂ•ó</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>pnpm</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëHow peers are resolved</title>
    <url>/2023/05/05/%E3%80%90%E7%BF%BB%E3%80%91How%20peers%20are%20resolved/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://pnpm.io/how-peers-are-resolved">How peers are resolved</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>pnpmÊúÄÂ§ßÁöÑ‰∏Ä‰∏™ÁâπÁÇπÊòØÔºåÂú®‰∏Ä‰∏™È°πÁõÆ‰∏≠Ôºå‰∏Ä‰∏™ÁâπÂÆöÁâàÊú¨ÁöÑpackageÊÄªÊòØÊúâ‰∏ÄÁªÑ‰æùËµñÂÖ≥Á≥ª„ÄÇ‰∏çËøáÔºåËøô‰∏™ËßÑÂàôÊúâ‰∏Ä‰∏™‰æãÂ§ñ‚ÄìÊúâpeer dependenciesÁöÑpackages</p>
<p>Âú®dependency graph‰∏≠Ôºåpeer dependenciesÊòØ‰ªéÊõ¥È´òÁ∫ßÂà´ÁöÑ‰æùËµñ‰∏≠Ëß£ÊûêÁöÑÔºåÂõ†‰∏∫ÂÆÉ‰ª¨‰∏éÂÆÉ‰ª¨ÁöÑÁà∂‰æùËµñÈ°πÂÖ±‰∫´Áõ∏ÂêåÁöÑÁâàÊú¨„ÄÇËøôÊÑèÂë≥ÁùÄÂ¶ÇÊûú<a href="mailto:&#x66;&#111;&#111;&#x40;&#49;&#x2e;&#48;&#46;&#48;">&#x66;&#111;&#111;&#x40;&#49;&#x2e;&#48;&#46;&#48;</a>Êúâ‰∏§‰∏™peer‰æùËµñÈ°π(bar@^1 Âíå baz@^1)ÔºåÈÇ£‰πàÂú®Âêå‰∏Ä‰∏™È°πÁõÆ‰∏≠ÂÆÉÂèØËÉΩ‰ºöÊúâÂ§ö‰∏™‰∏çÂêåÁöÑ‰æùËµñÈ°πÈõÜÂêà</p>
<pre><code class="highlight text">- foo-parent-1
  - bar@1.0.0
  - baz@1.0.0
  - foo@1.0.0
- foo-parent-2
  - bar@1.0.0
  - baz@1.1.0
  - foo@1.0.0</code></pre>

<p>Âú®‰∏äÈù¢Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå<a href="mailto:&#x66;&#111;&#111;&#x40;&#49;&#46;&#48;&#46;&#x30;">&#x66;&#111;&#111;&#x40;&#49;&#46;&#48;&#46;&#x30;</a>ÊòØÂú®foo-parent-1Âíåfoo-parent-2ÂÆâË£ÖÁöÑ„ÄÇËøô‰∏§‰∏™packages‰∏≠ÈÉΩÊúâbarÂíåbazÔºå‰ΩÜÊòØ‰ªñ‰ª¨‰æùËµñ‰∏çÂêåÁâàÊú¨ÁöÑbaz„ÄÇÂõ†Ê≠§Ôºå<a href="mailto:&#x66;&#111;&#x6f;&#x40;&#49;&#x2e;&#48;&#x2e;&#x30;">&#x66;&#111;&#x6f;&#x40;&#49;&#x2e;&#48;&#x2e;&#x30;</a>Êúâ‰∏§‰∏™‰∏çÂêåÁöÑ‰æùËµñÈõÜÔºö‰∏Ä‰∏™ÊòØ<a href="mailto:&#98;&#97;&#x7a;&#x40;&#49;&#x2e;&#x30;&#x2e;&#48;">&#98;&#97;&#x7a;&#x40;&#49;&#x2e;&#x30;&#x2e;&#48;</a>ÔºåÂè¶‰∏Ä‰∏™ÊòØ<a href="mailto:&#98;&#97;&#122;&#64;&#49;&#x2e;&#49;&#46;&#48;">&#98;&#97;&#122;&#64;&#49;&#x2e;&#49;&#46;&#48;</a>„ÄÇ‰∏∫‰∫ÜÊîØÊåÅËøô‰∫õÁî®‰æãÔºåpnpmÂøÖÈ°ªhand link <a href="mailto:&#x66;&#111;&#x6f;&#x40;&#x31;&#46;&#x30;&#46;&#x30;">&#x66;&#111;&#x6f;&#x40;&#x31;&#46;&#x30;&#46;&#x30;</a>ÔºåÊ¨°Êï∞Âíå‰∏çÂêåÁöÑ‰æùËµñÈõÜ‰∏ÄÊ†∑Â§ö„ÄÇ</p>
<p>ÈÄöÂ∏∏ÔºåÂ¶ÇÊûú‰∏Ä‰∏™packageÊ≤°Êúâpeer‰æùËµñÈ°πÔºåÂÆÉ‰ºö‰∏éÂÖ∂‰æùËµñÈ°πÁöÑsymlinks‰∏ÄËµ∑hard linkedÂà∞node_modulesÊñá‰ª∂Â§π‰∏≠ÔºåÂ∞±ÂÉèÔºö</p>
<pre><code class="highlight text">node_modules
‚îî‚îÄ‚îÄ .pnpm
    ‚îú‚îÄ‚îÄ foo@1.0.0
    ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
    ‚îÇ       ‚îú‚îÄ‚îÄ foo
    ‚îÇ       ‚îú‚îÄ‚îÄ qux   -&gt; ../../qux@1.0.0/node_modules/qux
    ‚îÇ       ‚îî‚îÄ‚îÄ plugh -&gt; ../../plugh@1.0.0/node_modules/plugh
    ‚îú‚îÄ‚îÄ qux@1.0.0
    ‚îú‚îÄ‚îÄ plugh@1.0.0</code></pre>

<p>ÁÑ∂ÂêéÔºåÂ¶ÇÊûúfooÊúâpeer dependenciesÔºåÂÆÉÂèØËÉΩÊúâÂ§öÁªÑ‰æùËµñÂÖ≥Á≥ªÔºåÊâÄ‰ª•Êàë‰ª¨‰∏∫‰∏çÂêåÁöÑpeer dependencies ÂàõÂª∫‰∏çÂêåÁöÑÈõÜÂêàÔºö</p>
<pre><code class="highlight text">node_modules
‚îî‚îÄ‚îÄ .pnpm
    ‚îú‚îÄ‚îÄ foo@1.0.0_bar@1.0.0+baz@1.0.0
    ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
    ‚îÇ       ‚îú‚îÄ‚îÄ foo
    ‚îÇ       ‚îú‚îÄ‚îÄ bar   -&gt; ../../bar@1.0.0/node_modules/bar
    ‚îÇ       ‚îú‚îÄ‚îÄ baz   -&gt; ../../baz@1.0.0/node_modules/baz
    ‚îÇ       ‚îú‚îÄ‚îÄ qux   -&gt; ../../qux@1.0.0/node_modules/qux
    ‚îÇ       ‚îî‚îÄ‚îÄ plugh -&gt; ../../plugh@1.0.0/node_modules/plugh
    ‚îú‚îÄ‚îÄ foo@1.0.0_bar@1.0.0+baz@1.1.0
    ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
    ‚îÇ       ‚îú‚îÄ‚îÄ foo
    ‚îÇ       ‚îú‚îÄ‚îÄ bar   -&gt; ../../bar@1.0.0/node_modules/bar
    ‚îÇ       ‚îú‚îÄ‚îÄ baz   -&gt; ../../baz@1.1.0/node_modules/baz
    ‚îÇ       ‚îú‚îÄ‚îÄ qux   -&gt; ../../qux@1.0.0/node_modules/qux
    ‚îÇ       ‚îî‚îÄ‚îÄ plugh -&gt; ../../plugh@1.0.0/node_modules/plugh
    ‚îú‚îÄ‚îÄ bar@1.0.0
    ‚îú‚îÄ‚îÄ baz@1.0.0
    ‚îú‚îÄ‚îÄ baz@1.1.0
    ‚îú‚îÄ‚îÄ qux@1.0.0
    ‚îú‚îÄ‚îÄ plugh@1.0.0</code></pre>

<p>Êàë‰ª¨Ë¶Å‰πàÂàõÂª∫symlinksÂà∞<code>foo@1.0.0_bar@1.0.0+baz@1.0.0</code>‰∏≠ÁöÑfooÔºåË¶Å‰πàÂàõÂª∫symlinksÂà∞<code>foo@1.0.0_bar@1.0.0+baz@1.1.0</code>‰∏≠ÁöÑfoo„ÄÇÂõ†Ê≠§ÔºåNode.jsÊ®°ÂùóËß£ÊûêÂèØ‰ª•ÊâæÂà∞Ê≠£Á°ÆÁöÑpeers‰æùËµñÈ°π„ÄÇ</p>
<p>Â¶ÇÊûú‰∏Ä‰∏™packageÊ≤°Êúâpeer‰æùËµñÈ°πÔºå‰ΩÜÊòØÊúâ‰æùËµñ‰∫éÂ∑≤Âú®Âõæ‰∏≠Ëß£ÊûêÁöÑÂêåÁ∫ß‰æùËµñÈ°πÁöÑ‰æùËµñÈ°πÔºåÈÇ£‰πàËøô‰∏™transitive packageÂèØ‰ª•‰ª•‰∏çÂêåÁöÑ‰æùËµñÈ°πÈõÜÂá∫Áé∞Âú®È°πÁõÆ‰∏≠„ÄÇ‰æãÂ¶ÇÔºåÂ≠òÂú®‰∏Ä‰∏™ÁâàÊú¨‰∏∫<code>a@1.0.0</code>ÁöÑÂåÖÔºåÂÆÉÂè™Êúâ‰∏Ä‰∏™‰æùËµñÈ°π<code>b@1.0.0</code>„ÄÇ<code>b@1.0.0</code>Êúâ‰∏Ä‰∏™ÂêåÁ∫ß‰æùËµñÈ°π<code>c@^1</code>„ÄÇ<code>a@1.0.0</code>Ê∞∏Ëøú‰∏ç‰ºöËß£Êûê<code>b@1.0.0</code>ÁöÑÂêåÁ∫ß‰æùËµñÈ°πÔºåÊâÄ‰ª•ÂÆÉ‰πü‰ºö‰æùËµñ‰∫é<code>b@1.0.0</code>ÁöÑÂêåÁ∫ß‰æùËµñÈ°π„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØËøô‰∏™ÁªìÊûÑÂú®<code>node_modules</code>‰∏≠ÁöÑÊ†∑Â≠êÔºåÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå<a href="mailto:&#97;&#x40;&#49;&#46;&#x30;&#x2e;&#x30;">&#97;&#x40;&#49;&#46;&#x30;&#x2e;&#x30;</a>ÈúÄË¶ÅÂú®È°πÁõÆÁöÑ<code>node_modules</code>‰∏≠Âá∫Áé∞‰∏§Ê¨°Ôºå‰∏ÄÊ¨°Âíå<code>c@1.0.0</code>ÔºåÂè¶‰∏ÄÊ¨°Âíå<code>c@1.1.0</code>Ëß£ÂÜ≥„ÄÇ</p>
<pre><code class="highlight text">node_modules
‚îî‚îÄ‚îÄ .pnpm
    ‚îú‚îÄ‚îÄ a@1.0.0_c@1.0.0
    ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
    ‚îÇ       ‚îú‚îÄ‚îÄ a
    ‚îÇ       ‚îî‚îÄ‚îÄ b -&gt; ../../b@1.0.0_c@1.0.0/node_modules/b
    ‚îú‚îÄ‚îÄ a@1.0.0_c@1.1.0
    ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
    ‚îÇ       ‚îú‚îÄ‚îÄ a
    ‚îÇ       ‚îî‚îÄ‚îÄ b -&gt; ../../b@1.0.0_c@1.1.0/node_modules/b
    ‚îú‚îÄ‚îÄ b@1.0.0_c@1.0.0
    ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
    ‚îÇ       ‚îú‚îÄ‚îÄ b
    ‚îÇ       ‚îî‚îÄ‚îÄ c -&gt; ../../c@1.0.0/node_modules/c
    ‚îú‚îÄ‚îÄ b@1.0.0_c@1.1.0
    ‚îÇ   ‚îî‚îÄ‚îÄ node_modules
    ‚îÇ       ‚îú‚îÄ‚îÄ b
    ‚îÇ       ‚îî‚îÄ‚îÄ c -&gt; ../../c@1.1.0/node_modules/c
    ‚îú‚îÄ‚îÄ c@1.0.0
    ‚îú‚îÄ‚îÄ c@1.1.0</code></pre>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>pnpm</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëHow to Use ChatGPT to Learn a Language (And Practice It)</title>
    <url>/2023/07/01/%E3%80%90%E7%BF%BB%E3%80%91How-to-Use-ChatGPT-to-Learn-a-Language-And-Practice-It/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://artificialcorner.com/how-to-use-chatgpt-to-learn-a-language-and-practice-it-f7e7e38b1cee">How to Use ChatGPT to Learn a Language (And Practice It)</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://dianatheathlete.medium.com/">Diana Dovgopol</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lsuHn9qRgL_il5b931lCsA.png"></p>
<p>ÊàëÊòØ‰∏Ä‰∏™ÁßªÊ∞ëÔºå‰∏§Âπ¥ÂâçÊàëÂÜ≥ÂÆöÊääËá™Â∑±ÁöÑÁîüÊ¥ªÊî∂ÊãæÂà∞‰∏Ä‰∏™Ë°åÊùéÁÆ±ÔºåÂπ∂Ë¥≠Â§ñ‰∫ÜÂçïÁ®ãÊú∫Á•®„ÄÇÂú®ËøáÂéªÁöÑ‰∏§Âπ¥ÈáåÔºåÊàëÂú®‰∏§‰∏™‰∏çÂêåÁöÑÂõΩÂÆ∂ÁîüÊ¥ªËøáÔºåÂπ∂Ëä±Êó∂Èó¥Â≠¶‰π†ÂΩìÂú∞ÁöÑËØ≠Ë®Ä„ÄÇ</p>
<p>ÊàëÂøÖÈ°ªË¶ÅÊâøËÆ§Ôºå‰∏âÂπ¥ÂâçÊàëÊ†πÊú¨‰∏çÊáÇËã±ËØ≠ÔºåÁÑ∂ËÄåÔºå‰∏â‰∏™ÊúàÂâçÔºåÊàëÊàêÂäüÂú∞ÂÆåÊàêÊàëÁöÑÁ°ïÂ£´ËØæÁ®ãÔºåÂπ∂‰∏îÁé∞Âú®ÊàëÂèØ‰ª•ÂíåËã±ËØ≠ÊØçËØ≠ËÄÖËøõË°åÊúâÊïàÁöÑÊ≤üÈÄö„ÄÇ</p>
<p>ÊàëËä±‰∫Ü‰∏ÄÂπ¥ÁöÑÊó∂Èó¥Â≠¶‰π†ÂíåÁªÉ‰π†Ôºå‰ΩøÊàëÁöÑËã±ËØ≠‰ªéÂàùÁ∫ßÂà∞B2Ê∞¥Âπ≥„ÄÇËøôÂπ∂‰∏çÂÆπÊòìÔºå‰ΩÜÊàëËÆ§‰∏∫Â¶ÇÊûúÂΩìÊó∂ÊúâChatGPTÁöÑËØùÔºåÂ∫îËØ•‰ºöÂèòÂæóÂÆπÊòì„ÄÇChatGPTÂèØ‰ª•Êàê‰∏∫ËØ≠Ë®ÄÂ≠¶‰π†ËÄÖËá™Â≠¶ÁöÑ‰∏Ä‰∏™ÊúâÊïàÂ∑•ÂÖ∑„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØÊàëÂ¶Ç‰Ωï‰ΩøÁî®ChatGPTÊù•Â≠¶‰π†ÂíåÁªÉ‰π†‰∏ÄÁßçÊñ∞ÁöÑËØ≠Ë®Ä„ÄÇ</p>
<h2 id="1-Use-ChatGPT-as-a-language-partner-Simulate-a-real-conversation"><a href="#1-Use-ChatGPT-as-a-language-partner-Simulate-a-real-conversation" class="headerlink" title="1. Use ChatGPT as a language partner: Simulate a real conversation"></a>1. Use ChatGPT as a language partner: Simulate a real conversation</h2><p>ChatGPTÂèØ‰ª•Êàê‰∏∫‰Ω†ÁöÑËØ≠Ë®Ä‰ºô‰º¥ÔºåÂú®‰Ω†ÈúÄË¶ÅÁªÉ‰π†ÁöÑÊó∂ÂÄô‰∏é‰Ω†ËÅäÂ§©„ÄÇ</p>
<p>‰ΩøÁî®ChatGPT‰∏é‰Ω†ËøõË°åÂØπËØùÔºåÈúÄ‰ΩøÁî®‰∏ãÈù¢ÁöÑÊèêÁ§∫„ÄÇ</p>
<blockquote>
<p>Act as a language partner. You‚Äôll start a conversation with me about [topic] in [language]. In every response, you should provide your opinion and then ask me a question to keep the conversation going.</p>
</blockquote>
<p>ÊàëËØïÁùÄÁî®‚Äúfootball‚ÄùÂíå‚ÄùË•øÁè≠ÁâôËØ≠‚ÄùÊù•ËøõË°åÊèêÁ§∫„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DznstT0MrB1WVGThkGxAmw.png"></p>
<p>Ê≠£Â¶Ç‰Ω†ËØ¥ÁúãÂà∞ÁöÑÔºåChatGPTÁªôÂá∫‰∫ÜËá™Â∑±ÁöÑÊÑèËßÅÔºåÂπ∂ÂêëÊàëÊèêÂá∫‰∫Ü‰∏Ä‰∏™Êñ∞ÈóÆÈ¢òÔºåËøôÂ∞±ÂΩ¢Êàê‰∫Ü‰∏ÄÁßç‰∫íÂä®ÂºèÁöÑÊÄùÊÉ≥‰∫§ÊµÅÂíåÊÄùËÄÉ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_IKImgiCyz8vnyneWfnkXw.png"></p>
<p>‰Ω†ÂèØ‰ª•Áî®ChatGPTÁªÉ‰π†‰ªª‰ΩïËØ≠Ë®Ä„ÄÇÁé∞Âú®ÊàëÊâìÁÆóÁªÉ‰π†ÊàëÁöÑÂæ∑ËØ≠„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dExTgF08UURkOI18cSy8yQ.png"></p>
<p>ËøôÂèØ‰ª•Â∏ÆÂä©‰Ω†ÁªÉ‰π†‰Ω†Â≠¶ËøáÁöÑËØ≠Ê≥ïËßÑÂàôÂíåËØçÊ±á„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QY4Nw2q9Fo4F9FDh6z1wAw.png"></p>
<p>ÂΩìÁÑ∂Ôºå‰∏éÁúü‰∫∫ÂØπÊØîÔºåChatGPTÂèÇ‰∏éÂØπËØùÁöÑËÉΩÂäõÊòØÊúâÈôêÁöÑ„ÄÇÂ∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÂÆÉ‰ªçÁÑ∂ÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑËØ≠Ë®Ä‰ºô‰º¥!</p>
<h2 id="2-Using-ChatGPT-to-learn-grammar-rules-and-improve-your-writing"><a href="#2-Using-ChatGPT-to-learn-grammar-rules-and-improve-your-writing" class="headerlink" title="2. Using ChatGPT to learn grammar rules and improve your writing"></a>2. Using ChatGPT to learn grammar rules and improve your writing</h2><p>ChatGPTÂèØ‰ª•Â∏ÆÂä©‰Ω†‰ª•‰∏ÄÁßçÁÆÄÂçïÁöÑÊñπÂºèÁêÜËß£ËØ≠Ê≥ïËßÑÂàô„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÊàëÈóÆchatGPTÂÖ≥‰∫éÂæ∑ËØ≠‰∏≠‰∏§‰∏™Âä®ËØçÔºà‰∏Ä‰∏™ÊòØÁé∞Âú®ÂÆåÊàêÊó∂ÔºåÂè¶‰∏Ä‰∏™ÊòØËøáÂéªÂÆåÊàêÊó∂Ôºâ‰πãÈó¥ÁöÑÂå∫Âà´„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b45NMA8MSS_ES6umAcKigw.png"></p>
<p>‰∏äÈù¢ÁöÑËß£ÈáäÂè™ÊòØÂØπÂä®ËØçÊó∂ÊÄÅÁöÑÂü∫Êú¨ÊèèËø∞„ÄÇ‰ΩÜÊòØÔºå‰Ω†‰πüÂèØ‰ª•ÈÄöËøáChatGPTÊèê‰æõÁöÑ‰æãÂ≠êÂíåÊõ¥Â§öËØ≠Ê≥ïËßÑÂàôÁöÑÁªÜËäÇÊù•ÁêÜËß£ÊâÄÂ≠¶ÁöÑÊ¶ÇÂøµ‰ª•ÂèäÂ¶Ç‰ΩïÂú®‰∏çÂêåÁöÑËØ≠Â¢É‰∏≠‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇ</p>
<p>Âè¶Â§ñChatGPTÂèØ‰ª•Â∏ÆÂä©‰Ω†Á∫†Ê≠£ÈîôËØØ„ÄÇ</p>
<p>ChatGPTÂèØ‰ª•Á∫†Ê≠£‰Ω†ÁöÑËØ≠Ê≥ïÂíåÊãºÂÜôÈîôËØØÔºåÂπ∂‰∏∫‰Ω†Êèê‰æõ‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÔºåËß£Èáä‰∏∫‰ªÄ‰πàÂá∫Èîô‰ª•ÂèäÂ¶Ç‰Ωï‰øÆÊîπ„ÄÇËøôÂØπ‰∫éËá™Â≠¶ÁöÑ‰∫∫Êù•ËØ¥ÁâπÂà´ÊúâÁî®ÔºåÂõ†‰∏∫Ê≤°Êúâ‰∫∫Ê£ÄÊü•‰ªñ‰ª¨ÁöÑÂÜô‰Ωú„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØÊàëË¶ÅÊ±ÇChatGPTÁ∫†Ê≠£ÊàëÁî®Âæ∑ËØ≠ÂÜôÁöÑ‰∏ÄÂ∞ÅÈÇÆ‰ª∂„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kui474LjnsZS5sVhew4WwQ.png"></p>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåChatGPTÁöÑ‰øÆÊîπÊõ¥Âä†Ê≠£Âºè„ÄÇÂ¶ÇÊûú‰Ω†ÊòéÁ°ÆÊåáÂÆöËøôÂ∞Å‰ø°ÊòØÁªôË∞ÅÔºåÂÆÉÂèØ‰ª•Ë∞ÉÊï¥ËØ≠Ê∞î„ÄÇÊàëÂëäËØâChatGPTËøôÂ∞Å‰ø°ÊòØÁªô‰∏Ä‰∏™ÊúãÂèãÁöÑÔºå‰ª•‰∏ãÊòØÂÆÉÁöÑÂõûÁ≠î„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HAV5sACcIAyeGFniknB-mQ.png"></p>
<p>‰Ω†‰πüÂèØ‰ª•ÊòéÁ°ÆÂú∞Ë¶ÅÊ±ÇChatGPTËÆ©ÂÜÖÂÆπÊõ¥Âä†Ê≠£Âºè„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bqXuoOSQKCMOiOsnN8vE0w.png"></p>
<p>Ê≠£ÂºèÁöÑËØ≠Ë®ÄÂ∫îÂú®Â≠¶ÊúØËÉåÊôØ‰∏ã‰ΩøÁî®Ôºå‰ª•Âèä‰∏éÈôåÁîü‰∫∫ÊàñËÄÖÊØîÊàë‰ª¨Âπ¥ÈïøÁöÑ‰∫∫‰∫§Ë∞àÊó∂‰ΩøÁî®ÔºåËÄåÈùûÊ≠£ÂºèËØ≠Ë®ÄÂèØ‰ª•‰∏éÊúãÂèã‰ΩøÁî®„ÄÇ</p>
<p>Áé∞Âú®ÔºåÊàëË¶ÅÊ±ÇChatGPTËÆ©ÂÜÖÂÆπ‰∏çÈÇ£‰πàÊ≠£ÂºèÔºå‰ª•‰æøÊàëÊâæÂà∞‰∏Ä‰∫õÂ∑ÆÂºÇÊÄßÊù•Â≠¶‰π†Êñ∞ËØç„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X2X9gVncvJOPNWwCNrCHYw.png"></p>
<p>Áé∞Âú®ÊòØÂ∞ùËØïÁºñÂÜôÈÇÆ‰ª∂ÂíåËÆ∫ÊñáÁöÑÊó∂ÂÄô‰∫Ü„ÄÇ</p>
<h2 id="3-Use-ChatGPT-to-improve-your-vocabulary-and-reading-skills"><a href="#3-Use-ChatGPT-to-improve-your-vocabulary-and-reading-skills" class="headerlink" title="3. Use ChatGPT to improve your vocabulary and reading skills"></a>3. Use ChatGPT to improve your vocabulary and reading skills</h2><p>ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂΩì‰Ω†Ê†πÊçÆÊïôÁßë‰π¶Â≠¶‰π†Êó∂Ôºå‰Ω†ÁöÑÂ≠¶‰π†ÂÜÖÂÆπ‰ºöË¢´ÈôêÂà∂Âà∞ÊâÄÊèê‰æõÁöÑ‰∏ÄÁªÑÊñáÊú¨ÂíåËØçÊ±á‰∏≠„ÄÇËøô‰∫õÊïôÊùêÈÄöÂ∏∏Áî±‰∏Ä‰∏™Êàñ‰∏§‰∏™ÂÖ≥‰∫éÁâπÂÆö‰∏ªÈ¢òÁöÑÂÜÖÂÆπÁªÑÊàêÔºåÊúâÊó∂Â∞±‰ºöÂæàÊûØÁá•„ÄÇ</p>
<p>ÊúâÊó∂‰Ω†‰ºöËä±Ë¥πÂæàÂ§öÊó∂Èó¥Âú®ÁΩë‰∏äÊêúÁ¥¢ÂêàÈÄÇÁöÑÊñáÊú¨Ôºå‰ΩÜÊúâ‰∫ÜChatGPTÔºå‰Ω†ÂèØ‰ª•Âú®Âá†ÁßíÂÜÖÂø´ÈÄüÁîüÊàê‰ªª‰ΩïÁ∫ßÂà´Âíå‰∏ªÈ¢òÁöÑÂÜÖÂÆπÔºåÊù•ËäÇÁúÅ‰Ω†ÁöÑÊó∂Èó¥ÂíåÁ≤æÂäõ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*De2NMiGblHWpc5V_EoiOiQ.png"></p>
<p>Okay! ‰∏äÈù¢Ëøô‰∏™ÊïÖ‰∫ãÊ≤°ÊúâÂ§™Â§öÁöÑÊÇ¨ÂøµÔºåÊÉÖËäÇ‰πüÂæàÁõ¥ÁôΩÔºå‰ΩÜÊòØÂÆÉ‰ªçÁÑ∂Êèê‰æõ‰∫ÜÈòÖËØªÊùêÊñô„ÄÇ</p>
<p>Âè¶Â§ñÔºåÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õËØçÊ±áÂíåÁü≠ËØ≠ÂèØËÉΩ‰∏çÊòØÁúüÊ≠£ÁöÑ‚ÄùÁÆÄÂçï‚ÄùÔºå‰ΩÜ‰Ω†‰ªçÁÑ∂ÂèØ‰ª•Áî®Ëøô‰∏™ÊïÖ‰∫ãËøõË°åÁªÉ‰π†„ÄÇÁé∞Âú®ÔºåËÆ©Êàë‰ª¨Áî®ÂÆÉÂàõÂª∫‰∏Ä‰∏™ÂÖ∑ÊúâÊåëÊàòÊÄßÁöÑÂçïËØçÂàóË°®ÔºåÂπ∂Êèê‰æõÂÆÉ‰ª¨ÁöÑËã±ÊñáÁøªËØëÔºö</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ew9f5o55-OHKf4wAe96PfQ.png"></p>
<p>Awesome!</p>
<p>‰Ω†‰πüÂèØ‰ª•Ë¶ÅÊ±ÇChatGPTÁªßÁª≠ÂÜôÊïÖ‰∫ãÔºåÂè™ÈúÄË¶ÅËØ¥‚Äùcontinue‚ÄùÔºå‰πüÂèØ‰ª•Ë¶ÅÊ±ÇÂ∞ÜÊï¥‰∏™ÊñáÊú¨ÁøªËØëÊàêËã±ÊñáÔºåÁîöËá≥Ë¶ÅÊ±ÇÂÆÉ‰∏∫Ëøô‰∫õÊïÖ‰∫ãÁîüÊàêÁÆÄÂçïÁöÑÁêÜËß£ÊÄßÈóÆÈ¢ò„ÄÇ</p>
<h2 id="4-Use-ChatGPT-to-improve-your-pronunciation"><a href="#4-Use-ChatGPT-to-improve-your-pronunciation" class="headerlink" title="4. Use ChatGPT to improve your pronunciation"></a>4. Use ChatGPT to improve your pronunciation</h2><p>ChatGPT‰∏çËÉΩ‰ΩøÁî®Èü≥È¢ëÔºåÂçïÂÆÉÂèØ‰ª•Êèê‰æõ‰ªª‰Ωï‰Ω†ÊÑüÂÖ¥Ë∂£ÁöÑÂçïËØçÁöÑÈü≥ËØë„ÄÇ</p>
<p>Ëøô‰∏™ËøáÁ®ãÂæàÁÆÄÂçïÔºå‰Ω†Âè™ÈúÄË¶Å‰ΩøÁî®‰∏ãÈù¢ÁöÑÊèêÁ§∫„ÄÇ</p>
<blockquote>
<p>Create a table with 2 columns: In the first column type the [language] words: [word1, word2, ‚Ä¶]. In the second column, you should provide the phonetic transcription.</p>
</blockquote>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zokSmgDZZkbAMUIzIdHq6w.png"></p>
<p>Ëøô‰∏™Èü≥Ê†áÊòØ‰ª• International Phonetic Alphabet (IPA) ÁöÑÂΩ¢ÂºèÁªôÂá∫ÔºåÂæàÂà©‰∫é‰Ω†ÁöÑÂèëÈü≥ÁªÉ‰π†!</p>
<h2 id="5-Use-ChatGPT-to-understand-different-dialects"><a href="#5-Use-ChatGPT-to-understand-different-dialects" class="headerlink" title="5. Use ChatGPT to understand different dialects"></a>5. Use ChatGPT to understand different dialects</h2><p>Ê≠£Â¶Ç‰Ω†ÊâÄÁü•ÈÅìÁöÑÔºå‰∏Ä‰∫õËã±ËØ≠ÂçïËØç‰ºöÊ†πÊçÆ‰∏çÂêåÁöÑÂõΩÂÆ∂ËÄåÂèëÁîüÂèòÂåñ„ÄÇ</p>
<p>ËøôÁßçÊÉÖÂÜµ‰πüÂèëÁîüÂú®ÂÖ∂‰ªñËØ≠Ë®Ä‰∏äÔºåÂ¶ÇÂæ∑ËØ≠„ÄÇ</p>
<p>ÊàëÂ≠¶ÁöÑÊòØ‚Äùhigh German‚ÄùÔºåÂéüÊ±ÅÂéüÂë≥ÔºåÊú™ÂèóÊñπË®ÄÂΩ±Âìç„ÄÇÁÑ∂ËÄåÔºåÂú®Â••Âú∞Âà©„ÄÅÂæ∑ÂõΩÊàñÁëûÂ£´ÁöÑ‰∏Ä‰∫õÂú∞Âå∫ÔºåÊñπË®ÄÂíåËØçÊ±áÊòØ‰∏çÂêåÁöÑ„ÄÇÁé∞Âú®ÔºåÊàëÂèØ‰ª•ÂêëChatGPTËØ¢ÈóÆ‰∏Ä‰∏™Êñ∞ËØçÂíåÂÆÉÂú®ÁâπÂÆöÊñπË®Ä‰∏≠ÁöÑÂØπÂ∫îËØç„ÄÇ</p>
<p>‰∏ãÈù¢Êúâ‰∏™‰æãÂ≠ê„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cX0x0lpVJh0iRj72CvpMBg.png"></p>
<h2 id="So-can-you-learn-a-language-with-ChatGPT"><a href="#So-can-you-learn-a-language-with-ChatGPT" class="headerlink" title="So can you learn a language with ChatGPT?"></a>So can you learn a language with ChatGPT?</h2><p>Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Â∑≤ÁªèÁúãÂà∞ChatGPTÂèØ‰ª•Êàê‰∏∫Â≠¶‰π†ËØ≠Ë®ÄÁöÑ‰∏Ä‰∏™ÊúâÁî®Â∑•ÂÖ∑„ÄÇ</p>
<p>‰Ωú‰∏∫‰∏Ä‰∏™‰∫∫Â∑•Êô∫ËÉΩËØ≠Ë®ÄÊ®°ÂûãÔºåChatGPTÂÖ∑ÊúâÂú®ÁâπÂÆöËØ≠Ë®Ä‰∏äÁîüÊàêÊñáÊú¨ÁöÑËÉΩÂäõÔºåÂèØ‰ª•Â∏ÆÂä©‰∫∫‰ª¨ÊèêÂçáËØçÊ±á„ÄÅÂÜô‰ΩúÂíåÂè£ËØ≠ÊäÄËÉΩ„ÄÇ‰πüÂèØ‰ª•Áî®Êù•Ê£ÄÊü•‰Ω†ÁöÑËØ≠Ê≥ïÂíåÊãºÂÜôÈîôËØØ„ÄÇ</p>
<p>ÊúÄÂêéÔºåË¶ÅËÆ∞‰ΩèÔºåÂÆÉ‰∏çËÉΩ‰ª£Êõø‰∫∫‰∏é‰∫∫‰πãÈó¥ÁöÑÊ≤üÈÄöÊàñÊ≠£ÂºèÁöÑËØ≠Ë®ÄÂ≠¶‰π†ËÆ°ÂàíÔºåÊúÄÂ•ΩÊòØÂ∞ÜÂÖ∂‰Ωú‰∏∫ÂÖ∂‰ªñÂ≠¶‰π†ËµÑÊ∫êÁöÑË°•ÂÖÖ„ÄÇÂè¶Â§ñÂßãÁªàË¶Å‰∏éËØ≠Ë®ÄËÄÅÂ∏àÊàñÊØçËØ≠‰∫∫Â£´Ê†∏ÂÆûChatGPTÁîüÊàêÁöÑ‰ø°ÊÅØ„ÄÇ</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>AI</tag>
        <tag>ChatGPT</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëI Used ChatGPT (Every Day) for 5 Months. Here Are Some Hidden Gems That Will Change Your Life</title>
    <url>/2023/06/23/%E3%80%90%E7%BF%BB%E3%80%91I-Used-ChatGPT-Every-Day-for-5-Months-Here-Are-Some-Hidden-Gems-That-Will-Change-Your-Life/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://artificialcorner.com/i-used-chatgpt-every-day-for-5-months-here-are-some-hidden-gems-that-will-change-your-life-a451e2093097">I Used ChatGPT (Every Day) for 5 Months. Here Are Some Hidden Gems That Will Change Your Life</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://dianatheathlete.medium.com/">Diana Dovgopol</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L_DpPoH6_DMbQeAqTIL0Lw.png"></p>
<p>ÈöèÁùÄChatGPTË∂äÊù•Ë∂äÂèóÊ¨¢ËøéÔºåËÆ∏Â§ö‰∫∫Â∑≤Áªè‰π†ÊÉØ‰∫ÜÂÆÉÁöÑÊ†áÂáÜÂäüËÉΩÔºåÂπ∂‰∏î‰ª•ÂêÑÁßçÊñπÂºèÂºÄÂßã‰ΩøÁî®ÂÆÉ„ÄÇÁÑ∂ËÄåÔºåËÆ∏Â§ö‰∫∫Âπ∂Ê≤°ÊúâÊÑèÊÄùÂà∞ÔºåËøôÁßçAIÈô§‰∫ÜËæìÂÖ•ÊñáÂ≠ó‰πãÂ§ñËøòÊúâÂæàÂ§öÈ´òÁ∫ßÁöÑÂäüËÉΩ„ÄÇ</p>
<p>ChatGPTÊúâËÆ∏Â§öÂäüËÉΩÈÉΩÂèØ‰ª•Â∫îÁî®Âà∞‰Ω†ÁöÑÂ∑•‰ΩúÂíåÁîüÊ¥ª‰∏≠</p>
<p>Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ºöÂíå‰Ω†ÂàÜ‰∫´ChatGPTÁöÑ‰∏Ä‰∫õÈ≤ú‰∏∫‰∫∫Áü•ÂíåÈùûÊ†áÂáÜÁöÑÂäüËÉΩ„ÄÇÈÄöËøáÊé¢Á¥¢Ëøô‰∫õÈöêËóèÁöÑÂäüËÉΩÔºå‰Ω†ÂèØ‰ª•Ëß£ÈîÅËøô‰∏™AIÁöÑÂÖ®ÈÉ®ÊΩúÂäõÔºåÂπ∂‰∏∫‰Ω†Â∏¶Êù•Â•ΩÂ§Ñ„ÄÇ</p>
<p>Â∫üËØù‰∏çÂ§öËØ¥ÔºåËÆ©Êàë‰ª¨Ê∑±ÂÖ•‰∫ÜËß£Âêß!</p>
<h2 id="1-Summarize-videos-articles-papers-and-posts"><a href="#1-Summarize-videos-articles-papers-and-posts" class="headerlink" title="1. Summarize videos, articles, papers and posts"></a>1. Summarize videos, articles, papers and posts</h2><p>ChatGPTÊúÄÂ•ΩÁöÑÂäüËÉΩ‰πã‰∏ÄÊòØ‰∏∫ÊàëËäÇÁúÅ‰∫ÜÈòÖËØªÂú®Á∫øÂÜÖÂÆπÁöÑÊó∂Èó¥„ÄÇ</p>
<p>Âú®ËøáÂéªÔºåÊàë‰∏∫‰∫ÜÊâæÂà∞Êüê‰∫õ‰ø°ÊÅØÔºå‰∏çÂæó‰∏çÈòÖËØªÊµèËßàÂ§ßÈáèÊó†ËÅäÁöÑÁßëÁ†îÊñáÁ´†Ôºå‰ΩÜÁé∞Âú®ChatGPTÂèØ‰ª•Âú®Âá†ÁßíÂÜÖÂ∏ÆÊàëÂÅöÂà∞Ëøô‰∏ÄÁÇπ„ÄÇÊ≠§Â§ñÔºåÂÆÉÁîöËá≥ÂèØ‰ª•Â∞ÜÂÜÖÂÆπÂú®‰∏çÂà∞‰∏ÄÂàÜÈíüÁöÑÊó∂Èó¥ÂÜÖÁøªËØëÊàêÂè¶‰∏ÄÁßçËØ≠Ë®Ä„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØÂÆÉÁöÑÂ∑•‰ΩúÂéüÁêÜ(Ê≥®ÊÑèÔºå‰Ω†ÈúÄË¶ÅÂêØÂä®Ëøô‰∫õ<a href="https://artificialcorner.com/i-tried-84-chatgpt-plugins-these-are-the-best-3b3be6b1cb7b">ChatGPTÊèí‰ª∂</a>)</p>
<ol>
<li>Êü•ÊâæËßÜÈ¢ë&#x2F;ÊñáÁ´†&#x2F;paper&#x2F;Â∏ñÂ≠ê</li>
<li>Â§çÂà∂ÈìæÊé•</li>
<li>ËÆ©ChatGPTÁªô‰Ω†ÊÄªÁªì</li>
</ol>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v-EaO0tq2vum7kOY-zZ6Ew.png"></p>
<p>Ëøô‰∏™ÂäüËÉΩÂØπÊàëÈùûÂ∏∏ÊúâÂ∏ÆÂä©„ÄÇÊàëÂèëÁé∞ÁöÑÂîØ‰∏ÄÁº∫ÁÇπÂ∞±ÊòØ‰∏çËÉΩÈòÖËØªPDFÊ†ºÂºèÁöÑÁßëÁ†îÊñáÁ´†„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂΩìÈúÄË¶ÅÊÄªÁªìÁΩëÁ´ôÁöÑÁ∫ØÊñáÊú¨ÂÜÖÂÆπÊó∂ÔºåÂÆÉÂèØ‰ª•ÂÅöÁöÑÂæàÂ•Ω„ÄÇ</p>
<p>Ê≥®ÊÑèÔºöÁé∞Âú®‰Ω†ÂèØ‰ª•Áî®Êñ∞ÁöÑChatGPTÊèí‰ª∂‚ÄùAsk Your PDF‚ÄùÊù•ÊÄªÁªìPDFÊ†ºÂºèÂÜÖÂÆπ„ÄÇÈúÄË¶Å‰∫ÜËß£Êõ¥Â§öÔºå<a href="https://artificialcorner.com/i-tried-84-chatgpt-plugins-these-are-the-best-3b3be6b1cb7b">ÂèØ‰ª•Êü•ÁúãËøôÁØáÊñáÁ´†</a></p>
<h2 id="2-Scan-and-Describe-Images-with-ChatGPT"><a href="#2-Scan-and-Describe-Images-with-ChatGPT" class="headerlink" title="2. Scan and Describe Images with ChatGPT"></a>2. Scan and Describe Images with ChatGPT</h2><p>ÊàëÊúÄËøëÂèëÁé∞‰∫Ü‰∏Ä‰∏™ÂØπÊàëÈùûÂ∏∏ÊúâÁî®ÁöÑÂäüËÉΩÔºåÊàëËÆ§‰∏∫ÂàÜ‰∫´Áªô‰Ω†‰ºöÂæàÊúâÂ∏ÆÂä© ‚Äì ÈÄöËøáChatGPTÊâ´ÊèèÂõæÂÉè„ÄÇ</p>
<p>ËøôËÆ©ÊàëÊÉ≥Ëµ∑‰∫ÜÊàëÁöÑÂ≠¶ÁîüÊó∂‰ª£‰∏∫‰∫ÜÈÄªËæëÊµãËØïÂä™ÂäõÊèèËø∞ÂõæÂÉèÁöÑÂú∫ÊôØ„ÄÇÈÇ£Êó∂ÂÄôÔºåÊàëËøòÊ≤°ÊúâChatGPTÔºå‰ΩÜÁé∞Âú®ÊàëÂèØ‰ª•Áî®AIÊù•ÁÆÄÂåñËøô‰∏™ÂØπÊàëÊúâÊåëÊàòÊÄßÁöÑ‰ªªÂä°„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØ‰ªñÁöÑÂ∑•‰ΩúÂéüÁêÜ„ÄÇ</p>
<ol>
<li>Âú®ÁΩë‰∏äÊâæÂà∞ÊâÄÈúÄÁöÑÂõæÂÉè„ÄÇÂú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàëÂ∞Ü‰ΩøÁî®ËÜùÁõñÁöÑËß£ÂâñÂ≠¶ÂõæÂÉè„ÄÇ</li>
</ol>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4AktKGovcnBk9kvHasWsuw.png"></p>
<ol start="2">
<li>Âú®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊµèËßàÂô®Ê†áÁ≠æ‰∏≠ÊâìÂºÄÂõæÁâáÔºåÁ°Æ‰øùËØ•Ê†áÁ≠æ‰∏≠Âè™ÊúâÂõæÁâáÊòØÂèØËßÅÁöÑ„ÄÇÁÑ∂ÂêéÂú®ÊµèËßàÂô®ÁöÑÂú∞ÂùÄÊ†è‰∏≠Â§çÂà∂URLÔºåÂ¶Ç‰∏ãÂõæÁöÑÊà™ÂõæÊâÄÁ§∫„ÄÇ</li>
</ol>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V4aseBnUcCKleu7G5Z8m0w.png"></p>
<ol start="3">
<li>ËØ∑ChatGPT‰∏∫‰Ω†ÊèèËø∞ÂõæÂÉè„ÄÇ</li>
</ol>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*86A4gAjfLh_piWUVAOoZCQ.png"></p>
<p>ÁÑ∂ÂêéÂ∞±Ê¨£ËµèChatGPTÂ∏¶Êù•ÁöÑËØ¶ÁªÜÊèèËø∞!</p>
<p>ChatGPT‰πüÊúâ‰∏∫ÂêÑÁßçÂèØËßÜÂåñÂõæÂÉèÊèê‰æõÊèèËø∞ÁöÑËÉΩÂäõ„ÄÇ‰∏ãÈù¢ÊòØ‰∏ÄÂº†Â∑¶‰∏äËßíÊúâÂõæ‰æãÁöÑÂú∞Âõæ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PYLG-ZHeF47BRqvHtu79qw.png"></p>
<p>‰∏ãÈù¢ÊòØÊàë‰ªéChatGPT‰∏≠ÂæóÂà∞ÁöÑÊèèËø∞„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b0ZqwbUi06tN3wpzElhsDQ.png"></p>
<p>‰ΩÜÊòØËøôËøò‰∏çÊòØÂÖ®ÈÉ®ÔºÅChatGPTÂèØ‰ª•ÊèèËø∞ÂæàÂ§ö‰∏úË•øÔºå‰ªéËâ∫ÊúØÂìÅÂà∞ÁßëÂ≠¶ÂõæËß£„ÄÇ</p>
<p>Ê≥®ÊÑèÔºöÊòæÁÑ∂ChatGPT(GPT-3.5)Âπ∂Ê≤°ÊúâÁúüÊ≠£Êâ´ÊèèÂõæÁâáÔºåËÄåÊòØÂà©Áî®‰∫ÜÈìæÊé•‰∏≠ÁöÑÂÖ≥ÈîÆËØçÊù•ÊèèËø∞ÂõæÁâá„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºå‰Ω†ÂèØ‰ª•Â∞ùËØï‰ΩøÁî®ChatGPTÊèí‰ª∂ Link ReaderÔºåÊ≠£Â¶Ç<a href="https://artificialcorner.com/i-tried-84-chatgpt-plugins-these-are-the-best-3b3be6b1cb7b">ËøôÁØáÊñáÁ´†</a>ÊâÄËß£ÈáäÁöÑ„ÄÇ</p>
<h2 id="3-Use-ChatGPT-as-your-private-teacher"><a href="#3-Use-ChatGPT-as-your-private-teacher" class="headerlink" title="3. Use ChatGPT as your private teacher"></a>3. Use ChatGPT as your private teacher</h2><p>ÊàëÊØèÂ§©ÈÉΩÂú®‰ΩøÁî®Ëøô‰∏™ÂäüËÉΩÔºå‰ªñÂØπÊàëÊù•ËØ¥ÊòØ‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÊ∏∏ÊàèËßÑÂàôÊîπÂèòËÄÖ„ÄÇ‰ªñ‰ΩøÊàëÁöÑÁîüÊ¥ªÂèòÂæóËΩªÊùæÔºåÂπ∂‰∏∫ÊàëËäÇÁúÅ‰∫ÜÂ§ßÈáèÁöÑÊó∂Èó¥ÂíåÈáëÈí±„ÄÇ</p>
<p>ÊàëÊääChatGPTÂèòÊàê‰∫ÜÊàëÁöÑËØ≠Ë®ÄÁßÅÊïô„ÄÇ‰ª•‰∏ãÊòØChatGPT<a href="https://artificialcorner.com/how-to-use-chatgpt-to-learn-a-language-and-practice-it-f7e7e38b1cee">Â¶Ç‰ΩïÂ∏ÆÂä©ÊàëÂ≠¶‰π†Â§ñËØ≠ÁöÑ</a>„ÄÇ</p>
<ul>
<li>Áî®ChatGPTÊ£ÄÊü•ÊàëÁöÑËØ≠Ê≥ï</li>
<li>Áî®ChatGPTÊääÂçïËØçÂíåÁü≠ËØ≠ÁøªËØëÊàê‰∏çÂêåÁöÑËØ≠Ë®Ä</li>
<li>Áî®ChatGPTÂ∏ÆÊàëÁªÉ‰π†ÂÜô‰ΩúÂíåËØ≠Ë®ÄËÉΩÂäõÔºåÂπ∂‰∏îÊàëÂèØ‰ª•ÂæóÂà∞ÂÆûÊó∂ÂèçÈ¶à</li>
</ul>
<p>‰ΩÜChatGPT‰∏çÊòØÂè™ËÉΩÂ∏ÆÂä©‰Ω†ËØ≠Ë®ÄÂ≠¶‰π†„ÄÇÂÆÉËøòÂ∏ÆÂä©ÊàëÂ≠¶‰π†ÂÖ∂‰ªñÁßëÁõÆÔºåÊØîÂ¶ÇÊï∞Â≠¶„ÄÇ</p>
<p>ÂΩìÊàëÂú®Â≠¶Ê†°ÁöÑÊó∂ÂÄôÔºåÊàëÂ≠¶‰π†Êï∞Â≠¶Êó∂ÂæàÂõ∞ÈöæÔºåÂèëÁé∞ÂÆÉÂæàÈöæÁêÜËß£ÔºåÂêåÊó∂‰∏çÂπ∏ÁöÑÊòØÔºåÊàëÂ≠¶Ê†°ÁöÑËÄÅÂ∏àÂπ∂Ê≤°ÊúâÂæàÂ•ΩÁöÑÂ∏ÆÊàëËß£ÈáäÔºåÂõ†Ê≠§ÊàëÊ≤°ÊúâÂèñÂæó‰ªÄ‰πàËøõÂ±ï„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂ§ö‰∫è‰∫ÜChatGPTÔºåÊàëÁé∞Âú®ÂèØ‰ª•Âú®‰ªª‰ΩïÊï∞Â≠¶È¢ò‰∏äÂæóÂà∞ÊàëÊÉ≥Ë¶ÅÁöÑËß£Èáä„ÄÇÊàëÂèØ‰ª•Ë¶ÅÊ±ÇChatGPTÈÄêÊ≠•ÁöÑËØ¥ÊòéÂ¶Ç‰ΩïËß£ÂÜ≥‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÂÆÉÁîöËá≥ÂèØ‰ª•Êèê‰æõÂ§öÁßçËß£È¢òÊñπÊ°à„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JlrY_S5I_x6k2ppDWTTdzQ.png"></p>
<p>Ê≠§Â§ñÔºåÊàëËøòÂèØ‰ª•ËÆ©ChatGPT‰∏∫ÊàëËß£ÈáäÂ¶Ç‰ΩïÂæóÂà∞Ê≠£Á°ÆÁöÑÁ≠îÊ°à„ÄÇËøôÂæàÁ•ûÂ•áÔºå‰Ω†‰∏çËßâÂæóÂêóÔºü</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WuVx0ikJM0ZnfpSPUSSHFA.png"></p>
<p>‰Ω†ÂèØ‰ª•ÂØπ‰ªª‰ΩïÊÑüÂÖ¥Ë∂£ÁöÑÂ≠¶ÁßëËøõË°åÊèêÈóÆÔºåËÄå‰∏îËß£ÈáäÊòØÊòì‰∫éÁêÜËß£ÁöÑËØ≠Ë®ÄÁºñÂÜôÁöÑÔºå‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•ÁêÜËß£</p>
<h2 id="4-Ask-ChatGPT-for-advice"><a href="#4-Ask-ChatGPT-for-advice" class="headerlink" title="4. Ask ChatGPT for advice"></a>4. Ask ChatGPT for advice</h2><p>Ëøô‰∏™ÂäüËÉΩ‰∏ç‰ºöÂèñ‰ª£‰Ω†ÁöÑÊúãÂèãÊàñÂøÉÁêÜÂåªÁîüÔºå‰ΩÜÂÆÉÂèØ‰ª•Â∏ÆÂä©‰Ω†ÊâæÂà∞ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÂäûÊ≥ï„ÄÇ</p>
<h3 id="Life-advice"><a href="#Life-advice" class="headerlink" title="Life advice"></a>Life advice</h3><p><a href="https://dianatheathlete.medium.com/the-athletes-15-minute-night-routine-to-maximize-performance-in-your-mornings-cc2cc60630fd">Êó©‰∏äÊó©Ëµ∑ÂØπÊàëÊù•ËØ¥‰∏ÄÁõ¥ÊòØ‰∏Ä‰∏™ÊåëÊàò</a>ÔºåÂç≥‰ΩøÊàëÁù°ÂæóÂæàÊó©ÔºåÊâÄ‰ª•ÊàëÂÜ≥ÂÆöÂêëChatGPTËØ¢ÈóÆ‰∏Ä‰∫õËøôÊñπÈù¢ÁöÑÊäÄÂ∑ß</p>
<p>‰ª•‰∏ãÊòØÂÆÉÁöÑÂª∫ËÆÆ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6NXBMBAKdRSLXu9aK4M0VQ.png"></p>
<p>Á¨¨4ÁÇπÂíåÁ¨¨6ÁÇπÂØπÊàëÂæàÊúâÂ∏ÆÂä©„ÄÇ</p>
<p>‰Ω†ÂèØ‰ª•ÂØπ‰Ω†ÁîüÊ¥ªÁöÑ‰∏çÂêåÊñπÈù¢ËøõË°åËØ¢ÈóÆ„ÄÇÊØîÂ¶Ç‰Ω†Âú®Â∑•‰Ωú‰∏≠ÈÅáÂà∞‰∏Ä‰∏™ÊÄÅÂ∫¶ÂÇ≤ÊÖ¢Êó†Á§ºÁöÑÂêå‰∫ã„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ª•‰∏ãÊòØChatGPTÁöÑÂª∫ËÆÆ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNpBJ8-sI06MIHCHn7kO8A.png"></p>
<p>ËøôÁ±ª‰ºº‰∫é‰∏Ä‰∏™ÊúãÂèãÂØπ‰Ω†ÁöÑÊé®Ëçê„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåÂÆÉ‰∏çËÉΩÂèñ‰ª£ÂÖ®Èù¢ÁöÑÊ≤üÈÄö„ÄÅ‰∏éÊÉÖÂ¢ÉÁõ∏ÂÖ≥ÁöÑÁ¨ëËØùÊàñÂéüÂàõÁöÑÂª∫ËÆÆÔºå‰ΩÜÂΩì‰Ω†ÈúÄË¶ÅËøÖÈÄüÂÅöÂá∫ÂÜ≥Á≠ñÊàñÊÉ≥Ë¶ÅËÄÉËôëÂ§ö‰∏™Ëß£ÂÜ≥ÈóÆÈ¢òÁöÑÈÄâÈ°πÊó∂ÔºåÂÆÉÂèØ‰ª•ÈùûÂ∏∏ÊúâÁî®„ÄÇ</p>
<p>‰Ω†Êèê‰æõÁöÑÁªÜËäÇË∂äÂ§öÔºåÂæóÂà∞ÁöÑÁ≠îÊ°àÂ∞±Êõ¥Â•Ω„ÄÇ</p>
<h3 id="Health-Advice"><a href="#Health-Advice" class="headerlink" title="Health Advice"></a>Health Advice</h3><p>ËøáÂéªÔºåÊàëÈúÄË¶ÅÂú®‰∫íËÅîÁΩë‰∏äÊêúÁ¥¢ËÆ°ÁÆóÊàëÁöÑÂç°Ë∑ØÈáåÈúÄÊ±ÇÔºåÊàñËÄÖÂÆåÂÖ®‰æùÈù†Ëê•ÂÖªÂ∏àÂà∂ÂÆöÂÖ∑‰ΩìÁöÑËÜ≥È£üËÆ°ÂàíÔºõÁÑ∂ËÄåÔºåÁé∞Âú®ChatGPTÂèØ‰ª•Â∏ÆÊàëÊèê‰æõËøô‰∫õ‰ø°ÊÅØÔºåÊù•‰∏∫ÊàëËäÇÁúÅ‰∏Ä‰∫õÊó∂Èó¥ÂíåÈáëÈí±„ÄÇ</p>
<p>ÊàëÂèØ‰ª•Ë¶ÅÊ±ÇChatGPTÊ†πÊçÆÊàëÁöÑ‰ΩìÈáç„ÄÅË∫´È´ò„ÄÅÊÄßÂà´„ÄÅË∫´‰ΩìÊ¥ªÂä®ÂíåÊúüÊúõÁöÑÂáèËÇ•ÁõÆÊ†áÊù•ËÆ°ÁÆóÊàëÁöÑÂç°Ë∑ØÈáåÈúÄÊ±Ç„ÄÇ</p>
<blockquote>
<p>Prompt: ‚ÄúCalculate my calorie requirement. I am a girl, 24 years old, my weight is 55kg and I am 166cm, I do workouts 3 times a week and would like to lose 3kg‚Äù.</p>
</blockquote>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vbk0z6IoPJYe6NArzQNo6w.png"></p>
<p>Ëøô‰∏™Á≠îÊ°àÁõ∏ÂΩìÊ£íÔºåÂõ†‰∏∫ÊàëÂú®Â§ßÂ≠¶Â≠¶‰π†ÊúüÈó¥‰∏éÊïôÊéàËÆ®ËÆ∫Êó∂‰πüÊúâÁ±ª‰ººÁöÑÊÉ≥Ê≥ï„ÄÇÂ¶ÇÊûúË¶ÅÂáÜÁ°ÆÂú∞ËÆ°ÁÆóÂá∫‰Ω†ÊØèÂ§©ÊâÄÈúÄÁöÑÂç°Ë∑ØÈáåÔºåÈúÄË¶ÅËÄÉËôëÂá†‰∏™Âõ†Á¥†ÔºåÂ¶ÇÂπ¥ÈæÑ„ÄÅÊÄßÂà´„ÄÅ‰ΩìÈáç„ÄÅË∫´È´ò„ÄÅÊ¥ªÂä®Ê∞¥Âπ≥ÂíåÂáèËÇ•ÁõÆÊ†á„ÄÇ</p>
<p>ÂΩìÁÑ∂Ôºå‰∏∫‰∫ÜËé∑ÂæóÂ∞ΩÂèØËÉΩÂáÜÁ°ÆÁöÑÁ≠îÊ°àÔºåÂú®ËæìÂÖ•ÊâÄÈúÄÁöÑÁªÜËäÇÊó∂ÔºåÂøÖÈ°ªÊèê‰æõÂ∞ΩÂèØËÉΩÂ§öÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<p>ÊàëËøòÊääChatGPTÂèòÊàê‰∫ÜÊàëÁöÑËê•ÂÖªÂ∏à„ÄÇ</p>
<blockquote>
<p>Prompt: ‚ÄúCan you write down a menu with a daily deficit of 500‚Äì1000 calories?‚Äù</p>
</blockquote>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PLaS4RAu9cQdDHMTDnUCNw.png"></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1007-VbqdYig52kUgZlbWQ.png"></p>
<p>ÊàëÂæóÂà∞‰∫Ü‰∏Ä‰ªΩÈÄÇÂêàÊàëÊó•Â∏∏È•ÆÈ£üÁöÑÈ£üÁâ©Ê∏ÖÂçï„ÄÇ‰Ω†ÁîöËá≥ÂèØ‰ª•Ë¶ÅÊ±ÇÊèê‰æõ‰∏ÄÊï¥Âë®ÊàñÊõ¥ÈïøÊó∂Èó¥ÁöÑËèúÂçïÔºåÂëäËØâChatGPT‰Ω†ÂñúÊ¨¢Êàñ‰∏çÂñúÊ¨¢ÂêÉ‰ªÄ‰πà„ÄÇËøôË∂ÖÁ∫ßÁÆÄÂçï!</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KJ9Al1D6DOOVt4yfoAPzwQ.png"></p>
<p>*ÂÖçË¥£Â£∞ÊòéÔºö‰Ω†‰∏çËÉΩ100%‰æùËµñChatGPTÁöÑÂõûÂ§çÔºåËÄåÊòØË¶ÅÊääÂÆÉ‰Ωú‰∏∫‰∏Ä‰∏™Âä©ÊâãÔºå‰∏çÊòØ‰Ωú‰∏∫ÂÅ•Â∫∑Âª∫ËÆÆÁöÑÊõø‰ª£ÂìÅ„ÄÇËøôÁØáÊñáÁ´†‰ªÖ‰æõÂèÇËÄÉÔºå‰∏çÂ∫îËßÜ‰∏∫ÂÅ•Â∫∑Âª∫ËÆÆ„ÄÇ</p>
<h2 id="Artificial-Corner‚Äôs-Free-ChatGPT-Cheat-Sheet"><a href="#Artificial-Corner‚Äôs-Free-ChatGPT-Cheat-Sheet" class="headerlink" title="Artificial Corner‚Äôs Free ChatGPT Cheat Sheet"></a>Artificial Corner‚Äôs Free ChatGPT Cheat Sheet</h2><p>We‚Äôre offering a free cheat sheet to our readers. <a href="https://frankandrade.ck.page/08c94cf1c1">Join our newsletter with 20K+ people and get our free ChatGPT cheat sheet</a>.</p>
<p>Loved this story and want to support me as a writer? Consider signing up for Medium. If you <a href="https://dianatheathlete.medium.com/membership">sign up with my link</a>, I earn a small commission at no cost to you! And you‚Äôll get full access to all stories on Medium.</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>AI</tag>
        <tag>ChatGPT</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëMastering TypeScript: A Guide to Choosing Between ‚Äòtype‚Äô and ‚Äòinterface‚Äô</title>
    <url>/2023/05/24/%E3%80%90%E7%BF%BB%E3%80%91Mastering-TypeScript-A-Guide-to-Choosing-Between-%E2%80%98type%E2%80%99-and-%E2%80%98interface%E2%80%99/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://levelup.gitconnected.com/mastering-typescript-a-guide-to-choosing-between-type-and-interface-c31d3527693b">Mastering TypeScript: A Guide to Choosing Between ‚Äòtype‚Äô and ‚Äòinterface‚Äô</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://blog.ricofritzsche.de/">Rico Fritzsche</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>TypeScriptÁé∞Âú®Â∑≤ÁªèÊàê‰∏∫ÊçïÊçâÈîôËØØÂíåÊèêÈ´ò‰ª£Á†ÅÁ®≥ÂÆöÊÄßÁöÑÂèØÈù†Â∑•ÂÖ∑„ÄÇÁÑ∂ËÄåÔºåÂú®‰ΩøÁî®TypeScriptÊó∂ÔºåÊàëÁªèÂ∏∏ÊÉ≥Áü•ÈÅìtypeÂíåinterface‰πãÈó¥ÁöÑÂå∫Âà´Ôºå‰ª•ÂèäÂ¶Ç‰Ωï‰ΩøÁî®ÂÆÉ‰ª¨</p>
<p>Âú®ËøôÁØáÂçöÂÆ¢‰∏≠ÔºåÊàëÊÉ≥ÂàÜ‰∫´ÊàëÊâÄÁü•ÈÅìÁöÑÁöÑÂÖ≥‰∫étypeÂíåinterface‰πãÈó¥ÁöÑÂå∫Âà´Ôºå‰ª•Âèä‰ΩïÊó∂‰ΩøÁî®ÂÆÉ‰ª¨ÔºåÊàë‰ºöÊèê‰æõÊòéÁ°ÆÁöÑ‰æãÂ≠êÂíåËß£ÈáäÔºåÂ∏ÆÂä©‰Ω†Êõ¥Â•ΩÂú∞ÁêÜËß£Â¶Ç‰ΩïÂú®TypeScriptÈ°πÁõÆ‰∏≠‰ΩøÁî®Ëøô‰∏§‰∏™Âº∫Â§ßÁöÑÂ∑•ÂÖ∑„ÄÇ</p>
<p>Âú®Êú¨ÁØáÊñáÁ´†ÁªìÊùüÊó∂Ôºå‰Ω†Â∞ÜÂØπtypeÂíåinterface‰πãÈó¥ÁöÑÂå∫Âà´ÊúâÊõ¥Â•ΩÁöÑÁêÜËß£Ôºå‰ª•ÂèäÁü•ÈÅìÂ¶Ç‰ΩïÂú®TypeScript‰ª£Á†Å‰∏≠Êõ¥ÊúâÊïàÂú∞‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇÊàëÂ∏åÊúõËøôÁØáÊñáÁ´†ÂØπÂ∏åÊúõÊèêÈ´òTypeScriptÊäÄËÉΩÂíåÂ∏åÊúõÁºñÂÜôÊõ¥Â§öÂèØÈù†‰ª£Á†ÅÁöÑwebÂºÄÂèëËÄÖÊúâÊâÄÂ∏ÆÂä©„ÄÇ</p>
<h3 id="Type-vs-Interface"><a href="#Type-vs-Interface" class="headerlink" title="Type vs Interface"></a>Type vs Interface</h3><p>Âú®TypeScript‰∏≠ÔºåtypeÂíåinterfaceÈÉΩÂèØ‰ª•Áî®Êù•ÂÆö‰πâÂØπË±°Á±ªÂûãÔºå‰ΩÜ‰ªñ‰ª¨Âú®ËØ≠Ê≥ïÂíåÂäüËÉΩ‰∏äÊúâ‰∏Ä‰∫õÂå∫Âà´ÔºåÈ¶ñÂÖàinterfaceÊòØ‰∏Ä‰∏™Áî®Êù•ÂÆö‰πâÂØπË±°Á±ªÂûãÂÖ≥ÈîÆÂ≠óÔºåÂÖ∂ËØ≠Ê≥ïÊòØÔºö</p>
<pre><code class="highlight ts"><span class="keyword">interface</span> <span class="title class_">IUser</span> &#123;
  <span class="attr">name</span>: <span class="built_in">string</span>;
  <span class="attr">age</span>: <span class="built_in">number</span>;
  ...
&#125;</code></pre>

<p>Âè¶‰∏ÄÊñπÈù¢Ôºåtype‰πüÊòØ‰∏Ä‰∏™ÂÆö‰πâÂØπË±°Á±ªÂûãÁöÑÂÖ≥ÈîÆÂ≠óÔºåÂÖ∂ËØ≠Ê≥ïÊòØÔºö</p>
<pre><code class="highlight ts"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;
  <span class="attr">name</span>: <span class="built_in">string</span>;
  <span class="attr">age</span>: <span class="built_in">number</span>;
  ...
&#125;;</code></pre>

<p>ËØ≠Ê≥ïÂ∑ÆÂºÇ‰∏çÂ§ßÔºå‰ΩÜÂú®ÂäüËÉΩ‰∏äËøòÊúâÂÖ∂‰ªñÂ∑ÆÂºÇ„ÄÇ</p>
<p>interfaceÂèØ‰ª•Êâ©Â±ïÂπ∂ÂàõÂª∫ÁªßÊâøÁà∂interfaceÂ±ûÊÄßÁöÑÊñ∞Á±ªÂûãÔºö</p>
<pre><code class="highlight ts"><span class="keyword">interface</span> <span class="title class_">IUser</span> &#123;
  <span class="attr">name</span>: <span class="built_in">string</span>;
&#125;

<span class="keyword">interface</span> <span class="title class_">IMember</span> <span class="keyword">extends</span> <span class="title class_">IUser</span> &#123;
  <span class="attr">department</span>: <span class="built_in">string</span>;
&#125;</code></pre>

<p>ËøôÂÖÅËÆ∏‰Ω†ÂÆö‰πâ‰∏ÄÂ•óÂ§ö‰∏™Á±ªÂûãÂÖ±‰∫´ÁöÑÂü∫Á°ÄÂ±ûÊÄßÔºåÁÑ∂ÂêéÊ†πÊçÆÈúÄË¶Å‰∏∫Êõ¥Â§öÁöÑÁâπÂÆöÁ±ªÂûãËøõË°åÊâ©Â±ï„ÄÇËøôÂèØ‰ª•Â∏ÆÂä©‰Ω†ÈÅøÂÖç‰ª£Á†ÅÈáçÂ§çÔºå‰Ωø‰Ω†ÁöÑ‰ª£Á†ÅÊõ¥ÂÖ∑ÊúâÊ®°ÂùóÂåñÂíåÁªÑÁªá„ÄÇ</p>
<p>ËÄåtype‰∏çËÉΩ‰ª•ÂêåÊ†∑ÁöÑÊñπÂºèË¢´Êâ©Â±ïÔºå‰ΩÜÂÆÉÂèØ‰ª•Áî®Êù•ÂÆö‰πâËÅîÂêà„ÄÅ‰∫§ÂèâÂíåÂÖ∂‰ªñÂ§çÊùÇÁ±ªÂûãÔºö</p>
<pre><code class="highlight ts"><span class="keyword">type</span> <span class="title class_">Union</span> = <span class="title class_">Type1</span> | <span class="title class_">Type2</span>;

<span class="keyword">type</span> <span class="title class_">Intersection</span> = <span class="title class_">Type1</span> &amp; <span class="title class_">Type2</span>;</code></pre>

<p>Ëøô‰∫õtypeÂÖÅËÆ∏‰Ω†ÂÆö‰πâÁ±ªÂûãÊõ¥Â§çÊùÇÁöÑÂÖ≥Á≥ªÔºåÂπ∂‰∏îÂèØ‰ª•Â∏ÆÂä©‰Ω†Êõ¥ÂáÜÁ°ÆÂú∞Âª∫Á´ãÊï∞ÊçÆÊ®°Âûã„ÄÇ</p>
<h3 id="Example-‚Äî-Building-a-Messaging-App"><a href="#Example-‚Äî-Building-a-Messaging-App" class="headerlink" title="Example ‚Äî Building a Messaging App"></a>Example ‚Äî Building a Messaging App</h3><p>ÂÅáÂ¶Ç‰Ω†Ê≠£Âú®ÊûÑÂª∫‰∏Ä‰∏™Ê∂àÊÅØappÔºå‰Ω†ÊÉ≥‰∏∫‰∏ÄÊù°‰ø°ÊÅØÂÆö‰πâ‰∏Ä‰∏™Á±ªÂûãÔºåÂÆÉÂèØ‰ª•ÂåÖÂê´ÊñáÊú¨ÊàñÂõæÂÉèÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™ËÅîÂêàÁ±ªÂûãÊù•ÂÆö‰πâÔºö</p>
<pre><code class="highlight ts"><span class="keyword">type</span> <span class="title class_">Message</span> = &#123;
  <span class="attr">type</span>: <span class="string">&#x27;text&#x27;</span> | <span class="string">&#x27;image&#x27;</span>;
  <span class="attr">content</span>: <span class="built_in">string</span> | <span class="title class_">File</span>;
&#125;</code></pre>

<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®typeÊù•ÂÆö‰πâ‰∏Ä‰∏™ËÅîÂêàÁ±ªÂûãÔºåÂÆÉÂè™ËÉΩÊòØ‰∏§‰∏™Â≠óÁ¨¶‰∏≤ÂÄº‰∏≠ÁöÑ‰∏Ä‰∏™Ôºö‚Äùtext‚ÄùÊàñËÄÖ‚Äùimage‚ÄùÔºåÊàë‰ª¨Ëøò‰ΩøÁî®ËÅîÂêàÁ±ªÂûãÊù•ÂÆö‰πâcontentÂ±ûÊÄßÔºå‰ªñÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤(text messages)ÊàñËÄÖÊòØ‰∏Ä‰∏™FileÂØπË±°(image messages)„ÄÇ</p>
<p>Áé∞Âú®ÔºåÂÅáÂ¶Ç‰Ω†ÊÉ≥Âú®‰Ω†ÁöÑapp‰∏≠‰∏∫‰∏ÄÁªÑÊã•Êúâ‰∏çÂêåËßíËâ≤ÁöÑÁî®Êà∑ÂÆö‰πâ‰∏Ä‰∏™Á±ªÂûãÔºåÊØîÂ¶ÇÁÆ°ÁêÜÂëò„ÄÅÁâà‰∏ªÂíåÊôÆÈÄöÁî®Êà∑„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™‰∫§ÂèâÁ±ªÂûãÊù•ÂÆö‰πâÔºö</p>
<pre><code class="highlight ts"><span class="keyword">type</span> <span class="title class_">User</span> = &#123;
  <span class="attr">id</span>: <span class="built_in">number</span>;
  <span class="attr">name</span>: <span class="built_in">string</span>;
&#125;

<span class="keyword">type</span> <span class="title class_">Admin</span> = <span class="title class_">User</span> &amp; &#123;
  <span class="attr">role</span>: <span class="string">&#x27;admin&#x27;</span>;
  <span class="attr">permissions</span>: <span class="built_in">string</span>[];
&#125;

<span class="keyword">type</span> <span class="title class_">Moderator</span> = <span class="title class_">User</span> &amp; &#123;
  <span class="attr">role</span>: <span class="string">&#x27;moderator&#x27;</span>;
  <span class="attr">canDelete</span>: <span class="built_in">boolean</span>;
&#125;

<span class="keyword">type</span> <span class="title class_">RegularUser</span> = <span class="title class_">User</span> &amp; &#123;
  <span class="attr">role</span>: <span class="string">&#x27;user&#x27;</span>;
  <span class="attr">isPremium</span>: <span class="built_in">boolean</span>;
&#125;</code></pre>

<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Êúâ‰∏§‰∏™Â±ûÊÄßÁöÑÁî®Êà∑Á±ªÂûãÔºöidÂíåname„ÄÇÁÑ∂ÂêéÊàë‰ª¨ÂÆö‰πâ‰∫ÜÂè¶Â§ñ‰∏â‰∏™Á±ªÂûã(Admin„ÄÅModeratorÂíåRegularUser)ÔºåÂÆÉ‰ª¨‰ΩøÁî®‰∏Ä‰∏™‰∫§ÂèâÁ±ªÂûã(&amp;)Êù•Êâ©Â±ïUserÁ±ªÂûã„ÄÇËøô‰∫õÁ±ªÂûã‰∏≠ÊØè‰∏Ä‰∏™ÈÉΩÊúâ‰∏Ä‰∏™‰∏çÂêåÁöÑroleÂ±ûÊÄßÂíåÈíàÂØπÂÖ∂ËßíËâ≤ÁöÑÈ¢ùÂ§ñÂ±ûÊÄß„ÄÇ</p>
<p>‰ΩøÁî®ËÅîÂêàÁ±ªÂûãÂíå‰∫§ÂèâÁ±ªÂûãÂèØ‰ª•Â∏ÆÂä©‰Ω†Âú®TypeScript‰ª£Á†Å‰∏≠ÂÆö‰πâÊõ¥Â§çÊùÇÁöÑÁ±ªÂûãÔºåÂπ∂‰ΩøÂÖ∂Êõ¥ÂÆπÊòìÂØπÁé∞ÂÆû‰∏ñÁïåÁöÑÊï∞ÊçÆËøõË°åÂª∫Ê®°„ÄÇ</p>
<h3 id="Declaration-Merging"><a href="#Declaration-Merging" class="headerlink" title="Declaration Merging"></a>Declaration Merging</h3><p>interfaceËøòÊîØÊåÅÂ£∞ÊòéÂêàÂπ∂ÔºåÂÆÉÂÖÅËÆ∏‰Ω†ÂÆö‰πâÂ§ö‰∏™ÂêåÂêçÁöÑinterfaceÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ÁöÑÂ±ûÊÄßÂêàÂπ∂Âà∞‰∏Ä‰∏™interface‰∏≠Ôºö</p>
<pre><code class="highlight ts"><span class="keyword">interface</span> <span class="title class_">MyObject</span> &#123;
  <span class="attr">property1</span>: <span class="title class_">Type1</span>;
&#125;

<span class="keyword">interface</span> <span class="title class_">MyObject</span> &#123;
  <span class="attr">property2</span>: <span class="title class_">Type2</span>;
&#125;

<span class="keyword">const</span> <span class="attr">myObject</span>: <span class="title class_">MyObject</span> = &#123;
  <span class="attr">property1</span>: <span class="string">&#x27;value1&#x27;</span>,
  <span class="attr">property2</span>: <span class="string">&#x27;value2&#x27;</span>
&#125;;</code></pre>

<p>ÂΩì‰Ω†‰∏éÁ¨¨‰∏âÊñπÂ∫ìÊàñÁ≥ªÁªü‰∏ÄËµ∑Â∑•‰ΩúÊó∂ÔºåËøôÂæàÊúâÁî®ÔºåÂÆÉ‰ª¨ÂàÜÂà´ÂÆö‰πâ‰∫ÜÂÆÉ‰ª¨ÁöÑinterfaceÔºåÁÑ∂ÂêéÂú®ÈúÄË¶ÅÊó∂ÊääÂÆÉ‰ª¨ÂêàÂπ∂Êàê‰∏Ä‰∏™interface„ÄÇ</p>
<h3 id="Example-‚Äî-Unleashing-the-Power-of-Declaration-Merging"><a href="#Example-‚Äî-Unleashing-the-Power-of-Declaration-Merging" class="headerlink" title="Example ‚Äî Unleashing the Power of Declaration Merging"></a>Example ‚Äî Unleashing the Power of Declaration Merging</h3><p>ÂÅáÂ¶Ç‰Ω†Ê≠£Âú®ÊûÑÂª∫‰∏Ä‰∏™ÈúÄË¶ÅÁî®Êà∑ÁôªÂΩïÁöÑappÔºå‰Ω†ÊÉ≥‰∏∫ËÆ§ËØÅAPIËøîÂõûÁöÑÁî®Êà∑ÂØπË±°ÂÆö‰πâ‰∏Ä‰∏™interface„ÄÇ‰Ω†ÂèØ‰ª•ÂÉèËøôÊ†∑ÂÆö‰πâËøô‰∏™interfaceÔºö</p>
<pre><code class="highlight ts"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;
  <span class="attr">username</span>: <span class="built_in">string</span>;
  <span class="attr">email</span>: <span class="built_in">string</span>;
&#125;</code></pre>

<p>ÂêéÊù•Ôºå‰Ω†ÂèëÁé∞ËÆ§ËØÅAPI‰πü‰ºö‰∏∫ÊØè‰∏™Áî®Êà∑ËøîÂõû‰∏Ä‰∏™userIdÂ±ûÊÄßÔºå‰ΩÜ‰Ω†‰∏çÊÉ≥‰øÆÊîπÂéüÊù•ÁöÑUser interface„ÄÇÁõ∏ÂèçÔºå‰Ω†ÂèØ‰ª•ÂÆö‰πâ‰∏Ä‰∏™ÂêåÂêçÁöÑÊñ∞interfaceÔºåÂÆÉÂ∞ÜËá™Âä®Â∞ÜÂ±ûÊÄß‰∏éÂéüÊù•ÁöÑUser interfaceÂêàÂπ∂Ôºö</p>
<pre><code class="highlight ts"><span class="keyword">interface</span> <span class="title class_">User</span> &#123;
  <span class="attr">userId</span>: <span class="built_in">number</span>;
&#125;

<span class="comment">// Now the User interface has three properties: username, email, and userId</span>
<span class="keyword">const</span> <span class="attr">user</span>: <span class="title class_">User</span> = &#123;
  <span class="attr">username</span>: <span class="string">&#x27;john.doe&#x27;</span>,
  <span class="attr">email</span>: <span class="string">&#x27;john.doe@example.com&#x27;</span>,
  <span class="attr">userId</span>: <span class="number">123</span>
&#125;;</code></pre>

<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÂÆö‰πâ‰∫ÜUser interfaceÔºå Êúâ‰∏§‰∏™Â±ûÊÄßÔºöusernameÂíåemailÔºåÁÑ∂ÂêéÔºåÊàë‰ª¨ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑUser interfaceÔºåÂπ∂Â∏¶ÊúâuserIdÂ±ûÊÄß„ÄÇÂΩìÊàë‰ª¨‰ΩøÁî®User interfaceÊù•ÂÆö‰πâÊàë‰ª¨ÁöÑÁî®Êà∑ÂØπË±°Êó∂Ôºå‰∏§‰∏™Êé•Âè£ÁöÑÂ±ûÊÄß‰ºöË¢´ÂêàÂπ∂Âú®‰∏ÄËµ∑ÔºåÂàõÂª∫‰∏Ä‰∏™ÂÖ∑Êúâ‰∏â‰∏™Â±ûÊÄßÁöÑÂØπË±°ÔºöusernameÔºåemailÂíåuserId„ÄÇ</p>
<p>Â£∞ÊòéÂêàÂπ∂ÊòØinterface‰∏Ä‰∏™ÂæàÊúâÁî®ÁöÑÂäüËÉΩÔºåÂÆÉÂÖÅËÆ∏‰Ω†Âú®‰∏ç‰øÆÊîπÂéüÊúâÂÆö‰πâÁöÑÊÉÖÂÜµ‰∏ãÊâ©Â±ïÁé∞Êúâinterface„ÄÇ</p>
<h3 id="Let‚Äôs-talk-about-the-Open-x2F-Closed-Principle"><a href="#Let‚Äôs-talk-about-the-Open-x2F-Closed-Principle" class="headerlink" title="Let‚Äôs talk about the Open&#x2F;Closed Principle"></a>Let‚Äôs talk about the Open&#x2F;Closed Principle</h3><p>ÂºÄÈó≠ÂéüÂàô(OCP)ÔºåÊòØÈù¢ÂêëÂØπË±°ÁºñÁ®ãËÆæËÆ°SOLIDÂéüÂàô‰πã‰∏Ä„ÄÇÂÆÉÂ∞±ÂÉèËΩØ‰ª∂ÂºÄÂèëÁöÑÂú£ÊùØ„ÄÇÊØè‰∏™‰∫∫ÈÉΩÂú®Ë∞àËÆ∫ÂÆÉÔºå‰ΩÜÊòØ‰Ω†‰ª¨ÁúüÁöÑ‰∫ÜËß£ÂÆÉÂêóÔºüËøòÂè™ÊòØÂÅáË£Ö‰∫ÜËß£Ôºü</p>
<p>ÊàëÂ∏åÊúõ‰Ω†ËÆ∞‰ΩèÔºöSOLIDÊòØ‰∏Ä‰∏™Áº©ÂÜôÔºå‰ª£Ë°®‰∫ÜRobert C.MartinÔºà‰πüË¢´Áß∞‰∏∫BobÂèîÂèîÔºâÊèêÂá∫ÁöÑÈù¢ÂêëÂØπË±°ÁºñÁ®ãËÆæËÆ°ÁöÑ‰∫î‰∏™ÂéüÂàô„ÄÇËøô‰∫õÂéüÂàô‰ΩøËΩØ‰ª∂ÂºÄÂèëÂÖ∑ÊúâÂèØ‰º∏Áº©„ÄÅÂèØÁª¥Êä§„ÄÅÂèØÊâ©Â±ï</p>
<p>‰πãÂâçÁöÑ‰æãÂ≠êÂæàÂ•ΩÁöÑËØ¥Êòé‰∫ÜÂºÄÈó≠ÂéüÂàôÔºåÂõ†‰∏∫ÂÆÉÂ±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÂú®‰∏ç‰øÆÊîπÂéüÊúâinterfaceÁöÑÊÉÖÂÜµ‰∏ãÊâ©Â±ïÂÆÉ„ÄÇÈÄöËøáÂÆö‰πâ‰∏Ä‰∏™Â∏¶ÊúâuserIdÂ±ûÊÄßÁöÑÊñ∞interfaceÔºåËÄå‰∏çÊòØ‰øÆÊîπÂéüÊù•ÁöÑUser interfaceÔºåÂú®‰øùÊåÅÂéüÊù•ÁöÑÊé•Âè£‰∏çË¢´‰øÆÊîπÁöÑÂêåÊó∂ËøòËÉΩÊâ©Â±ïÂÖ∂ÂäüËÉΩ„ÄÇËøôÁßçÊñπÂºèÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºå‰Ωø‰Ω†ÁöÑ‰ª£Á†ÅÊõ¥ÂÆπÊòìÁª¥Êä§ÂíåÊâ©Â±ïÔºåËÄå‰∏ç‰ºöÂºïÂÖ•ÊÑèÊÉ≥‰∏çÂà∞ÁöÑÈóÆÈ¢òÂíåÁ†¥ÂùèÂºèÂèòÂåñ„ÄÇ</p>
<p>‰ΩÜÊòØÁ≠âÁ≠âÔºåËøòÊúâÊõ¥Â§öÔºÅÂ¶ÇÊûú‰Ω†‰ΩøÁî®TypeScriptÊàñÂÖ∂‰ªñÂÖ∑ÊúâÂ£∞ÊòéÂêàÂπ∂ÂäüËÉΩÁöÑËØ≠Ë®ÄÔºå‰Ω†ÂèØ‰ª•Âè™Áî®‰∏§‰∏™Â±ûÊÄßÊù•ÂÆö‰πâuser interfaceÔºåÁÑ∂ÂêéÁî®userIdÂ±ûÊÄßÂÆö‰πâ‰∏Ä‰∏™Êñ∞ÁöÑuser interfaceÔºå‰ΩÜ‰Ω†Áî®User interfaceÂÆö‰πâÁî®Êà∑ÂØπË±°Êó∂Ôºå‰∏§‰∏™Êé•Âè£ÁöÑÂ±ûÊÄß‰ºöÁ•ûÂ•áÂú∞ÂêàÂπ∂Âú®‰∏ÄËµ∑ÔºåÂàõÂª∫‰∏Ä‰∏™Êúâ‰∏â‰∏™Â±ûÊÄßÁöÑÂØπË±°„ÄÇËøôÂ∞±ÂÉèÈ≠îÊúØ‰∏ÄÊ†∑ÔºåÂè™‰∏çËøáÊ≤°ÊúâÂÖîÂ≠êÔºåÊõ¥Â§öÁöÑÊòØTypeScript„ÄÇ</p>
<p>‰ΩÜÊòØÂÆûÈôÖ‰∏≠ÔºåË∞ÅÊúâÊó∂Èó¥ÂéªÁ†îÁ©∂OCPËøô‰∫õÂ∫üËØùÔºüÊúâÊó∂‰Ω†Âè™ÊòØÈúÄË¶ÅÂÆåÊàê‰∏Ä‰∫õÂäüËÉΩÔºåËÄå‰øÆÊîπÁé∞Êúâ‰ª£Á†ÅÊòØÊúÄÂø´ÁöÑÂäûÊ≥ï„ÄÇË∞Å‰ºöÂÖ≥ÂøÉOCPÂë¢ÔºüÂÆÉÂè™ÊòØËΩØ‰ª∂ÂºÄÂèëËÄÖÂñúÊ¨¢ÊäõÂá∫ÁöÑ‰∏Ä‰∏™Ëä±Âì®ÁöÑÂéüÂàôÔºåËÆ©Ëá™Â∑±Âê¨Ëµ∑Êù•ÂæàËÅ™Êòé„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåÂ¶ÇÊûú‰Ω†ÂøÖÈ°ªÂÅöÁöÑËØùÔºåÂ∞±ÂéªËøùÂèçOCPÂêß„ÄÇÂè™Ë¶ÅÁ°Æ‰øù‰Ω†Êúâ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÁêÜÁî±ËøôÊ†∑ÂÅö„ÄÇÂ¶ÇÊûúÊúâ‰∫∫ÈóÆËµ∑ÔºåÂ∞±ÂëäËØâ‰ªñ‰ª¨‰Ω†ÊòØÂú®ÈÅµÂæ™KCP(‰øùÊåÅÊª°Ë∂≥ÂéüÂàô)„ÄÇËøôÊòØ‰∏Ä‰∏™Êàë‰ª¨ÈÉΩÊîØÊåÅÁöÑÂéüÂàô„ÄÇ</p>
<h3 id="React-Component-Props"><a href="#React-Component-Props" class="headerlink" title="React Component Props"></a>React Component Props</h3><p>ÊâÄ‰ª•‰Ω†ÊòØÊÉ≥Áî®typeËøòÊòØinterfaceÊù•ÂÆö‰πâReact component propsÔºüËÆ©ÊàëÂëäËØâ‰Ω†Ôºå‰Ω†Êù•ÂØπÂú∞Êñπ‰∫ÜÔºåÊàëÁöÑÊÑèÊÄùÊòØÔºåÂΩì‰Ω†ÂèØ‰ª•Â∞ÜÊó∂Èó¥Ëä±Âú®Êé¢ËÆ®TypeScriptËØ≠Ê≥ïÁöÑÁªÜÂæÆÂ∑ÆÂà´Êó∂ÔºåË∞ÅËøòÈúÄË¶ÅÁîüÊ¥ªÂë¢Ôºü‰Ω†Â∞±ÂÉèÁé∞‰ª£ÁöÑËãèÊ†ºÊãâÂ∫ïÔºåÊèêÁùÄÈáçË¶ÅÁöÑÈóÆÈ¢òÔºåÊØîÂ¶Ç‚ÄúÊàëÂ∫îËØ•ÊòØÁî®typeËøòÊòØinterfaceÔºü‚ÄùËÄåÊàë‰ª¨Ëøô‰∫õÂá°‰∫∫ÂàôÂøôÁùÄÂú®Tinder‰∏äÂ∑¶ÊªëÂè≥Êªë„ÄÇÊâÄ‰ª•ÔºåËØ∑Á≥ªÂ•ΩÂÆâÂÖ®Â∏¶ÔºåÊàëÁöÑÊúãÂèãÔºåÂõ†‰∏∫Êàë‰ª¨Âç≥Â∞ÜÊ∑±ÂÖ•Êé¢Á¥¢React Components Á±ªÂûãÂÆö‰πâÁöÑÁ≤æÂΩ©‰∏ñÁïå</p>
<p>Âú®ReactÁªÑ‰ª∂‰∏ä‰ΩøÁî®typeËøòÊòØinterfaceÊù•ÂÆö‰πâpropsÂú®ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÊòØ‰∏Ä‰∏™‰∏™‰∫∫ÂÅèÂ•ΩÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫Ëøô‰∏§‰∏™ÈÄâÈ°πÊèê‰æõ‰∫ÜÁõ∏‰ººÁöÑÂäüËÉΩ„ÄÇÁÑ∂ËÄåÔºåÂú®ÈÄâÊã©ÂÆÉ‰ª¨ÁöÑÊó∂ÂÄôÔºåÊúâ‰∏Ä‰∫õÂå∫Âà´ÈúÄË¶ÅËÄÉËôë„ÄÇ</p>
<p>È¶ñÂÖàinterfaceÊòØReactÁªÑ‰ª∂‰∏≠ÂÆö‰πâpropsÁöÑ‰∏ÄÁßçÂ∏∏Áî®ÊñπÂºè„ÄÇÂõ†‰∏∫interfaceÂÖÅËÆ∏‰Ω†Êâ©Â±ïÂíåÈáçÁî®Êù•ÂÆö‰πâpropsÂØπË±°„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™Âü∫Êú¨props interfaceÔºåÁÑ∂ÂêéÂú®ÊØè‰∏™ÂçïÁã¨ÁöÑÁªÑ‰ª∂‰∏≠Êâ©Â±ïÂÆÉ</p>
<pre><code class="highlight ts"><span class="keyword">interface</span> <span class="title class_">Props</span> &#123;
  className?: <span class="built_in">string</span>;
  onClick?: <span class="function">() =&gt;</span> <span class="built_in">void</span>;
&#125;

<span class="keyword">interface</span> <span class="title class_">ButtonProps</span> <span class="keyword">extends</span> <span class="title class_">Props</span> &#123;
  <span class="keyword">type</span>?: <span class="string">&#x27;button&#x27;</span> | <span class="string">&#x27;submit&#x27;</span> | <span class="string">&#x27;reset&#x27;</span>;
&#125;

<span class="keyword">function</span> <span class="title function_">Button</span>(<span class="params">&#123; className, onClick, <span class="keyword">type</span> &#125;: ButtonProps</span>) &#123;
  <span class="comment">// render button with props</span>
&#125;</code></pre>

<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™ÂåÖÂê´classNameÂíåonClickÂ±ûÊÄßÁöÑinterface„ÄÇÁÑ∂ÂêéÊàë‰ª¨Êâ©Â±ïËøô‰∏™interfaceÔºåÂàõÂª∫‰∫Ü‰∏Ä‰∏™ButtonProps interfaceÔºåÂ¢ûÂä†‰∫Ü‰∏Ä‰∏™ÂèØÈÄâÁöÑtype prop„ÄÇÁÑ∂ÂêéÁî®Ëøô‰∏™interfaceÊù•ÂÆö‰πâButtonÁªÑ‰ª∂ÁöÑprops„ÄÇ</p>
<p>Âè¶‰∏ÄÊñπÈù¢ÔºåÂΩì‰Ω†ÈúÄË¶ÅÂÆö‰πâÊõ¥Â§çÊùÇÁöÑÁ±ªÂûãÊó∂ÔºåÊØîÂ¶ÇËÅîÂêàÊàñËÄÖ‰∫§ÂèâÁ±ªÂûãÊó∂ÔºåtypeÂ∞±ÂæàÊúâÁî®„ÄÇÊØîÂ¶ÇÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®typeÊù•ÂÆö‰πâ‰∏Ä‰∏™size optionsÔºå‰ª£Ë°®‰∏Ä‰∏™ÁªÑ‰ª∂ÁöÑ‰∏çÂêåsizeÈÄâÈ°π„ÄÇ</p>
<pre><code class="highlight ts"><span class="keyword">type</span> <span class="title class_">Size</span> = <span class="string">&#x27;small&#x27;</span> | <span class="string">&#x27;medium&#x27;</span> | <span class="string">&#x27;large&#x27;</span>;

<span class="keyword">interface</span> <span class="title class_">Props</span> &#123;
  <span class="attr">size</span>: <span class="title class_">Size</span>;
&#125;

<span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params">&#123; size &#125;: Props</span>) &#123;
  <span class="comment">// render component with props</span>
&#125;</code></pre>

<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®typeÂÆö‰πâ‰∫Ü‰∏Ä‰∏™sizeÁ±ªÂûãÔºå‰ª£Ë°®ÁªÑ‰ª∂ÁöÑ‰∏çÂêåÂ∞∫ÂØ∏„ÄÇÁÑ∂ÂêéÔºåÊàë‰ª¨Áî®props interfaceÊù•ÂÆö‰πâsize propÔºåË¶ÅÊ±ÇÊòØÂøÖÈ°ªÁöÑÂπ∂‰∏îÊòØÂ∞∫ÂØ∏Á±ªÂûã‰∏≠ÁöÑ‰∏Ä‰∏™„ÄÇ</p>
<p>ÈÄöÂ∏∏Ôºå‰ΩøÁî®interfaceÊòØÂÆö‰πâÁÆÄÂçïpropsÁöÑÂ•ΩÈÄâÊã©ÔºåÂèØ‰ª•Êâ©Â±ïÊàñÈáçÂ§ç‰ΩøÁî®ÔºåËÄå‰ΩøÁî®typeÊòØÂÆö‰πâÂ§çÊùÇÁ±ªÂûãÁöÑÂ•ΩÈÄâÊã©„ÄÇ</p>
<p>ÊÄª‰πãÔºåtypeÂíåinterfaceÈÉΩÂèØ‰ª•Áî®Êù•ReactÁªÑ‰ª∂‰∏≠ÂÆö‰πâpropsÔºå‰ΩÜÂÆÉ‰ª¨Âú®ÂäüËÉΩ‰∏äÊúâ‰∏Ä‰∫õÂå∫Âà´„ÄÇinterfaceÂèØ‰ª•Êâ©Â±ïÊàñÈáçÂ§ç‰ΩøÁî®ÔºåËÄåtypeÂØπ‰∫éÂÆö‰πâÊõ¥Â§çÊùÇÁöÑÁ±ªÂûãÂæàÊúâÁî®„ÄÇÊúÄÁªàÔºåÂú®typeÂíåinterface‰πãÈó¥ÈÄâÊã©ÊòØ‰∏Ä‰∏™‰∏™‰∫∫ÂÅèÂ•ΩÂíå‰Ω†È°πÁõÆÂÖ∑‰ΩìÈúÄÊ±ÇÁöÑÈóÆÈ¢ò„ÄÇ</p>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>‰∏ÄËà¨Êù•ËØ¥ÔºåinterfaceÁªèÂ∏∏Ë¢´Áî®Êù•ÂÆö‰πâÂØπË±°ÁöÑÁªìÊûÑÔºåÂπ∂‰Ωú‰∏∫ÂÖ∂‰ªñÁ≥ªÁªüÊàñÂ∫ìÁöÑinterface„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåtypeÁªèÂ∏∏Áî®Êù•ÂÆö‰πâÊõ¥Â§çÊùÇÁöÑÁ±ªÂûãÔºåÂ¶ÇËÅîÂêà„ÄÅ‰∫§ÂèâÊàñÊò†Â∞ÑÁ±ªÂûãÔºåÊàñËÄÖÂÆö‰πâ‰∏çËÉΩÁî®interfaceË°®ËææÁöÑÁ±ªÂûãÔºåÂ¶ÇÂáΩÊï∞Á±ªÂûãÊàñÊù°‰ª∂Á±ªÂûã„ÄÇ</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>TypeScript</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëOn Styling Web Components</title>
    <url>/2023/06/17/%E3%80%90%E7%BF%BB%E3%80%91On%20Styling%20Web%20Components/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://blog.webf.zone/on-styling-web-components-b74b8c70c492">On Styling Web Components</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@mistyHarsh">Harshal Patil</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>‰ª•Ê≠£Á°ÆÁöÑÊñπÂºèËøõË°å ‚Äî ‰ΩøÁî®CSSOM</p>
<p><img src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*nrlNnE1jCyNVqNQllN1Qzw.png"></p>
<p>Êõ¥Â•ΩÁöÑÂ∞ÅË£ÖÊÄßÂèØËÉΩÊòØ‰Ω†ÂºÄÂßã‰ΩøÁî®Web ComponentsÁöÑ‰∏ªË¶ÅÂéüÂõ†„ÄÇÁâπÂà´ÊòØÔºåShadowDOMÊòØÂÆûÁé∞ÁúüÊ≠£Â∞ÅË£ÖÊÄßÁöÑÊú∫Âà∂„ÄÇÂ§öÂπ¥Êù•ÔºåWebÁ§æÂå∫ÂèëÊòé‰∫Ü‰∏Ä‰∫õÊñπÊ°àÊù•‰øÆÂ§çÂíåÊîπÂñÑCSSÂíåJSÁöÑÂÖ®Â±ÄÁâπÊÄßÔºåËøô‰∫õËß£ÂÜ≥ÊñπÊ°àËôΩËµ∑‰ΩúÁî®‰∫Ü‰ΩÜÂπ∂‰∏çÂÆåÁæé„ÄÇÁõ¥Âà∞Êúâ‰∫ÜShadow DOMÔºåÊàë‰ª¨ÊâçÁúüÊ≠£ÂÆûÁé∞‰∫ÜCSSÁöÑÂÆåÁæé‰ΩúÁî®Âüü„ÄÇ</p>
<p>Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨‰ºöÊé¢Á¥¢Â¶Ç‰ΩïÂ∞ÜÊ†∑ÂºèÂ∫îÁî®Âà∞Web Components‰∏äÔºåÂπ∂Â∞ùËØïÊâæÂà∞ÊúÄÂêàÈÄÇÁöÑÊñπÊ≥ï„ÄÇÊ≠§Â§ñÔºåÊàë‰ª¨ËøòÂ∞ÜÂ∞ùËØïÂ∞ÜÊàë‰ª¨ÁöÑËß£ÂÜ≥ÊñπÊ°àÂíåÂΩìÂâçÁöÑÊûÑÂª∫Â∑•ÂÖ∑Áõ∏ÁªìÂêà„ÄÇ</p>
<h2 id="The-naive-way-‚Äî-Plain-lt-style-gt-tag"><a href="#The-naive-way-‚Äî-Plain-lt-style-gt-tag" class="headerlink" title="The naive way ‚Äî Plain &lt;style&gt; tag"></a>The naive way ‚Äî Plain <code>&lt;style&gt;</code> tag</h2><p>Âú®‰ΩøÁî®Shadow DOMÊó∂Ôºå‰∏∫‰∫Ü‰Ωø style sheet ÂèëÊå•‰ΩúÁî®ÔºåÁõÆÂâçÊòØË¶ÅÂú®ÊØè‰∏™shadow root‰∏≠‰ΩøÁî®<code>&lt;style&gt;</code> ÂÖÉÁ¥†ÔºåÂú®Â§ßÂ§öÊï∞ÊñáÁ´†‰∏≠ÔºåÈÉΩ‰ºöÂæàË°®Èù¢ÁöÑËØ¥Âá∫Ëøô‰∏™ÊñπÊ°à</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">FancyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">HTMLElement</span> &#123;

  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;
    <span class="variable language_">super</span>();

    <span class="keyword">const</span> shadowRoot = <span class="variable language_">this</span>.<span class="title function_">attachShadow</span>(&#123; <span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span> &#125;);

    shadowRoot.<span class="property">innerHTML</span> = <span class="string">`</span>
<span class="string">      &lt;!-- Styles are scoped --&gt;</span>
<span class="string">      &lt;style&gt;</span>
<span class="string">        p &#123; color: red; &#125;</span>
<span class="string">      &lt;/style&gt;</span>
<span class="string">      &lt;div&gt;</span>
<span class="string">        &lt;p&gt;Hello World&lt;/p&gt;</span>
<span class="string">      &lt;/div&gt;</span>
<span class="string">    `</span>;
  &#125;
&#125;

customElements.<span class="title function_">define</span>(<span class="string">&#x27;fancy-comp&#x27;</span>, <span class="title class_">FacyComponent</span>);</code></pre>

<p>Ëøô‰∏™Ëß£ÂÜ≥ÂäûÊ≥ïÁÆÄÂçïÁõ¥Êé•ÔºåÁÑ∂ËÄåÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºö</p>
<blockquote>
<p>ÂØπ‰∫éÈ°µÈù¢‰∏≠Ê∑ªÂä†ÁöÑÊØè‰∏™ÁªÑ‰ª∂ÂÆû‰æãÔºåÊµèËßàÂô®ÈÉΩ‰ºöËß£ÊûêÂÆÉÁöÑÊ†∑ÂºèË°®ËßÑÂàô„ÄÇ</p>
</blockquote>
<p>ËøôÂØπÊÄßËÉΩ‰ºö‰∫ßÁîüÂæàÂ§ßÁöÑÂΩ±ÂìçÔºåÊØîÂ¶ÇÊó∂Èó¥Â¢ûÂä†ÂíåÂÜÖÂ≠òÂ¢ûÂä†„ÄÇÊó∂Èó¥‰ºöÂ¢ûÂä†ÊòØÂõ†‰∏∫ÊµèËßàÂô®ÈúÄË¶ÅËß£ÊûêÊõ¥Â§öÁöÑÂéüÂßãÂ≠óÁ¨¶‰∏≤ÔºåÂÜÖÂ≠òÊàêÊú¨Â¢ûÂä†ÊòØÂõ†‰∏∫ÊØè‰∏™ÁªÑ‰ª∂ÈÉΩ‰ºöÂ≠òÂÇ®Ê†∑ÂºèËßÑÂàô„ÄÇÊµèËßàÂô®Ê≤°ÊúâÂäûÊ≥ïÁü•ÈÅìÂêå‰∏Ä‰∏™ÁªÑ‰ª∂ÁöÑ‰∏§‰∏™ÂÆû‰æãÊòØÂê¶ÂÖ±‰∫´Áõ∏ÂêåÁöÑÊ†∑Âºè„ÄÇ</p>
<blockquote>
<p>Âéü‰ΩúËÄÖÊõ¥Êñ∞ÔºöEric BidelmanÂú®ËØÑËÆ∫‰∏≠ÊåáÂá∫ÔºåÊÄßËÉΩÊñπÈù¢‰∏ç‰∏ÄÂÆö‰ºöÂΩ±Âìç„ÄÇÊµèËßàÂô®ÂèØËÉΩÂú®ÂÜÖÈÉ®ËøõË°å‰ºòÂåñÔºåËøôÊ†∑ÂÆÉÂ∞±‰∏ç‰ºöÂú®ÊØèÊ¨°ÂàõÂª∫ÂÆû‰æãÊó∂Ëß£ÊûêÊ†∑ÂºèÊ†áÁ≠æ„ÄÇ‰∫ãÂÆû‰∏äÔºåBlinkÔºàChrome„ÄÅOperaÁ≠âÔºâÂºïÊìéÂ∑≤ÁªèÂØπÊ≠§ËøõË°å‰∫Ü‰ºòÂåñ</p>
</blockquote>
<h2 id="Can-we-do-something-better"><a href="#Can-we-do-something-better" class="headerlink" title="Can we do something better?"></a>Can we do something better?</h2><p>ÂÖ∂ÂÆûÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂàõÂª∫‰∏Ä‰∏™Ê†∑ÂºèËäÇÁÇπÔºåÁÑ∂ÂêéÂú®ÁªÑ‰ª∂ÁöÑÊØè‰∏™ÂÆû‰æã‰∏≠ËøõË°åÊ∑±Â∫¶ÂÖãÈöÜÔºåÊù•Èò≤Ê≠¢Ê†∑ÂºèËßÑÂàôÁöÑÈáçÊñ∞Ëß£ÊûêÔºö</p>
<pre><code class="highlight js"><span class="comment">// Create style node outside of WebComponent</span>
<span class="keyword">const</span> style = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;style&#x27;</span>);

style.<span class="property">innerHTML</span> = <span class="string">`</span>
<span class="string">  p &#123; color: blue; &#125;</span>
<span class="string">`</span>;

<span class="keyword">class</span> <span class="title class_">FancyComponent</span> <span class="keyword">extends</span> <span class="title class_ inherited__">HTMLElement</span> &#123;

  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;
    <span class="variable language_">super</span>();

    <span class="keyword">const</span> shadowRoot = <span class="variable language_">this</span>.<span class="title function_">attachShadow</span>(&#123; <span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span> &#125;);

    shadowRoot.<span class="property">innerHTML</span> = <span class="string">`</span>
<span class="string">      &lt;div&gt;</span>
<span class="string">        &lt;p&gt;Hello World&lt;/p&gt;</span>
<span class="string">      &lt;/div&gt;</span>
<span class="string">    `</span>;

    <span class="comment">// Let us try to optimize</span>
    <span class="comment">// Deep cloning of style node</span>
    <span class="keyword">const</span> clonedStyle = style.<span class="title function_">cloneNode</span>(<span class="literal">true</span>);

    shadowRoot.<span class="title function_">appendChild</span>(clonedStyle);
  &#125;
&#125;</code></pre>

<p>‰∏çËøáÔºåËøôÁßçÊñπÊ≥ïËôΩÁÑ∂ÂæàÂÆπÊòìÔºå‰ΩÜÊòØ‰ªçÁÑ∂ÊúâÈóÆÈ¢ò„ÄÇ</p>
<ul>
<li>È¶ñÂÖàÔºåÂÆÉ‰∏çËÉΩÁúüÊ≠£ÁöÑÂ∏ÆÂä©Êàë‰ª¨Âú®ÁªÑ‰ª∂ÂÆû‰æãÈó¥ÂÖ±‰∫´Ê†∑Âºè„ÄÇÊñ∞ÁöÑÊ†∑ÂºèËäÇÁÇπ‰ªçÁÑ∂‰ºöÂàõÂª∫</li>
<li>ÂÖ∂Ê¨°Ëøô‰∏™ÊñπÊ≥ï‰∏é <strong>lit-html</strong> Âíå <strong>hyperHTML</strong> Á≠âÂ£∞ÊòéÂºèËß£ÂÜ≥ÊñπÊ°à‰∏ÄËµ∑‰ΩøÁî®ÊúâÁÇπÂ∞¥Â∞¨„ÄÇ</li>
</ul>
<h2 id="Enter-the-Constructible-Stylesheets"><a href="#Enter-the-Constructible-Stylesheets" class="headerlink" title="Enter the Constructible Stylesheets"></a>Enter the Constructible Stylesheets</h2><p>È°æÂêçÊÄù‰πâÔºåÂèØÊûÑÂª∫ÁöÑÊ†∑ÂºèË°®ÂÖÅËÆ∏Âú®‰ΩøÁî®Shadow DOMÊó∂ÂàõÂª∫ÂíåÂÖ±‰∫´Ê†∑Âºè„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H5R11T84I-Fd0JBzOur2AQ.png"></p>
<pre><code class="highlight js"><span class="keyword">const</span> sheet = <span class="keyword">new</span> <span class="title class_">CSSStyleSheet</span>();

<span class="comment">// Replace all styles synchronously for this style sheet</span>
sheet.<span class="title function_">replaceSync</span>(<span class="string">&#x27;p &#123; color: green; &#125;&#x27;</span>);

<span class="keyword">class</span> <span class="title class_">FancyComponent1</span> <span class="keyword">extends</span> <span class="title class_ inherited__">HTMLElement</span> &#123;

  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;
    <span class="variable language_">super</span>();

    <span class="keyword">const</span> shadowRoot = <span class="variable language_">this</span>.<span class="title function_">attachShadow</span>(&#123; <span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span> &#125;);

    <span class="comment">// Attaching the style sheet to the Shadow DOM of this component</span>
    shadowRoot.<span class="property">adoptedStyleSheets</span> = [sheet];

    shadowRoot.<span class="property">innerHTML</span> = <span class="string">`</span>
<span class="string">      &lt;div&gt;</span>
<span class="string">        &lt;p&gt;Hello World&lt;/p&gt;</span>
<span class="string">      &lt;/div&gt;</span>
<span class="string">    `</span>;

  &#125;
&#125;

<span class="keyword">class</span> <span class="title class_">FancyComponent2</span> <span class="keyword">extends</span> <span class="title class_ inherited__">HTMLElement</span> &#123;

  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;
    <span class="variable language_">super</span>();

    <span class="keyword">const</span> shadowRoot = <span class="variable language_">this</span>.<span class="title function_">attachShadow</span>(&#123; <span class="attr">mode</span>: <span class="string">&#x27;open&#x27;</span> &#125;);

    <span class="comment">// Same style sheet can also be used by another web component</span>
    shadowRoot.<span class="property">adoptedStyleSheets</span> = [sheet];

    <span class="comment">// You can even manipulate the style sheet with plain JS manipulations</span>
    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> shadowRoot.<span class="property">adoptedStyleSheets</span> = [], <span class="number">2000</span>);

    shadowRoot.<span class="property">innerHTML</span> = <span class="string">`</span>
<span class="string">      &lt;div&gt;</span>
<span class="string">        &lt;p&gt;Hello World&lt;/p&gt;</span>
<span class="string">      &lt;/div&gt;</span>
<span class="string">    `</span>;

  &#125;
&#125;</code></pre>

<p>Èô§‰∫ÜËß£ÂÜ≥ÈáçÂ§çÊã∑Ë¥ùÁöÑÈóÆÈ¢òÔºåÂÆÉËøòÊúâ‰∏Ä‰∫õÁâπÁÇπÔºö</p>
<ul>
<li>È¶ñÂÖàÊ†∑Âºè‰∏ç‰ªÖ‰ªÖË¢´Âêå‰∏ÄÁªÑ‰ª∂ÁöÑÂÆû‰æãÂÖ±‰∫´Ôºå‰πü‰ºöË¢´Â§ö‰∏™‰∏çÂêåÁªÑ‰ª∂ÊâÄÂÖ±‰∫´</li>
<li>ÂÆÉËøòÊîØÊåÅÂ§ÑÁêÜÂºÇÊ≠•Ê†∑Âºè„ÄÇ‰æãÂ¶ÇÔºåÂú®‰Ω†ÁöÑCSS‰ª£Á†Å‰∏≠‰ΩøÁî® <code>url</code> Âíå <code>@import</code></li>
<li>ÊúÄÂêéÔºå<code>adoptedStyleSheets</code> ÊòØ‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†ÂèØ‰ª•Âú®Êàë‰ª¨‰ª•Ââç‰∏çÂèØËÉΩÂÅöÂà∞ÁöÑÊñπÂºèÊù•ÁªÑÊàêÂèØÂ§çÁî®ÁöÑÊ†∑ÂºèË°®„ÄÇÈ¶ñÂÖà‰Ω†ÂèØ‰ª•Êää‰Ω†ÁöÑCSSËßÑÂàôÂàÜÊàêÂ∞èÂùóÔºåÁÑ∂ÂêéÂè™Â∫îÁî®ÈúÄË¶ÅÁöÑÈÇ£ÈÉ®ÂàÜ„ÄÇÁîöËá≥‰Ω†ÂèØ‰ª•ÂÅö‰∏ãÈù¢ËøôÊ†∑ÁöÑ‰∫ãÊÉÖÔºö</li>
</ul>
<pre><code class="highlight js">shadowRoot.<span class="property">adoptedStyleSheets</span> = [sheet];
<span class="comment">// Remove stylesheets after two seconds</span>
<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> shadowRoot.<span class="property">adoptedStyleSheets</span> = [], <span class="number">2000</span>);</code></pre>

<h2 id="Using-with-Webpack-and-SCSS"><a href="#Using-with-Webpack-and-SCSS" class="headerlink" title="Using with Webpack and SCSS"></a>Using with Webpack and SCSS</h2><p>SCSS‰Ωú‰∏∫‰∏Ä‰∏™CSSÈ¢ÑÂ§ÑÁêÜÂô®ÔºåWebpack‰Ωú‰∏∫‰∏Ä‰∏™Ê®°ÂùóÊâìÂåÖÂíåÊûÑÂª∫Â∑•ÂÖ∑ÔºåÈÉΩÊòØÈùûÂ∏∏Â∏∏ËßÅÁöÑÈÖçÁΩÆ„ÄÇÂÖ∂‰∏≠<br> <code>CSSStyleSheet.replace()</code> Âíå <code>CSSStyleSheet.replaceSync()</code> È¢ÑÊúüÊé•Êî∂‰∏Ä‰∏™ÂéüÂßãÂ≠óÁ¨¶‰∏≤ÂΩ¢ÂºèÁöÑCSSËßÑÂàô„ÄÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑloader chainÔºåÂåÖÊã¨sass-loaderÂíåraw-loaderÔºåÂ¶Ç‰∏ãÔºö</p>
<pre><code class="highlight js"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;

  <span class="attr">entry</span>: &#123; <span class="comment">/* config */</span> &#125;,

  <span class="attr">output</span>: &#123; <span class="comment">/* config */</span> &#125;,

  <span class="attr">module</span>: &#123;
    <span class="attr">rules</span>: [
      <span class="comment">// Regular css files</span>
      &#123;
        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,
        <span class="attr">loader</span>: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>]
      &#125;,

      <span class="comment">// Transforming SCSS file into CSS string</span>
      &#123;
        <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>,
        <span class="attr">use</span>: [
          <span class="string">&#x27;raw-loader&#x27;</span>,
          &#123;
            <span class="attr">loader</span>: <span class="string">&#x27;sass-loader&#x27;</span>,
            <span class="attr">options</span>: &#123;
              <span class="attr">includePaths</span>: [path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;node_modules&#x27;</span>)]
            &#125;
          &#125;
        ]
      &#125;,
    ]
  &#125;,
  <span class="attr">plugins</span>: [],
&#125;;</code></pre>

<p>Âú®‰Ω†ÁöÑ‰ª£Á†Å‰∏≠ÂèØ‰ª•ÂØºÂÖ•SCSSÊñá‰ª∂Ôºö</p>
<pre><code class="highlight js"><span class="comment">// Read SCSS file as a raw CSS text</span>
<span class="keyword">import</span> styleText <span class="keyword">from</span> <span class="string">&#x27;./my-component.scss&#x27;</span>;

<span class="keyword">const</span> sheet = <span class="keyword">new</span> <span class="title class_">CSSStyleSheet</span>();
sheet.<span class="title function_">replaceSync</span>(styleText);</code></pre>

<p>Âú®Rollup.js‰∏≠‰πüÂèØ‰ª•ËøõË°åÁ±ª‰ººÁöÑËÆæÁΩÆ„ÄÇÊ≠§Â§ñÔºåÊù•Ëá™PolymerÂõ¢ÈòüÁöÑÊñ∞Â∫ì<strong>LitElement</strong>Â∑≤ÁªèÂú®‰ΩøÁî®ËøôÁßçÊñπÊ≥ïÔºåÂπ∂ÂÖ∑ÊúâÂõûÈÄÄÊú∫Âà∂</p>
<p>*Ê≥®ÊÑèÔºöÁõÆÂâçÂèØÊûÑÂª∫ÁöÑÊ†∑ÂºèË°®ÊòØÂú®ChromiumÁ≥ªÂàóÁöÑÊµèËßàÂô®‰∏≠ÂÆûÁé∞„ÄÇÁÑ∂ËÄåÔºåÈÄöËøáÂêàÁêÜÁöÑÊ∏êËøõÂºèÂ¢ûÂº∫Ôºå‰∏∫‰∏çÊîØÊåÅÁöÑÊµèËßàÂô®Êèê‰æõÊîØÊåÅÂ∫îËØ•ÊòØÂÆπÊòìÁöÑ„ÄÇ</p>
<h2 id="Under-the-hood-‚Äî-CSSOM"><a href="#Under-the-hood-‚Äî-CSSOM" class="headerlink" title="Under the hood ‚Äî CSSOM"></a>Under the hood ‚Äî CSSOM</h2><p>*Â¶ÇÊûú‰Ω†ÂØπÂÖ∂‰∏≠ÁªÜËäÇ‰∏çÊÑüÂÖ¥Ë∂£ÔºåÂèØ‰ª•Ë∑≥ËøáËøô‰∏ÄËäÇ„ÄÇ</p>
<p>Â¶ÇÊûúHTMLË¢´ËΩ¨Âåñ‰∏∫DOMÔºåÈÇ£‰πàCSSÂàôË¢´ËΩ¨Âåñ‰∏∫CSSOM„ÄÇËøô‰∫õÈÉΩÊòØÁã¨Á´ãÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÊúÄÁªàÁöÑÊ∏≤ÊüìÊ†ëÊòØÁî±Ëøô‰∏§‰∏™Êï∞ÊçÆÁªìÊûÑÊûÑÂª∫ÁöÑ„ÄÇ‰Ωú‰∏∫‰∏Ä‰∏™ÂâçÁ´ØÂºÄÂèëËÄÖÔºåÁêÜËß£CSSOMÁöÑÊú∫Âà∂ÂÖ∂ÂÆûÂπ∂‰∏çÈáçË¶ÅÔºåÂõ†Ê≠§ÂÆÉÊòØ‰∏Ä‰∏™‰∏çÂ§™Áü•ÂêçÁöÑÊ¶ÇÂøµ„ÄÇ</p>
<p>Á≤óÁï•Âú∞ËØ¥Ôºå‰∏Ä‰∏™<code>&lt;link type=&#39;text/css&#39; href=&#39;&#39;/&gt;</code>Ê†áÁ≠æÂØπÂ∫î‰∏Ä‰∏™CSSÊ†∑ÂºèË°®„ÄÇÂÆÉÂú®CSSOM‰∏≠Áî±CSSStyleSheetÊé•Âè£Ë°®Á§∫„ÄÇ‰∏Ä‰∏™CSSStyleSheetÁî±Â§ö‰∏™ËßÑÂàôÁªÑÊàê„ÄÇÊØè‰∏™ËßÑÂàôÁî±CSSRuleÊé•Âè£Ë°®Á§∫„ÄÇ</p>
<p>Ë¶ÅËÆøÈóÆdocument‰∏äÁöÑCSSStyleSheetÂØπË±°Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî® <code>document.styleSheets</code> Â±ûÊÄß„ÄÇÂÆûÈôÖ‰∏äÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥ÂàõÂª∫‰∏Ä‰∏™CSSStyleSheetÂØπË±°Ôºå‰Ω†ÂøÖÈ°ªÂàõÂª∫‰∏Ä‰∏™Ê†∑ÂºèÊ†áÁ≠æÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Ê∑ªÂä†Âà∞document‰∏≠Âπ∂‰ΩøÁî®sheetÂ±ûÊÄßÔºö</p>
<pre><code class="highlight js"><span class="keyword">const</span> styleNode = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;style&#x27;</span>);
<span class="comment">// It is important to add style node to the document</span>
<span class="variable language_">document</span>.<span class="property">head</span>.<span class="title function_">appendChild</span>(styleNode);
<span class="keyword">const</span> sheet = styleNode.<span class="property">sheet</span>;</code></pre>

<p>ÁÑ∂ÂêéÔºåÂèØÊûÑÂª∫ÁöÑÊ†∑ÂºèË°®ÂêØÁî®‰∫Ü‰∏§‰∏™API ‚Äî <code>CSSStyleSheet()</code>ÊûÑÈÄ†ÂáΩÊï∞Âíå<code>document.adoptedStyleSheets</code>„ÄÇ</p>
<blockquote>
<p>Êúâ‰∫ÜÂèØÊûÑÈÄ†ÁöÑÊ†∑ÂºèË°®Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®CSSStyleSheet()ÊûÑÈÄ†ÂáΩÊï∞Êù•ÂàõÂª∫Ê†∑ÂºèË°®</p>
</blockquote>
<p>Âú®Shadow RootsÂíåDocuments‰∏ä <code>adoptedStyleSheets</code> ÊòØÂèØÁî®ÁöÑ„ÄÇÂÆÉÂÖÅËÆ∏Êàë‰ª¨Â∞Ü‰∏Ä‰∏™CSSStyleSheetÂÆö‰πâÁöÑÊ†∑ÂºèÂ∫îÁî®Âà∞‰∏Ä‰∏™ÁªôÂÆöÁöÑDOMÂ≠êÊ†ë‰∏ä„ÄÇÂè¶ÈúÄË¶ÅÊ≥®ÊÑèÔºåadoptedStyleSheetsÊòØ‰∏Ä‰∏™‰∏çÂèØÂèòÁöÑÊï∞ÁªÑÔºåÂõ†Ê≠§ <code>push</code> Êàñ <code>splice</code> ‰ºö‰∏çËµ∑‰ΩúÁî®„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*xQyzox2_i0wMUZh6wJm_DA.png"></p>
<p>Â∞±CSSRuleËÄåË®ÄÔºåÊúâËÆ∏Â§öCSSRule typeÈÉΩÊâ©Â±ï‰∫ÜCSSRule interface„ÄÇ‰ª•‰∏ãÊòØMDNÊèê‰æõÁöÑ‰∏Ä‰∏™ÊâÄÊúâËßÑÂàôÁöÑÂàóË°®Ôºö</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSSRule">CSSRule MDN</a></li>
</ul>
<p>CSS Object MOdelÊòØÂæàÂ∫ûÂ§ßÁöÑÔºåËÄå‰∏î‰∏ÄÁõ¥ÈÉΩÂú®‰∏çÂÅúÁöÑÂèëÂ±ïÔºå‰Ω†ÂèØ‰ª•Âú®‰∏ãÈù¢ÊâæÂà∞ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºö</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model">CSS Object Model (CSSOM)</a></li>
</ul>
<p>Âè¶Â§ñÔºå‰∏çË¶ÅÂøòËÆ∞Êñ∞ÁöÑ CSS Typed Object ModelÊ≠£Âú®ÁßØÊûÅÂºÄÂèë‰∏≠ÔºåÂÆÉËÇØÂÆö‰ºöÂØπÂ¶Ç‰ΩïÁî®JSÁºñÂÜôCSS‰∫ßÁîüÂΩ±ÂìçÔºå‰Ω†ÂèØ‰ª•Âú®‰∏ãÈù¢ÁöÑÊñáÁ´†‰∏≠ÊâæÂà∞Êõ¥Â§öÂÖ≥‰∫éÂÆÉÁöÑÂÜÖÂÆπÔºö</p>
<ul>
<li><a href="https://developer.chrome.com/blog/cssom/">Working with the new CSS Typed Object Model</a></li>
</ul>
<h2 id="Side-notes"><a href="#Side-notes" class="headerlink" title="Side notes"></a>Side notes</h2><p>‰∏çÁÆ°‰Ω†ÊòØÂú®Shadow DOM‰∏≠Â¶Ç‰ΩïÂ§ÑÁêÜstyleÔºå‰Ω†ÈÉΩÂ∫îËØ•Áâ¢ËÆ∞‰ª•‰∏ãÂá†È°πÔºö</p>
<ul>
<li>ÊÇ®ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®<code>@import</code>ËØ≠Âè•Êù•Âú® Shadow DOM ‰∏≠‰ΩøÁî®Â§ñÈÉ®Ê†∑Âºè</li>
<li>ÊèíÊßΩÂèØ‰ª•ÈÄöËøáÂÖ®Â±ÄCSSÊàñÂÆπÂô®ÁªÑ‰ª∂ÁöÑÊ†∑ÂºèË°®ËøõË°åËÆæÁΩÆ</li>
<li>CSSËá™ÂÆö‰πâÂ±ûÊÄßÂèØ‰ª•Ë∑®Ë∂äShadow DOMËæπÁïå‰ΩøÁî®Âíå‰øÆÊîπ</li>
</ul>
<p>Âõ†Ê≠§ÔºåËøô‰∫õËá™ÂÆö‰πâÂ±ûÊÄßÊòØ‰ªéÂ§ñÈÉ®Â§ÑÁêÜ ShadowDOM Ê†∑ÂºèÁöÑÈ¶ñÈÄâ</p>
<ul>
<li>Èô§‰∫ÜËá™ÂÆö‰πâÂ±ûÊÄßÂ§ñÔºåËøòÂèØ‰ª•‰ΩøÁî®Êñ∞ÁöÑCSSÈÄâÊã©Âô®ÔºåÂ¶Ç <code>:host</code>„ÄÅ<code>:part</code>„ÄÅ<code>:theme</code>ÔºåËøõ‰∏ÄÊ≠•Êèê‰æõÊù•Ëá™Â§ñÈÉ®ÁöÑÊ†∑ÂºèÂÆöÂà∂</li>
<li>Âú®ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÔºå‰ΩøÁî®Shadow DOMËøõË°åÊ†∑ÂºèÂ∞ÅË£ÖÊòØÊõø‰ª£CSS-in-JSÊñπÊ≥ïÁöÑÂæàÂ•ΩÈÄâÊã©</li>
<li>ËôöÊãüÁªÑ‰ª∂(Ê≤°ÊúâÂÖÉÁ¥†ÁöÑÁªÑ‰ª∂ÔºåÂ¶ÇVueÁöÑ<code>&lt;router-view /&gt;</code>ÊàñReactÁöÑ<code>&lt;Route /&gt;</code>)ÊòØ‰∏çÂèØËÉΩ‰ΩøÁî®Web Components</li>
<li>Web ComponentsÈùûÂ∏∏ÈÄÇÂêàÊõø‰ª£Â≠êÁªÑ‰ª∂ÔºåÂ¶ÇËæìÂÖ•Ê°Ü„ÄÅÈù¢Êùø„ÄÅÂç°Áâá„ÄÅÈÄâÊã©Âô®Á≠â</li>
</ul>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>Web Component</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëNext.js 13</title>
    <url>/2023/09/24/%E3%80%90%E7%BF%BB%E3%80%91Next-js-13/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://nextjs.org/blog/next-13">Next.js 13</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Ê≠£Â¶ÇÊàë‰ª¨Âú® <a href="">Next.js Conf</a> ‰∏äÂÆ£Â∏ÉÁöÑÈÇ£Ê†∑ÔºåNext.js13(stable)‰∏∫ÂÆûÁé∞Êó†ÈôêÂà∂ÁöÑÂä®ÊÄÅÂäüËÉΩËÄåÂ•†ÂÆö‰∫ÜÂü∫Á°ÄÔºö</p>
<ul>
<li>app Directory(beta): Êõ¥ÁÆÄÂçïÔºåÊõ¥Âø´ÈÄüÔºåÂÆ¢Êà∑Á´Ø JS ÂÜÖÂÆπÊõ¥Â∞ë<ul>
<li>Layouts</li>
<li>React Server Components</li>
<li>Streaming</li>
</ul>
</li>
<li>Turbopack(alpha): Âü∫‰∫é Rust ÁöÑ Webpack Êõø‰ª£ÂìÅÂèØÊúÄÈ´òÊèêÂçá700ÂÄçÁöÑÈÄüÂ∫¶„ÄÇ</li>
<li>New next&#x2F;image: ‰ΩøÁî®Êú¨Âú∞ÊµèËßàÂô®ÊáíÂä†ËΩΩÔºåÈÄüÂ∫¶Êõ¥Âø´„ÄÇ</li>
<li>New @next&#x2F;font(beta): Ëá™Âä®ÊâòÁÆ°Â≠ó‰ΩìÔºåÂ∏ÉÂ±ÄÈõ∂ÂÅèÁßª„ÄÇ</li>
<li>Improved next&#x2F;link: Ëá™Âä®<code>&lt;a&gt;</code>ÈìæÊé•ÔºåÁÆÄÂåñAPI„ÄÇ</li>
</ul>
<p>Next.js Âíå page directory Â∑≤Á®≥ÂÆöÂπ∂ÂèØÁî®‰∫éÁîü‰∫ß„ÄÇËØ∑ËøêË°å</p>
<pre><code class="highlight bash">npm i next@latest react@latest react-dom@latest eslint-config-next@latest</code></pre>

<h2 id="New-app-Directory-Beta"><a href="#New-app-Directory-Beta" class="headerlink" title="New app Directory(Beta)"></a>New app Directory(Beta)</h2><p>‰ªäÂ§©ÔºåÊàë‰ª¨Â∞ÜÊîπËøõ Next.js ‰∏≠ÁöÑË∑ØÁî±ÂíåÂ∏ÉÂ±Ä‰ΩìÈ™åÔºåÂπ∂ÈÄöËøáÂºïÂÖ• app directory Âíå React ÁöÑÊú™Êù•‰øùÊåÅ‰∏ÄËá¥„ÄÇËøôÊòØÂú®‰πãÂâç‰∏∫ÂæÅÊ±ÇÁ§æÂå∫ÂèçÈ¶àËÄåÂèëÂ∏ÉÁöÑ Layouts RFC ‰πãÂêéÁöÑÂèà‰∏ÄÊ¨°ÊîπËøõ„ÄÇ</p>
<p>app directory ÁõÆÂâçÂ§Ñ‰∫é beta Èò∂ÊÆµÔºåÊàë‰ª¨Ëøò‰∏çÂª∫ËÆÆÂú®Áîü‰∫ß‰∏≠‰ΩøÁî®„ÄÇ‰Ω†ÂèØ‰ª•Âú®Nextjs.13‰∏≠‰ΩøÁî® pages directory ÂíåÊîπËøõÁöÑ next&#x2F;image Âíå next&#x2F;link ÁªÑ‰ª∂ÔºåÂπ∂Ê†πÊçÆËá™Â∑±ÁöÑËøõÂ∫¶ÈÄâÊã© app directory„ÄÇÂú®Êú™Êù•ÔºåÂ∞ÜÁªßÁª≠ÊîØÊåÅ pages directory„ÄÇ</p>
<p>app directory ÂåÖÊã¨‰ª•‰∏ãÊîØÊåÅÔºö</p>
<ul>
<li>Layouts: Âú®Ë∑ØÁî±‰πãÈó¥ËΩªÊùæÂÖ±‰∫´Áî®Êà∑ÁïåÈù¢ÔºåÂêåÊó∂‰øùÁïôÁä∂ÊÄÅÂπ∂ÈÅøÂÖçÊòÇË¥µÁöÑÈáçÊñ∞Ê∏≤Êüì„ÄÇ</li>
<li>Server Components: Â∞ÜÊúçÂä°Âô®‰ºòÂÖà‰Ωú‰∏∫Âä®ÊÄÅÂ∫îÁî®ÁöÑÈªòËÆ§ËÆæÁΩÆ„ÄÇ</li>
<li>Streaming: Âú®Ê∏≤ÊüìÊó∂‰ª•Áî®Êà∑ÁïåÈù¢‰∏∫Âçï‰ΩçÊòæÁ§∫Âç≥Êó∂Âä†ËΩΩÁä∂ÊÄÅÂíåÊï∞ÊçÆÊµÅ„ÄÇ</li>
<li>Support for Data Fetching: async ÊúçÂä°Âô®ÁªÑ‰ª∂ÂíåÊâ©Â±ïÁöÑ fetch API ÂèØÂÆûÁé∞ÁªÑ‰ª∂Á∫ßÊï∞ÊçÆËé∑Âèñ„ÄÇ</li>
</ul>
<p><img src="https://nextjs.org/_next/image?url=/static/blog/layouts-rfc/app-folder.png&w=3840&q=75&dpl=dpl_Cbau7EMekJRyZrPGm1DKP4FVgwP6"></p>
<h3 id="Layouts"><a href="#Layouts" class="headerlink" title="Layouts"></a>Layouts</h3><p>ÈÄöËøá <code>app/</code> ÁõÆÂΩïÔºåÂèØ‰ª•ËΩªÊùæÂÆûÁé∞Â∏ÉÂ±ÄÂ§çÊùÇÁöÑÁïåÈù¢ÔºåÂú®ÂØºËà™ËøáÁ®ã‰∏≠‰øùÊåÅÁä∂ÊÄÅÔºåÈÅøÂÖçÊòÇË¥µÁöÑÈáçÊñ∞Ê∏≤ÊüìÔºåÂπ∂ÂêØÁî®È´òÁ∫ßË∑ØÁî±Ê®°Âºè„ÄÇÊ≠§Â§ñÔºå‰Ω†ËøòÂèØ‰ª•ÂµåÂ•óÂ∏ÉÂ±ÄÔºåÂπ∂Â∞Ü app ‰ª£Á†Å‰∏éË∑ØÁî±ÔºàÂ¶ÇÁªÑ‰ª∂„ÄÅtestsÂíåstylesÔºâÊîæÂú®‰∏ÄËµ∑„ÄÇ</p>
<p><img src="https://nextjs.org/_next/image?url=/static/blog/next-13/colocating-assets-in-the-app-directory.png&w=3840&q=75&dpl=dpl_Cbau7EMekJRyZrPGm1DKP4FVgwP6"></p>
<p>Âú® <code>app/</code> ÂÜÖÂàõÂª∫Ë∑ØÁî±Âè™ÈúÄË¶Å‰∏Ä‰∏™Êñá‰ª∂ÔºåÂç≥ page.js:</p>
<pre><code class="highlight js"><span class="comment">// This file maps to the index route (/)</span>
<span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Page</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, Next.js!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;
&#125;</code></pre>

<p>‰Ω†ÂèØ‰ª•ÈÄöËøáÊñá‰ª∂Á≥ªÁªüÂÆö‰πâÂ∏ÉÂ±Ä„ÄÇÂ∏ÉÂ±ÄÂú®Â§ö‰∏™È°µÈù¢‰πãÈó¥ÂÖ±‰∫´Áî®Êà∑ÁïåÈù¢„ÄÇÂú®ÂØºËà™Êó∂ÔºåÂ∏ÉÂ±Ä‰ºö‰øùÁïôÁä∂ÊÄÅÔºå‰øùÊåÅ‰∫§‰∫íÊÄßÔºåÂπ∂‰∏î‰∏ç‰ºöÈáçÊñ∞Ê∏≤Êüì„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">BlogLayout</span>(<span class="params">&#123; children &#125;</span>) &#123;
  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">section</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">section</span>&gt;</span></span>;
&#125;</code></pre>

<h3 id="Server-Components"><a href="#Server-Components" class="headerlink" title="Server Components"></a>Server Components</h3><p><code>app/</code> ÁõÆÂΩïÂºïÂÖ•‰∫ÜÂØπReactÊñ∞ÊúçÂä°Âô®ÁªÑ‰ª∂Êû∂ÊûÑÁöÑÊîØÊåÅ„ÄÇÊúçÂä°Âô®ÁªÑ‰ª∂ÂíåÂÆ¢Êà∑Á´ØÁªÑ‰ª∂ÂàÜÂà´Âú®ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÂÖÖÂàÜÂèëÊå•ÂÆÉ‰ª¨ÂêÑËá™ÁöÑ‰ºòÂäøÔºå‰Ωø‰Ω†ËÉΩÂ§üÂçïÁã¨‰ΩøÁî®Âçï‰∏ÄÁöÑÁºñÁ®ãÊ®°ÂûãÊûÑÂª∫Âø´ÈÄü„ÄÅÈ´òÂ∫¶‰∫§‰∫íÂºèÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÊèê‰æõÂá∫Ëâ≤ÁöÑÂºÄÂèëËÄÖ‰ΩìÈ™å„ÄÇ</p>
<p>Âú®ÊúçÂä°Âô®ÁªÑ‰ª∂‰∏≠ÔºåÊàë‰ª¨‰∏∫ÊûÑÂª∫Â§çÊùÇÁöÑÁïåÈù¢Â•†ÂÆö‰∫ÜÂü∫Á°ÄÔºåÂêåÊó∂ÂáèÂ∞ë‰∫ÜÂèëÈÄÅÂà∞ÂÆ¢Êà∑Á´ØÁöÑJavaScriptÊï∞ÈáèÔºå‰ªéËÄåÂä†Âø´‰∫ÜÂàùÂßãÈ°µÈù¢ÁöÑÂä†ËΩΩÈÄüÂ∫¶„ÄÇ</p>
<p>Âä†ËΩΩË∑ØÁî±Êó∂ÔºåÂ∞Ü‰ºöÂä†ËΩΩ Next.js Âíå React runtime, ËØ• runtime ÂèØÁºìÂ≠ò‰∏îÂ§ßÂ∞èÂèØÈ¢ÑÊµã„ÄÇruntimeÁöÑÂ§ßÂ∞è‰∏ç‰ºöÈöèÁùÄÂ∫îÁî®ÁöÑÂ¢ûÈïøËÄåÂ¢ûÂä†„ÄÇÊ≠§Â§ñÔºåruntime ÊòØÂºÇÊ≠•Âä†ËΩΩÁöÑÔºåÂõ†Ê≠§ÂèØ‰ª•Âú®ÂÆ¢Êà∑Á´ØÈÄêÊ≠•Â¢ûÂº∫ÊúçÂä°Âô®‰∏äÁöÑHTML</p>
<h3 id="Streaming"><a href="#Streaming" class="headerlink" title="Streaming"></a>Streaming</h3><p><code>app/</code> ÁõÆÂΩïÂºïÂÖ•‰∫ÜÈÄêÊ≠•Ê∏≤ÊüìÂíåÂ¢ûÈáèÂºèÊµÅÂºè‰º†ËæìÁî®Êà∑ÁïåÈù¢ÂçïÂÖÉÂà∞ÂÆ¢Êà∑Á´ØÁöÑÂäüËÉΩ„ÄÇ</p>
<p>Âà©Áî® Next.js ‰∏≠ÁöÑÊúçÂä°Âô®ÁªÑ‰ª∂ÂíåÂµåÂ•óÂ∏ÉÂ±ÄÔºå‰Ω†ÂèØ‰ª•Á´ãÂç≥ÂëàÁé∞È°µÈù¢‰∏≠‰∏çÈúÄË¶ÅÊï∞ÊçÆÁöÑÈÉ®ÂàÜÔºåÂπ∂‰∏∫Ê≠£Âú®Ëé∑ÂèñÊï∞ÊçÆÁöÑÈ°µÈù¢ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ„ÄÇÈÄöËøáËøô‰∏™ÊñπÊ≥ïÔºåÁî®Êà∑Êó†ÈúÄÁ≠âÂæÖÊï¥‰∏™È°µÈù¢Âä†ËΩΩÂÆåÊØïÔºåÂ∞±ÂèØ‰ª•ÂºÄÂßã‰∏éÈ°µÈù¢ËøõË°å‰∫§‰∫í„ÄÇ</p>
<p><img src="https://nextjs.org/_next/image?url=/static/blog/next-13/streaming.png&w=3840&q=75&dpl=dpl_Cbau7EMekJRyZrPGm1DKP4FVgwP6"></p>
<p>ÈÉ®ÁΩ≤Âà∞VercelÂêéÔºå‰ΩøÁî®<code>app/</code>ÁõÆÂΩïÁöÑ Next.js Â∫îÁî®Â∞ÜÈªòËÆ§Âú®Node.jsÂíåEdgeËøêË°åÊó∂‰ΩøÁî®ÊµÅÂºèÂìçÂ∫îÔºå‰ª•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<h3 id="Data-Fetching"><a href="#Data-Fetching" class="headerlink" title="Data Fetching"></a>Data Fetching</h3><p>ReactÊúÄËøëÂèëÂ∏ÉÁöÑ <a href="https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md">Support for Promises RFC</a> ‰∏∫Âú®ÁªÑ‰ª∂ÂÜÖËé∑ÂèñÊï∞ÊçÆÂíåÂ§ÑÁêÜPromiseÂºïÂÖ•‰∫Ü‰∏ÄÁßçÂº∫Â§ßÁöÑÊñ∞ÊñπÊ≥ïÔºö</p>
<pre><code class="highlight js"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;https://api.example.com/...&#x27;</span>);
  <span class="comment">// The return value is *not* serialized</span>
  <span class="comment">// You can return Date, Map, Set, etc.</span>
  <span class="keyword">return</span> res.<span class="title function_">json</span>();
&#125;
 
<span class="comment">// This is an async Server Component</span>
<span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Page</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">getData</span>();
 
  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">main</span>&gt;</span>&#123;/* ... */&#125;<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span>;
&#125;</code></pre>

<p>React Âíå Next.js ‰∏≠‰πüÊâ©Â±ï‰∫ÜÊú¨Âú∞ fetch API„ÄÇÂÆÉËÉΩÂ§üËá™Âä®ÂØπ fetch requests ËøõË°åÈáçÂ§çËÆ°ÁÆóÔºåÂπ∂Êèê‰æõ‰∫Ü‰∏ÄÁßçÁÅµÊ¥ªÁöÑÊñπÂºèÂú®ÁªÑ‰ª∂Á∫ßËé∑Âèñ„ÄÅÁºìÂ≠òÂíåÈáçÊñ∞È™åËØÅÊï∞ÊçÆ„ÄÇËøôÊÑèÂë≥ÁùÄSSGÔºåSSRÔºåISRÁöÑÊâÄÊúâ‰ºòÁÇπÁé∞Âú®ÈÉΩÂèØ‰ª•ÈÄöËøá‰∏Ä‰∏™APIËé∑ÂæóÔºö</p>
<pre><code class="highlight js"><span class="comment">// This request should be cached until manually invalidated.</span>
<span class="comment">// Similar to `getStaticProps`.</span>
<span class="comment">// `force-cache` is the default and can be omitted.</span>
<span class="title function_">fetch</span>(<span class="variable constant_">URL</span>, &#123; <span class="attr">cache</span>: <span class="string">&#x27;force-cache&#x27;</span> &#125;);
 
<span class="comment">// This request should be refetched on every request.</span>
<span class="comment">// Similar to `getServerSideProps`.</span>
<span class="title function_">fetch</span>(<span class="variable constant_">URL</span>, &#123; <span class="attr">cache</span>: <span class="string">&#x27;no-store&#x27;</span> &#125;);
 
<span class="comment">// This request should be cached with a lifetime of 10 seconds.</span>
<span class="comment">// Similar to `getStaticProps` with the `revalidate` option.</span>
<span class="title function_">fetch</span>(<span class="variable constant_">URL</span>, &#123; <span class="attr">next</span>: &#123; <span class="attr">revalidate</span>: <span class="number">10</span> &#125; &#125;);</code></pre>

<p>Âú® app ÁõÆÂΩï‰∏≠Ôºå‰Ω†ÂèØ‰ª•Âú®layoutsÔºåpagesÔºåcomponents‰∏≠Ëé∑ÂèñÊï∞ÊçÆÔºåÂåÖÊã¨ÊîØÊåÅ‰ªéÊúçÂä°Âô®Ëé∑ÂèñÊµÅÂºèÂìçÂ∫î„ÄÇ</p>
<p>Êàë‰ª¨Ê≠£Âú®ÂêØÁî®Á¨¶Âêà‰∫∫‰ΩìÂ∑•Â≠¶ÁöÑÊñπÂºèÊù•Â§ÑÁêÜÂä†ËΩΩÂíåÈîôËØØÁä∂ÊÄÅÔºåÂπ∂Âú®Ê∏≤ÊüìÁî®Êà∑ÁïåÈù¢Êó∂ÂØπÂÖ∂ËøõË°åÊµÅÂºèÂ§ÑÁêÜ„ÄÇÂú®Êú™Êù•ÁöÑÁâàÊú¨‰∏≠ÔºåÊàë‰ª¨ËøòÂ∞ÜÊîπËøõÂíåÁÆÄÂåñÊï∞ÊçÆÁ™ÅÂèò„ÄÇ</p>
<p><img src="https://nextjs.org/_next/image?url=/static/blog/next-13/streaming.png&w=3840&q=75&dpl=dpl_Cbau7EMekJRyZrPGm1DKP4FVgwP6"></p>
<p>Êàë‰ª¨ÂæàÈ´òÂÖ¥ËÉΩ‰∏éÂºÄÊ∫êÁ§æÂå∫„ÄÅÂåÖÁª¥Êä§ËÄÖ‰ª•ÂèäÂÖ∂‰ªñ‰∏∫ React ÁîüÊÄÅÁ≥ªÁªüÂÅöÂá∫Ë¥°ÁåÆÁöÑÂÖ¨Âè∏Âêà‰ΩúÔºåÂÖ±ÂêåÊâìÈÄ† React Âíå Next.js ÁöÑÊñ∞Êó∂‰ª£„ÄÇÊàë‰ª¨ÂæàÈ´òÂÖ¥ËÉΩÂú® <code>app/</code> ÁõÆÂΩï‰∏≠Âä†ÂÖ•‰∏§‰∏™ÈáçË¶ÅÁöÑÁ§æÂå∫ÂèçÈ¶àÔºå‰∏ÄÊòØÂú®ÁªÑ‰ª∂ÂÜÖÈÉ®ÈõÜ‰∏≠Êï∞ÊçÆËé∑ÂèñÁöÑËÉΩÂäõÔºå‰∫åÊòØÂêëÂÆ¢Êà∑Á´ØÂèëÈÄÅÊõ¥Â∞ëÁöÑ JavaScript „ÄÇ</p>
<h2 id="Introducing-Turbopack-Alpha"><a href="#Introducing-Turbopack-Alpha" class="headerlink" title="Introducing Turbopack (Alpha)"></a>Introducing Turbopack (Alpha)</h2><p>Next.js ÂåÖÂê´ Turbopack, ÂÆÉÊòØÂü∫‰∫éRustÁöÑWebpackÊõø‰ª£ÂìÅ</p>
<p>WebpackÂ∑≤ÁªèË¢´‰∏ãËΩΩË∂ÖËøá30‰∫øÊ¨°ÔºåËôΩÁÑ∂ÂÆÉ‰∏ÄÁõ¥ÊòØÊûÑÂª∫WebÁöÑÈáçË¶ÅÁªÑÊàêÈÉ®ÂàÜÔºå‰ΩÜÊòØÊàë‰ª¨ËææÂà∞‰∫ÜÂü∫‰∫éJavaScriptÁöÑÂ∑•ÂÖ∑ÊâÄËÉΩËææÂà∞ÁöÑÊúÄÈ´òÊÄßËÉΩÊûÅÈôê„ÄÇ</p>
<p>Âú®Next.js12‰∏≠ÔºåÊàë‰ª¨ÂºÄÂßãÂêëRustÈ©±Âä®ÁöÑÂ∑•ÂÖ∑ËøáÊ∏°„ÄÇÈ¶ñÂÖàÊòØËøÅÁßª‰∫ÜBabelÔºåËΩ¨ËØëÈÄüÂ∫¶ÊèêÈ´ò‰∫Ü17ÂÄç„ÄÇÁÑ∂ÂêéÔºåÊõøÊç¢‰∫ÜTerserÔºåÂéãÁº©ÈÄüÂ∫¶ÊèêÈ´ò‰∫Ü6ÂÄç„ÄÇÊòØÊó∂ÂÄôÂÖ®ÈÉ®‰ΩøÁî®ÂéüÁîüÂ∑•ÂÖ∑ËøõË°åÁªëÂÆö‰∫Ü„ÄÇ</p>
<p>Âú® Next.js13 ‰∏≠‰ΩøÁî® Turbopack alpha ÁöÑÁªìÊûúÊòØÔºö</p>
<ul>
<li>Êõ¥Êñ∞ÈÄüÂ∫¶ÊØîWebpackÂø´700ÂÄç</li>
<li>Êõ¥Êñ∞ÈÄüÂ∫¶ÊØîViteÂø´10ÂÄç</li>
<li>ÂÜ∑ÂêØÂä®ÈÄüÂ∫¶ÊØîWebpackÂø´4ÂÄç</li>
</ul>
<p><img src="https://nextjs.org/_next/image?url=/static/blog/next-13/turbopack.png&w=3840&q=75&dpl=dpl_Cbau7EMekJRyZrPGm1DKP4FVgwP6"></p>
<p>Turbopack Âè™ÊçÜÁªëÂºÄÂèë‰∏≠ÊâÄÈúÄÁöÑÊúÄÂ∞èËµÑÊ∫êÔºåÊâÄ‰ª•ÂêØÂä®Êó∂Èó¥ÊûÅÁü≠„ÄÇÂú®‰∏Ä‰∏™ÂåÖÂê´3000‰∏™modulesÁöÑÂ∫îÁî®‰∏≠ÔºåTurbopackÂè™ÈúÄ1.8ÁßíÂç≥ÂèØÂêØÂä®„ÄÇVite ÈúÄË¶Å11.4ÁßíÔºåWebpackÈúÄË¶Å16.5Áßí„ÄÇ</p>
<p>TurbopackÂºÄÁÆ±Âç≥Áî®ÔºåÊîØÊåÅÊúçÂä°Âô®ÁªÑ‰ª∂„ÄÅTypeScript„ÄÅJSX„ÄÅCSSÁ≠â„ÄÇÂú®alphaÈò∂ÊÆµÔºå<a href="https://turbo.build/pack/docs/features">ËÆ∏Â§öÂäüËÉΩ</a>Â∞ö‰∏çÊîØÊåÅ„ÄÇÊàë‰ª¨Â∏åÊúõÂê¨Âà∞‰Ω†ÂØπ‰ΩøÁî® Turbopack Âø´ÈÄüÊú¨Âú∞Ëø≠‰ª£ËøáÁ®ãÁöÑÂèçÈ¶à</p>
<blockquote>
<p>Note: Next.js‰∏≠ÁöÑ Turbopack ÁõÆÂâçÂè™ÊîØÊåÅ <code>next dev</code>„ÄÇÊü•Áúã<a href="https://turbo.build/pack/docs/features">ÊîØÊåÅÁöÑÂäüËÉΩ</a>„ÄÇÊàë‰ª¨ËøòÂú®Âä™ÂäõÈÄöËøá Turbopack Â¢ûÂä†ÂØπ next build ÁöÑÊîØÊåÅ</p>
</blockquote>
<p>‰ΩøÁî®<code>next dev --turbo</code>Âú® Next.js13 ‰∏≠ËØïÁî® Turbopack alpha„ÄÇ</p>
<h2 id="next-x2F-image"><a href="#next-x2F-image" class="headerlink" title="next&#x2F;image"></a>next&#x2F;image</h2><p>Next.js13 ÂºïÂÖ•‰∫ÜÂäüËÉΩÂº∫Â§ßÁöÑÊñ∞ImageÁªÑ‰ª∂ÔºåËÆ©‰Ω†ÂèØ‰ª•ËΩªÊùæÊòæÁ§∫ÂõæÂÉèËÄåÊó†ÈúÄÊîπÂèòÂ∏ÉÂ±ÄÔºåÂπ∂ÊåâÈúÄ‰ºòÂåñÊñá‰ª∂‰ª•ÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<p>Âú® Next.js Á§æÂå∫Ë∞ÉÊü•‰∏≠Ôºå70%ÁöÑÂèóËÆøËÄÖÂëäËØâÊàë‰ª¨Ôºå‰ªñ‰ª¨Âú®Áîü‰∫ß‰∏≠‰ΩøÁî®‰∫Ü Next.js ÁöÑ Image ÁªÑ‰ª∂ÔºåÂπ∂ÁúãÂà∞‰∫Ü Core Web Vitals ÁöÑÊîπËøõ„ÄÇÂú® Next.js13 ‰∏≠ÔºåÊàë‰ª¨Â∞ÜËøõ‰∏ÄÊ≠•ÊîπËøõ next&#x2F;image„ÄÇ</p>
<p>Êñ∞ÁöÑ Image ÁªÑ‰ª∂Ôºö</p>
<ul>
<li>ÂáèÂ∞ëÂÆ¢Êà∑Á´Ø JavaScript</li>
<li>Êõ¥Êòì‰∫éËÆæËÆ°ÂíåÈÖçÁΩÆ</li>
<li>ÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰ΩøÁî®<code>alt</code>Ê†áËÆ∞Êõ¥Êòì‰∫éËÆøÈóÆ</li>
<li>‰∏éWebÂπ≥Âè∞‰øùÊåÅ‰∏ÄËá¥</li>
<li>Âõ†‰∏∫Êú¨Âú∞ÊáíÂä†ËΩΩ‰∏çÈúÄË¶Å hydrationÔºåÂõ†Ê≠§ÈÄüÂ∫¶Êõ¥Âø´</li>
</ul>
<pre><code class="highlight js"><span class="keyword">import</span> <span class="title class_">Image</span> <span class="keyword">from</span> <span class="string">&#x27;next/image&#x27;</span>;
<span class="keyword">import</span> avatar <span class="keyword">from</span> <span class="string">&#x27;./lee.png&#x27;</span>;
 
<span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Home</span>(<span class="params"></span>) &#123;
  <span class="comment">// &quot;alt&quot; is now required for improved accessibility</span>
  <span class="comment">// optional: image files can be colocated inside the app/ directory</span>
  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Image</span> <span class="attr">alt</span>=<span class="string">&quot;leeerob&quot;</span> <span class="attr">src</span>=<span class="string">&#123;avatar&#125;</span> <span class="attr">placeholder</span>=<span class="string">&quot;blur&quot;</span> /&gt;</span></span>;
&#125;</code></pre>

<h3 id="Upgrading-next-x2F-image-to-Next-js-13"><a href="#Upgrading-next-x2F-image-to-Next-js-13" class="headerlink" title="Upgrading next&#x2F;image to Next.js 13"></a>Upgrading next&#x2F;image to Next.js 13</h3><p>ÊóßÁöÑ Image ÁªÑ‰ª∂Â∑≤Êõ¥Âêç‰∏∫ <code>next/legacy/image</code>„ÄÇÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™codemodÔºåÂÆÉÂ∞ÜËá™Âä®Êää‰Ω†Áé∞ÊúâÁöÑ next&#x2F;image Êõ¥Êñ∞‰∏∫ <code>next/legacy/image</code>„ÄÇ‰æãÂ¶ÇÔºåÂΩì‰ªéÊ†πÁõÆÂΩïËøêË°åÊ≠§ÂëΩ‰ª§Êó∂ÔºåÂ∞ÜÂú® <code>./pages</code> ÁõÆÂΩï‰∏≠ËøêË°å codemod:</p>
<pre><code class="highlight bash">npx @next/codemod next-image-to-legacy-image ./pages</code></pre>

<h2 id="next-x2F-font"><a href="#next-x2F-font" class="headerlink" title="@next&#x2F;font"></a>@next&#x2F;font</h2><p>Next.js ÂºïÂÖ•‰∫ÜÂÖ®Êñ∞ÁöÑÂ≠ó‰ΩìÁ≥ªÁªüÔºö</p>
<ul>
<li>Ëá™Âä®‰ºòÂåñ‰Ω†ÁöÑÂ≠ó‰ΩìÔºåÂåÖÊã¨Ëá™ÂÆö‰πâÂ≠ó‰Ωì</li>
<li>ÁßªÈô§Â§ñÈÉ®ÁΩëÁªúËØ∑Ê±ÇÔºåÊèêÈ´òÁßÅÂØÜÊÄßÂíåÊÄßËÉΩ</li>
<li>ÂÜÖÁΩÆËá™Âä®ÊâòÁÆ°ÂäüËÉΩÔºåÂèØÊâòÁÆ°‰ªª‰ΩïÂ≠ó‰ΩìÊñá‰ª∂</li>
<li>‰ΩøÁî®CSS <code>size-adjust</code> Â±ûÊÄßËá™Âä®ÂÆûÁé∞Èõ∂Â∏ÉÂ±ÄÂÅèÁßª</li>
</ul>
<p>Êñ∞ÁöÑÂ≠ó‰ΩìÁ≥ªÁªüÂèØ‰ª•ËÆ©‰Ω†Êñπ‰æøÁöÑ‰ΩøÁî®ÊâÄÊúâ Google Â≠ó‰ΩìÔºåÂêåÊó∂ÂÖºÈ°æÊÄßËÉΩÂíåÈöêÁßÅ„ÄÇCSSÂíåÂ≠ó‰ΩìÊñá‰ª∂Âú®ÊûÑÂª∫Êó∂‰∏ãËΩΩÔºåÂπ∂‰∫éÂÖ∂‰ªñÈùôÊÄÅËµÑÊ∫ê‰∏ÄËµ∑Ëá™Ë°åÊâòÁÆ°„ÄÇÊµèËßàÂô®‰∏ç‰ºöÂêë Google ÂèëÈÄÅ‰ªª‰ΩïËØ∑Ê±Ç„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; <span class="title class_">Inter</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@next/font/google&#x27;</span>;
 
<span class="keyword">const</span> inter = <span class="title class_">Inter</span>();
 
<span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">className</span>=<span class="string">&#123;inter.className&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span>;</code></pre>

<p>Ëá™ÂÆö‰πâÂ≠ó‰Ωì‰πüÊîØÊåÅÔºåÂåÖÊã¨ÊîØÊåÅÂ≠ó‰ΩìÊñá‰ª∂ÁöÑËá™Âä®ÊâòÁÆ°„ÄÅÁºìÂ≠òÂíåÈ¢ÑÂä†ËΩΩ„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">import</span> localFont <span class="keyword">from</span> <span class="string">&#x27;@next/font/local&#x27;</span>;
 
<span class="keyword">const</span> myFont = <span class="title function_">localFont</span>(&#123; <span class="attr">src</span>: <span class="string">&#x27;./my-font.woff2&#x27;</span> &#125;);
 
<span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">className</span>=<span class="string">&#123;myFont.className&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span>;</code></pre>

<p>‰Ω†ÂèØ‰ª•Ëá™ÂÆö‰πâÂ≠ó‰ΩìÂä†ËΩΩËøáÁ®ãÁöÑÊØè‰∏™ÈÉ®ÂàÜÔºåÂπ∂‰∏îÁ°Æ‰øùÂá∫Ëâ≤ÁöÑÊÄßËÉΩÂíåÂ∏ÉÂ±Ä‰∏çÂèòÔºåÂåÖÊã¨ <code>font-display</code>ÔºåÈ¢ÑÂä†ËΩΩÔºåÂõûÈÄÄÁ≠â„ÄÇ</p>
<h2 id="next-x2F-link"><a href="#next-x2F-link" class="headerlink" title="next&#x2F;link"></a>next&#x2F;link</h2><p><code>next/link</code> ‰∏çÂÜçÈúÄË¶ÅÊâãÂä®Ê∑ªÂä†<code>&lt;a&gt;</code>‰Ωú‰∏∫Â≠ê‰ª£„ÄÇ</p>
<p>Ëøô‰∏™ÂäüËÉΩ‰πãÂâçÊòØÂú®12.2‰∏≠‰Ωú‰∏∫ expreimental option Ê∑ªÂä†ÁöÑÔºåÁé∞Âú®ÊòØÈªòËÆ§ÈÄâÈ°π„ÄÇÂú® Next.js13 ‰∏≠Ôºå<code>&lt;Link&gt;</code>ÊÄªÊòØÊ∏≤Êüì<code>&lt;a&gt;</code>ÔºåÂπ∂ÂÖÅËÆ∏‰Ω†Â∞ÜpropsÂèëÈÄÅÂà∞Â∫ïÂ±ÇÊ†áÁ≠æ‰∏ä„ÄÇ‰æãÂ¶ÇÔºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> <span class="title class_">Link</span> <span class="keyword">from</span> <span class="string">&#x27;next/link&#x27;</span>
 
<span class="comment">// Next.js 12: `&lt;a&gt;` has to be nested otherwise it&#x27;s excluded</span>
&lt;<span class="title class_">Link</span> href=<span class="string">&quot;/about&quot;</span>&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span>&gt;</span>About<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span>
&lt;/<span class="title class_">Link</span>&gt;
 
<span class="comment">// Next.js 13: `&lt;Link&gt;` always renders `&lt;a&gt;`</span>
<span class="language-xml"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">href</span>=<span class="string">&quot;/about&quot;</span>&gt;</span></span>
<span class="language-xml">  About</span>
<span class="language-xml"><span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></code></pre>

<h3 id="Upgrading-next-x2F-link-to-Next-js-13"><a href="#Upgrading-next-x2F-link-to-Next-js-13" class="headerlink" title="Upgrading next&#x2F;link to Next.js 13"></a>Upgrading next&#x2F;link to Next.js 13</h3><p>Â∞Ü links ÂçáÁ∫ßÂà∞ Next.js13ÔºåÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™codemodÔºåÂèØ‰ª•Ëá™Âä®Êõ¥Êñ∞ codebase„ÄÇÊØîÂ¶ÇÂú®Ê†πÁõÆÂΩïËøêË°åÊ≠§ÂëΩ‰ª§ÔºåÂ∞ÜÂú®<code>./pages</code>ÁõÆÂΩï‰∏≠ËøêË°åcodemodÔºö</p>
<pre><code class="highlight bash">npx @next/codemod new-link ./pages</code></pre>

<h2 id="OG-Image-Generation"><a href="#OG-Image-Generation" class="headerlink" title="OG Image Generation"></a>OG Image Generation</h2><p>Á§æ‰∫§Âç°ÁâáÔºå‰πüÂèØÁß∞‰∏∫ÂºÄÊîæÂõæÂõæÂÉèÔºåÂèØ‰ª•Â§ßÂ§ßÊèêÈ´òÂÜÖÂÆπÁÇπÂáªÁöÑÂèÇ‰∏éÁéáÔºå‰∏Ä‰∫õÂÆûÈ™åÊòæÁ§∫ËΩ¨ÂåñÁéáÊúÄÈ´òÂèØÊèêÈ´ò40%„ÄÇ</p>
<p>ÈùôÊÄÅÁ§æ‰∫§Âç°ËÄóÊó∂„ÄÅÊòìÂá∫Èîô‰∏îÈöæÁª¥Êä§„ÄÇÊ≠£Âõ†‰∏∫Â¶ÇÊ≠§ÔºåÁ§æ‰∫§Âç°ÁªèÂ∏∏Ë¢´ÂøΩÁï•ÁîöËá≥Ë∑≥Ëøá„ÄÇÂú®Ê≠§‰πãÂâçÔºåÈúÄË¶Å‰∏™ÊÄßÂåñÂíåÂç≥Êó∂ËÆ°ÁÆóÁöÑÂä®ÊÄÅÁ§æ‰∫§Âç°Êó¢Âõ∞ÈöæÂèàÊòÇË¥µ„ÄÇ</p>
<p>Êàë‰ª¨ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êñ∞Â∫ì <code>@vercel/og</code>, ÂèØ‰∏é Next.js Êó†ÁºùÂçè‰ΩúÔºåÁîüÊàêÂä®ÊÄÅÁöÑÁ§æ‰∫§Âç°Áâá„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; <span class="title class_">ImageResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@vercel/og&#x27;</span>;
 
<span class="keyword">export</span> <span class="keyword">const</span> config = &#123;
  <span class="attr">runtime</span>: <span class="string">&#x27;experimental-edge&#x27;</span>,
&#125;;
 
<span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ImageResponse</span>(
    (
      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span>
<span class="tag"><span class="language-xml">          <span class="attr">display:</span> &#x27;<span class="attr">flex</span>&#x27;,</span></span>
<span class="tag"><span class="language-xml">          <span class="attr">fontSize:</span> <span class="attr">128</span>,</span></span>
<span class="tag"><span class="language-xml">          <span class="attr">background:</span> &#x27;<span class="attr">white</span>&#x27;,</span></span>
<span class="tag"><span class="language-xml">          <span class="attr">width:</span> &#x27;<span class="attr">100</span>%&#x27;,</span></span>
<span class="tag"><span class="language-xml">          <span class="attr">height:</span> &#x27;<span class="attr">100</span>%&#x27;,</span></span>
<span class="tag"><span class="language-xml">        &#125;&#125;</span></span>
<span class="tag"><span class="language-xml">      &gt;</span></span>
<span class="language-xml">        Hello, World!</span>
<span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
    ),
  );
&#125;</code></pre>

<p>Ëøô‰∏™ÊñπÊ≥ïÊØîÁé∞ÊúâËß£ÂÜ≥ÊñπÊ≥ïÂø´5ÂÄç„ÄÇÈÄöËøá‰ΩøÁî® Vercel Edge Functions„ÄÅWebAssembly ÂíåÁî®‰∫éÂ∞Ü HTML Âíå CSS ËΩ¨Êç¢‰∏∫ÂõæÂÉèÁöÑÂÖ®Êñ∞Ê†∏ÂøÉÂ∫ìÔºåÂπ∂Âà©Áî® React ÁªÑ‰ª∂ÊäΩË±°„ÄÇ</p>
<h2 id="Middleware-API-Updates"><a href="#Middleware-API-Updates" class="headerlink" title="Middleware API Updates"></a>Middleware API Updates</h2><p>Âú® Next.js12 ‰∏≠ÔºåÊàë‰ª¨ÂºïÂÖ•‰∫Ü‰∏≠Èó¥‰ª∂Ôºå‰Ωø Next.js Ë∑ØÁî±ÂÖ∑ÊúâÂÖÖÂàÜÁöÑÁÅµÊ¥ªÊÄß„ÄÇÁÑ∂ÂêéÊàë‰ª¨Âê¨Âèñ‰∫ÜÂ§ßÂÆ∂ÂØπÂàùÂßã API ËÆæËÆ°ÁöÑÂèçÈ¶àÊÑèËßÅÔºåÂπ∂Â¢ûÂä†‰∫Ü‰∏Ä‰∫õÊñ∞ÂÜÖÂÆπÔºå‰ª•ÊîπÂñÑÂºÄÂèë‰∫∫ÂëòÁöÑ‰ΩìÈ™åÔºåÂπ∂Ê∑ªÂä†‰∫ÜÂº∫Â§ßÁöÑÊñ∞ÂäüËÉΩ„ÄÇ</p>
<p>Áé∞Âú®‰Ω†ÂèØ‰ª•Êõ¥ËΩªÊùæÂú∞Âú®ËØ∑Ê±Ç‰∏≠ËÆæÁΩÆ headersÔºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next/server&#x27;</span>;
<span class="keyword">import</span> type &#123; <span class="title class_">NextRequest</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next/server&#x27;</span>;
 
<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request: NextRequest</span>) &#123;
  <span class="comment">// Clone the request headers and set a new header `x-version`</span>
  <span class="keyword">const</span> requestHeaders = <span class="keyword">new</span> <span class="title class_">Headers</span>(request.<span class="property">headers</span>);
  requestHeaders.<span class="title function_">set</span>(<span class="string">&#x27;x-version&#x27;</span>, <span class="string">&#x27;13&#x27;</span>);
 
  <span class="comment">// You can also set request headers in NextResponse.rewrite</span>
  <span class="keyword">const</span> response = <span class="title class_">NextResponse</span>.<span class="title function_">next</span>(&#123;
    <span class="attr">request</span>: &#123;
      <span class="comment">// New request headers</span>
      <span class="attr">headers</span>: requestHeaders,
    &#125;,
  &#125;);
 
  <span class="comment">// Set a new response header `x-version`</span>
  response.<span class="property">headers</span>.<span class="title function_">set</span>(<span class="string">&#x27;x-version&#x27;</span>, <span class="string">&#x27;13&#x27;</span>);
  <span class="keyword">return</span> response;
&#125;</code></pre>

<p>Áé∞Âú®Ôºå‰Ω†ËøòÂèØ‰ª•Áõ¥Êé•Âú®‰∏≠Èó¥‰ª∂‰∏≠Êèê‰æõÂìçÂ∫îÔºåÊó†ÈúÄ <code>rewrite</code> Âíå <code>redirect</code>„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; <span class="title class_">NextRequest</span>, <span class="title class_">NextResponse</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;next/server&#x27;</span>;
<span class="keyword">import</span> &#123; isAuthenticated &#125; <span class="keyword">from</span> <span class="string">&#x27;@lib/auth&#x27;</span>;
 
<span class="comment">// Limit the middleware to paths starting with `/api/`</span>
<span class="keyword">export</span> <span class="keyword">const</span> config = &#123;
  <span class="attr">matcher</span>: <span class="string">&#x27;/api/:function*&#x27;</span>,
&#125;;
 
<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">middleware</span>(<span class="params">request: NextRequest</span>) &#123;
  <span class="comment">// Call our authentication function to check the request</span>
  <span class="keyword">if</span> (!<span class="title function_">isAuthenticated</span>(request)) &#123;
    <span class="comment">// Respond with JSON indicating an error message</span>
    <span class="keyword">return</span> <span class="title class_">NextResponse</span>.<span class="title function_">json</span>(
      &#123;
        <span class="attr">success</span>: <span class="literal">false</span>,
        <span class="attr">message</span>: <span class="string">&#x27;Auth failed&#x27;</span>,
      &#125;,
      &#123;
        <span class="attr">status</span>: <span class="number">401</span>,
      &#125;,
    );
  &#125;
&#125;</code></pre>

<p>‰ªé‰∏≠Èó¥‰ª∂ÂèëÈÄÅÂìçÂ∫îÁõÆÂâçÈúÄË¶Å‰ΩøÁî® <code>next.config.js</code> ‰∏≠ÁöÑ <code>experimental.allowMiddlewareResponseBody</code> ÈÖçÁΩÆÈ°π„ÄÇ</p>
]]></content>
      <tags>
        <tag>Next.js</tag>
        <tag>React</tag>
        <tag>Translate</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëIndistinguishable AI content is crippling our perception</title>
    <url>/2023/07/21/%E3%80%90%E7%BF%BB%E3%80%91Indistinguishable-AI-content-is-crippling-our-perception/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://uxdesign.cc/indistinguishable-ai-content-is-crippling-our-perception-f2b24c7cd311">Indistinguishable AI content is crippling our perception</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@arvindsanjeev">Arvind Sanjeev</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p><img src="https://miro.medium.com/v2/resize:fit:1400/1*JzBgspzi8LOngxpNKCiX8Q.gif"></p>
<p>Âú®2020Âπ¥Ôºå‰∏ÄÂêçÂ§ßÂ≠¶Áîü Liam Porr Âà©Áî® <a href="https://www.technologyreview.com/2020/08/14/1006780/ai-gpt-3-fake-blog-reached-top-of-hacker-news/">GPT-3ÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂÅáÁöÑÂçöÂÆ¢</a>ÔºåÂπ∂Áôª‰∏ä‰∫Ü hacker news ÁöÑÊ¶úÂçïÁ¨¨‰∏Ä„ÄÇ‰ªñÈÄöËøá‰ΩøÁî®ÂÅáÂêç ‚Äúadolos‚Äù, ÁîüÊàê productivity Âíå self-help Áõ∏ÂÖ≥‰∏ªÈ¢òÁöÑÂÜÖÂÆπÔºåÂá†‰πé‰∏çÁî®ÁºñËæëÂ∞±ËøõË°åÂèëÂ∏É„ÄÇÁÑ∂ÂêéÁ§æÂå∫ËÆ∫Âùõ‰∏≠ÁöÑËØªËÄÖ‰∏çÁü•ÈÅìËøôÊòØ‰∏Ä‰∏™AIÁîüÊàêÁöÑÂçöÂÆ¢ÔºåÂØπÂÖ∂ËøõË°åÊäïÁ•®ÔºåLiam ÂêéÊù•ÊâøËÆ§ÔºåËøôÊòØÂÆûÈ™åÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁõÆÁöÑÊòØÁúãÁúãGPT-3ÊòØÂê¶ËÉΩÂÜíÂÖÖ‰∫∫Á±ª‰ΩúÂÆ∂„ÄÇËøôÂπ∂‰∏çÊòØÁ¨¨‰∏ÄÊ¨°Áî®AIÂèñ‰ª£‰∫∫Á±ª‰ΩúÂÆ∂Ôºõ„ÄäLA Times„Äã‰ªé2014Âπ¥Ëµ∑Â∞±ÂºÄÂßã<a href="https://www.bbc.com/news/technology-26614051">‰ΩøÁî®Êú∫Âô®‰∫∫ÁºñÂÜôÊñ∞ÈóªÊñáÁ´†</a>„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCs1KwkiDFBbQf8ubKowJA.png"></p>
<ul>
<li>‰Ω†ËÉΩ‰ªéËøô‰∏§Âº†ÂõæÁâá‰∏≠ÂàÜËæ®Âá∫AIÁîüÊàêÁöÑÂ©¥ÂÑøÂêóÔºü(Á≠îÊ°àÂú®È°µÈù¢Â∫ïÈÉ®)</li>
</ul>
<blockquote>
<p>Âà∞2025Âπ¥Êàñ2030Âπ¥Ôºå‰∫íËÅîÁΩë‰∏ä‰ºöÊúâ90%ÁöÑÂÜÖÂÆπÈÉΩÊòØËá™Âä®ÁîüÊàêÁöÑÔºåËá™Âä®ÁîüÊàêÁöÑÂÜÖÂÆπ‰ºöÂ§ßÂ§ßÂ¢ûÂä†ÂèØÁî®ÂÜÖÂÆπÁöÑÊï∞Èáè<br>‚Äî Nina Shick, Deep Fakes and the Infocalypse</p>
</blockquote>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gTJnlZtrPgMmNPieO1Q2Tw.png"></p>
<p>Â¶Ç‰ªäÔºåDeepFaceLab Á≠âÂ∑•ÂÖ∑ÂèØ‰ª•ËÆ©‰ªª‰Ωï‰∫∫Âà∂‰ΩúÊîøÊ≤ªÂÄôÈÄâ‰∫∫ÁöÑËßÜÈ¢ëÂπ∂Âú®ÁΩë‰∏ä‰º†Êí≠ÔºåDisrupt ÂèØ‰ª•ËÆ©‰Ω†Ê®°‰ªø‰ªª‰Ωï‰∫∫ÁöÑÂ£∞Èü≥ÔºåGPT ÂèØ‰ª•ËÆ©‰Ω†ÁºñÂÜôÂÅáÊñ∞ÈóªÔºõËøô‰∫õÂ∑•ÂÖ∑Âä†Âú®‰∏ÄËµ∑Â∞±ÂèØ‰ª•Êàê‰∏∫‰∏Ä‰∏™ÂÅáÊñ∞ÈóªÂèëÂ∏ÉÊú∫Âô®„ÄÇÁé∞Âú®Ôºå‰∏Ä‰∏™‰∫∫Âè™Ë¶ÅÊéåÊè°‰∫ÜËøô‰∫õÊú∫Âô®Â∞±ÂèØ‰ª•Áõ¥Êé•ÂçïÁã¨Á†¥ÁéØÁé∞ÂÆû‰∏ñÁïå„ÄÇ ‚Äì ÊìçÁ∫µÈÄâ‰∏æÔºåÊï£Êí≠ËôöÂÅáÂÆ£‰º†Ôºå‰º™ÈÄ†ËôöÂÅáËâ≤ÊÉÖËßÜÈ¢ëÔºåÂà∂ÈÄ†Èò¥Ë∞ãËÆ∫Á≠â„ÄÇ</p>
<h2 id="Volatile-democracy"><a href="#Volatile-democracy" class="headerlink" title="Volatile democracy"></a>Volatile democracy</h2><p><strong>ÊîøÂÆ¢‰ª¨ÂÆ≥ÊÄï DeepfakeÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìË¢´Áî®‰∫éÊìçÁ∫µÈÄâ‰∏æÁªìÊûú„ÄÇ</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/X17yrEV5sl4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p>2022Âπ¥3ÊúàÔºåÂú®Facebook Âíå Youtube ‰∏äÂá∫Áé∞‰∫Ü‰∏ÄÊÆµ<a href="https://www.wired.com/story/zelensky-deepfake-facebook-twitter-playbook/">‰º™ÈÄ†ÁöÑ Volodymyr Zelensky ËßÜÈ¢ë</a>ÔºåÂú®Ëøô‰∏™ËßÜÈ¢ë‰∏≠Ôºå‰ªñÂÆ£Â∏ÉÂØπ‰øÑÁΩóÊñØÁöÑÂÖ•‰æµÊäïÈôçÔºåÂπ∂Ë¶ÅÊ±Ç‰πåÂÖãÂÖ∞ÂÜõÈòüÊîæ‰∏ãÊ≠¶Âô®„ÄÇ‰∏çËøáÔºåËøôÊÆµËßÜÈ¢ëÂπ∂‰∏ç‰ª§‰∫∫Áõ∏‰ø°„ÄÇ‰ªñÁöÑ‰∏äÂçäË∫´‰∏ÄÂä®‰∏çÂä®ÔºåËØ≠Ê∞î‰πüÊúâÊâÄ‰∏çÂêå„ÄÇ‰ΩÜÂØπ‰∫éÊ≤°ÊúâÁªèÂéÜËøáÁöÑ‰∫∫Êù•ËØ¥ÔºåËøôË∂≥‰ª•ÈÄ†ÊàêÂõ∞ÊÉëÂíåÊÅêÊÖå„ÄÇËøôÊòØ Deepfake È¶ñÊ¨°Âú®Ê≠¶Ë£ÖÂÜ≤Á™Å‰∏≠Ë¢´Áî®‰ΩúÊ≠¶Âô®„ÄÇ</p>
<blockquote>
<p>‚ÄúDemocracies appear to be gravely threatened by the speed at which disinformation can be created and spread via social media, where the incentive to share the most sensationalist content outweighs the incentive to perform the tiresome work of verification.‚Äù<br>Source: <a href="https://www.theguardian.com/technology/ng-interactive/2019/jun/22/the-rise-of-the-deepfake-and-the-threat-to-democracy">Politicians fear this like fire</a>, The Guardian</p>
</blockquote>
<p>ÂÅáÊñ∞ÈóªËøáÂéªÊõæË¢´Áî®Êù•ÂΩ±Âìç<a href="https://news.stanford.edu/2017/01/18/stanford-study-examines-fake-news-2016-presidential-election/">ÁæéÂõΩÂ§ßÈÄâ</a>ÔºåËÄåÈöèÁùÄÊñ∞ÁöÑÁîüÊàêÂºèAIÂ∑•ÂÖ∑Âá∫Áé∞ÔºåÂÆÉÂèòÂæóÊõ¥Âä†ÂÆπÊòì„ÄÇ</p>
<h2 id="DeepFake-porn"><a href="#DeepFake-porn" class="headerlink" title="DeepFake porn"></a>DeepFake porn</h2><p><strong>Ëâ≤ÊÉÖÊä•Â§çÂ∑≤ÁªèË¢´Êé®Âêë‰∏Ä‰∏™ÂÖ®Êñ∞ÁöÑÂ±ÇÊ¨°„ÄÇ</strong></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/0*OhWBGf1BTwDzjyJz.gif"></p>
<p>Âú®‰πãÂâçÁöÑ<a href="https://medium.com/@arvindsanjeev/ai-sociopaths-and-their-unintended-consequences-bf6f19012e4f">‰ªãÁªçÊñáÁ´†</a>‰∏≠ÔºåÊàëÂàÜ‰∫´‰∫Ü Rana ÁöÑÊïÖ‰∫ãÔºåÂ•πÊòØ‰∏Ä‰∏™Âç∞Â∫¶ÁöÑË∞ÉÊü•ËÆ∞ËÄÖÔºåÂ•πÁöÑÂØπÊâãÈÄöËøá<a href="https://www.huffingtonpost.co.uk/entry/deepfake-porn_uk_5bf2c126e4b0f32bd58ba316"> deepfake Ëâ≤ÊÉÖÊ¥ªÂä®</a>ÂØπÂ•πËøõË°å‰∫ÜÊîªÂáª„ÄÇ‰∏éÂ•πÁöÑÊïÖ‰∫ãÁ±ª‰ººÔºåÁΩë‰∏ä‰πüÊúâÂæàÂ§öÂÖ≥‰∫é<a href="https://vimeo.com/492572852">Â•≥ÊÄßÁöÑÈááËÆø</a>ÔºåÂ•π‰ª¨Á´ôÂá∫Êù•ÂàÜ‰∫´‰∫Ü deepfake Â∑•ÂÖ∑ÊòØÂ¶Ç‰ΩïÈíàÂØπÂ•π‰ª¨Âπ∂Âà∂‰ΩúËØΩË∞§ËßÜÈ¢ë„ÄÇËâ≤ÊÉÖÊä•Â§çÂ∑≤Áªè‰∏äÂçáÂà∞‰∫ÜÂè¶‰∏Ä‰∏™È´òÂ∫¶ÔºåÂ¶Ç‰ªä‰ªª‰Ωï‰∫∫ÈÉΩÂèØ‰ª•‰ΩøÁî®‰Ω†ÁöÑ‰∏ÄÂº†ÁÖßÁâáÂéªÁîüÊàê‰∏Ä‰∫õËßÜÈ¢ëÁÑ∂ÂêéÂèëÂà∞ÁΩë‰∏ä„ÄÇÊçÆÁ†îÁ©∂ÂÖ¨Âè∏ Sensity AI ‰º∞ËÆ°Ôºå90%Âà∞95%ÁöÑÂú®Á∫ø deepfake ËßÜÈ¢ëÈÉΩÊòØÊú™ÁªèÂêåÊÑèÁöÑËâ≤ÊÉÖËßÜÈ¢ëÔºåÂÖ∂‰∏≠90%‰ª•Â•≥ÊÄß‰∏∫‰∏ªËßí„ÄÇËøô‰∫õÂ∑•ÂÖ∑Â§ßÂ§öÂ∑≤Ë¢´Á¶ÅÊ≠¢ÔºåÊîøÂ∫úÂíåÊâßÊ≥ïÊú∫ÊûÑ‰ªçÂú®Âä™ÂäõËøΩËµ∂ÂíåÈÅèÂà∂ËøôÁßç‰ΩøÁî®Ë°å‰∏∫„ÄÇ</p>
<p>MIT Technology Review ÁöÑ Karen Hao ÂØπËøô‰∏™ËØùÈ¢òËøõË°å‰∫ÜÊúâÂäõÁöÑÊä•ÈÅìÔºö</p>
<ul>
<li><a href="https://www.technologyreview.com/2021/09/13/1035449/ai-deepfake-app-face-swaps-women-into-porn/">A horrifying new AI app swaps women into porn videos with a click</a></li>
<li><a href="https://www.technologyreview.com/2019/06/28/134352/an-ai-app-that-undressed-women-shows-how-deepfakes-harm-the-most-vulnerable/">An AI app that ‚Äúundressed‚Äù women shows how deepfakes harm the most vulnerable</a></li>
<li><a href="https://www.technologyreview.com/2020/10/20/1010789/ai-deepfake-bot-undresses-women-and-underage-girls/">A deepfake bot is being used to ‚Äúundress‚Äù underage girls</a></li>
<li><a href="https://www.technologyreview.com/2021/02/12/1018222/deepfake-revenge-porn-coming-ban/">Deepfake porn is ruining women‚Äôs lives. Now the law may finally ban it</a></li>
</ul>
<h2 id="Bringing-the-dead-back-to-life"><a href="#Bringing-the-dead-back-to-life" class="headerlink" title="Bringing the dead back to life"></a>Bringing the dead back to life</h2><p><strong>Chatbots Âíå deepfake Ê®°‰ªø‰Ω†Â∑≤ÊïÖÁöÑ‰∫≤‰∫∫</strong></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/1*jMW-J7oZYG9HnVOvUwaqLQ.gif"></p>
<p>ÂÉè Microsoft Âíå Amazon Á≠âÂÖ¨Âè∏Ê≠£Âú®Á´ûÁõ∏Â∞ÜÊ≠ªËÄÖÂ§çÊ¥ª„ÄÇÂ∞±ÂÉè„ÄäÈªëÈïú„Äã‰∏≠‰∏ÄÊ†∑ÔºåÂÖ¨Âè∏‰ºöÂà©Áî®Êàë‰ª¨<a href="https://www.vice.com/en/article/bvmqbv/founder-youll-soon-be-able-to-talk-to-your-dead-mom-in-the-metaverse-thanks-to-chatgpt">Â∑≤ÊïÖ‰∫≤‰∫∫ÁöÑÊï∞ÊçÆÂéªËÆ≠ÁªÉchatbots</a>„ÄÇ‰∫öÈ©¨ÈÄäÁöÑ‰∏ÄÊÆµËßÜÈ¢ëÂ±ïÁ§∫‰∫ÜAlexaÂ¶Ç‰ΩïË°®Áé∞Âá∫‰∏Ä‰∏™Â≠©Â≠êÂ∑≤ÊïÖÁ•ñÊØçÁöÑÂ£∞Èü≥ÔºåÂπ∂Áªô‰ªñËÆ≤ÊïÖ‰∫ãÔºö</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/22cb24-sGhg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p>Somnium Space ÊòØ‰∏ÄÂÆ∂ÊûÑÂª∫ËôöÊãü‰∏ñÁïåÁöÑVR ÂÖ¨Âè∏ÔºåÂÆÉÊèê‰æõ‰∫Ü‰∏ÄÁßç<a href="https://www.vice.com/en/article/pkp47y/metaverse-company-to-offer-immortality-through-live-forever-mode">Ê∞∏ÁîüÊ®°Âºè</a>„ÄÇÈÄöËøáËøôÁßçÊ®°ÂºèÔºåÂç≥‰Ωø‰Ω†Ê≠ª‰∫ÜÔºå‰∫∫‰ª¨‰πüÂèØ‰ª•Ê†πÊçÆ‰Ω†‰πãÂâçÊî∂ÈõÜÁöÑÊï∞ÊçÆÁªßÁª≠‰∏é‰Ω†ÁöÑÂåñË∫´‰∫íÂä®„ÄÇ</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/ihEEjwRlghQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p>Âè¶‰∏Ä‰∏™‰æãÂ≠êÊòØÁ∫™ÂΩïÁâá„ÄäRoadrunner„ÄãÔºåËØ•ÁâáËÆ≤Ëø∞‰∫ÜÂéª‰∏ñÁöÑËëóÂêçÂé®Â∏à Anthony Bourdain ÁöÑÁîüÂπ≥„ÄÇÁ∫™ÂΩïÁâá‰∏≠ÁöÑÁîªÂ§ñÈü≥ÊòØÁî±Ê†πÊçÆ Anthony ÁöÑÂ£∞Èü≥ËÆ≠ÁªÉÂá∫Êù•ÁöÑAI model ÂÆåÊàêÁöÑÔºõÁÑ∂ËÄåÔºå<a href="https://www.washingtonpost.com/arts-entertainment/2021/07/16/anthony-bourdain-documentary-ai-deepfake/">‰ªñÁöÑÈÅóÂ≠ÄÂíåÂÆ∂‰∫∫Âπ∂‰∏çÊª°ÊÑè</a>„ÄÇËøôÂ∞±ÂºïÂèë‰∫Ü‰∏ÄÂú∫ÂÖ≥‰∫é‚ÄúË∞ÅËÉΩÊéßÂà∂ÈÄùËÄÖÊï∞ÊçÆ‚ÄùÁöÑÂ§ßËÆ®ËÆ∫„ÄÇ<a href="https://www.reuters.com/article/us-britain-dataprotection-privacy-analys-idUSKCN1Q304F">Â§ßÂ§öÊï∞ÂõΩÂÆ∂ÁöÑÊï∞Â≠óÂæÄÁîüÊîøÁ≠ñ</a>ÂÖÅËÆ∏‰∫≤Â±ûÂú®ÊèêÂá∫Áî≥ËØ∑ÂêéËÆøÈóÆËøô‰∫õÊï∞ÊçÆ„ÄÇ‰ΩÜÂ§ßÊï∞ÊçÆÂÖ¨Âè∏ÊòØÂê¶ÂèØ‰ª•ÁªßÁª≠‰ΩøÁî®Ëøô‰∫õÊï∞ÊçÆÊù•ËÆ≠ÁªÉ AI ÔºåÁõÆÂâçËøò‰∏çÊ∏ÖÊ•öÔºõÂ¶ÇÊûúÊó†‰∫∫ËÆ§È¢ÜÔºå‰πüÊ≤°ÊúâÊ≥ïÂæãËßÑÂÆöË∞ÅÊã•ÊúâËøô‰∫õÊï∞ÊçÆ„ÄÇ</p>
<h2 id="Replacing-Celebrities"><a href="#Replacing-Celebrities" class="headerlink" title="Replacing Celebrities"></a>Replacing Celebrities</h2><p><strong>‰∏çÂÜçÊúâ‰∫∫Á±ªÊºîÂëò</strong></p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8GXIT5qvQH0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<p><a href="https://www.wired.com/story/bruce-willis-deepfake-rights-law/">Ë∞ÅÊã•Êúâ‰∫Ü Bruce Willis </a>ÔºüËøô‰ΩçÊºîÂëòÊúÄËøëÂà∂‰Ωú‰∫ÜËá™Â∑±ÁöÑÊï∞Â≠óÊ®°ÂûãÔºåÂπ∂ÂàÜ‰∫´Áªô‰∏ÄÂÆ∂‰øÑÁΩóÊñØÂπøÂëäÂÖ¨Âè∏Âà∂‰Ωú‰∫Ü‰∏äÈù¢ÁöÑÂπøÂëä„ÄÇBruce Willis Ë¢´ËØäÊñ≠‰∏∫ÊÇ£ÊúâÂ§±ËØ≠ÁóáÔºåËøôÊòØ‰∏ÄÁßçËÄÅÂπ¥Áó¥ÂëÜÁóáÔºåËøôËÆ©‰ªñ‰∏çÂæó‰∏çÂú®ÂéªÂπ¥ÈÄÄ‰ºëÔºõ‰∏çËøáÔºåÈÄöËøá deepfakesÔºå‰ªñÂèØ‰ª•ÁªßÁª≠ÊºîÊàèÔºåÂáÜÂ§áÂ•ΩÁúã„ÄäDie Hard 47„Äã‰∫ÜÂêóÔºü</p>
<p>ËÆΩÂà∫ÁöÑÊòØÔºå<a href="https://restofworld.org/2023/ai-voice-acting/">ÈÖçÈü≥ÊºîÂëòÊ≠£Âú®Â∏ÆÂä©ËÆ≠ÁªÉÂç≥Â∞ÜÂèñ‰ª£‰ªñ‰ª¨ÁöÑAI</a>„ÄÇËøô‰πüÊÑèÂë≥ÁùÄÔºåÊúâ‰∫Ü‰∫∫Â∑•Êô∫ËÉΩÔºå<a href="https://www.wired.com/story/simpsons-voice-actors-ai-deepfakes/">„ÄäËæõÊôÆÊ£Æ‰∏ÄÂÆ∂„ÄãÂèØ‰ª•Êó†ÈôêÊúüÂú∞Êí≠Êîæ‰∏ãÂéª</a>„ÄÇ‰ΩÜËøô‰πüÂºïÂá∫‰∫Ü‰∏Ä‰∏™Êõ¥Â§ßÁöÑÈóÆÈ¢òÔºå‰∏Ä‰∏™Âêç‰∫∫Á≠æÁΩ≤‰∫ÜÂú®Â™í‰Ωì‰∏≠‰ΩøÁî®ÂÖ∂Ê®°ÂûãÁöÑÊùÉÂà©ÔºåËøôÊòØÂê¶È¢ÑÁ§∫ÁùÄÊàë‰ª¨ÁöÑÊú™Êù•‰∏çÂÜçÈúÄË¶Å‰∫∫Á±ªÊºîÂëòÔºüÂÖ®ÁêÉÂêÑÂú∞ÁöÑÊºîÂëòÂ∑•‰ºöÈÉΩÂú®Á´≠ÂäõËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>Âè¶‰∏Ä‰∏™‰æãÂ≠êÊòØ‚Äù<a href="https://losttapesofthe27club.com/">Lost Tapes of the 27 Club</a>‚ÄúÔºåËøôÊòØ‰∏Ä‰∏™Âà©Áî®AIÁîüÊàêÊñ∞Êõ≤ÁõÆÁöÑÈü≥‰πêÈ°πÁõÆÔºåËøô‰∫õÊõ≤ÁõÆÊù•Ëá™‰∏éÁ≤æÁ•ûÂÅ•Â∫∑ÈóÆÈ¢ò‰ΩúÊñó‰∫âÂπ∂Âú®27Â≤ÅÂéª‰∏ñÁöÑÈü≥‰πêÂÆ∂ÔºåÂÖ∂‰∏≠ÂåÖÊã¨CobainÔºåJimi HendrixÔºåJim MorrisonÂíåAmy Winehouse„ÄÇ</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/muT6x7VXx5I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<h2 id="Who‚Äôs-fighting-back"><a href="#Who‚Äôs-fighting-back" class="headerlink" title="Who‚Äôs fighting back?"></a>Who‚Äôs fighting back?</h2><p>ËøôÊòØÂá†‰∏™ÊîøÁ≠ñÂíåÂÆûÈ™åÁöÑ‰æãÂ≠êÔºåËØïÂõæÂáèËΩª deepfakes ÈÄ†ÊàêÁöÑ‰º§ÂÆ≥</p>
<h3 id="Policies-and-frameworks"><a href="#Policies-and-frameworks" class="headerlink" title="Policies and frameworks"></a>Policies and frameworks</h3><ul>
<li><a href="https://www.congress.gov/bill/116th-congress/house-bill/3230">Deepfakes Accountability Act</a>: Âú®2019Âπ¥ÔºåÁæéÂõΩ‰ºóËÆÆÂëò Yvette ClarkeÊèêÂá∫‰∫ÜËøôÈ°πÊ≥ïÊ°àÔºå‰ª•ÊâìÂáª deepfake Ëâ≤ÊÉÖÂÜÖÂÆπ</li>
<li><a href="https://leginfo.legislature.ca.gov/faces/billTextClient.xhtml?bill_id=201920200AB730">AB 730</a>, ÁæéÂõΩÂ∑ûÈïø Gavin Newsom Á≠æÁΩ≤‰∫ÜÂä†Â∑ûÁ¨¨ 730 Âè∑Ê≥ïÊ°àÔºåÂç≥‚Äú<a href="https://www.wired.com/story/opinion-californias-anti-deepfake-law-is-far-too-feeble/">Anti-Deepfake Bill</a>‚ÄùÔºå‰ΩøÂÖ∂Êàê‰∏∫Ê≥ïÂæãÁî®Êù•ÈÅèÂà∂2020Âπ¥Â§ßÈÄâÂâçÁöÑ deepfakes ‰º†Êí≠</li>
<li><a href="https://nvlpubs.nist.gov/nistpubs/ai/NIST.AI.100-1.pdf">The Aritificial Intelligence Risk Management Framework</a>ÔºöNISTÁöÑËøô‰∏™Ê°ÜÊû∂‰∏∫ÁÆ°ÁêÜ<a href="https://www.nist.gov/news-events/news/2023/01/nist-risk-management-framework-aims-improve-trustworthiness-artificial">AIÁöÑËÆ∏Â§öÈ£éÈô©</a>Êèê‰æõ‰∫ÜÊåáÂØº</li>
</ul>
<h3 id="New-Turing-tests"><a href="#New-Turing-tests" class="headerlink" title="New Turing tests"></a>New Turing tests</h3><p>Ê£ÄÊµãAIÁºñÂÜôÁöÑÂÜÖÂÆπÁöÑÊúÄ‰Ω≥ÊñπÊ≥ï‰πã‰∏ÄÂ∞±ÊòØËÆ≠ÁªÉÂè¶‰∏Ä‰∏™AIÊù•ÂÅöËøô‰ª∂‰∫ãÔºå‰ª•‰∏ãÊòØÂá†‰∏™‰æãÂ≠êÔºö</p>
<ul>
<li><a href="https://gptzero.me/">GPTZero</a></li>
<li><a href="https://techcrunch.com/2022/12/10/openais-attempts-to-watermark-ai-text-hit-limits/">ÁªôAIÁîüÊàêÁöÑÂÜÖÂÆπÂä†Ê∞¥Âç∞</a>Ôºå‰ΩúËÄÖ Scott AaronsonÔºå Open AIÔºö</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/fc-cHk9yFpg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

<ul>
<li><a href="https://openai-openai-detector--mqlck.hf.space/">Jong Wook</a> Âíå <a href="https://detectgpt.ericmitchell.ai/">Eric Mitchell</a> ÁöÑ GPT2 Êé¢ÊµãÂô®</li>
</ul>
<p>ÂêÑÂõΩÊîøÂ∫ú‰πüÂú®Á´ûÁõ∏ËµÑÂä©ËÉΩÂ§üËæ®Âà´AIÁîüÊàêÂÜÖÂÆπÁöÑÂ∑•ÂÖ∑„ÄÇ‰æãÂ¶ÇÔºåÁîüÊàêÂºèAIÂÖ¨Âè∏DeepMediaÂ∞±Ëé∑Âæó‰∫Ü‰∏ÄÁ¨îÁæéÂõΩÊã®Ê¨æÔºåÁî®‰∫éÂºÄÂèë‰∫∫Â∑•Êô∫ËÉΩËæÖÂä©ÊäÄÊúØÔºå‰ª•ÂâîÈô§ÈîôËØØ‰ø°ÊÅØÔºåÊª°Ë∂≥ DoD ÁöÑÂõΩÂÆ∂ÂÆâÂÖ®ÈúÄÊ±Ç„ÄÇ</p>
<hr>
<p>Êú¨ÊñáÂºÄÂ§¥ÁöÑ‰∫∫Â∑•Êô∫ËÉΩÁîüÊàêÂõæÁâáÈóÆÈ¢òÁöÑÁ≠îÊ°àÊòØÂ∑¶ËæπÁöÑÂ©¥ÂÑø„ÄÇÊù•Ê∫êÔºö<a href="https://loremfaces.com/">Lorem Faces</a> Âíå <a href="https://thispersonexists.net/">ThisPersonExists</a></p>
<p>Âú®Â∞ùËØïËøô‰∏™ÁªÉ‰π†ÁöÑ‰∫∫‰∏≠ÔºåÊúâ50%ÁöÑ‰∫∫Á≠îÊ°àÈîôËØØÔºåËÄå100%ÁöÑ‰∫∫ÊÑüÂà∞Âõ∞ÊÉë„ÄÇÊàë‰ª¨‰∏çÂÜçÊúâËÉΩÂäõÂàÜËæ®AIÁîüÊàêÁöÑÂÜÖÂÆπÔºå<a href="https://www.wsj.com/articles/chatgpt-creator-releases-tool-to-detect-ai-generated-text-calls-it-unreliable-11675204820">‰∏ìÂÆ∂‰ª¨‰πüÂØπÊàë‰ª¨ÊòØÂê¶ÊúâËÉΩÂäõÂàÜËæ®AIÁîüÊàêÁöÑÂÜÖÂÆπÊåÅÊÄÄÁñëÊÄÅÂ∫¶</a>„ÄÇÁÑ∂ËÄåÔºåÈÄöËøáÂØπAIÁîüÊàêÂ∑•ÂÖ∑ËøõË°åÈÅìÂæ∑ËÆæËÆ°ÔºåÂÜçÂä†‰∏äÂπøÊ≥õÁöÑËÆ§Áü•ÔºåÊàë‰ª¨ÂèØ‰ª•ÂèëÂ±ïÂá∫‰∏ÄÁßçÊñ∞ÁöÑËÉΩÂäõÔºöÂØπÊàë‰ª¨ÊâÄÁúãÂà∞ÁöÑÂÜÖÂÆπÊèêÂá∫Ë¥®ÁñëÁöÑËÉΩÂäõ„ÄÇ</p>
<blockquote>
<p>Something strange is afoot. In the hyper-connected, data-deluged present, schisms emerge in mass perception. We‚Äôre all looking at the same skies, but we‚Äôre seeing different things. Where I see covert deportations and secret surveillance planes ‚Äî supported by flight logs and ADS-B data, newspaper reports and Freedom of Information requests ‚Äî others see a global conspiracy to doctor the atmosphere, to control minds, to enslave populations, or to reengineer the climate for naive or nefarious purposes.<br>‚Äî James Bridle, New Dark Age</p>
</blockquote>
<p>ÊúâÂÖ≥Ê≠§‰∏ªÈ¢òÂèäÂÖ∂‰ªñ‰∏ªÈ¢òÁöÑÊõ¥Â§öËµÑÊ∫êÔºåËØ∑Êü•ÈòÖÊú¨ÊâãÂÜå<a href="https://arvindsanjeev.notion.site/arvindsanjeev/The-Handbook-of-AI-s-Unintended-Consequences-720cda3d8cec49dc88807641157a0bba">„ÄäAI‚Äôs unintended consequences„Äã</a>„ÄÇÊú¨ÊñáÊòØÊé¢ËÆ® <a href="https://medium.com/@arvindsanjeev/ai-sociopaths-and-their-unintended-consequences-bf6f19012e4f">unintended consequences of AI ÂõõÈÉ®Á≥ªÂàóÊñáÁ´†</a>‰∏≠ÁöÑÁ¨¨‰∏ÄÁ´†</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>AI</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëReactivity in Depth</title>
    <url>/2023/08/18/%E3%80%90%E7%BF%BB%E3%80%91Reactivity-in-Depth/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://vuejs.org/guide/extras/reactivity-in-depth.html">Reactivity in Depth</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Vue ÊúÄ‰∏é‰ºó‰∏çÂêåÁöÑÂäüËÉΩ‰πã‰∏ÄÂ∞±ÊòØÂÖ∂Èöæ‰ª•ÂØüËßâÁöÑÂìçÂ∫îÂºèÁ≥ªÁªü„ÄÇVueÁöÑÁªÑ‰ª∂Áä∂ÊÄÅÈÉΩÊòØÁî±javascriptÂØπË±°ÁªÑÊàê„ÄÇÂΩì‰Ω†‰øÆÊîπÂÆÉ‰ª¨Êó∂ÔºåËßÜÂõæÂ∞±‰ºöÊõ¥Êñ∞„ÄÇËøôÂ∞±‰ΩøÁä∂ÊÄÅÁÆ°ÁêÜÂèòÂæóÁÆÄÂçïÁõ¥ËßÇÔºå‰ΩÜÂ¶ÇÊûúËÉΩ‰∫ÜËß£ÂÆÉÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ‰πüÂèØ‰ª•ÈÅøÂÖç‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÈóÆÈ¢ò„ÄÇÂú®Êú¨ËäÇ‰∏≠ÔºåÊàë‰ª¨‰ºöÊ∑±ÂÖ•Êé¢ËÆ®VueÂìçÂ∫îÂºèÁ≥ªÁªüÁöÑ‰∏Ä‰∫õÂ∫ïÂ±ÇÁªÜËäÇ„ÄÇ</p>
<h2 id="What-is-Reactivity"><a href="#What-is-Reactivity" class="headerlink" title="What is Reactivity?"></a>What is Reactivity?</h2><p>ËøëÊù•ÔºåËøô‰∏™ÊúØËØ≠Âú®ÁºñÁ®ãÁöÑËÆ®ËÆ∫‰∏≠Âá∫Áé∞È¢ëÁéáÂæàÈ´òÔºå‰ΩÜÂΩì‰∫∫‰ª¨ËØ¥Ëøô‰∏™ËØçÊó∂ÊòØ‰ªÄ‰πàÊÑèÊÄùÂë¢ÔºüÂìçÂ∫îÂºèÊú¨Ë¥®‰∏äÊòØ‰∏ÄÁßçÁºñÁ®ãËåÉÂºèÔºåÂÆÉÂÖÅËÆ∏Êàë‰ª¨‰ª•Â£∞ÊòéÁöÑÊñπÂºèÂ§ÑÁêÜÂèòÂåñ„ÄÇ‰∏Ä‰∏™ÁªèÂ∏∏ÊãøÊù•Â±ïÁ§∫ÁöÑ‰æãÂ≠êÂ∞±ÊòØExcelË°®Ê†º</p>
<table>
<thead>
<tr>
<th></th>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>1</td>
<td></td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>ËøôÈáåÁöÑÂçïÂÖÉÊ†ºA2ÊòØÈÄöËøáÂÖ¨Âºè A0 + A1 ÂÆö‰πâÁöÑ(‰Ω†ÂèØ‰ª•ÁÇπÂáªA2Êü•ÁúãÊàñÁºñËæëÂÖ¨Âºè)ÔºåÊâÄ‰ª•ÂæóÂá∫ÁªìÊûú‰∏∫3„ÄÇÊ≤°ÊúâÈóÆÈ¢òÔºå‰ΩÜÂ¶ÇÊûúÊõ¥Êñ∞A0ÊàñËÄÖA1Ôºå‰Ω†‰ºöÂèëÁé∞A2‰πü‰ºöËá™Âä®Êõ¥Êñ∞„ÄÇ</p>
<p>ÂΩìÁÑ∂javascriptÈÄöÂ∏∏‰∏çÊòØËøôÊ†∑Â∑•‰Ωú„ÄÇÂ¶ÇÊûúÊàë‰ª¨Áî®javascriptÂÜô‰∏Ä‰∏™Áõ∏‰ººÁöÑÈÄªËæëÔºö</p>
<pre><code class="highlight js"><span class="keyword">let</span> <span class="variable constant_">A0</span> = <span class="number">1</span>
<span class="keyword">let</span> <span class="variable constant_">A1</span> = <span class="number">2</span>
<span class="keyword">let</span> <span class="variable constant_">A2</span> = <span class="variable constant_">A0</span> + <span class="variable constant_">A1</span>

<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">A2</span>) <span class="comment">// 3</span>

<span class="variable constant_">A0</span> = <span class="number">2</span>
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable constant_">A2</span>) <span class="comment">// Still 3</span></code></pre>

<p>ÂΩìÊàë‰ª¨ÊîπÂèòA0Êó∂ÔºåA2‰∏ç‰ºöËá™Âä®ÊîπÂèò„ÄÇ</p>
<p>ÈÇ£‰πàÔºåËØ•Â¶Ç‰ΩïÁî®javascriptÂÆûÁé∞Ëøô‰∏ÄÂäüËÉΩÂë¢ÔºüÈ¶ñÂÖàÔºå‰∏∫‰∫ÜÈáçÊñ∞ËøêË°åÊõ¥Êñ∞A2ÁöÑ‰ª£Á†ÅÔºåÊàë‰ª¨ÂèØ‰ª•Áî®‰∏Ä‰∏™ÂáΩÊï∞Êù•Â∞ÅË£ÖÂÆÉÔºö</p>
<pre><code class="highlight js"><span class="keyword">let</span> <span class="variable constant_">A2</span>

<span class="keyword">function</span> <span class="title function_">update</span>(<span class="params"></span>) &#123;
  <span class="variable constant_">A2</span> = <span class="variable constant_">A0</span> + <span class="variable constant_">A1</span>
&#125;</code></pre>

<p>ÁÑ∂ÂêéÔºåÊàë‰ª¨ÈúÄË¶ÅÂÆö‰πâÂá†‰∏™ÊúØËØ≠Ôºö</p>
<ul>
<li>È¶ñÂÖà<code>update()</code>ÂáΩÊï∞‰ºö‰∫ßÁîüÂâØ‰ΩúÁî®ÔºåÁÆÄÁß∞‚Äúeffect‚ÄùÔºåÂõ†‰∏∫ÂÆÉ‰ºö‰øÆÊîπÁ®ãÂ∫èÁöÑÁä∂ÊÄÅ„ÄÇ</li>
<li><code>A0</code>Âíå<code>A1</code>ÊòØ effect ÁöÑ‰æùËµñÈ°πÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÁöÑÂÄºÊòØÁî®‰∫éÊâßË°åeffect„ÄÇÂèØ‰ª•ËØ¥ÔºåeffectÊòØÂÖ∂‰æùËµñÈ°πÁöÑËÆ¢ÈòÖËÄÖ</li>
</ul>
<p>Êàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™È≠îÊ≥ïÂáΩÊï∞ÔºåÂèØ‰ª•Âú®<code>A0</code>Êàñ<code>A1</code>ÂèëÁîüÂèòÂåñÊó∂Ë∞ÉÁî®<code>update()</code></p>
<pre><code class="highlight js"><span class="title function_">whenDepsChange</span>(update)</code></pre>

<p>Ëøô‰∏™<code>whenDepsChange()</code>ÂáΩÊï∞Êúâ‰ª•‰∏ã‰ªªÂä°Ôºö</p>
<ol>
<li>ËøΩË∏™ÂèòÈáè‰ΩïÊó∂Ë¢´ËØªÂèñ„ÄÇÊØîÂ¶ÇÔºåÂú®ËÆ°ÁÆóË°®ËææÂºè<code>A0 + A1</code>Êó∂Ôºå<code>A0</code>Âíå<code>A1</code>ÈÉΩ‰ºöË¢´ËØªÂèñ„ÄÇ</li>
<li>Â¶ÇÊûú‰∏Ä‰∏™ÂèòÈáèÂú®ÂΩìÂâçËøêË°åÁöÑeffect‰∏≠Ë¢´ËØªÂèñÔºåÂàôËØ•effectÂ∞±‰∏∫ËØ•ÂèòÈáèÁöÑËÆ¢ÈòÖËÄÖ„ÄÇÊØîÂ¶ÇÔºåÁî±‰∫é<code>A0</code>Âíå<code>A1</code>Âú®<code>update()</code>ÊâßË°åÊó∂Ë¢´ËØªÂèñÔºåÂõ†Ê≠§<code>update()</code>Âú®Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî®ÂêéÂ∞±Êàê‰∏∫‰∫Ü<code>A0</code>Âíå<code>A1</code>ÁöÑËÆ¢ÈòÖËÄÖ</li>
<li>ÂΩìÂèòÈáèÂèëÁîüÂèòÂåñÊó∂ËøõË°åÊ£ÄÊµã„ÄÇÊØîÂ¶ÇÔºåÂΩì<code>A0</code>Ë¢´‰øÆÊîπ‰∏∫‰∏Ä‰∏™Êñ∞ÂÄºÊó∂ÔºåÈÄöÁü•ÂÖ∂ÊâÄÊúâËÆ¢ÈòÖ‰∫ÜÁöÑeffectÈáçÊñ∞ÊâßË°å„ÄÇ</li>
</ol>
<h2 id="How-Reactivity-Works-in-Vue"><a href="#How-Reactivity-Works-in-Vue" class="headerlink" title="How Reactivity Works in Vue"></a>How Reactivity Works in Vue</h2><p>Êàë‰ª¨Êó†Ê≥ïÂÉèÁ§∫‰æã‰∏≠ÈÇ£Ê†∑ËøΩË∏™Â±ÄÈÉ®ÂèòÈáèÁöÑËØªÂÜô„ÄÇÂú®ÂéüÁîüÁöÑjavascript‰∏≠Ê≤°ÊúâËøôÊ†∑ÁöÑÊú∫Âà∂„ÄÇ‰ΩÜÊàë‰ª¨ÂèØ‰ª•ÂÅöÂà∞ËøΩË∏™ÂØπË±°Â±ûÊÄßÁöÑËØªÂÜô„ÄÇ</p>
<p>Âú®javascript‰∏≠Êúâ‰∏§ÁßçÊã¶Êà™Â±ûÊÄßËÆøÈóÆÁöÑÊñπÊ≥ïÔºö<code>getter</code>&#x2F;<code>setters</code>Âíå<code>proxies</code>„ÄÇÁî±‰∫éÊµèËßàÂô®ÊîØÊåÅÁöÑÈôêÂà∂ÔºåVue2‰∏≠Âè™ËÉΩ‰ΩøÁî®<code>getter</code>&#x2F;<code>setters</code>„ÄÇÂú®Vue3‰∏≠Ôºå<code>proxy</code>Áî®‰∫éÂìçÂ∫îÂºèÂØπË±°Ôºå<code>getter</code>&#x2F;<code>setter</code>Áî®‰∫é<code>refs</code>„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∫õËØ¥ÊòéÂÆÉ‰ª¨Â¶Ç‰ΩïÂ∑•‰ΩúÁöÑ‰º™‰ª£Á†ÅÔºö</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">obj</span>) &#123;
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj, &#123;
    <span class="title function_">get</span>(<span class="params">target, key</span>) &#123;
      <span class="title function_">track</span>(target, key)
      <span class="keyword">return</span> target[key]
    &#125;,
    <span class="title function_">set</span>(<span class="params">target, key, value</span>) &#123;
      target[key] = value
      <span class="title function_">trigger</span>(target, key)
    &#125;
  &#125;)
&#125;

<span class="keyword">function</span> <span class="title function_">ref</span>(<span class="params">value</span>) &#123;
  <span class="keyword">const</span> refObject = &#123;
    <span class="keyword">get</span> <span class="title function_">value</span>() &#123;
      <span class="title function_">track</span>(refObject, <span class="string">&#x27;value&#x27;</span>)
      <span class="keyword">return</span> value
    &#125;,
    <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">newValue</span>) &#123;
      value = newValue
      <span class="title function_">trigger</span>(refObject, <span class="string">&#x27;value&#x27;</span>)
    &#125;
  &#125;
  <span class="keyword">return</span> refObject
&#125;</code></pre>

<blockquote>
<p>TIP: ËøôÈáåÂíå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁâáÊÆµÊòØ‰∏∫‰∫Ü‰ª•ÊúÄÁÆÄÂçïÁöÑÂΩ¢ÂºèËß£ÈáäÊ†∏ÂøÉÊ¶ÇÂøµÔºåÂõ†Ê≠§ÁúÅÁï•‰∫ÜËÆ∏Â§öÁªÜËäÇÔºå‰πüÂøΩÁï•‰∫ÜËæπÁïåÊÉÖÂÜµ„ÄÇ</p>
</blockquote>
<p>‰ª•‰∏äÂ∞±Ëß£Èáä‰∫ÜÊàëÂú®Âü∫Á°ÄÈÉ®ÂàÜËÆ®ËÆ∫ËøáÁöÑÂìçÂ∫îÂºèÂØπË±°ÁöÑ‰∏Ä‰∫õÂ±ÄÈôêÊÄßÔºö</p>
<ul>
<li>ÂΩì‰Ω†Â∞Ü‰∏Ä‰∏™ÂìçÂ∫îÂºèÂØπË±°ÁöÑÂ±ûÊÄßËµãÂÄºÊàñËß£ÊûÑÂà∞‰∏Ä‰∏™Êú¨Âú∞ÂèòÈáèÊó∂ÔºåËØ•ÂèòÈáèÁöÑËÆøÈóÆÂíåËµãÂÄºÂ∞±‰∏çÊòØÂìçÂ∫îÂºèÁöÑ‰∫ÜÔºåÂõ†‰∏∫ÂÆÉ‰∏çÂÜçËß¶ÂèëÊ∫êÂØπË±°‰∏äÁöÑ<code>get</code>&#x2F;<code>set</code>ÁöÑ‰ª£ÁêÜ„ÄÇËØ∑Ê≥®ÊÑèÔºåËøôÁßçÊñ≠ÂºÄÂè™ÂΩ±ÂìçÂèòÈáèÁªëÂÆöÔºåÂ¶ÇÊûúÂèòÈáèÊåáÂêë‰∏Ä‰∏™ÈùûÂéüÂßãÂÄºÔºåÈÇ£‰πàËØ•ÂØπË±°ÁöÑÊõ¥Êîπ‰ªçÊòØÂìçÂ∫îÂºèÁöÑ„ÄÇ</li>
<li>‰ΩøÁî®<code>proxy</code>ËøîÂõûÁöÑÂìçÂ∫îÂºèÂØπË±°ÔºåËôΩÁÑ∂‰∏éÂéüÂßãÂØπË±°Êó†ÂºÇÔºå‰ΩÜÂ¶ÇÊûúÊàë‰ª¨‰ΩøÁî® <code>===</code> Êìç‰ΩúÁ¨¶Â∞ÜÂÖ∂ÂØπÊØîÂºèÔºåËøòÊòØËÉΩÂ§üÊØîËæÉÂá∫‰∏çÂêå</li>
</ul>
<p>Âú®<code>track()</code>‰∏≠ÔºåÊàë‰ª¨‰ºöÊ£ÄÊü•ÂΩìÂâçÊòØÂê¶ÊúâÊ≠£Âú®ËøêË°åÁöÑeffect„ÄÇÂ¶ÇÊûúÊúâÔºåÊàë‰ª¨‰ºöÊü•ÊâæÂà∞‰∏Ä‰∏™Â≠òÂÇ®ÊâÄÊúâËøΩË∏™‰∫ÜËØ•Â±ûÊÄßÁöÑËÆ¢ÈòÖÁöÑSetÔºåÂπ∂Â∞ÜÂÖ∂Ê∑ªÂä†Âà∞Set‰∏≠Ôºö</p>
<pre><code class="highlight js"><span class="comment">// This will be set right before an effect is about</span>
<span class="comment">// to be run. We&#x27;ll deal with this later.</span>
<span class="keyword">let</span> activeEffect

<span class="keyword">function</span> <span class="title function_">track</span>(<span class="params">target, key</span>) &#123;
  <span class="keyword">if</span> (activeEffect) &#123;
    <span class="keyword">const</span> effects = <span class="title function_">getSubscribersForProperty</span>(target, key)
    effects.<span class="title function_">add</span>(activeEffect)
  &#125;
&#125;</code></pre>

<p>effectËÆ¢ÈòÖ‰ºö‰ª•ËøôÁßçÊï∞ÊçÆÁªìÊûÑ<code>WeakMap&lt;target, Map&lt;key, Set&lt;effect&gt;&gt;</code>Â≠òÂÇ®Âú®ÂÖ®Â±Ä„ÄÇÂ¶ÇÊûúÊüê‰∏™Â±ûÊÄßÊ≤°ÊúâÊâæÂà∞effect SetÔºåËØ¥ÊòéÊòØÈ¶ñÊ¨°ËøΩË∏™ÔºåÂàô‰ºöÂàõÂª∫‰∏Ä‰∏™effect Set„ÄÇÁÆÄËÄåË®Ä‰πãÔºåËøôÂ∞±ÊòØ<code>getSubscribersForProperty()</code>ÂáΩÊï∞ÁöÑ‰ΩúÁî®„ÄÇ‰∏∫ÁÆÄÂçïËµ∑ËßÅÔºåÊàë‰ª¨Ë∑≥ËøáÂÖ∂ÁªÜËäÇ„ÄÇ</p>
<p>Âú®<code>trigger()</code>‰∏≠ÔºåÊàë‰ª¨ÂÜçÊ¨°Êü•ÊâæËØ•Â±ûÊÄßÁöÑeffectËÆ¢ÈòÖ„ÄÇ‰ΩÜËøôÊ¨°Êàë‰ª¨‰ºöÊâßË°åÂÆÉ‰ª¨Ôºö</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">trigger</span>(<span class="params">target, key</span>) &#123;
  <span class="keyword">const</span> effects = <span class="title function_">getSubscribersForProperty</span>(target, key)
  effects.<span class="title function_">forEach</span>(<span class="function">(<span class="params">effect</span>) =&gt;</span> <span class="title function_">effect</span>())
&#125;</code></pre>

<p>Áé∞Âú®Êàë‰ª¨ÂõûÂà∞<code>whenDepsChange()</code>ÂáΩÊï∞‰∏≠Ôºö</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">whenDepsChange</span>(<span class="params">update</span>) &#123;
  <span class="keyword">const</span> <span class="title function_">effect</span> = (<span class="params"></span>) =&gt; &#123;
    activeEffect = effect
    <span class="title function_">update</span>()
    activeEffect = <span class="literal">null</span>
  &#125;
  <span class="title function_">effect</span>()
&#125;</code></pre>

<p>ÂÆÉÊääÂéüÂßãÁöÑ<code>update</code>ÂáΩÊï∞Â∞ÅË£ÖÂú®‰∏Ä‰∏™effect‰∏≠ÔºåÁÑ∂ÂêéËØ•effect‰ºöÂú®ÂÆûÈôÖÊõ¥Êñ∞‰πãÂâçÂ∞ÜËá™Â∑±ËÆæÁΩÆ‰∏∫activeEffect„ÄÇËøôÊ†∑Â∞±ËÉΩÂú®Êõ¥Êñ∞ËøáÁ®ã‰∏≠Ë∞ÉÁî®<code>track()</code>Êù•ÂÆö‰ΩçÂΩìÂâçÁöÑactive effect„ÄÇ</p>
<p>Âú®ËøôÈáåÔºåÊàë‰ª¨Â∑≤ÁªèÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂèØ‰ª•Ëá™Âä®ËøΩË∏™ÂÖ∂‰æùËµñÂÖ≥Á≥ªÁöÑeffectÔºåÂπ∂Âú®‰æùËµñÂÖ≥Á≥ªÂèëÁîüÂèòÂåñÊó∂ÈáçÊñ∞ËøêË°å„ÄÇÊàë‰ª¨Áß∞‰πã‰∏∫ÂìçÂ∫îÂºèÂâØ‰ΩúÁî®„ÄÇ</p>
<p>VueÊèê‰æõ‰∏Ä‰∏™ÂèØ‰ª•ÂàõÂª∫ÂìçÂ∫îÂºèÂâØ‰ΩúÁî®ÁöÑAPIÔºö<code>watchEffect()</code>„ÄÇ‰∫ãÂÆû‰∏äÔºå‰Ω†ÂèØËÉΩÂ∑≤ÁªèÊ≥®ÊÑèÂà∞ÂÆÉÁöÑÂ∑•‰ΩúÂéüÁêÜ‰∏éÁ§∫‰æã‰∏≠ÁöÑ<code>whenDepsChange()</code>ÈùûÂ∏∏Áõ∏‰ºº„ÄÇÁé∞Âú®ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂÆûÈôÖÁöÑVue APIËøêË°åÊúÄÂàùÁöÑÁ§∫‰æãÔºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; ref, watchEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">const</span> <span class="variable constant_">A0</span> = <span class="title function_">ref</span>(<span class="number">0</span>)
<span class="keyword">const</span> <span class="variable constant_">A1</span> = <span class="title function_">ref</span>(<span class="number">1</span>)
<span class="keyword">const</span> <span class="variable constant_">A2</span> = <span class="title function_">ref</span>()

<span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;
  <span class="comment">// tracks A0 and A1</span>
  <span class="variable constant_">A2</span>.<span class="property">value</span> = <span class="variable constant_">A0</span>.<span class="property">value</span> + <span class="variable constant_">A1</span>.<span class="property">value</span>
&#125;)

<span class="comment">// triggers the effect</span>
<span class="variable constant_">A0</span>.<span class="property">value</span> = <span class="number">2</span></code></pre>

<p>‰ΩøÁî®ÂìçÂ∫îÂºèÂâØ‰ΩúÁî®Êù•ÊîπÂèòrefÂπ∂‰∏çÊòØÊúÄÊúâË∂£ÁöÑÁî®‰æãÔºå‰∫ãÂÆû‰∏äÔºå‰ΩøÁî®ËÆ°ÁÆóÂ±ûÊÄß‰ºö‰ΩøÂÆÉÊõ¥ÂÖ∑ÊúâÂ£∞ÊòéÊÄßÔºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">const</span> <span class="variable constant_">A0</span> = <span class="title function_">ref</span>(<span class="number">0</span>)
<span class="keyword">const</span> <span class="variable constant_">A1</span> = <span class="title function_">ref</span>(<span class="number">1</span>)
<span class="keyword">const</span> <span class="variable constant_">A2</span> = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> <span class="variable constant_">A0</span>.<span class="property">value</span> + <span class="variable constant_">A1</span>.<span class="property">value</span>)

<span class="variable constant_">A0</span>.<span class="property">value</span> = <span class="number">2</span></code></pre>

<p>Âú®ÂÜÖÈÉ®Ôºåcomputed‰ºöÈÄöËøáÂìçÂ∫îÂºèÂâØ‰ΩúÁî®Êù•ÁÆ°ÁêÜÂ§±ÊïàÂíåÈáçÊñ∞ËÆ°ÁÆóÁöÑËøáÁ®ã„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåÊúÄÊúâÁî®‰∏îÂ∏∏ËßÅÁöÑÂìçÂ∫îÂºèÁ§∫‰æãÊòØ‰ªÄ‰πàÂë¢ÔºüÂ∞±ÊòØÊõ¥Êñ∞DOMÔºÅÊàë‰ª¨ÂèØ‰ª•ÊâßË°å‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂìçÂ∫îÂºèÊ∏≤Êüì‰æãÂ≠êÔºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; ref, watchEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)

<span class="title function_">watchEffect</span>(<span class="function">() =&gt;</span> &#123;
  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="string">`count is: <span class="subst">$&#123;count.value&#125;</span>`</span>
&#125;)

<span class="comment">// updates the DOM</span>
count.<span class="property">value</span>++</code></pre>

<p>‰∫ãÂÆû‰∏äÔºåËøô‰∏éVue‰øùÊåÅÁä∂ÊÄÅÂíåDOMÂêåÊ≠•ÁöÑÊñπÂºèÈùûÂ∏∏Êé•ËøëÔºåÊØè‰∏™ÁªÑ‰ª∂ÂÆû‰æãÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™ÂìçÂ∫îÂºèÂâØ‰ΩúÁî®Êù•Ê∏≤ÊüìÂíåÊõ¥Êñ∞DOM„ÄÇÂΩìÁÑ∂VueÁªÑ‰ª∂‰ΩøÁî®‰∫ÜÊØîinnerHTMLÊõ¥È´òÊïàÁöÑÊñπÂºèÊù•Êõ¥Êñ∞DOM„ÄÇËøô‰ºöÂú®Ê∏≤ÊüìÊú∫Âà∂‰∏ÄËäÇ‰∏≠ËÆ®ËÆ∫„ÄÇ</p>
<h2 id="Runtime-vs-Compile-time-Reactivity"><a href="#Runtime-vs-Compile-time-Reactivity" class="headerlink" title="Runtime vs. Compile-time Reactivity"></a>Runtime vs. Compile-time Reactivity</h2><p>VueÁöÑÂìçÂ∫îÂºèÁ≥ªÁªü‰∏ªË¶ÅÂü∫‰∫éËøêË°åÊó∂ÔºöË∑üË∏™ÂíåËß¶ÂèëÈÉΩÊòØ‰ª£Á†ÅÁõ¥Êé•Âú®ÊµèËßàÂô®ËøêË°åÊó∂ËøõË°åÁöÑ„ÄÇËøêË°åÊó∂ÁöÑ‰ºòÁÇπÊòØÊó†ÈúÄÊûÑÂª∫Ê≠•È™§Âç≥ÂèØËøêË°åÔºåËÄå‰∏îËæπÁïåÊÉÖÂÜµËæÉÂ∞ë„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåËøô‰πü‰ΩøÂÆÉÂèóÂà∞javascriptËØ≠Ê≥ïÁöÑÂà∂Á∫¶ÔºåÂØºËá¥ÈúÄË¶Å refsËøôÊ†∑ÁöÑÂÄºÂÆπÂô®</p>
<p>ÂÉè‰∏Ä‰∫õÊ°ÜÊû∂ÔºåÂ¶ÇSvelteÔºåÈÄâÊã©Âú®ÁºñËØëÈò∂ÊÆµÂÆûÁé∞ÂìçÂ∫îÂºèÊù•ÂÖãÊúçËøô‰∫õÈôêÂà∂ÔºåÂÆÉÈÄöËøáÂàÜÊûêÂíåËΩ¨Êç¢‰ª£Á†ÅÊù•Ê®°ÊãüÂìçÂ∫îÂºè„ÄÇÁºñËØëÈò∂ÊÆµÂÖÅËÆ∏Ê°ÜÊû∂ÊîπÂèòjavascriptÊú¨Ë∫´ÁöÑËØ≠‰πâÔºåÊØîÂ¶ÇÔºåÈöêÂºèÊ≥®ÂÖ•‰ª£Á†ÅÊù•ÊâßË°å‰æùËµñÊÄßÂàÜÊûêÔºåÂπ∂Âú®ËÆøÈóÆÊú¨Âú∞ÂÆö‰πâÁöÑÂèòÈáèÊó∂Ëß¶Âèë„ÄÇËøôÊ†∑ÂÅöÁöÑÁº∫ÁÇπÊòØÔºåËøôÁßçËΩ¨Êç¢ÈúÄË¶Å‰∏Ä‰∏™ÊûÑÂª∫Ê≠•È™§ÔºåËÄåÊîπÂèòjavascriptËØ≠‰πâÊú¨Ë¥®‰∏äÂ∞±ÊòØÂàõÈÄ†‰∏ÄÁßçÁúãËµ∑Êù•ÂÉèjavascript‰ΩÜÁºñËØëÊàêÂè¶‰∏ÄÁßçËØ≠Ë®ÄÁöÑËØ≠Ë®Ä„ÄÇ</p>
<p>VueÂõ¢ÈòüÊõæÈÄöËøá‰∫Ü‰∏ÄÈ°πÂêç‰∏∫ <a href="https://vuejs.org/guide/extras/reactivity-transform.html">Reactivity Transform</a> ÁöÑÂÆûÈ™åÊÄßÂäüËÉΩÊé¢Á¥¢ËøáËøô‰∏™ÊñπÂêëÔºå‰ΩÜÊàë‰ª¨ÊúÄÂêéËøòÊòØÂõ†‰∏∫<a href="https://github.com/vuejs/rfcs/discussions/369#discussioncomment-5059028">Ëøô‰∏™ÂéüÂõ†</a>ÔºåËÆ§‰∏∫‰ªñ‰∏çÈÄÇÂêàËøô‰∏™È°πÁõÆ„ÄÇ</p>
]]></content>
      <tags>
        <tag>Vue</tag>
        <tag>Translate</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëRender Functions &amp; JSX</title>
    <url>/2023/08/31/%E3%80%90%E7%BF%BB%E3%80%91Render-Functions-JSX/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://vuejs.org/guide/extras/render-function.html">Render Functions &amp; JSX</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Vue Êé®ËçêÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ã‰ΩøÁî®Ê®°ÊùøÊù•ÊûÑÂª∫Â∫îÁî®„ÄÇ‰∏çËøáÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®JavaScriptÁöÑÂÖ®ÈÉ®ÁºñÁ®ãËÉΩÂäõ„ÄÇËøôÊó∂ÔºåÊàë‰ª¨Â∞±ÈúÄË¶Å‰ΩøÁî®Ê∏≤ÊüìÂáΩÊï∞„ÄÇ</p>
<h2 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h2><h3 id="Creating-Vnodes"><a href="#Creating-Vnodes" class="headerlink" title="Creating Vnodes"></a>Creating Vnodes</h3><p>VueÊèê‰æõ‰∫Ü<code>h()</code>ÂáΩÊï∞Áî®‰∫éÂàõÂª∫vnode</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">const</span> vnode = <span class="title function_">h</span>(
  <span class="string">&#x27;div&#x27;</span>, <span class="comment">// type</span>
  &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="attr">class</span>: <span class="string">&#x27;bar&#x27;</span> &#125;, <span class="comment">// props</span>
  [
    <span class="comment">/* children */</span>
  ]
)</code></pre>

<p><code>h()</code>ÊòØ <strong>hyperscript</strong> ÁöÑÁº©ÂÜôÔºåÊÑèÊÄùÊòØ‚ÄùÁîüÊàêHTMLÔºàË∂ÖÊñáÊú¨Ê†áËÆ∞ËØ≠Ë®ÄÔºâÁöÑJavaScript‚Äù„ÄÇËøô‰∏™ÂêçÂ≠óÊù•Ëá™‰∫éËÆ∏Â§öËôöÊãüDOMÂÆûÁé∞Êó∂ÁöÑÂÖ±ÂêåÁ∫¶ÂÆö„ÄÇ‰∏Ä‰∏™ÊèèËø∞ÊÄßÊõ¥Âº∫ÁöÑÂêçÁß∞ÂèØ‰ª•‰∏∫<code>createVnode()</code>Ôºå‰ΩÜÂΩì‰Ω†ÈúÄË¶ÅÂú®Ê∏≤ÊüìÂáΩÊï∞‰∏≠Â§öÊ¨°Ë∞ÉÁî®Êó∂Ôºå‰∏Ä‰∏™Êõ¥ÁÆÄÁü≠ÁöÑÂêçÁß∞‰ºöÊúâÊâÄÂ∏ÆÂä©„ÄÇ</p>
<p>Ëøô‰∏™<code>h()</code>ÂáΩÊï∞ËÆæËÆ°ÁöÑÈùûÂ∏∏ÁÅµÊ¥ª</p>
<pre><code class="highlight js"><span class="comment">// all arguments except the type are optional</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>)
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span> &#125;)

<span class="comment">// both attributes and properties can be used in props</span>
<span class="comment">// Vue automatically picks the right way to assign it</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">class</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="attr">innerHTML</span>: <span class="string">&#x27;hello&#x27;</span> &#125;)

<span class="comment">// props modifiers such as `.prop` and `.attr` can be added</span>
<span class="comment">// with `.` and `^` prefixes respectively</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="string">&#x27;.name&#x27;</span>: <span class="string">&#x27;some-name&#x27;</span>, <span class="string">&#x27;^width&#x27;</span>: <span class="string">&#x27;100&#x27;</span> &#125;)

<span class="comment">// class and style have the same object / array</span>
<span class="comment">// value support that they have in templates</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">class</span>: [foo, &#123; bar &#125;], <span class="attr">style</span>: &#123; <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span> &#125; &#125;)

<span class="comment">// event listeners should be passed as onXxx</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">onClick</span>: <span class="function">() =&gt;</span> &#123;&#125; &#125;)

<span class="comment">// children can be a string</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span> &#125;, <span class="string">&#x27;hello&#x27;</span>)

<span class="comment">// props can be omitted when there are no props</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [<span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)])

<span class="comment">// children array can contain mixed vnodes and strings</span>
<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [<span class="string">&#x27;hello&#x27;</span>, <span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>)])</code></pre>

<p>ÁîüÊàêÁöÑvnodeÁªìÊûÑÂ¶Ç‰∏ãÔºö</p>
<pre><code class="highlight js"><span class="keyword">const</span> vnode = <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">id</span>: <span class="string">&#x27;foo&#x27;</span> &#125;, [])

vnode.<span class="property">type</span> <span class="comment">// &#x27;div&#x27;</span>
vnode.<span class="property">props</span> <span class="comment">// &#123; id: &#x27;foo&#x27; &#125;</span>
vnode.<span class="property">children</span> <span class="comment">// []</span>
vnode.<span class="property">key</span> <span class="comment">// null</span></code></pre>

<blockquote>
<p>Note<br>ÂÆåÊï¥ÁöÑVNodeÁªìÊûÑËøòÂåÖÂê´ËÆ∏Â§öÂÖ∂‰ªñÂÜÖÈÉ®Â±ûÊÄßÔºåÂΩìÂº∫ÁÉàÂª∫ËÆÆÈÅøÂÖç‰æùËµñ‰ª•‰∏äÊâÄÂàóÁöÑ‰ª•Â§ñÂÖ∂‰ªñÂ±ûÊÄß„ÄÇËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÂú®ÂÜÖÈÉ®Â±ûÊÄßÂèëÁîüÂèòÂåñÊó∂Âá∫Áé∞ÊÑèÂ§ñ‰∏≠Êñ≠„ÄÇ</p>
</blockquote>
<h3 id="Declaring-Render-Functions"><a href="#Declaring-Render-Functions" class="headerlink" title="Declaring Render Functions"></a>Declaring Render Functions</h3><p>Âú®ÈÄöËøá Composition API ‰ΩøÁî®Ê®°ÁâàÊó∂Ôºå<code>setup()</code>ÁöÑËøîÂõûÂÄºÊòØÁî®‰∫éÂêëÊ®°ÁâàÊö¥Èú≤Êï∞ÊçÆ„ÄÇ‰ΩÜÂú®‰ΩøÁî®Ê∏≤ÊüìÂáΩÊï∞Êó∂ÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•ËøîÂõûÊ∏≤ÊüìÂáΩÊï∞Ôºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; ref, h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="attr">props</span>: &#123;
    <span class="comment">/* ... */</span>
  &#125;,
  <span class="title function_">setup</span>(<span class="params">props</span>) &#123;
    <span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">1</span>)

    <span class="comment">// return the render function</span>
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, props.<span class="property">msg</span> + count.<span class="property">value</span>)
  &#125;
&#125;</code></pre>

<p>Âõ†‰∏∫Ê∏≤ÊüìÂáΩÊï∞ÊòØÂú®<code>setup()</code>ÂÜÖÈÉ®Â£∞ÊòéÁöÑÔºåÊâÄ‰ª•ÂÆÉËá™ÁÑ∂ÂèØ‰ª•ËÆøÈóÆÂÖ∂Âêå‰∏Ä‰ΩúÁî®Âüü‰∏ãÂ£∞ÊòéÁöÑpropsÂíå‰ªªÊÑèÁöÑÂìçÂ∫îÊï∞ÊçÆ„ÄÇ</p>
<p>Èô§‰∫ÜËøîÂõûÂçï‰∏™vnodeÂ§ñÔºåËøòÂèØ‰ª•ËøîÂõûÂ≠óÁ¨¶‰∏≤ÊàñËÄÖÊï∞ÁªÑÔºö</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="title function_">setup</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="string">&#x27;hello world!&#x27;</span>
  &#125;
&#125;</code></pre>

<pre><code class="highlight js"><span class="keyword">import</span> &#123; h &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="title function_">setup</span>(<span class="params"></span>) &#123;
    <span class="comment">// use an array to return multiple root nodes</span>
    <span class="keyword">return</span> <span class="function">() =&gt;</span> [
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>),
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>),
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>)
    ]
  &#125;
&#125;</code></pre>

<blockquote>
<p>TIP<br>Á°Æ‰øùËøîÂõûÁöÑÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåËÄå‰∏çÊòØÁõ¥Êé•ËøîÂõûÂÄºÔºÅÂõ†‰∏∫ÊØè‰∏™ÁªÑ‰ª∂ÁöÑ<code>setup()</code>Âè™‰ºöË∞ÉÁî®‰∏ÄÊ¨°ÔºåËÄåËøîÂõûÁöÑÊ∏≤ÊüìÂáΩÊï∞‰ºöË¢´Ë∞ÉÁî®Â§öÊ¨°„ÄÇ</p>
</blockquote>
<p>Â¶ÇÊûúÊ∏≤ÊüìÂáΩÊï∞‰∏çÈúÄË¶Å‰ªª‰ΩïÂÆû‰æãÁä∂ÊÄÅÔºå‰Ω†‰πüÂèØ‰ª•Áõ¥Êé•Â£∞Êòé‰∏Ä‰∏™ÂáΩÊï∞Ôºö</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="string">&#x27;hello world!&#x27;</span>
&#125;</code></pre>

<p>Ê≤°ÈîôÔºåËøôÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑVueÁªÑ‰ª∂ÔºÅÊúâÂÖ≥Ê≠§ËØ≠Ê≥ïÁöÑÊõ¥Â§öËØ¶ÊÉÖÔºåÂèØ‰ª•Êü•Áúã <a href="https://vuejs.org/guide/extras/render-function.html#functional-components">Functional Components</a></p>
<h3 id="Vnodes-Must-Be-Unique"><a href="#Vnodes-Must-Be-Unique" class="headerlink" title="Vnodes Must Be Unique"></a>Vnodes Must Be Unique</h3><p>ÁªÑ‰ª∂Ê†ë‰∏≠ÁöÑÊâÄÊúâvnodeÂøÖÈ°ªÊòØÂîØ‰∏ÄÁöÑ„ÄÇ‰∏ãÈù¢ÁöÑÊ∏≤ÊüìÂáΩÊï∞Â∞±ÊÑèÂë≥ÁùÄÊòØÊó†ÊïàÁöÑÔºö</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> p = <span class="title function_">h</span>(<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;hi&#x27;</span>)
  <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [
    <span class="comment">// Yikes - duplicate vnodes!</span>
    p,
    p
  ])
&#125;</code></pre>

<p>Â¶ÇÊûú‰Ω†ÁúüÁöÑÊÉ≥Â§öÊ¨°Â§çÂà∂Áõ∏ÂêåÁöÑÂÖÉÁ¥†&#x2F;ÁªÑ‰ª∂ÔºåÂèØ‰ª•‰ΩøÁî®Â∑•ÂéÇÂáΩÊï∞Êù•ÂÆûÁé∞„ÄÇÊØîÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÊ∏≤ÊüìÂáΩÊï∞Â∞±ÊòØÊ∏≤Êüì‰∫Ü20‰∏™Áõ∏ÂêåÂÜÖÂÆπÁöÑÊúâÊïàÊñπÊ≥ïÔºö</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="title function_">h</span>(
    <span class="string">&#x27;div&#x27;</span>,
    <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">20</span> &#125;).<span class="title function_">map</span>(<span class="function">() =&gt;</span> &#123;
      <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;hi&#x27;</span>)
    &#125;)
  )
&#125;</code></pre>

<h2 id="JSX-x2F-TSX‚Äã"><a href="#JSX-x2F-TSX‚Äã" class="headerlink" title="JSX &#x2F; TSX‚Äã"></a>JSX &#x2F; TSX‚Äã</h2><p><a href="https://facebook.github.io/jsx/">JSX</a>ÊòØJavaScriptÁöÑXMLÊâ©Â±ïÔºåÂèØ‰ª•ËÆ©Êàë‰ª¨ÂÜôÂá∫‰ª•‰∏ã‰ª£Á†ÅÔºö</p>
<pre><code class="highlight jsx"><span class="keyword">const</span> vnode = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></code></pre>

<p>Âú®JSXË°®ËææÂºè‰∏≠Ôºå‰ΩøÁî®Ëä±Êã¨Âè∑ÂµåÂÖ•Âä®ÊÄÅÂÄºÔºö</p>
<pre><code class="highlight jsx"><span class="keyword">const</span> vnode = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&#123;dynamicId&#125;</span>&gt;</span>hello, &#123;userName&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></code></pre>

<p><strong>create-vue</strong>ÂíåVue CLIÈÉΩÊúâÂú®ËÑöÊâãÊû∂ÈÖçÁΩÆÈ°π‰∏≠ËøõË°å‰∫ÜJSXÊîØÊåÅ„ÄÇÂ¶ÇÊûú‰Ω†Ë¶ÅÊâãÂä®ÈÖçÁΩÆJSXÔºåËØ∑ÂèÇÈòÖ<a href="https://github.com/vuejs/babel-plugin-jsx">@vue&#x2F;babel-plugin-jsx</a>ÊñáÊ°£‰∫ÜËß£ËØ¶ÊÉÖ„ÄÇ</p>
<p>ËôΩÁÑ∂JSXÊúÄÂàùÊòØÁî±ReactÂºïÂÖ•ÁöÑÔºå‰ΩÜÂÆÉÂÆûÈôÖ‰∏äÂπ∂Ê≤°ÊúâÂÆö‰πâËøêË°åÊó∂ËØ≠‰πâÔºåÂèØ‰ª•ÁºñËØëÊàêÂêÑÁßç‰∏çÂêåÁöÑËæìÂá∫„ÄÇÂ¶ÇÊûú‰Ω†‰ª•Ââç‰ΩøÁî®ËøáJSXÔºåÈúÄÊ≥®ÊÑèVueÁöÑJSXËΩ¨Êç¢ÂíåReactÁöÑJSXËΩ¨Êç¢ÊòØ‰∏çÂêåÁöÑÔºåÊâÄ‰ª•‰Ω†‰∏çËÉΩÂú®VueÂ∫îÁî®‰∏≠‰ΩøÁî®ReactÁöÑJSXËΩ¨Êç¢ÔºåÂÖ∑‰Ωì‰∏éReact JSXÁöÑ‰∏Ä‰∫õÊòéÊòæÂå∫Âà´ÂåÖÊã¨Ôºö</p>
<ul>
<li>‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>class</code>Âíå<code>for</code>Á≠âHTMLÂ±ûÊÄß‰Ωú‰∏∫propsÔºåÊó†ÈúÄ‰ΩøÁî®<code>className</code>ÊàñËÄÖ<code>htmlFor</code>„ÄÇ</li>
<li>Â∞ÜÂ≠êÂÖÉÁ¥†‰º†ÈÄíÁªôÁªÑ‰ª∂(Âç≥ÊèíÊßΩ)ÁöÑÂ∑•‰ΩúÊñπÂºèÊúâÊâÄ‰∏çÂêå„ÄÇ</li>
</ul>
<p>VueÁöÑÁ±ªÂûãÂÆö‰πâËøò‰∏∫TSXÁöÑ‰ΩøÁî®Êèê‰æõ‰∫ÜÁ±ªÂûãÊé®Êñ≠„ÄÇ‰ΩøÁî®TSXÊó∂ÔºåÁ°Æ‰øùÂú®tsconfig.json‰∏≠ÊåáÂÆö<code>&quot;jsx&quot;: &quot;preserve&quot;</code>Ôºå‰ª•‰æøÂú®TypeScript‰øùÁïôJSXËØ≠Ê≥ïÔºå‰æõVue JSXËΩ¨Êç¢Â§ÑÁêÜ„ÄÇ</p>
<h3 id="JSX-Type-Inference"><a href="#JSX-Type-Inference" class="headerlink" title="JSX Type Inference"></a>JSX Type Inference</h3><p>‰∏étransform‰∏ÄÊ†∑ÔºåVueÁöÑJSX‰πüÈúÄË¶Å‰∏çÂêåÁöÑÁ±ªÂûãÂÆö‰πâ„ÄÇÁõÆÂâçÔºåVue‰ºöËá™Âä®ÂÖ®Â±ÄÊ≥®ÂÜåVueÁöÑJSXÁ±ªÂûã„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÂΩìVueÁöÑÁ±ªÂûãÂèØÁî®Êó∂ÔºåTSXÂ∞±ËÉΩÂºÄÁÆ±Âç≥Áî®„ÄÇ</p>
<p>VueÁöÑÂÖ®Â±ÄJSXÁ±ªÂûãÂèØËÉΩ‰ºö‰∏éÂÖ∂‰ªñÂêåÊ†∑ÈúÄË¶ÅJSXÁ±ªÂûãÊé®ÂØºÁöÑÂ∫ìÂèëÁîüÂÜ≤Á™ÅÔºåÁâπÂà´ÊòØReact„ÄÇ‰ªé3.3ÁâàÊú¨ÂºÄÂßãÔºåVueÊîØÊåÅÈÄöËøáTypeScriptÁöÑjsxImportSourceÈÄâÈ°πÊåáÂÆöJSXÂëΩÂêçÁ©∫Èó¥„ÄÇÊàë‰ª¨ËÆ°ÂàíÂú®3.4ÁâàÊú¨‰∏≠ÁßªÈô§ÈªòËÆ§ÁöÑÂÖ®Â±ÄJSXÂëΩÂêçÁ©∫Èó¥Ê≥®ÂÜå„ÄÇ</p>
<p>ÂØπ‰∫éTSXÁî®Êà∑ÔºåÂª∫ËÆÆÂú®ÂçáÁ∫ßÂà∞3.3‰πãÂêéÂú® tsconfig.json ‰∏≠Â∞Ü jsxImportSource ÈÄâÈ°πËÆæÁΩÆ‰∏∫ ‚Äúvue‚ÄùÔºåÊàñËÄÖÂú®ÊØè‰∏™Êñá‰ª∂‰∏≠‰ΩøÁî® <code>/* @jsxImportSource vue */</code>„ÄÇËøôÊ†∑Ôºå‰Ω†Áé∞Âú®Â∞±ÂèØ‰ª•ÈÄâÊã©Âä†ÂÖ•Êñ∞Ë°å‰∏∫ÔºåÂπ∂Âú® 3.4 ÂèëÂ∏ÉÊó∂Êó†ÁºùÂçáÁ∫ß„ÄÇ</p>
<p>Â¶ÇÊûúÊúâ‰ª£Á†Å‰æùËµñ‰∫éÂÖ®Â±ÄJSXÂëΩÂêçÁ©∫Èó¥Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøáÊòæÂºèÂºïÁî® vue&#x2F;jsxÔºàÂÆÉ‰ºöÊ≥®ÂÜåÂÖ®Â±Ä JSX ÂëΩÂêçÁ©∫Èó¥ÔºâÊù•‰øùÁïôÂÆåÂÖ®Áõ∏ÂêåÁöÑ 3.4 ‰πãÂâçÁöÑÂÖ®Â±ÄË°å‰∏∫</p>
<h2 id="Render-Function-Recipes"><a href="#Render-Function-Recipes" class="headerlink" title="Render Function Recipes"></a>Render Function Recipes</h2><p>‰∏ãÈù¢Êàë‰ª¨‰ºöÊèê‰æõ‰∏Ä‰∫õÁî®Á≠â‰ª∑ÁöÑÊ∏≤ÊüìÂáΩÊï∞&#x2F;JSXÂÆûÁé∞Ê®°ÁâàÂäüËÉΩÁöÑÂ∏∏Áî®ÊñπÊ≥ï„ÄÇ</p>
<h3 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a>v-if</h3><p>template:</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">div</span>&gt;</span>
  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">div</span>&gt;</span>
  <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-else</span>&gt;</span>no<span class="tag">&lt;/<span class="name">span</span>&gt;</span>
<span class="tag">&lt;/<span class="name">div</span>&gt;</span></code></pre>

<p>Á≠â‰ª∑ Ê∏≤ÊüìÂáΩÊï∞&#x2F;JSX:</p>
<pre><code class="highlight js"><span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [ok.<span class="property">value</span> ? <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;yes&#x27;</span>) : <span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;no&#x27;</span>)])</code></pre>

<pre><code class="highlight jsx">&lt;div&gt;&#123;ok.<span class="property">value</span> ? <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>yes<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>no<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>&#125;&lt;/div&gt;</code></pre>

<h3 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a>v-for</h3><p>template:</p>
<pre><code class="highlight html"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>
  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;&#123; id, text &#125; in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span>
    &#123;&#123; text &#125;&#125;
  <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></code></pre>

<p>Á≠â‰ª∑ Ê∏≤ÊüìÂáΩÊï∞&#x2F;JSX:</p>
<pre><code class="highlight js"><span class="title function_">h</span>(
  <span class="string">&#x27;ul&#x27;</span>,
  <span class="comment">// assuming `items` is a ref with array value</span>
  items.<span class="property">value</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123; id, text &#125;</span>) =&gt;</span> &#123;
    <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;li&#x27;</span>, &#123; <span class="attr">key</span>: id &#125;, text)
  &#125;)
)</code></pre>

<pre><code class="highlight jsx">&lt;ul&gt;
  &#123;items.<span class="property">value</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123; id, text &#125;</span>) =&gt;</span> &#123;
    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;id&#125;</span>&gt;</span>&#123;text&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>
  &#125;)&#125;
&lt;/ul&gt;</code></pre>

<h3 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a>v-on</h3><p>propsÂêçÁß∞‰ª•<code>on</code>ÂºÄÂ§¥‰∏îÂêéÈù¢Ë∑üÂ§ßÂÜôÂ≠óÊØçÁöÑË¢´ËßÜ‰∏∫‰∫ã‰ª∂ÁõëÂê¨Âô®„ÄÇÊØîÂ¶ÇÔºå<code>onClick</code>Áõ∏ÂΩì‰∫éÊ®°ÁâàÁöÑ<code>@click</code>„ÄÇ</p>
<pre><code class="highlight js"><span class="title function_">h</span>(
  <span class="string">&#x27;button&#x27;</span>,
  &#123;
    <span class="title function_">onClick</span>(<span class="params">event</span>) &#123;
      <span class="comment">/* ... */</span>
    &#125;
  &#125;,
  <span class="string">&#x27;click me&#x27;</span>
)</code></pre>

<pre><code class="highlight jsx">&lt;button
  onClick=&#123;<span class="function">(<span class="params">event</span>) =&gt;</span> &#123;
    <span class="comment">/* ... */</span>
  &#125;&#125;
&gt;
  click me
&lt;/button&gt;</code></pre>

<h3 id="Event-Modifiers"><a href="#Event-Modifiers" class="headerlink" title="Event Modifiers"></a>Event Modifiers</h3><p>ÂØπ‰∫é<code>.passive</code>Ôºå<code>.capture</code>Âíå<code>.once</code>‰∫ã‰ª∂‰øÆÈ•∞Á¨¶ÔºåÂèØ‰ª•È©ºÂ≥∞ÂÜôÊ≥ïÂú®‰∫ã‰ª∂ÂêçÁß∞ÂêéÈù¢ËøõË°åËøûÊé•„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö</p>
<pre><code class="highlight js"><span class="title function_">h</span>(<span class="string">&#x27;input&#x27;</span>, &#123;
  <span class="title function_">onClickCapture</span>(<span class="params"></span>) &#123;
    <span class="comment">/* listener in capture mode */</span>
  &#125;,
  <span class="title function_">onKeyupOnce</span>(<span class="params"></span>) &#123;
    <span class="comment">/* triggers only once */</span>
  &#125;,
  <span class="title function_">onMouseoverOnceCapture</span>(<span class="params"></span>) &#123;
    <span class="comment">/* once + capture */</span>
  &#125;
&#125;)</code></pre>

<pre><code class="highlight jsx">&lt;input
  onClickCapture=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;
  onKeyupOnce=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;
  onMouseoverOnceCapture=&#123;<span class="function">() =&gt;</span> &#123;&#125;&#125;
/&gt;</code></pre>

<p>ÁÑ∂ÂêéÂÖ∂‰ΩôÁöÑ‰∫ã‰ª∂ÂíåÊåâÈîÆ‰øÆÈ•∞Á¨¶ÔºåÂèØ‰ª•‰ΩøÁî®<code>withModifiers</code>ÂçèÂä©‰ΩøÁî®Ôºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; withModifiers &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123;
  <span class="attr">onClick</span>: <span class="title function_">withModifiers</span>(<span class="function">() =&gt;</span> &#123;&#125;, [<span class="string">&#x27;self&#x27;</span>])
&#125;)</code></pre>

<pre><code class="highlight jsx">&lt;div onClick=&#123;<span class="title function_">withModifiers</span>(<span class="function">() =&gt;</span> &#123;&#125;, [<span class="string">&#x27;self&#x27;</span>])&#125; /&gt;</code></pre>

<h3 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h3><p>Ë¶Å‰∏∫ÁªÑ‰ª∂ÂàõÂª∫vnodeÔºå‰º†ÈÄíÁªô<code>h()</code>ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Â∫îËØ•ÊòØÁªÑ‰ª∂ÂÆö‰πâ„ÄÇËøôÂ∞±ÊÑèÂë≥ÁùÄ‰ΩøÁî®Ê∏≤ÊüìÂáΩÊï∞Êó∂ÔºåÊó†ÈúÄÊ≥®ÂÜåÁªÑ‰ª∂ÔºåÂè™ÊòØÁõ¥Êé•‰ΩøÁî®ÂØºÂÖ•ÁöÑÁªÑ‰ª∂Âç≥ÂèØÔºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span>
<span class="keyword">import</span> <span class="title class_">Bar</span> <span class="keyword">from</span> <span class="string">&#x27;./Bar.jsx&#x27;</span>

<span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, [<span class="title function_">h</span>(<span class="title class_">Foo</span>), <span class="title function_">h</span>(<span class="title class_">Bar</span>)])
&#125;</code></pre>

<pre><code class="highlight jsx"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">Foo</span> /&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">Bar</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
  )
&#125;</code></pre>

<p>Ê≠£Â¶ÇÊàë‰ª¨ÁúãÂà∞ÁöÑÔºåÂè™Ë¶ÅÊòØÊúâÊïàÁöÑVueÁªÑ‰ª∂ÔºåhÂáΩÊï∞Â∞±ËÉΩÂ§ÑÁêÜ‰ªª‰ΩïÊñá‰ª∂Ê†ºÂºèÂØºÂÖ•ÁöÑÁªÑ‰ª∂„ÄÇ</p>
<p>Âä®ÊÄÅÁªÑ‰ª∂Âú®Ê∏≤ÊüìÁªÑ‰ª∂‰∏≠ÂèØÁõ¥Êé•‰ΩøÁî®Ôºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> <span class="title class_">Foo</span> <span class="keyword">from</span> <span class="string">&#x27;./Foo.vue&#x27;</span>
<span class="keyword">import</span> <span class="title class_">Bar</span> <span class="keyword">from</span> <span class="string">&#x27;./Bar.jsx&#x27;</span>

<span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> ok.<span class="property">value</span> ? <span class="title function_">h</span>(<span class="title class_">Foo</span>) : <span class="title function_">h</span>(<span class="title class_">Bar</span>)
&#125;</code></pre>

<pre><code class="highlight jsx"><span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> ok.<span class="property">value</span> ? <span class="language-xml"><span class="tag">&lt;<span class="name">Foo</span> /&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">Bar</span> /&gt;</span></span>
&#125;</code></pre>

<p>Â¶ÇÊûúÁªÑ‰ª∂ÊòØÁî®ÂêçÁß∞Ê≥®ÂÜåÁöÑÔºåÊó†Ê≥ïÁõ¥Êé•ÂØºÂÖ•(‰æãÂ¶ÇÔºåÊúâÂ∫ìËøõË°åÁöÑÂÖ®Â±ÄÊ≥®ÂÜå)ÔºåËøôÁßçÊÉÖÂÜµÂèØ‰ª•‰ΩøÁî®<code>resolveComponent</code>Êù•Ëß£ÊûêËØ•ÁªÑ‰ª∂„ÄÇ</p>
<h3 id="Rendering-Slots"><a href="#Rendering-Slots" class="headerlink" title="Rendering Slots"></a>Rendering Slots</h3><p>Âú®Ê∏≤ÊüìÂáΩÊï∞‰∏≠ÔºåÂèØ‰ª•ÈÄöËøá<code>setup()</code>ÁöÑ‰∏ä‰∏ãÊñáËÆøÈóÆslot„ÄÇÁÑ∂ÂêéslotsÂØπË±°‰∏äÁöÑÊØè‰∏Ä‰∏™slotÈÉΩÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰ºöËøîÂõû‰∏Ä‰∏™vnodesÊï∞ÁªÑÔºö</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="attr">props</span>: [<span class="string">&#x27;message&#x27;</span>],
  <span class="title function_">setup</span>(<span class="params">props, &#123; slots &#125;</span>) &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span> [
      <span class="comment">// default slot:</span>
      <span class="comment">// &lt;div&gt;&lt;slot /&gt;&lt;/div&gt;</span>
      <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, slots.<span class="title function_">default</span>()),

      <span class="comment">// named slot:</span>
      <span class="comment">// &lt;div&gt;&lt;slot name=&quot;footer&quot; :text=&quot;message&quot; /&gt;&lt;/div&gt;</span>
      <span class="title function_">h</span>(
        <span class="string">&#x27;div&#x27;</span>,
        slots.<span class="title function_">footer</span>(&#123;
          <span class="attr">text</span>: props.<span class="property">message</span>
        &#125;)
      )
    ]
  &#125;
&#125;</code></pre>

<p>JSXÔºö</p>
<pre><code class="highlight js"><span class="comment">// default</span>
&lt;div&gt;&#123;slots.<span class="title function_">default</span>()&#125;&lt;/div&gt;

<span class="comment">// named</span>
<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;slots.footer(&#123; text: props.message &#125;)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></code></pre>

<h3 id="Passing-Slots"><a href="#Passing-Slots" class="headerlink" title="Passing Slots"></a>Passing Slots</h3><p>Â∞ÜÂ≠êÂÖÉÁ¥†‰º†ÈÄíÁªôÁªÑ‰ª∂ÂíåÂ≠êÂÖÉÁ¥†‰º†ÈÄíÁªôÂÖÉÁ¥†ÁöÑÊñπÂºèÊúâ‰∫õ‰∏çÂêå„ÄÇÊàë‰ª¨‰∏çÈúÄË¶Å‰º†ÈÄíÊï∞ÁªÑÔºåËÄåÊòØ‰º†ÈÄíslotÂáΩÊï∞ÊàñËÄÖslotÂáΩÊï∞ÂØπË±°„ÄÇslotÂáΩÊï∞ÂèØ‰ª•ËøîÂõû‰∏éÊôÆÈÄöÊ∏≤ÊüìÂáΩÊï∞ÁöÑËøîÂõûÂÄº‰∏ÄÊ†∑ÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îÂú®Â≠êÁªÑ‰ª∂ËÆøÈóÆÊó∂ÔºåËøô‰∫õÂÜÖÂÆπÂ∞ÜÂßãÁªà‰ºöËΩ¨Êç¢‰∏∫‰∏Ä‰∏™vnodesÊï∞ÁªÑ„ÄÇ</p>
<pre><code class="highlight js"><span class="comment">// Âçï‰∏™ÈªòËÆ§ÊèíÊßΩ</span>
<span class="title function_">h</span>(<span class="title class_">MyComponent</span>, <span class="function">() =&gt;</span> <span class="string">&#x27;hello&#x27;</span>)

<span class="comment">// ÂÖ∑ÂêçÊèíÊßΩ</span>
<span class="comment">// Ê≥®ÊÑè `null` ÊòØÂøÖÈúÄÁöÑ</span>
<span class="comment">// ‰ª•ÈÅøÂÖç slot ÂØπË±°Ë¢´ÂΩìÊàê prop Â§ÑÁêÜ</span>
<span class="title function_">h</span>(<span class="title class_">MyComponent</span>, <span class="literal">null</span>, &#123;
    <span class="attr">default</span>: <span class="function">() =&gt;</span> <span class="string">&#x27;default slot&#x27;</span>,
    <span class="attr">foo</span>: <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, <span class="string">&#x27;foo&#x27;</span>),
    <span class="attr">bar</span>: <span class="function">() =&gt;</span> [<span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;one&#x27;</span>), <span class="title function_">h</span>(<span class="string">&#x27;span&#x27;</span>, <span class="string">&#x27;two&#x27;</span>)]
&#125;)</code></pre>

<p>Á≠â‰ª∑ÁöÑJSXÔºö</p>
<pre><code class="highlight jsx"><span class="comment">// default</span>
&lt;<span class="title class_">MyComponent</span>&gt;&#123;<span class="function">() =&gt;</span> <span class="string">&#x27;hello&#x27;</span>&#125;&lt;/<span class="title class_">MyComponent</span>&gt;

<span class="comment">// named</span>
<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span>&gt;</span>&#123;&#123;</span>
<span class="language-xml">  default: () =&gt; &#x27;default slot&#x27;,</span>
<span class="language-xml">  foo: () =&gt; <span class="tag">&lt;<span class="name">div</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">div</span>&gt;</span>,</span>
<span class="language-xml">  bar: () =&gt; [<span class="tag">&lt;<span class="name">span</span>&gt;</span>one<span class="tag">&lt;/<span class="name">span</span>&gt;</span>, <span class="tag">&lt;<span class="name">span</span>&gt;</span>two<span class="tag">&lt;/<span class="name">span</span>&gt;</span>]</span>
<span class="language-xml">&#125;&#125;<span class="tag">&lt;/<span class="name">MyComponent</span>&gt;</span></span></code></pre>

<p>Â∞Üslot‰Ωú‰∏∫ÂáΩÊï∞‰º†ÈÄíÁªôÂ≠êÁªÑ‰ª∂ÔºåÂèØ‰ª•ËÆ©Â≠êÁªÑ‰ª∂ÊáíÊï£Âú∞Ë∞ÉÁî®slot„ÄÇËøôÊ†∑ÔºåÂ≠êÁªÑ‰ª∂ËÄå‰∏çÊòØÁà∂ÁªÑ‰ª∂Â∞±ËÉΩË∑üË∏™slotÁöÑ‰æùËµñÂÖ≥Á≥ªÔºå‰ªéËÄåÂÆûÁé∞Êõ¥ÂáÜÁ°Æ„ÄÅÊõ¥ÊúâÊïàÁöÑÊõ¥Êñ∞„ÄÇ</p>
<h3 id="Built-in-Components"><a href="#Built-in-Components" class="headerlink" title="Built-in Components"></a>Built-in Components</h3><p>ÂÜÖÁΩÆÁªÑ‰ª∂Â¶Ç<code>&lt;KeepAlive&gt;</code>, <code>&lt;Transition&gt;</code>, <code>&lt;TransitionGroup&gt;</code>, <code>&lt;Teleport&gt;</code> Âíå <code>&lt;Suspense&gt;</code>ÂøÖÈ°ªÂØºÂÖ•ÊâçËÉΩÂú®Ê∏≤ÊüìÂáΩÊï∞‰∏≠‰ΩøÁî®</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h, <span class="title class_">KeepAlive</span>, <span class="title class_">Teleport</span>, <span class="title class_">Transition</span>, <span class="title class_">TransitionGroup</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  setup () &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="title class_">Transition</span>, &#123; <span class="attr">mode</span>: <span class="string">&#x27;out-in&#x27;</span> &#125;, <span class="comment">/* ... */</span>)
  &#125;
&#125;</code></pre>

<h3 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h3><p>Âú®Ê®°ÁâàÁºñËØëËøáÁ®ã‰∏≠Ôºå<code>v-model</code>Êåá‰ª§‰ºöÊâ©Â±ï‰∏∫<code>modelValue</code>Âíå<code>onUpdate:modelValue</code>‰∏§‰∏™propsÔºåÂú®Ê∏≤ÊüìÂáΩÊï∞‰∏≠Â∞±ÂøÖÈ°ªËá™Â∑±Êèê‰æõËøô‰∫õpropsÔºö</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="attr">props</span>: [<span class="string">&#x27;modelValue&#x27;</span>],
  <span class="attr">emits</span>: [<span class="string">&#x27;update:modelValue&#x27;</span>],
  <span class="title function_">setup</span>(<span class="params">props, &#123; emit &#125;</span>) &#123;
    <span class="keyword">return</span> <span class="function">() =&gt;</span>
      <span class="title function_">h</span>(<span class="title class_">SomeComponent</span>, &#123;
        <span class="attr">modelValue</span>: props.<span class="property">modelValue</span>,
        <span class="string">&#x27;onUpdate:modelValue&#x27;</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> <span class="title function_">emit</span>(<span class="string">&#x27;update:modelValue&#x27;</span>, value)
      &#125;)
  &#125;
&#125;</code></pre>

<h3 id="Custom-Directives"><a href="#Custom-Directives" class="headerlink" title="Custom Directives"></a>Custom Directives</h3><p>Ëá™ÂÆö‰πâÊåá‰ª§ÂèØ‰ª•ÈÄöËøá<code>withDirectives</code>Â∫îÁî®Âà∞vnodeÔºö</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h, withDirectives &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="comment">// a custom directive</span>
<span class="keyword">const</span> pin = &#123;
  <span class="title function_">mounted</span>(<span class="params"></span>) &#123; <span class="comment">/* ... */</span> &#125;,
  <span class="title function_">updated</span>(<span class="params"></span>) &#123; <span class="comment">/* ... */</span> &#125;
&#125;

<span class="comment">// &lt;div v-pin:top.animate=&quot;200&quot;&gt;&lt;/div&gt;</span>
<span class="keyword">const</span> vnode = <span class="title function_">withDirectives</span>(<span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>), [
  [pin, <span class="number">200</span>, <span class="string">&#x27;top&#x27;</span>, &#123; <span class="attr">animate</span>: <span class="literal">true</span> &#125;]
])</code></pre>

<p>Â¶ÇÊûúÊåá‰ª§ÊòØÈÄöËøáÂêçÂ≠óÊ≥®ÂÜåÁöÑÔºåÊòØÊó†Ê≥ïÁõ¥Êé•ÂØºÂÖ•ÁöÑÔºåÈúÄË¶Å‰ΩøÁî®<code>resolveDirective</code>ÂØπÂÖ∂ËøõË°åËß£Êûê„ÄÇ</p>
<h3 id="Template-Refs"><a href="#Template-Refs" class="headerlink" title="Template Refs"></a>Template Refs</h3><p>Âú®‰ΩøÁî®ÁªÑÂêàÂºèAPIÊó∂ÔºåÊ®°ÁâàrefÊòØÈÄöËøá<code>ref()</code>Êú¨Ë∫´‰Ωú‰∏∫props‰º†ÈÄíÁªôvnodeÂàõÂª∫ÁöÑ</p>
<pre><code class="highlight js"><span class="keyword">import</span> &#123; h, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">export</span> <span class="keyword">default</span> &#123;
  <span class="title function_">setup</span>(<span class="params"></span>) &#123;
    <span class="keyword">const</span> divEl = <span class="title function_">ref</span>()

    <span class="comment">// &lt;div ref=&quot;divEl&quot;&gt;</span>
    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="title function_">h</span>(<span class="string">&#x27;div&#x27;</span>, &#123; <span class="attr">ref</span>: divEl &#125;)
  &#125;
&#125;</code></pre>

<h2 id="Functional-Components"><a href="#Functional-Components" class="headerlink" title="Functional Components"></a>Functional Components</h2><p>ÂáΩÊï∞ÁªÑ‰ª∂ÊòØÁªÑ‰ª∂ÁöÑÂè¶‰∏ÄÁßçÂΩ¢ÂºèÔºåËá™Ë∫´Ê≤°Êúâ‰ªª‰ΩïÁä∂ÊÄÅ„ÄÇÊâßË°åÁöÑÂÜÖÂÆπÂ∞±ÂÉèÁ∫ØÂáΩÊï∞ÔºåpropsËæìÂÖ•ÔºåvnodeËæìÂá∫„ÄÇÂú®Ê∏≤ÊüìÊó∂‰∏çÂàõÂª∫ÁªÑ‰ª∂ÂÆû‰æã(Âç≥Ê≤°Êúâ<code>this</code>)Ôºå‰πüÊ≤°Êúâ‰∏Ä‰∫õÁªÑ‰ª∂Â£∞ÊòéÂë®ÊúüÈí©Â≠ê„ÄÇ</p>
<p>Êàë‰ª¨‰ºöÈÄöËøá‰∏Ä‰∏™ÊôÆÈÄöÂáΩÊï∞Êù•ÂàõÂª∫‰∏Ä‰∏™ÂáΩÊï∞ÁªÑ‰ª∂ÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™ÈÄâÈ°πÂØπË±°„ÄÇËØ•ÂáΩÊï∞ÂÆûÈôÖ‰∏äÂ∞±ÊòØÁªÑ‰ª∂ÁöÑÊ∏≤ÊüìÂáΩÊï∞„ÄÇ</p>
<p>ÂáΩÊï∞ÁªÑ‰ª∂ÁöÑÁ≠æÂêç‰∏é<code>setup()</code>hookÁõ∏ÂêåÔºö</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">MyComponent</span>(<span class="params">props, &#123; slots, emit, attrs &#125;</span>) &#123;
  <span class="comment">// ...</span>
&#125;</code></pre>

<p>ÁªÑ‰ª∂ÁöÑÂ§ßÂ§öÊï∞Â∏∏ËßÑÈÖçÁΩÆÈÄâÈ°πÈÉΩ‰∏çÈÄÇÁî®‰∫éÂáΩÊï∞ÁªÑ‰ª∂„ÄÇ‰∏çËøáÔºåÂèØ‰ª•ÈÄöËøáÊ∑ªÂä†Â±ûÊÄßÊù•ÂÆö‰πâ<code>props</code>Âíå<code>emits</code>Ôºö</p>
<pre><code class="highlight js"><span class="title class_">MyComponent</span>.<span class="property">props</span> = [<span class="string">&#x27;value&#x27;</span>]
<span class="title class_">MyComponent</span>.<span class="property">emits</span> = [<span class="string">&#x27;click&#x27;</span>]</code></pre>

<p>Â¶ÇÊûúÊú™ÊåáÂÆöpropsÈÄâÈ°πÔºåÈÇ£‰πà‰º†ÈÄíÁªôÂáΩÊï∞ÁöÑpropsÂØπË±°Â∞ÜÂåÖÂê´ÊâÄÊúâÂ±ûÊÄßÔºå‰∏éattrsÁõ∏Âêå„ÄÇÈô§ÈùûÊåáÂÆöÊù•propsÈÄâÈ°πÔºåÂê¶ÂàôpropsÂêçÁß∞‰∏ç‰ºöËßÑËåÉ‰∏∫È©ºÂ≥∞„ÄÇ</p>
<p>ÂØπ‰∫éÊ≤°ÊúâÊòéÁ°ÆpropsÁöÑÂáΩÊï∞ÁªÑ‰ª∂ÔºåÂ±ûÊÄßÁ©øÈÄèÁöÑÂ∑•‰ΩúÂéüÁêÜ‰∏éÊôÆÈÄöÁªÑ‰ª∂Â§ßËá¥Áõ∏Âêå„ÄÇ‰ΩÜÊòØÔºåÂØπ‰∫éÊ≤°ÊúâÊòéÁ°ÆÊåáÂÆöpropsÁöÑÂáΩÊï∞ÁªÑ‰ª∂ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÂ∞Ü‰ºö‰ªé<code>attrs</code>ÁªßÊâø<code>class</code>„ÄÅ<code>style</code>Âíå<code>onXxx</code>‰∫ã‰ª∂‰æ¶Âê¨Âô®„ÄÇÊó†ËÆ∫ÊòØÂì™ÁßçÊÉÖÂÜµÔºåÈÉΩÂèØ‰ª•Â∞Ü<code>inheritAttrs</code>ËÆæ‰∏∫<code>false</code>‰ª•Á¶ÅÁî®Â±ûÊÄßÁªßÊâøÔºö</p>
<pre><code class="highlight js"><span class="title class_">MyComponent</span>.<span class="property">inheritAttrs</span> = <span class="literal">false</span></code></pre>

<p>ÂáΩÊï∞ÁªÑ‰ª∂ÂèØ‰ª•ÂÉèÊôÆÈÄöÁªÑ‰ª∂‰∏ÄÊ†∑Ê≥®ÂÜåÂíå‰ΩøÁî®„ÄÇÂ¶ÇÊûúÂ∞ÜÂáΩÊï∞‰Ωú‰∏∫<code>h()</code>ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂÆÉ‰ºöË¢´ËßÜ‰∏∫ÂáΩÊï∞ÁªÑ‰ª∂„ÄÇ</p>
<h3 id="Typing-Functional-Components"><a href="#Typing-Functional-Components" class="headerlink" title="Typing Functional Components"></a>Typing Functional Components</h3><p>ÂáΩÊï∞ÁªÑ‰ª∂ÂèØÊ†πÊçÆÂÖ∂ÂëΩÂêçÊàñÂåøÂêçÁ±ªÂûãÊù•ËøõË°åÊ†áÊ≥®Á±ªÂûã„ÄÇÂú®SFCÊ®°Êùø‰∏≠‰ΩøÁî®Êó∂ÔºåVolarËøòÊîØÊåÅÂØπÂÖ∂ËøõË°åÁ±ªÂûãÊ£ÄÊü•„ÄÇ</p>
<p>ÂÖ∑ÂêçÂáΩÊï∞ÁªÑ‰ª∂</p>
<pre><code class="highlight tsx"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">SetupContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>
<span class="keyword">type</span> <span class="title class_">FComponentProps</span> = &#123;
  <span class="attr">message</span>: <span class="built_in">string</span>
&#125;

<span class="keyword">type</span> <span class="title class_">Events</span> = &#123;
  <span class="title function_">sendMessage</span>(<span class="attr">message</span>: <span class="built_in">string</span>): <span class="built_in">void</span>
&#125;

<span class="keyword">function</span> <span class="title function_">FComponent</span>(<span class="params"></span>
<span class="params">  props: FComponentProps,</span>
<span class="params">  context: SetupContext&lt;Events&gt;</span>
<span class="params"></span>) &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> context.emit(&#x27;sendMessage&#x27;, props.message)&#125;&gt;</span>
<span class="language-xml">        &#123;props.message&#125; &#123;&#x27; &#x27;&#125;</span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>
  )
&#125;

<span class="title class_">FComponent</span>.<span class="property">props</span> = &#123;
  <span class="attr">message</span>: &#123;
    <span class="attr">type</span>: <span class="title class_">String</span>,
    <span class="attr">required</span>: <span class="literal">true</span>
  &#125;
&#125;

<span class="title class_">FComponent</span>.<span class="property">emits</span> = &#123;
  <span class="attr">sendMessage</span>: <span class="function">(<span class="params">value: <span class="built_in">unknown</span></span>) =&gt;</span> <span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>
&#125;</code></pre>

<p>ÂåøÂêçÂáΩÊï∞ÁªÑ‰ª∂</p>
<pre><code class="highlight tsx"><span class="keyword">import</span> <span class="keyword">type</span> &#123; <span class="title class_">FunctionalComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>

<span class="keyword">type</span> <span class="title class_">FComponentProps</span> = &#123;
  <span class="attr">message</span>: <span class="built_in">string</span>
&#125;

<span class="keyword">type</span> <span class="title class_">Events</span> = &#123;
  <span class="title function_">sendMessage</span>(<span class="attr">message</span>: <span class="built_in">string</span>): <span class="built_in">void</span>
&#125;

<span class="keyword">const</span> <span class="title class_">FComponent</span>: <span class="title class_">FunctionalComponent</span>&lt;<span class="title class_">FComponentProps</span>, <span class="title class_">Events</span>&gt; = <span class="function">(<span class="params"></span></span>
<span class="params"><span class="function">  props,</span></span>
<span class="params"><span class="function">  context</span></span>
<span class="params"><span class="function"></span>) =&gt;</span> &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> context.emit(&#x27;sendMessage&#x27;, props.message)&#125;&gt;</span>
<span class="language-xml">      ¬† &#123;props.message&#125;¬†&#123;&#x27; &#x27;&#125;</span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>
  )
&#125;

<span class="title class_">FComponent</span>.<span class="property">props</span> = &#123;
  <span class="attr">message</span>: &#123;
    <span class="attr">type</span>: <span class="title class_">String</span>,
    <span class="attr">required</span>: <span class="literal">true</span>
  &#125;
&#125;

<span class="title class_">FComponent</span>.<span class="property">emits</span> = &#123;
  <span class="attr">sendMessage</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> <span class="keyword">typeof</span> value === <span class="string">&#x27;string&#x27;</span>
&#125;</code></pre>
]]></content>
      <tags>
        <tag>Vue</tag>
        <tag>Translate</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëRendering Mechanism</title>
    <url>/2023/08/13/%E3%80%90%E7%BF%BB%E3%80%91Rendering-Mechanism/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://vuejs.org/guide/extras/rendering-mechanism.html">Rendering Mechanism</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Vue ÊòØÂ¶Ç‰ΩïÂ∞Ü template ËΩ¨Êç¢‰∏∫ÁúüÂÆûÁöÑDOMËäÇÁÇπÔºüÂèàÊòØÂ¶Ç‰ΩïÈ´òÊïàÂú∞Êõ¥Êñ∞Ëøô‰∫õËäÇÁÇπÔºüÊé•‰∏ãÊù•Êàë‰ª¨‰ºöÈÄöËøáÁ†îÁ©∂VueÂÜÖÈÉ®ÁöÑÊ∏≤ÊüìÊú∫Âà∂ÔºåÊù•Ëß£ÈáäËøô‰∫õÈóÆÈ¢ò„ÄÇ</p>
<h2 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h2><p>‰Ω†‰πüËÆ∏Âê¨Ëøá‚ÄùËôöÊãüDOM‚ÄùËøô‰∏™Ê¶ÇÂøµÔºåVueÁöÑÊ∏≤ÊüìÂ∞±ÊòØÂü∫‰∫éÂÆÉÂÆûÁé∞ÁöÑ</p>
<p>ËôöÊãüDOMÔºàVDOMÔºâÊòØ‰∏Ä‰∏™ÁºñÁ®ãÊ¶ÇÂøµÔºå‰ªñÂ∞ÜÁî®Êà∑ÊâÄÈúÄÁöÑÁïåÈù¢ÈÄöËøáËôöÊãüËäÇÁÇπ(ÂØπË±°ÁªìÊûÑ)‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂπ∂‰∏éÁúüÂÆûÁöÑDOMËäÇÁÇπÂêåÊ≠•„ÄÇËøô‰∏™Ê¶ÇÂøµÊòØÁî± React È¶ñÂàõÔºåÂπ∂Ë¢´VueÂú®ÂÜÖÁöÑËÆ∏Â§öÂÖ∂‰ªñÊ°ÜÊû∂‰ª•‰∏çÂêåÁöÑÂÆûÁé∞ÊñπÂºèÈááÁî®</p>
<p>ËôöÊãüDOMÊõ¥ÂÉèÊòØ‰∏ÄÁßçÊ®°ÂºèÔºåËÄå‰∏çÊòØ‰∏ÄÁßçÁâπÂÆöÁöÑÊäÄÊúØÔºåÂõ†Ê≠§‰∏çÂ≠òÂú®ÊüêÁßçÊ†áÂáÜÁöÑÂÆûÁé∞ÊñπÂºèÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•ËØ¥ÊòéÔºö</p>
<pre><code class="highlight js"><span class="keyword">const</span> vnode = &#123;
  <span class="attr">type</span>: <span class="string">&#x27;div&#x27;</span>,
  <span class="attr">props</span>: &#123;
    <span class="attr">id</span>: <span class="string">&#x27;hello&#x27;</span>
  &#125;,
  <span class="attr">children</span>: [
    <span class="comment">/* more vnodes */</span>
  ]
&#125;</code></pre>

<p>Âú®‰∏äÈù¢Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºåvnode ÊòØ‰∏Ä‰∏™Á∫Ø JavaScript ÂØπË±°ÔºåË°®Á§∫‰∏Ä‰∏™ <code>&lt;div&gt;</code>ÂÖÉÁ¥†„ÄÇÂÆÉÂåÖÂê´‰∫ÜÊàë‰ª¨ÂàõÂª∫ÁúüÂÆûDOMÊâÄÈúÄÁöÑÊâÄÊúâ‰ø°ÊÅØ„ÄÇÂÆÉËøòÂåÖÂê´‰∫ÜÊõ¥Â§öÁöÑÂ≠êËäÇÁÇπÔºåËøôÂ∞±‰ΩøÂÆÉÊàê‰∏∫‰∫ÜËôöÊãüDOMÊ†ëÁöÑÊ†πËäÇÁÇπ„ÄÇ</p>
<p>ÁÑ∂Âêé‰∏Ä‰∏™ËøêË°åÊó∂ÁöÑÊ∏≤ÊüìÂô®(runtime renderer)ÈÅçÂéÜËøô‰∏™ËôöÊãüDOMÊ†ëÔºåÂπ∂‰ΩøÂÖ∂ÊûÑÂª∫‰∏∫‰∏Ä‰∏™ÁúüÂÆûÁöÑDOMÊ†ëÔºåËøô‰∏ÄËøáÁ®ãÁß∞‰∏∫ÊåÇËΩΩ(mount)„ÄÇ</p>
<p>Â¶ÇÊûúÊàë‰ª¨Êúâ‰∏§‰∏™ËôöÊãüDOMÊ†ëÔºåÊ∏≤ÊüìÂô®‰πüÂèØ‰ª•ÂØπËøô‰∏™Ê†ëËøõË°åÈÅçÂéÜÂíåÂØπÊØîÔºåÊâæÂá∫‰∏çÂêå‰πãÂ§Ñ„ÄÇÁÑ∂ÂêéÂ∞ÜËøô‰∫õ‰∏çÂêå‰πãÂ§ÑÁöÑÊõ¥ÊîπÂ∫îÁî®Âà∞ÁúüÂÆûDOM‰∏ä„ÄÇËøô‰∏™ËøáÁ®ãÁß∞‰∏∫ patchÔºå‰πüÂèØ‰ª•Áß∞‰∏∫‚Äùdiffing‚ÄùÊàñËÄÖ‚Äùreconciliation‚Äù</p>
<p>ËôöÊãüDOMÁöÑ‰∏ªË¶Å‰ºòÂäøÂú®‰∫éÔºåÂèØ‰ª•ËÆ©ÂºÄÂèë‰∫∫Âëò‰ª•Â£∞ÊòéÁöÑÊñπÂºèÔºåÂàõÂª∫„ÄÅÊ£ÄÊü•ÂíåÁªÑÂêàÊâÄÈúÄÁöÑÁî®Êà∑ÁïåÈù¢ÁªìÊûÑÔºåËÄåÁúüÂÆûDOMÁöÑÊìç‰ΩúÂ∞±ÁïôÁªôÊ∏≤ÊüìÂô®ÂéªÂÆûÁé∞</p>
<h2 id="Render-Pipeline"><a href="#Render-Pipeline" class="headerlink" title="Render Pipeline"></a>Render Pipeline</h2><p>‰ªéÈ´òÂ±ÇÊ¨°Êù•ÁúãÔºåÊåÇËΩΩVueÁªÑ‰ª∂Êó∂‰ºöÂèëÁîü‰ª•‰∏ãÂá†‰ª∂‰∫ãÔºö</p>
<ol>
<li><p><strong>Compile</strong>ÔºöVue Ê®°Áâà‰ºöË¢´ÁºñËØëÊàêÊ∏≤ÊüìÂáΩÊï∞ÔºöÊ∏≤ÊüìÂáΩÊï∞‰ºöËøîÂõûËôöÊãüDOMÊ†ëÔºåËøô‰∏ÄÊ≠•ÂèØ‰ª•ÊòØÂú®ÊûÑÂª∫‰πãÂâçÂÆåÊàêÔºå‰πüÂèØ‰ª•Âú®ËøêË°åÊó∂Ê∏≤ÊüìÂô®Âç≥Êó∂ÂÆåÊàêÁöÑ„ÄÇ</p>
</li>
<li><p><strong>Mount</strong>ÔºöËøêË°åÊó∂Ê∏≤ÊüìÂô®‰ºöË∞ÉÁî®Ê∏≤ÊüìÂáΩÊï∞ÔºåÁÑ∂ÂêéÈÅçÂéÜËøîÂõûÁöÑËôöÊãüDOMÊ†ëÔºåÂπ∂‰ª•Ê≠§ÂàõÂª∫ÁúüÂÆûDOMËäÇÁÇπ„ÄÇËøô‰∏ÄÊ≠•ÊòØÂú®ÂìçÂ∫îÂºèÂâØ‰ΩúÁî®‰∏≠ÊâßË°åÔºåÂõ†Ê≠§ÂÆÉ‰ºöË∑üË∏™ÊâÄÊúâ‰ΩøÁî®ËøáÁöÑÂìçÂ∫îÂºè‰æùËµñÈ°π„ÄÇ</p>
</li>
<li><p><strong>Patch</strong>ÔºöÂΩìÊåÇËΩΩÊúüÈó¥‰ΩøÁî®ËøáÁöÑ‰æùËµñÊï∞ÊçÆÂèëÁîüÂèòÂåñÊó∂ÔºåÂâØ‰ΩúÁî®‰ºöÈáçÊñ∞ËøêË°å„ÄÇËøôÊó∂Ôºå‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂπ∂‰∏îÁªèËøáÊõ¥Êñ∞ÁöÑËôöÊãüDOMÊ†ë„ÄÇÁÑ∂ÂêéËøêË°åÊó∂Ê∏≤ÊüìÂô®‰ºöÈÅçÂéÜÊñ∞ÁöÑDOMÊ†ëÔºåÂπ∂‰∏éÊóßÁöÑDOMÊ†ëËøõË°åÂØπÊØîÔºåÂπ∂Â∞ÜÂøÖË¶ÅÁöÑÊõ¥Êñ∞Â∫îÁî®Âà∞ÁúüÂÆûDOM‰∏ä„ÄÇ</p>
</li>
</ol>
<p><img src="https://cn.vuejs.org/assets/render-pipeline.03805016.png"></p>
<h2 id="Templates-vs-Render-Functions"><a href="#Templates-vs-Render-Functions" class="headerlink" title="Templates vs. Render Functions"></a>Templates vs. Render Functions</h2><p>VueÊ®°Áâà‰ºöË¢´ÁºñËØëÊàêËôöÊãüDOMÊ∏≤ÊüìÂáΩÊï∞„ÄÇÂè¶Â§ñVue‰πüÊèê‰æõ‰∫Ü‰∏Ä‰∫õAPIÂèØ‰ª•Ë∑≥ËøáÊ®°ÁâàÁºñËØëÈò∂ÊÆµÁõ¥Êé•ÁºñÂÜôÊ∏≤ÊüìÂáΩÊï∞„ÄÇÂΩì‰Ω†Âú®Â§ÑÁêÜÈ´òÂ∫¶Âä®ÊÄÅÁöÑÈÄªËæëÊó∂ÔºåÁõ¥Êé•ÁºñÂÜôÊ∏≤ÊüìÂáΩÊï∞ÊØîÊ®°ÁâàÊõ¥Âä†ÁÅµÊ¥ªÔºåÂõ†‰∏∫‰Ω†ÂèØ‰ª•‰ΩøÁî®javascriptÁöÑÂÖ®ÈÉ®ÂäüËÉΩÊù•Â§ÑÁêÜ vnodes</p>
<p>ÈÇ£‰∏∫‰ªÄ‰πàVueÈªòËÆ§Êé®Ëçê‰ΩøÁî®Ê®°ÁâàÂë¢ÔºüÊúâÂá†‰∏™ÂéüÂõ†Ôºö</p>
<ol>
<li><p>Ê®°ÁâàÊõ¥Êé•ËøëÁúüÂÆûÁöÑHTML„ÄÇËøôÊ†∑Â∞±Êõ¥ÂÆπÊòìÁöÑÂ§çÁî®Áé∞ÊúâÁöÑHTML‰ª£Á†ÅÊÆµÔºåÂπ∂ÊúâÊõ¥Â•ΩÁöÑÂèØËØªÊÄßÔºåÊõ¥ËÉΩÊñπ‰æøÂú∞‰ΩøÁî®CSSÊ†∑ÂºèÔºåÂπ∂‰∏îËÆæËÆ°Â∏àÊõ¥ÂÆπÊòìÁêÜËß£Âíå‰øÆÊîπ„ÄÇ</p>
</li>
<li><p>Ê®°ÁâàÁöÑËØ≠Ê≥ïÊõ¥Âä†Á°ÆÂÆöÔºåÂõ†Ê≠§Êõ¥ÂÆπÊòìËøõË°åÈùôÊÄÅÂàÜÊûê„ÄÇËøôÂ∞±ÂèØ‰ª•ËÆ©VueÁöÑÊ®°ÁâàÁºñËØëÂô®Âú®ÁºñËØëÊó∂ÊúâÊõ¥Â§öÁöÑ‰ºòÂåñÔºå‰ª•ÊèêÈ´òËôöÊãüDOMÁöÑÊÄßËÉΩ(Ëøô‰∏™Êàë‰ª¨‰ºöÂú®‰∏ãÈù¢ËÆ®ËÆ∫)„ÄÇ</p>
</li>
</ol>
<p>Âú®ÂÆûË∑µ‰∏≠ÔºåÊ®°ÁâàË∂≥‰ª•Êª°Ë∂≥Â∫îÁî®‰∏≠ÁöÑÂ§ßÂ§öÁî®‰æã„ÄÇÊ∏≤ÊüìÂáΩÊï∞ÈÄöÂ∏∏Âè™ÈúÄË¶ÅÂ§ÑÁêÜÈ´òÂ∫¶Âä®ÊÄÅÊ∏≤ÊüìÈÄªËæëÁöÑÂèØÈáçÁî®ÁªÑ‰ª∂„ÄÇÂ¶ÇÊûúÊÉ≥‰∫ÜËß£Êõ¥Â§öÊ∏≤ÊüìÂáΩÊï∞ÁöÑ‰ΩøÁî®ÔºåÂèØ‰ª•Âéª <a href="https://vuejs.org/guide/extras/render-function.html"><strong>Render Functions &amp; JSX</strong></a> ‰∏≠ÁªßÁª≠ÈòÖËØª</p>
<h2 id="Compiler-Informed-Virtual-DOM"><a href="#Compiler-Informed-Virtual-DOM" class="headerlink" title="Compiler-Informed Virtual DOM"></a>Compiler-Informed Virtual DOM</h2><p>React ‰∏≠ÁöÑËôöÊãüDOMÂíåÂ§ßÂ§öÊï∞ËôöÊãüDOMÂÆûÁé∞ÈÉΩÊòØÂçïÁ∫ØÁöÑËøêË°åÊó∂ÂÆûÁé∞Ôºöreconciliation ÁÆóÊ≥ïÊó†Ê≥ïÈ¢ÑÁü•‰º†ÂÖ•ÁöÑËôöÊãüDOMÊ†ëÔºåÊâÄ‰ª•ÂÆÉÂøÖÈ°ªÂÆåÂÖ®ÈÅçÂéÜÔºåÂπ∂ÂØπÊØîÊØè‰∏™vnodeÁöÑpropsÔºå‰ª•Á°Æ‰øùÊ≠£Á°ÆÊÄß„ÄÇÂè¶Â§ñ ÔºåÂç≥‰ΩøDOMÊ†ëÁöÑÂÖ∂‰∏≠‰∏ÄÈÉ®ÂàÜ‰ªéÊú™ÊîπÂèòÔºåÊØèÊ¨°ÈáçÊñ∞Ê∏≤ÊüìÊó∂‰πü‰ºö‰∏∫ÂÆÉ‰ª¨ÂàõÂª∫Êñ∞ÁöÑvnodeÔºå‰ªéËÄåÈÄ†Êàê‰∏çÂøÖË¶ÅÁöÑÂÜÖÂ≠òÂéãÂäõ„ÄÇËøô‰πüÊòØËôöÊãüDOMÊúÄ‰∏∫‰∫∫ËØüÁóÖÁöÑÂú∞Êñπ‰πã‰∏ÄÔºöÁ≤óÊö¥ÁöÑÊõ¥Êñ∞ËøáÁ®ãÁâ∫Áâ≤‰∫ÜÊïàÁéáÔºåÂç¥Êç¢Êù•‰∫Ü‰ª£Á†ÅÁöÑÂ£∞ÊòéÊÄßÂíåÊ≠£Á°ÆÊÄß</p>
<p>‰ΩÜÂÖ∂ÂÆû‰∏çÂøÖÂ¶ÇÊ≠§„ÄÇÂú®Vue‰∏≠ÔºåÊ°ÜÊû∂ÂêåÊó∂ÊéßÂà∂‰∫ÜÁºñËØëÂô®ÂíåËøêË°åÊó∂„ÄÇËøôÂèØ‰ª•ËÆ©Êàë‰ª¨ÂÆûÁé∞ËÆ∏Â§öÁºñËØëÊó∂ÁöÑ‰ºòÂåñÔºåÂè™ÊúâÁºñËØëÊó∂ÂíåÊ∏≤ÊüìÊó∂Á¥ßÂØÜËÄ¶ÂêàÊâçËÉΩÂà©Áî®Ëøô‰∫õ‰ºòÂåñ„ÄÇÁºñËØëÂô®ÂèØ‰ª•ÈùôÊÄÅÂàÜÊûêÊ®°ÁâàÔºåÂπ∂Âú®ÁîüÊàêÁöÑ‰ª£Á†Å‰∏≠Áïô‰∏ãÊèêÁ§∫ÔºåËøôÊ†∑ËøêË°åÊó∂Â∞±ÂèØËÉΩÈÄöËøáËøô‰∫õÊèêÁ§∫Ëµ∞Êç∑ÂæÑ„ÄÇÂêåÊó∂ÔºåÊàë‰ª¨‰ªçÁÑ∂‰øùÁïô‰∫ÜÁî®Êà∑Âú®Êüê‰∫õËæπÁïåÊÉÖÂÜµÊÉ≥Ë¶Å‰ΩøÁî®Â∫ïÂ±ÇÊ∏≤ÊüìÂáΩÊï∞ÁöÑËÉΩÂäõ„ÄÇÊàë‰ª¨Â∞ÜËøôÁßçÊ∑∑ÂêàÂÆûÁé∞Áß∞‰∏∫Â∏¶ÁºñËØëÊó∂‰ø°ÊÅØÁöÑËôöÊãü DOM (Compiler-Informed Virtual DOM)</p>
<p>Âú®‰∏ãÈù¢ÔºåÊàë‰ª¨Â∞ÜËÆ®ËÆ∫VueÁºñËØëÂô®‰∏∫ÊèêÈ´òËôöÊãüDOMËøêË°åÊó∂ÊÄßËÉΩËÄåËøõË°åÁöÑÂá†È°π‰∏ªË¶Å‰ºòÂåñ„ÄÇ</p>
<h3 id="Static-Hoisting"><a href="#Static-Hoisting" class="headerlink" title="Static Hoisting"></a>Static Hoisting</h3><p>Âú®Ê®°Áâà‰∏≠ÁªèÂ∏∏‰ºöÂá∫Áé∞‰∏çÂåÖÂê´‰ªª‰ΩïÂä®ÊÄÅÁªëÂÆöÁöÑÈÉ®ÂàÜÔºö</p>
<pre><code class="highlight js">&lt;div&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> &lt;!-- hoisted --&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>bar<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> &lt;!-- hoisted --&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; dynamic &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
&lt;/div&gt;

<span class="comment">// ==&gt; after compile</span>

<span class="keyword">import</span> &#123; createElementVNode <span class="keyword">as</span> _createElementVNode, createCommentVNode <span class="keyword">as</span> _createCommentVNode, toDisplayString <span class="keyword">as</span> _toDisplayString, openBlock <span class="keyword">as</span> _openBlock, createElementBlock <span class="keyword">as</span> _createElementBlock &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>

<span class="keyword">const</span> _hoisted_1 = <span class="comment">/*#__PURE__*/</span><span class="title function_">_createElementVNode</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;foo&quot;</span>, -<span class="number">1</span> <span class="comment">/* HOISTED */</span>)
<span class="keyword">const</span> _hoisted_2 = <span class="comment">/*#__PURE__*/</span><span class="title function_">_createElementVNode</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="string">&quot;bar&quot;</span>, -<span class="number">1</span> <span class="comment">/* HOISTED */</span>)

<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx, _cache, $props, $setup, $data, $options</span>) &#123;
  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createElementBlock</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, [
    _hoisted_1,
    <span class="title function_">_createCommentVNode</span>(<span class="string">&quot; hoisted &quot;</span>),
    _hoisted_2,
    <span class="title function_">_createCommentVNode</span>(<span class="string">&quot; hoisted &quot;</span>),
    <span class="title function_">_createElementVNode</span>(<span class="string">&quot;div&quot;</span>, <span class="literal">null</span>, <span class="title function_">_toDisplayString</span>(_ctx.<span class="property">dynamic</span>), <span class="number">1</span> <span class="comment">/* TEXT */</span>)
  ]))
&#125;</code></pre>

<p><code>foo</code> Âíå <code>bar</code>ÁöÑ<code>div</code>ÂÖÉÁ¥†ÊòØÈùôÊÄÅÁöÑÔºåÂõ†Ê≠§Âú®ÊØèÊ¨°ÈáçÊñ∞Ê∏≤ÊüìÊó∂ÈáçÊñ∞ÂàõÂª∫vnodeÂπ∂ËøõË°ådiffingÂ§ÑÁêÜÊòØÊ≤°ÂøÖË¶ÅÁöÑ„ÄÇVueÁºñËØëÂô®‰ºöËá™Âä®Â∞ÜÈùôÊÄÅÈÉ®ÂàÜ‰ªéÊ∏≤ÊüìÂáΩÊï∞‰∏≠ÁßªÂá∫Âà∞Â§ñÈù¢ÔºåÂπ∂Âú®ÊØèÊ¨°Ê∏≤ÊüìÊó∂ÈáçÂ§ç‰ΩøÁî®Áõ∏ÂêåÁöÑvnode„ÄÇÂΩìÊ∏≤ÊüìÂô®ÂèëÁé∞ÊóßÁöÑvnodeÂíåÊñ∞ÁöÑvnodeÊòØÂêå‰∏Ä‰∏™Êó∂ÔºåÂÆÉËøòÂèØ‰ª•ÂÆåÂÖ®Ë∑≥ËøáÂÆÉ‰ª¨ÁöÑdiffingÂ§ÑÁêÜ</p>
<p>Ê≠§Â§ñÔºåÂ¶ÇÊûúÊúâË∂≥Â§üÂ§öÁöÑËøûÁª≠ÈùôÊÄÅÂÖÉÁ¥†ÔºåÂÆÉ‰ª¨Â∞ÜÁªÑÂêàÊàê‰∏Ä‰∏™‚ÄùÈùôÊÄÅvnode‚ÄùÔºåÂÖ∂‰∏≠ÂåÖÂê´Ëøô‰∫õËäÇÁÇπÁöÑÁ∫ØHTMLÂ≠óÁ¨¶‰∏≤„ÄÇÁÑ∂ÂêéËøô‰∫õvnodeÂèØ‰ª•Áõ¥Êé•ÈÄöËøá<code>innerHTML</code>Êù•Âä†ËΩΩ„ÄÇÂú®ÂàùÂßãÊåÇËΩΩÊó∂ÔºåÂÆÉ‰ª¨‰πü‰ºöÁºìÂ≠òÁõ∏Â∫îÁöÑDOMËäÇÁÇπÔºåÂ¶ÇÊûúÂêå‰∏ÄÂÜÖÂÆπÂú®Â∫îÁî®ÁöÑÂÖ∂‰ªñÂú∞ÊñπÈáçÂ§ç‰ΩøÁî®ÂêéÔºåÂ∞±‰ºöÈÄöËøáÊú¨Âú∞ÁöÑ<code>cloneNode()</code>ÂàõÂª∫Êñ∞ÁöÑDOMËäÇÁÇπÔºåËøôÊ†∑ÂÅö‰ºöÈùûÂ∏∏È´òÊïà„ÄÇ</p>
<h3 id="Patch-Flags"><a href="#Patch-Flags" class="headerlink" title="Patch Flags"></a>Patch Flags</h3><p>ÂØπ‰∫éÂä®ÊÄÅÁªëÂÆöÁöÑÂçï‰∏™ÂÖÉÁ¥†ÔºåÊàë‰ª¨‰πüÂèØ‰ª•Âú®ÁºñËØëÊó∂‰ªé‰∏≠Êé®Êñ≠Âá∫ÂæàÂ§ö‰ø°ÊÅØÔºö</p>
<pre><code class="highlight js">&lt;!-- <span class="keyword">class</span> <span class="title class_">binding</span> only --&gt;
<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123; active &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>

&lt;!-- id and value bindings only --&gt;
<span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">:id</span>=<span class="string">&quot;id&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;value&quot;</span>&gt;</span></span>
<span class="language-xml"></span>
<span class="language-xml"><span class="comment">&lt;!-- text children only --&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; dynamic &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
<span class="language-xml"></span>
<span class="language-xml">// ==&gt; after compile</span>
<span class="language-xml"></span>
<span class="language-xml">import &#123; normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock &#125; from &quot;vue&quot;</span>
<span class="language-xml"></span>
<span class="language-xml">export function render(_ctx, _cache, $props, $setup, $data, $options) &#123;</span>
<span class="language-xml">  return (_openBlock(), _createElementBlock(_Fragment, null, [</span>
<span class="language-xml">    _createElementVNode(&quot;div&quot;, &#123;</span>
<span class="language-xml">      class: _normalizeClass(&#123; active: _ctx.active &#125;)</span>
<span class="language-xml">    &#125;, null, 2 /* CLASS */),</span>
<span class="language-xml">    _createElementVNode(&quot;input&quot;, &#123;</span>
<span class="language-xml">      id: _ctx.id,</span>
<span class="language-xml">      value: _ctx.value</span>
<span class="language-xml">    &#125;, null, 8 /* PROPS */, [&quot;id&quot;, &quot;value&quot;]),</span>
<span class="language-xml">    _createElementVNode(&quot;div&quot;, null, _toDisplayString(_ctx.dynamic), 1 /* TEXT */)</span>
<span class="language-xml">  ], 64 /* STABLE_FRAGMENT */))</span>
<span class="language-xml">&#125;</span>
<span class="language-xml"></span></code></pre>

<p>Âú®‰∏∫Ëøô‰∫õÂÖÉÁ¥†ÁîüÊàêÊ∏≤ÊüìÂáΩÊï∞‰ª£Á†ÅÊó∂ÔºåVue‰ºöÂú®vnodeÂàõÂª∫Ë∞ÉÁî®‰∏≠Áõ¥Êé•ÁºñÁ†ÅÊØè‰∏™ÂÖÉÁ¥†ÊâÄÈúÄÁöÑÊõ¥Êñ∞Á±ªÂûãÔºö</p>
<pre><code class="highlight js"><span class="title function_">createElementVNode</span>(<span class="string">&quot;div&quot;</span>, &#123;
  <span class="attr">class</span>: <span class="title function_">_normalizeClass</span>(&#123; <span class="attr">active</span>: _ctx.<span class="property">active</span> &#125;)
&#125;, <span class="literal">null</span>, <span class="number">2</span> <span class="comment">/* CLASS */</span>)</code></pre>

<p>ÊúÄÂêé‰∏Ä‰∏™ÂèÇÊï∞2ÊòØpatch flag„ÄÇ‰∏Ä‰∏™ÂÖÉÁ¥†ÂèØ‰ª•ÊúâÂ§ö‰∏™flagÔºåËøô‰∫õflag‰ºöÂêàÂπ∂Êàê‰∏Ä‰∏™Êï∞Â≠ó„ÄÇÁÑ∂ÂêéÔºåËøêË°åÊó∂Ê∏≤ÊüìÂô®ÂèØ‰ª•ÈÄöËøá‰ΩçËøêÁÆóÊ£ÄÊü•Ëøô‰∫õflagÔºåÁî®‰∫éÁ°ÆÂÆöÊòØÂê¶ÈúÄË¶ÅÊâßË°åÊüê‰∫õÊõ¥Êñ∞Êìç‰ΩúÔºö</p>
<pre><code class="highlight js"><span class="keyword">if</span> (vnode.<span class="property">patchFlag</span> &amp; <span class="title class_">PatchFlags</span>.<span class="property">CLASS</span> <span class="comment">/* 2 */</span>) &#123;
  <span class="comment">// update the element&#x27;s class</span>
&#125;</code></pre>

<p>‰ΩçËøêÁÆóÊ£ÄÊü•ÈÄüÂ∫¶ÊûÅÂø´„ÄÇÊúâ‰∫Üpatch flagsÔºåVueÂ∞±ËÉΩÈÄöËøáÊúÄÂ∞ëÁöÑÊõ¥Êñ∞Êìç‰ΩúÊù•Êõ¥Êñ∞ÂÖ∑ÊúâÂä®ÊÄÅÁªëÂÆöÁöÑÂÖÉÁ¥†</p>
<p>VueËøò‰ºöÁªôvnodeÁöÑÂ≠êËäÇÁÇπÁ±ªÂûãËøõË°åÁºñÁ†Å„ÄÇ‰æãÂ¶ÇÔºåÂÖ∑ÊúâÂ§ö‰∏™Ê†πËäÇÁÇπÁöÑÊ®°ÁâàË¢´Ë°®Á§∫‰∏∫‰∏Ä‰∏™ÁâáÊÆµ„ÄÇÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•Á°ÆÂÆöËøô‰∫õÊ†πËäÇÁÇπÁöÑÈ°∫Â∫èÊ∞∏Ëøú‰∏ç‰ºöÊîπÂèòÔºåÊâÄ‰ª•ÂèØ‰ª•Â∞ÜËøô‰∏™‰ø°ÊÅØÈÄöËøáÊ†áËÆ∞Êèê‰æõÁªôËøêË°åÊó∂</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createElementBlock</span>(_Fragment, <span class="literal">null</span>, [
    <span class="comment">/* children */</span>
  ], <span class="number">64</span> <span class="comment">/* STABLE_FRAGMENT */</span>))
&#125;
</code></pre>

<p>ÊâÄ‰ª•ÔºåËøêË°åÊó∂ÂèØ‰ª•ÂÆåÂÖ®Ë∑≥ËøáÊ†πÁâáÊÆµÁöÑÂ≠êÂ∫èÂàóÈ°∫Â∫èÁöÑÂçèË∞ÉËøáÁ®ã</p>
<h3 id="Tree-Flattening"><a href="#Tree-Flattening" class="headerlink" title="Tree Flattening"></a>Tree Flattening</h3><p>ÂÜçÁúã‰∏Ä‰∏ã‰∏ä‰∏Ä‰∏™Á§∫‰æã‰∏≠ÁîüÊàêÁöÑ‰ª£Á†ÅÔºå‰Ω†‰ºöÂèëÁé∞ËøîÂõûÁöÑËôöÊãüDOMÊ†ëÁöÑÊ†πÊòØÈÄöËøá‰∏Ä‰∏™ÁâπÊÆäÁöÑ <code>createElementBlock()</code>Ë∞ÉÁî®ÂàõÂª∫ÁöÑÔºö</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params"></span>) &#123;
  <span class="keyword">return</span> (<span class="title function_">_openBlock</span>(), <span class="title function_">_createElementBlock</span>(_Fragment, <span class="literal">null</span>, [
    <span class="comment">/* children */</span>
  ], <span class="number">64</span> <span class="comment">/* STABLE_FRAGMENT */</span>))
&#125;</code></pre>

<p>‰ªéÊ¶ÇÂøµ‰∏äÁúãÔºå‚Äúblock‚ÄùÊòØÊ®°Áâà‰∏≠ÂÖ∑ÊúâÁ®≥ÂÆöÂÜÖÈÉ®ÁªìÊûÑÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÂú®Ëøô‰∏™Á§∫‰æã‰∏≠ÔºåÊï¥‰∏™Ê®°ÁâàÂè™Êúâ‰∏Ä‰∏™blockÔºåÂõ†‰∏∫ÂÆÉ‰∏çÂåÖÂê´‰ªª‰ΩïÁªìÊûÑÊåá‰ª§ÔºåÂ¶Ç<code>v-if</code>Âíå<code>v-for</code></p>
<p>ÊØè‰∏™blockÈÉΩ‰ºöËøΩË∏™‰ªª‰ΩïÊúâpatch flagsÁöÑÂêé‰ª£ËäÇÁÇπ(‰∏çÂè™ÊòØÁõ¥Êé•Â≠êËäÇÁÇπ)„ÄÇ‰æãÂ¶ÇÔºö</p>
<pre><code class="highlight js">&lt;div&gt; &lt;!-- root block --&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>         &lt;!-- not tracked --&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:id</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>   &lt;!-- tracked --&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>                  <span class="comment">&lt;!-- not tracked --&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123; bar &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="comment">&lt;!-- tracked --&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
&lt;/div&gt;</code></pre>

<p>Ëøô‰∏™ÁªìÊûúÊòØ‰∏Ä‰∏™Âè™ÂåÖÂê´Âä®ÊÄÅÂ≠êËäÇÁÇπÁöÑÊâÅÂπ≥ÂåñÊï∞ÁªÑÔºö</p>
<pre><code class="highlight js">div (block root)
- div <span class="keyword">with</span> :id binding
- div <span class="keyword">with</span> &#123;&#123; bar &#125;&#125; binding</code></pre>

<p>ÂΩìÁªÑ‰ª∂ÈúÄË¶ÅÈáçÊñ∞Ê∏≤ÊüìÊó∂ÔºåÂÆÉÂè™ÈúÄË¶ÅÈÅçÂéÜËøô‰∏™ÊâÅÂπ≥ÂåñÁöÑÊ†ëËÄå‰∏çÊòØÊï¥Ê£µÊ†ë„ÄÇËøôÂ∞±ÊâÄË∞ìÁöÑ Tree FlatteningÔºåÂÆÉÂ§ßÂ§ßÂáèÂ∞ë‰∫ÜËôöÊãüDOMÂçèË∞ÉËøáÁ®ã‰∏≠ÈúÄË¶ÅÈÅçÂéÜÁöÑËäÇÁÇπÊï∞Èáè„ÄÇÊ®°Áâà‰∏≠ÁöÑ‰ªª‰ΩïÈùôÊÄÅÈÉ®ÂàÜÈÉΩ‰ºöÈ´òÊïàÁï•Ëøá„ÄÇ</p>
<p><code>v-if</code>Âíå<code>v-for</code>‰ºöÂàõÂª∫Êñ∞ÁöÑblockËäÇÁÇπÔºö</p>
<pre><code class="highlight js">&lt;div&gt; &lt;!-- root block --&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>&gt;</span> <span class="comment">&lt;!-- if block --&gt;</span></span>
<span class="language-xml">      ...</span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
<span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></code></pre>

<p>Â≠êblock‰ºöÂú®Áà∂blockÁöÑÂä®ÊÄÅÂêé‰ª£Êï∞ÁªÑ‰∏≠ËøõË°åËøΩË∏™„ÄÇËøôÂ∞±‰∏∫Áà∂block‰øùÁïô‰∫Ü‰∏Ä‰∏™Á®≥ÂÆöÁöÑÁªìÊûÑ„ÄÇ</p>
<h2 id="Impact-on-SSR-Hydration"><a href="#Impact-on-SSR-Hydration" class="headerlink" title="Impact on SSR Hydration"></a>Impact on SSR Hydration</h2><p>patch flags Âíå tree flattening ‰πü‰ºöÊèêÈ´òVueÁöÑ <a href="https://vuejs.org/guide/scaling-up/ssr.html#client-hydration">SSR Hydration</a> ÊÄßËÉΩÔºö</p>
<ul>
<li>Âçï‰∏™ÂÖÉÁ¥†ÁöÑ hydration ÂèØ‰ª•Ê†πÊçÆ vnode ÁöÑ path flag Ëµ∞Êõ¥Âø´ÁöÑÊç∑ÂæÑ„ÄÇ</li>
<li>Âè™ÊúâblockËäÇÁÇπÂíåÂÖ∂Âä®ÊÄÅÂ≠êËäÇÁÇπÂú®ËøõË°å hydration Êó∂ÈúÄË¶ÅËøõË°åÈÅçÂéÜÔºå‰ªéËÄåÂú®Ê®°ÊùøÁ∫ßÂà´ÂÆûÁé∞ÈÉ®ÂàÜ hydration„ÄÇ</li>
</ul>
]]></content>
      <tags>
        <tag>Vue</tag>
        <tag>Translate</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëResource optimization in Node.js</title>
    <url>/2023/07/15/%E3%80%90%E7%BF%BB%E3%80%91Resource-optimization-in-Node-js/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://medium.com/pipedrive-engineering/resource-optimization-in-node-js-c90c731f9df4">Resource optimization in Node.js</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@nelson.gomes_64705">Nelson Gomes</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜÊé¢Á¥¢Node.jsÊúÄÂ§ß‰ºòÂåñÁöÑÂèØËÉΩÊÄßÔºåÂπ∂‰∫ÜËß£ËµÑÊ∫êÂÖ±‰∫´ÁöÑÂ•ΩÂ§ÑÔºåÂèçËØÅÊØè‰∏™ËØ∑Ê±ÇÈÉΩÂøÖÈ°ªÈöîÁ¶ªÁöÑÂÅáËÆæ„ÄÇÂä†ÂÖ•Êàë‰ª¨ÔºåÂèëÊéòNode.jsÁöÑÂÖ®ÈÉ®ÊΩúÂäõÔºå‰∫ÜËß£ËµÑÊ∫ê‰ºòÂåñÂ¶Ç‰ΩïÊèêÈ´òÂ∫îÁî®Á®ãÂ∫èÁöÑÊÄßËÉΩÂíåÊïàÁéá„ÄÇ</p>
<p>Êàë‰ª¨ÈÉΩÁü•ÈÅìNode.jsÈÄüÂ∫¶Âø´ÔºåÂçïÁ∫øÁ®ãÔºåÊó†ÈòªÂ°ûÔºå‰ΩÜÊàë‰ª¨Âú®ÂºÄÂèë‰∏≠ÊòØÂê¶ÂÖÖÂàÜÂà©Áî®‰∫ÜÂë¢ÔºüÂ§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÁöÑÁ≠îÊ°àÊòØ‚ÄùÊ≤°Êúâ‚Äù</p>
<p>Âõ†‰∏∫ÂÆÉÊòØÂçïÁ∫øÁ®ãÁöÑÔºåÊàë‰ª¨ÂæÄÂæÄ‰ºöÂøòËÆ∞Êàë‰ª¨‰ªçÁÑ∂ÊúâÂá†‰∏™Á±ª‰ººÁ∫øÁ®ãÁöÑÊâßË°åÊñπÂºèÔºÅÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÊîπËøõ‰ª£Á†ÅÁöÑÊâßË°åÊñπÂºèÔºåÂ∞ÜÁ∫øÁ®ãËé∑ÂæóÁöÑËµÑÊ∫êÊèê‰æõÁªôÂÖ∂‰ªñÁ∫øÁ®ã‰ΩøÁî®Ôºå‰ªéËÄåÂáèÂ∞ëËøô‰∫õÂÆùË¥µËµÑÊ∫êÁöÑË¥üËΩΩ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Y7nbW1YwR2kEX-2hq16vA.png"></p>
<p>ÂÅáËÆæÊàë‰ª¨Êúâ‰∏Ä‰∏™Á´ØÁÇπË∞ÉÁî®‰∏Ä‰∏™APIÔºåÂπ∂‰∏îËØ•Á´ØÁÇπÂêåÊó∂Ë¢´ËÆ∏Â§öÂÆ¢Êà∑Á´ØË∞ÉÁî®„ÄÇÂõ†Ê≠§ÔºåÂΩìÁ¨¨‰∏Ä‰∏™ËØ∑Ê±ÇÂà∞ËææÂπ∂ÈúÄË¶ÅË∞ÉÁî®ËØ•APIÊó∂ÔºåÁ¨¨‰∫å‰∏™ËØ∑Ê±Ç‰πüÂà∞ËææÂπ∂Ë∞ÉÁî®‰∏éÁ¨¨‰∏Ä‰∏™ËØ∑Ê±ÇÂÆåÂÖ®Áõ∏ÂêåÁöÑAPIÔºå‰∏∫‰ªÄ‰πà‰∏çÂÖ±‰∫´ÂÆÉÂë¢Ôºü</p>
<p>ÂºÄÂèë‰∫∫ÂëòÁªèÂ∏∏Êúâ‰∏™ÈîôËØØÁöÑÂÅáËÆæÔºåËÆ§‰∏∫Âú®Node.jsÊúçÂä°Âô®‰∏äÂ∑•‰ΩúÊó∂ÔºåÊØè‰∏™ËØ∑Ê±ÇÈÉΩÂøÖÈ°ª‰∏éÂÖ∂‰ªñËØ∑Ê±ÇÂÆåÂÖ®ÈöîÁ¶ªÔºåÊØè‰∏™ËØ∑Ê±ÇÈÉΩÈúÄË¶ÅÂú®‰∏éÂÖ∂‰ªñËØ∑Ê±ÇÈöîÁ¶ªÁöÑÊÉÖÂÜµ‰∏ãËøõË°åË∞ÉÁî®ÂíåÊï∞ÊçÆÂ∫ìËØ∑Ê±Ç„ÄÇ</p>
<p>‰∫ãÂÆûÂπ∂ÈùûÂ¶ÇÊ≠§„ÄÇ</p>
<p>Â¶ÇÊûúÊª°Ë∂≥Êüê‰∫õÊÉÖÂÜµÔºåËØ∑Ê±ÇÂèØ‰ª•ÂÖ±‰∫´Âêå‰∏Ä‰∏™ËµÑÊ∫êÔºö</p>
<ul>
<li>È¶ñÂÖàËøô‰∏™ËØ∑Ê±Ç‰∏çÊòØÂÆ¢Êà∑ÁâπÂÆöÊï∞ÊçÆÔºåÊàñËÄÖÊ≤°Êúâ‰ΩøÁî® authentication token ÔºàÊàë‰ª¨Áªù‰∏çËÉΩÊ∑∑ÂêàËøô‰∫õËØ∑Ê±ÇÔºåËøôÊÑèÂë≥ÁùÄÊàë‰ª¨ÈúÄË¶ÅÁü•ÈÅìË∞ÅÊèêÂá∫‰∫ÜËØ∑Ê±ÇÔºâ„ÄÇ</li>
<li>ËØ∑Ê±ÇÊï∞ÊçÆÁ°Æ‰øùÊòØÂÆåÂÖ®Áõ∏Âêå„ÄÇ</li>
<li>Êàë‰ª¨Ë¶ÅÁ°Æ‰øùÂ¶ÇÊûúÂèëÁîüÈîôËØØÔºå‰∏ç‰ºöÂ∞Ü‰ø°ÊÅØÊ≥ÑÈú≤ÁªôÂÖ∂‰ªñÂÆ¢Êà∑Á´Ø(ÂØºËá¥GDPRÈóÆÈ¢ò)ÔºåÂèØ‰ª•ÈÄöËøáËÆ∞ÂΩïÂéüÂßãÈîôËØØÂπ∂ÂêëÊâÄÊúâÂÆ¢Êà∑Á´ØÂèëÈÄÅ‰∏Ä‰∏™ÈÄöÁî®ÈîôËØØÊù•ÈÅøÂÖç„ÄÇ</li>
<li>ÊúÄÂêéÔºåÂÆÉÈúÄË¶ÅÊòØ‰∏Ä‰∏™È¢ëÁπÅË∞ÉÁî®ÁöÑËØ∑Ê±ÇÔºåÊúÄÂ•ΩÊòØÈúÄË¶Å‰∏Ä‰∫õÊó∂Èó¥Êù•ÊâßË°åÔºåËøôÊ†∑ËµÑÊ∫êÂÖ±‰∫´ÂØπÂ§ö‰∏™ÊâßË°åËØ∑Ê±ÇÊù•ËØ¥ÊâçÊúâÂ•ΩÂ§ÑÔºåÂê¶ÂàôÂ•ΩÂ§ÑÂá†‰πé‰∏ç‰ºöÂØüËßâ</li>
</ul>
<p>ÂÖ≥‰∫éËØ∑Ê±ÇÊµÅÁ®ãÔºåËØ∑Êü•Áúã‰∏ãÂõæÔºåÊØè‰∏ÄË°å‰ª£Ë°®‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÊØè‰∏™È¢úËâ≤Êù°‰ª£Ë°®‰ΩøÁî®ËµÑÊ∫êÊâÄËä±Ë¥πÁöÑÊó∂Èó¥„ÄÇÂõ†‰∏∫ÊØè‰∏™ËØ∑Ê±ÇÈÉΩÊòØÂÆåÂÖ®Áã¨Á´ãÁöÑÔºåÊàë‰ª¨Âπ∂Ê≤°ÊúâÂÖ±‰∫´ËµÑÊ∫êÔºåËÄåÂΩìÂ∫îÁî®Á®ãÂ∫èËøõË°åÊï∞ÂçÉ‰∏™Âπ∂ÂèëËØ∑Ê±ÇÊó∂ËøôÈÄöÂ∏∏ÂæàÈáçË¶ÅÔºåÂπ∂‰∏î‰∏çÂÆπÊòìËß£ÂÜ≥„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OyXUNpB0IYVS9pT780KbIw.png"></p>
<p>ÂΩìÊàë‰ª¨Êã•ÊúâÈùûÂ∏∏‰∏ìÈó®ÂåñÁöÑÊúçÂä°Êó∂ÔºåÊàë‰ª¨ÂèØËÉΩ‰ºöÊúâÂ§ö‰∏™ËØ∑Ê±ÇËØ∑Ê±ÇÂÆåÂÖ®Áõ∏ÂêåÁöÑËµÑÊ∫êÔºåËøôÊòØÊîπËøõÊàë‰ª¨Â∫îÁî®Á®ãÂ∫èÁöÑÊú∫‰ºö„ÄÇ</p>
<p>ËØ∑ÁúãÔºå‰∏Ä‰∫õË∞ÉÁî®Ë¢´PromiseÊõø‰ª£‰∫Ü„ÄÇËøôÊòØÂõ†‰∏∫ÂêåÊ†∑ÁöÑËµÑÊ∫êÂ∑≤ÁªèË¢´Ëé∑ÂèñÔºåÊâÄ‰ª•Êàë‰ª¨ÂÜ≥ÂÆöÂÖ±‰∫´ÂÆÉËÄå‰∏çÊòØÂÜçÊ¨°Ë∞ÉÁî®Ôºå‰ªéËÄåÂáèËΩªËµÑÊ∫êÁöÑË¥üËΩΩ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vCkIw3uTwjUSTsoAj6V5iA.png"></p>
<p>Âú®JavaÁ≠âËØ≠Ë®Ä‰∏≠ÔºåÂºÄÂèëËÄÖ‰ΩøÁî®ÂêåÊ≠•ÊñπÊ≥ïÊù•ÊéßÂà∂ËµÑÊ∫êËÆøÈóÆ„ÄÇËÄåÂØπ‰∫éNode.jsÊúâ‰∏™Â•ΩÂ§ÑÔºåÁî±‰∫éNode.jsÁöÑÊû∂ÊûÑÔºå‰∏çÈúÄË¶ÅÂØπ mutexes Êàñ semaphores ËøõË°åÊòÇË¥µÁöÑÁ≥ªÁªüË∞ÉÁî®ÔºåËøô‰ΩøÂæóNode.jsÁöÑÈÄüÂ∫¶Êõ¥Âø´„ÄÇ</p>
<p>ÂΩìÁÑ∂ÔºåÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàëËØ¥ÁöÑÊòØÊúçÂä°ÁöÑÂçï‰∏™ÂÆû‰æã„ÄÇÂú®Â§ö‰∏™ÊúçÂä°ÂÆû‰æã‰∏äËøõË°åÊ≠§Êìç‰ΩúÁ®çÂæÆÂ§çÊùÇ‰∏Ä‰∏ã„ÄÇÂ∞ΩÁÆ°Ê¶ÇÂøµÊòØÁõ∏‰ººÁöÑÔºàÊàëÊ≠£Âú®Á†îÁ©∂Êõ¥È´òÁ∫ßÁöÑÂàÜÂ∏ÉÂºèÊ®°ÂºèÔºâ</p>
<p>Ëøô‰∏™‰ºòÂåñÁÇπÁöÑÊúâË∂£‰πãÂ§Ñ‰∏ç‰ªÖÂú®‰∫éËäÇÁúÅËµÑÊ∫êÔºåÂÆûÈôÖ‰∏äÔºåÂÆÉËøòËÉΩËÆ©‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫èÂèòÂæóÊõ¥Âø´„ÄÇ‰Ω†ÂèØËÉΩ‰ºöÈóÆ„ÄÇÊÄé‰πàÂèØËÉΩÔºüËÆ©Êàë‰ª¨ÂÅáËÆæ‰∏Ä‰∏™Êìç‰ΩúËÄóÊó∂200msÔºåÂπ∂‰∏îÂêå‰∏ÄÊìç‰ΩúÁöÑ‰ªª‰ΩïÂêéÁª≠ËØ∑Ê±ÇÈÉΩ‰ºöÈáçÂ§ç‰ΩøÁî®ËØ•Êìç‰Ωú„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÂú®Ëøô200msÂÜÖ‰ªª‰Ωï‰º†ÂÖ•ÁöÑËØ∑Ê±ÇÈÉΩÂ∞ÜÈáçÁî®ËØ•ÁªìÊûúÔºåÂç≥‰ΩøÂÆÉÊòØÂú®ÂàùÂßãÊìç‰ΩúÂºÄÂßã1msÂêéÊàñ200msÂêéÂºÄÂßãÁöÑÔºåÂõ†Ê≠§ÈáçÁî®Êìç‰ΩúÂπ≥ÂùáËÄóÊó∂200ms&#x2F;2&#x3D;100ms„ÄÇ</p>
<p>ÈÄöËøáÈáçÂ§çËøô‰∫õÊìç‰ΩúÔºå‰Ω†Â∞ÜÂπ≥ÂùáËäÇÁúÅ‰∏ÄÂçäÁöÑÊó∂Èó¥ÔºåËøôÊòØ‰∏Ä‰∏™ÊûÅÂ§ßÁöÑ‰ºòÂåñ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uA-88yStVJNi_bhp9SKX0A.png"></p>
<p>Èô§Èùû‰Ω†Âú®Á±ª‰ºº transaction ÁöÑÊìç‰ΩúËåÉÂõ¥ÂÜÖËøêË°åÔºåÊàñËÄÖÂú®APIË∞ÉÁî®Êó∂‰ΩøÁî®‰∫ÜÁâπÂÆöÁöÑ Áî®Êà∑tokenÔºàÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†‰∏çÂ∫îËØ•ÂÖ±‰∫´Áî±Ê≠§‰∫ßÁîüÁöÑÊï∞ÊçÆÔºâÔºåÈô§Ê≠§‰πãÂ§ñ‰Ω†ÂèØ‰ª•ÊØ´Êó†È°æËôëÂú∞ÂÖ±‰∫´Â§ßÈÉ®ÂàÜÂ∏∏ËßÅÊìç‰ΩúÊï∞ÊçÆ„ÄÇ</p>
<p>ÈÇ£Êàë‰ª¨Â¶Ç‰ΩïÂÆûÁé∞Ëøô‰∏™ÁõÆÊ†áÔºåPromise Â∞±ÊòØÁ≠îÊ°à</p>
<p>ÂΩìÊàë‰ª¨Ê£ÄÊµãÂà∞ÂØπËµÑÊ∫êÁöÑË∞ÉÁî®Â∑≤ÁªèÂºÄÂßãÊó∂ÔºåÊàë‰ª¨‰∏çÂêØÂä®ÂØπÂÆÉÁöÑÂè¶‰∏Ä‰∏™Ë∞ÉÁî®ÔºåËÄåÊòØËøîÂõû‰∏Ä‰∏™PromiseÊù•Ë°®Á§∫ÂÖ∂ÁªìÊûú(or failure)„ÄÇËøôÊ†∑ÔºåÂ∞±ÂèØ‰ª•ÈÅøÂÖçÂØπAPI„ÄÅÊï∞ÊçÆÂ∫ìÊü•ËØ¢Êàñ‰ªª‰ΩïÈúÄË¶ÅË∞ÉÁî®ÁöÑÂπ∂ÂèëËØ∑Ê±ÇÔºå‰ªéËÄåÈôç‰ΩéËµÑÊ∫êË¥üËΩΩ„ÄÇ</p>
<p>Êàë‰ª¨Êù•ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂçïÁöÑË∞ÉÁî®ÔºåÂÆÉÈúÄË¶Å‰∏Ä‰∫õÊó∂Èó¥Âπ∂ËøîÂõû‰∏Ä‰∏™ÁªìÊûú„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨Ë¶ÅÂ∞ÜÂá†‰∏™ÂÄº‰πò‰ª•200msÁöÑÂª∂ËøüÔºåËøôÂ∞Ü‰ª£Ë°®Êàë‰ª¨ÁöÑAPIË∞ÉÁî®ÊàñÊï∞ÊçÆÂ∫ìÊü•ËØ¢Ôºö</p>
<pre><code class="highlight ts"><span class="keyword">import</span> &#123; delay &#125; <span class="keyword">from</span> <span class="string">&#x27;ts-timeframe&#x27;</span>;

<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">simulatedCall</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;
  <span class="comment">// these 3 lines represent our call</span>
  <span class="keyword">await</span> <span class="title function_">delay</span>(<span class="number">200</span>);
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`calculated <span class="subst">$&#123;a&#125;</span> * <span class="subst">$&#123;b&#125;</span>`</span>);
  <span class="keyword">return</span> a * b;
&#125;

<span class="comment">// our data fetching function, could be an API call, db query, whatever slow promise is needed</span>
<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">costlyFunction</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt; &#123;
  <span class="keyword">return</span> <span class="title function_">simulatedCall</span>(a, b);
&#125;

<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> values = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([
    <span class="title function_">costlyFunction</span>(<span class="number">4</span>, <span class="number">5</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">4</span>, <span class="number">5</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">4</span>, <span class="number">5</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">50</span>, <span class="number">2</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">50</span>, <span class="number">2</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">50</span>, <span class="number">2</span>),
  ]);

  <span class="variable language_">console</span>.<span class="title function_">log</span>(values);
&#125;

<span class="title function_">main</span>();</code></pre>

<p>ÂΩìÊàë‰ª¨ÊâßË°åËøôÊÆµ‰ª£Á†ÅÊó∂ÔºåÂæóÂà∞‰∫ÜÈ¢ÑÊúüÁöÑÁªìÊûúÔºåÊ≤°Êúâ‰ªª‰ΩïÊÑèÂ§ñ„ÄÇÊàë‰ª¨Ë∞ÉÁî®ËØ•ÂáΩÊï∞6Ê¨°ÔºåÊØèÊ¨°Á≠âÂæÖ200ms</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0X2mg3xU-XhG-W6YmR26YQ.png"></p>
<p>Áé∞Âú®ÔºåËÆ©Êàë‰ª¨ÊîπÂèòËøô‰∫õ‰ª£Á†ÅÔºåÂà©Áî®‰πãÂâçÁöÑÊ®°ÂºèÊù•ÊîπËøõÊàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫è„ÄÇËøôÊ¨°Êàë‰ª¨Â∞Ü‰ΩøÁî® <code>OperationRegistry</code> Êù•ÁÆ°ÁêÜÊàë‰ª¨ÁöÑË∞ÉÁî®ÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÔºåÊàë‰ª¨Â∞ÜÂàõÂª∫‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑkeyÊù•Ê†áËØÜÊàë‰ª¨Âú®Ê≥®ÂÜåË°®‰∏≠ÁöÑÊìç‰Ωú„ÄÇ</p>
<p>ÂÆåÊàêÂêéÔºåÊàë‰ª¨‰ºöË∞ÉÁî® <code>isExecuting</code> ÂáΩÊï∞Êü•ÁúãÂÆÉÊòØÂê¶ËøîÂõû‰∏Ä‰∏™Promise„ÄÇÂ¶ÇÊûúÊòØÔºåËøôÊÑèÂë≥ÁùÄÂè¶‰∏Ä‰∏™ÊâßË°åÊ≠£Âú®ËøõË°å‰∏≠ÔºåÊàë‰ª¨Âè™ÈúÄËøîÂõûÁ≠âÂæÖÁªìÊûúÁöÑPromise„ÄÇÂê¶ÂàôÔºåÊàë‰ª¨ÊâßË°åË∞ÉÁî®ÔºåÂ∞ÜÁªìÊûú‰º†Êí≠ÁªôÊâÄÊúâÂæÖÊâßË°åÁöÑPromiseÔºåÂπ∂ËøîÂõûÊàë‰ª¨ÁöÑÂÄºÔºåÊ†πÊçÆÊìç‰ΩúÊòØÂê¶ÊàêÂäüÔºåÂèØ‰ª•ÈÄöËøá <code>triggerAwaitingResolves</code> Êàñ <code>triggerAwaitingRejects</code> Â∞ÜÁªìÊûú‰º†ÈÄíÁªôÁâπÂÆö Promise</p>
<pre><code class="highlight ts"><span class="keyword">import</span> &#123; delay &#125; <span class="keyword">from</span> <span class="string">&#x27;ts-timeframe&#x27;</span>;
<span class="keyword">import</span> &#123; <span class="title class_">OperationRegistry</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;reliable-caching&#x27;</span>;

<span class="keyword">const</span> operationRegistry = <span class="keyword">new</span> <span class="title class_">OperationRegistry</span>(<span class="string">&#x27;costlyFunction&#x27;</span>);

<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">simulatedCall</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>) &#123;
  <span class="comment">// these 3 lines represent our call</span>
  <span class="keyword">await</span> <span class="title function_">delay</span>(<span class="number">200</span>);
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`calculated <span class="subst">$&#123;a&#125;</span> * <span class="subst">$&#123;b&#125;</span>`</span>);
  <span class="keyword">return</span> a * b;
&#125;

<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">costlyFunction</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">number</span>&gt; &#123;
  <span class="keyword">const</span> uniqueOperationKey = <span class="string">`<span class="subst">$&#123;a&#125;</span>:<span class="subst">$&#123;b&#125;</span>`</span>;
  <span class="keyword">const</span> promiseForResult = operationRegistry.<span class="property">isExecuting</span>&lt;<span class="built_in">number</span>&gt;(uniqueOperationKey);

  <span class="comment">// a promise means execution for the same key is ongoing, we just need to await for it</span>
  <span class="keyword">if</span> (promiseForResult) &#123;
    <span class="keyword">return</span> promiseForResult;
  &#125;

  <span class="keyword">try</span> &#123;
    <span class="comment">// otherwise we call it</span>
    <span class="keyword">const</span> value = <span class="keyword">await</span> <span class="title function_">simulatedCall</span>(a, b);

    <span class="comment">// pass value to awaiting promises (in next event loop, to avoid delaying current execution)</span>
    operationRegistry.<span class="title function_">triggerAwaitingResolves</span>(uniqueOperationKey, value);

    <span class="comment">// return value to current execution</span>
    <span class="keyword">return</span> value;
  &#125; <span class="keyword">catch</span> (e) &#123;
    <span class="comment">// pass error to awaiting rejects (in next event loop, to avoid delaying current execution)</span>
    operationRegistry.<span class="title function_">triggerAwaitingRejects</span>(uniqueOperationKey, e);

    <span class="comment">// throw exception to current execution</span>
    <span class="keyword">throw</span> e;
  &#125;
&#125;

<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> values = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([
    <span class="title function_">costlyFunction</span>(<span class="number">4</span>, <span class="number">5</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">4</span>, <span class="number">5</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">4</span>, <span class="number">5</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">50</span>, <span class="number">2</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">50</span>, <span class="number">2</span>),
    <span class="title function_">costlyFunction</span>(<span class="number">50</span>, <span class="number">2</span>),
  ]);

  <span class="variable language_">console</span>.<span class="title function_">log</span>(values);
&#125;

<span class="title function_">main</span>();</code></pre>

<p>ËÆ©Êàë‰ª¨ÁúãÁúãÂΩìÁ¨¨‰∫åÊ¨°ÊâßË°åËøôÊÆµ‰ª£Á†ÅÊó∂‰ºöÂèëÁîü‰ªÄ‰πàÔºö</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YRX9-tGj6Gwaciiudtj13Q.png"></p>
<p>ÁªìÊûúÂÆåÂÖ®Áõ∏ÂêåÔºå‰ΩÜÊàë‰ª¨ÁöÑÂáΩÊï∞Âè™Ë∞ÉÁî®‰∫Ü2Ê¨°ÔºåËÄå‰∏çÊòØ‰πãÂâçÁöÑ6Ê¨°ÔºåÊØè‰∏™keyË¢´Ë∞ÉÁî®‰∏ÄÊ¨°„ÄÇÂΩìÁÑ∂ÔºåÂè™ÊúâÂΩì‰Ω†Â§öÊ¨°ÊâßË°åÁõ∏ÂêåÁöÑÊìç‰ΩúÔºåÊàñËÄÖÂõ†‰∏∫Êìç‰ΩúËÄóÊó∂ËøáÈïøÔºåÊàñËÄÖÂõ†‰∏∫Êìç‰ΩúÈ¢ëÁπÅÂèëÁîüÊó∂ÔºåËøôÁßçÊ®°ÂºèÊâçÊòØÊúâÁõäÁöÑ„ÄÇ</p>
<p>‰ΩÜÊòØÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºöÈîôËØØÂíåÁªìÊûúÊòØÊâÄÊúâÊâßË°åÂÖ±‰∫´ÁöÑÔºåÊâÄ‰ª•Ë¶ÅÈùûÂ∏∏Ê≥®ÊÑè‰∏çË¶ÅÊ±°ÊüìÂÖ±‰∫´ÁöÑÁªìÊûúÔºåÂê¶ÂàôÂèØËÉΩ‰ºöÂá∫Áé∞ÊÑèÊÉ≥‰∏çÂà∞ÁöÑÈîôËØØ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊõ¥ÊîπÂØπË±°Ôºå‰∏çË¶ÅÂøòËÆ∞ÂÖãÈöÜÂÆÉ„ÄÇ</p>
<p>Conclusions:</p>
<ul>
<li>ËôΩÁÑ∂ËøôÂπ∂ÈùûÊòì‰∫ãÔºå‰ΩÜÂØπ‰∫éÂπ∂ÂèëÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥ÔºåÂÆÉËÉΩÂ∏¶Êù•ÂæàÂ§ßÁöÑÂ•ΩÂ§ÑÔºåÂõ†‰∏∫ËµÑÊ∫êÈùûÂ∏∏Á®ÄÁº∫„ÄÇÊ≠§Â§ñÔºåÊ≠£Â¶ÇÊàë‰ª¨Âú®Êú¨Êñá‰∏≠ÊâÄËß£ÈáäÁöÑÔºåËøô‰∏ç‰ªÖÂèØ‰ª•ÈáäÊîæËøô‰∫õËµÑÊ∫êÔºåËøòÂèØ‰ª•ÊèêÈ´òÂ∫îÁî®Á®ãÂ∫èÁöÑËøêË°åÊó∂Èó¥„ÄÇ</li>
<li>Ëøô‰∏™ÊîπÂèò‰ºöÂØπÈ¢ëÁπÅË∞ÉÁî®ÁöÑÊìç‰Ωú‰∫ßÁîüÂ∑®Â§ßÂΩ±ÂìçÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÔºåÂÆÉÂèØ‰ª•ËäÇÁúÅËµÑÊ∫êÂπ∂ÊèêÈ´òÁ≥ªÁªüÁ®≥ÂÆöÊÄß„ÄÇÂç≥‰ΩøÊòØÂæÆ‰∏çË∂≥ÈÅìÁöÑÊî∂ÁõäÔºå‰πüËÉΩÂ∏ÆÂä©Êàë‰ª¨Áº©Áü≠P99ÁöÑÂìçÂ∫îÊó∂Èó¥ÔºåËøô‰∏ÄÁÇπÈùûÂ∏∏ÈáçË¶Å„ÄÇ</li>
<li>Â¶ÇÊûúÂú®Ê≠§Âü∫Á°Ä‰∏äÊ∑ªÂä†ÁºìÂÜ≤ÔºåÊïàÊûúÊõ¥Â•ΩÔºÅÊÉ≥Ë±°‰∏Ä‰∏ãÔºåÂ¶ÇÊûú‰∏çÂè™ÊòØÂú®Âçï‰∏™ÂÆû‰æã‰∏äËäÇÁúÅËµÑÊ∫êÔºåËÄåÊòØÂú®ÊúçÂä°ÁöÑÊâÄÊúâÂÆû‰æã‰πãÈó¥ËäÇÁúÅËøô‰∫õËµÑÊ∫êÔºå‰ºöÊúâ‰ªÄ‰πàÂ•ΩÂ§ÑÔºåÂõ†‰∏∫ËøôÊ†∑Â∞±Êõ¥ÊúâÂèØËÉΩÂú®Â§ö‰∏™ÂÆû‰æã‰∏≠ÂÖ±‰∫´Â∏∏Áî®ËµÑÊ∫ê„ÄÇ</li>
<li>Ëøô‰∫õÂ∞èÁªÜËäÇÊòØÂå∫ÂàÜ‰ºòÁßÄÁöÑÂæÆÊúçÂä°Êû∂ÊûÑÂíå‰∏ÄËà¨ÁöÑÂæÆÊúçÂä°Êû∂ÊûÑÁöÑÂÖ≥ÈîÆÊâÄÂú®ÔºåÂõ†‰∏∫CPUÂäüÁéáÂíåÂÜÖÂ≠òÂπ∂‰∏çËÉΩËß£ÂÜ≥ÊâÄÊúâÈóÆÈ¢òÔºåËÄåÊã•Êúâ‰ºòÂåñÁöÑÊúçÂä°ÊâçÊòØÂå∫ÂàÜËÉúËÄÖÂíåË¥•ËÄÖÁöÑÂÖ≥ÈîÆÊâÄÂú®„ÄÇ</li>
</ul>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>JavaScript</tag>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëSOLID Principles in JavaScript</title>
    <url>/2023/06/02/%E3%80%90%E7%BF%BB%E3%80%91SOLID-Principles-in-JavaScript/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://medium.com/@akashjha9041/solid-principles-in-javascript-ab69197e4cf7">SOLID Principles in JavaScript</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@akashjha9041">roniee</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>SOLIDÂéüÂàôÊòØÁî±Robert C. MartinÊèêÂá∫ÁöÑ‰∏ÄÂ•óËΩØ‰ª∂ËÆæËÆ°ÂéüÂàô„ÄÇËøô‰∫õÂéüÂàôÊåáÂØºÂºÄÂèë‰∫∫ÂëòÊûÑÂª∫Âá∫ÂÅ•Â£ÆÁöÑ„ÄÅÂèØÁª¥Êä§ÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÂêåÊó∂Â∞ÜÁª¥Êä§ÁöÑÊàêÊú¨ÈôçÂà∞ÊúÄ‰Ωé„ÄÇÂú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜËÆ®ËÆ∫Â¶Ç‰ΩïÂú®JavaScript‰∏≠‰ΩøÁî®Ëøô‰∫õÂéüÂàôÔºåÂπ∂‰ºöÂ±ïÁ§∫‰∏Ä‰∫õ‰ª£Á†ÅÁ§∫‰æã</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/0*b8uhCfoR8YgDFc58"></p>
<p>SOLIDÂéüÂàôÊòØÁî±Robert C. Martin. ‚ÄúBobÂèîÂèî‚Äù ÊèêÂá∫ÁöÑ‰∏ÄÂ•óËΩØ‰ª∂ËÆæËÆ°ÂéüÂàô„ÄÇËøô‰∫õÂéüÂàôÊåáÂØºÂºÄÂèë‰∫∫ÂëòÊûÑÂª∫Âá∫ÂÅ•Â£ÆÁöÑ„ÄÅÂèØÁª¥Êä§ÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÂêåÊó∂Â∞ÜÁª¥Êä§ÁöÑÊàêÊú¨ÈôçÂà∞ÊúÄ‰Ωé„ÄÇ</p>
<p>Â∞ΩÁÆ°SOLIDÂéüÂàôÁªèÂ∏∏Ë¢´Áî®‰∫éÈù¢ÂêëÂØπË±°ÁöÑÁºñÁ®ãÔºå‰ΩÜÊàë‰ª¨ÂèØ‰ª•Â∞ÜÂÖ∂Áî®‰∫éÂÖ∂‰ªñËØ≠Ë®ÄÔºåÊØîÂ¶ÇJavaScript„ÄÇÂú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Â∞ÜËÆ®ËÆ∫Â¶Ç‰ΩïÂú®JavaScript‰∏≠‰ΩøÁî®Ëøô‰∫õÂéüÂàôÔºåÂπ∂‰ºöÂ±ïÁ§∫‰∏Ä‰∫õ‰ª£Á†ÅÁ§∫‰æã</p>
<h2 id="What-are-the-SOLID-principles"><a href="#What-are-the-SOLID-principles" class="headerlink" title="What are the SOLID principles?"></a>What are the SOLID principles?</h2><ul>
<li>Single responsibility principleÔºàÂçï‰∏ÄËÅåË¥£ÂéüÂàôÔºâ</li>
<li>Open-closed principleÔºàÂºÄÈó≠ÂéüÂàôÔºâ</li>
<li>Liskov substitution principleÔºàÈáåÂºèÊõøÊç¢ÂéüÂàôÔºâ</li>
<li>Interface segregation principleÔºàÊé•Âè£ÂàÜÁ¶ªÂéüÂàôÔºâ</li>
<li>Dependency inversion principleÔºà‰æùËµñÂÄíÁΩÆÂéüÂàôÔºâ</li>
</ul>
<h2 id="Single-responsibility-principle"><a href="#Single-responsibility-principle" class="headerlink" title="Single responsibility principle"></a>Single responsibility principle</h2><p>‰∏Ä‰∏™classÔºå‰∏Ä‰∏™moduleÊàñËÄÖ‰∏Ä‰∏™functionÂ∫îËØ•Âè™Ë¥üË¥£‰∏Ä‰∏™ËßíËâ≤„ÄÇÊâÄ‰ª•ÂÆÉÂ∫îËØ•Âè™Êúâ‰∏Ä‰∏™ÊîπÂèòÂéüÂõ†„ÄÇ</p>
<p>Âçï‰∏ÄËÅåË¥£ÂéüÂàôÊòØSOLIDÊúÄÁÆÄÂçïÁöÑÂéüÂàô‰πã‰∏Ä„ÄÇÁÑ∂ËÄåÔºåÂºÄÂèëËÄÖÁªèÂ∏∏ËØØËß£ÂÆÉ„ÄÇËÆ§‰∏∫‰∏Ä‰∏™Ê®°ÂùóÂ∫îËØ•Âè™ÂÅö‰∏Ä‰ª∂‰∫ã„ÄÇ</p>
<p>ËÆ©Êàë‰ª¨Áî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•ÁêÜËß£Ëøô‰∏™ÂéüÂàô„ÄÇ‰∏ãÈù¢ÁöÑJavaScript‰ª£Á†ÅÁâáÊÆµÊúâ‰∏Ä‰∏™Âêç‰∏∫ ManageEmployee ÁöÑ class ÂíåÂá†‰∏™ÁÆ°ÁêÜÈõáÂëòÁöÑ function</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">ManageEmployee</span> &#123;

  <span class="title function_">constructor</span>(<span class="params">private http: HttpClient</span>)
  <span class="variable constant_">SERVER_URL</span> = <span class="string">&#x27;http://localhost:5000/employee&#x27;</span>;

  getEmployee (empId)&#123;
     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">get</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;empId&#125;</span>`</span>);
  &#125;

  updateEmployee (employee)&#123;
     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">put</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;employee.id&#125;</span>`</span>,employee);
  &#125;

  deleteEmployee (empId)&#123;
     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">delete</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;empId&#125;</span>`</span>);
  &#125;

  calculateEmployeeSalary (empId, workingHours)&#123;
    <span class="keyword">var</span> employee = <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">get</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;empId&#125;</span>`</span>);
    <span class="keyword">return</span> employee.<span class="property">rate</span> * workingHours;
  &#125;

&#125;</code></pre>

<p>ÂâçÈù¢ÁöÑ‰ª£Á†ÅÁúã‰∏äÂéªÂÆåÂÖ®Ê≤°ÊúâÈóÆÈ¢òÔºåÂπ∂‰∏îÂæàÂ§öÂºÄÂèëËÄÖÈÉΩ‰ºöÊåâÁÖßÁõ∏ÂêåÁöÑÊñπÊ≥ïÊù•ÂÅöÂπ∂‰∏ç‰ºöÊúâ‰ªª‰ΩïÈóÆÈ¢ò„ÄÇÁÑ∂ËÄåÔºåÁî±‰∫éÂÆÉÊòØÂØπ‰∏§‰∏™ËßíËâ≤Ë¥üË¥£ÔºåËøôÊ†∑‰ªñÂ∞±ÊúâËøùÂçï‰∏ÄËÅåË¥£ÂéüÂàô„ÄÇ<code>getEmployee()</code>„ÄÅ<code>updateEmployee()</code>Âíå<code>deleteEmployee()</code>ÂáΩÊï∞Áõ¥Êé•‰∏é HR ÁÆ°ÁêÜÊúâÂÖ≥ÔºåËÄå<code>calculateEmployeeSalary()</code>Âàô‰∏éË¥¢Âä°ÁÆ°ÁêÜÊúâÂÖ≥„ÄÇ</p>
<p>Â∞ÜÊù•ÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶Å‰∏∫HRÊàñË¥¢Âä°Êõ¥Êñ∞‰∏Ä‰∏™ÂäüËÉΩÊó∂Ôºå‰Ω†Â∞±ÂøÖÈ°ªÊîπÂèò <code>ManageEmployee class</code> Êù•ÂΩ±Âìç‰∏§‰∏™ËßíËâ≤ÔºåÂõ†Ê≠§Ôºå <code>ManageEmployee class</code> ËøùÂèç‰∫ÜÂçï‰∏ÄËÅåË¥£ÂéüÂàô„ÄÇ‰Ω†ÈúÄË¶ÅÊääHRÂíåË¥¢Âä°ÊúâÂÖ≥ÁöÑÂäüËÉΩÂàÜÂºÄÔºå‰Ωø‰ª£Á†ÅÁ¨¶ÂêàÂçï‰∏ÄËÅåË¥£ÂéüÂàô„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁ§∫‰æãËØÅÊòé‰∫ÜËøô‰∏ÄÁÇπ„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">ManageEmployee</span> &#123;

  <span class="title function_">constructor</span>(<span class="params">private http: HttpClient</span>)
  <span class="variable constant_">SERVER_URL</span> = <span class="string">&#x27;http://localhost:5000/employee&#x27;</span>;

  getEmployee (empId)&#123;
     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">get</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;empId&#125;</span>`</span>);
  &#125;

  updateEmployee (employee)&#123;
     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">put</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;employee.id&#125;</span>`</span>,employee);
  &#125;

  deleteEmployee (empId)&#123;
     <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">delete</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;empId&#125;</span>`</span>);
  &#125;

&#125;

<span class="keyword">class</span> <span class="title class_">ManageSalaries</span> &#123;

  <span class="title function_">constructor</span>(<span class="params">private http: HttpClient</span>)
  <span class="variable constant_">SERVER_URL</span> = <span class="string">&#x27;http://localhost:5000/employee&#x27;</span>;

  calculateEmployeeSalary (empId, workingHours)&#123;
    <span class="keyword">var</span> employee = <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">get</span>(<span class="variable language_">this</span>.<span class="property">SERVER_URL</span> + <span class="string">`/<span class="subst">$&#123;empId&#125;</span>`</span>);
    <span class="keyword">return</span> employee.<span class="property">rate</span> * workingHours;
  &#125;

&#125;</code></pre>

<h2 id="Open-closed-principle"><a href="#Open-closed-principle" class="headerlink" title="Open-closed principle"></a>Open-closed principle</h2><p>Functions, modules, Âíå classes Â∫îËØ•ÊòØÂèØÊâ©Â±ïÁöÑÔºå‰ΩÜ‰∏çÊòØÂèØ‰øÆÊîπÁöÑ„ÄÇ</p>
<p>ËøôÊòØÂÆûÁé∞Â§ßÂûãÂ∫îÁî®Êó∂ÈúÄË¶ÅÈÅµÂæ™ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂéüÂàô„ÄÇÊ†πÊçÆËøô‰∏ÄÂéüÂàôÔºåÊàë‰ª¨Â∫îËØ•ËÉΩÂ§üÂæàÂÆπÊòìÂú∞‰∏∫Â∫îÁî®Ê∑ªÂä†Êñ∞ÁöÑÂäüËÉΩÔºå‰ΩÜÂêåÊó∂Êàë‰ª¨‰∏çÂ∫îËØ•ÂØπÁé∞ÊúâÁöÑ‰ª£Á†ÅÂºïÂÖ•Á†¥ÂùèÂºè‰øÆÊîπ„ÄÇ</p>
<p>‰∏æ‰∏™‰æãÂ≠êÔºåÂÅáËÆæÊàë‰ª¨ÂÆûÁé∞‰∏Ä‰∏™ <code>calculateSalaries()</code> ÁöÑÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞‰ΩøÁî®‰∏Ä‰∏™Â∏¶ÊúâÂ∑•‰ΩúËßíËâ≤ÂíåÊó∂Ëñ™ÁöÑÊï∞ÁªÑÊù•ËÆ°ÁÆóÂ∑•ËµÑ„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">ManageSalaries</span> &#123;
  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;
    <span class="variable language_">this</span>.<span class="property">salaryRates</span> = [
      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">role</span>: <span class="string">&#x27;developer&#x27;</span>, <span class="attr">rate</span>: <span class="number">100</span> &#125;,
      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">role</span>: <span class="string">&#x27;architect&#x27;</span>, <span class="attr">rate</span>: <span class="number">200</span> &#125;,
      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">role</span>: <span class="string">&#x27;manager&#x27;</span>, <span class="attr">rate</span>: <span class="number">300</span> &#125;,
    ];
  &#125;

  <span class="title function_">calculateSalaries</span>(<span class="params">empId, hoursWorked</span>) &#123;
    <span class="keyword">let</span> salaryObject = <span class="variable language_">this</span>.<span class="property">salaryRates</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">o</span>) =&gt;</span> o.<span class="property">id</span> === empId);
    <span class="keyword">return</span> hoursWorked * salaryObject.<span class="property">rate</span>;
  &#125;
&#125;

<span class="keyword">const</span> mgtSalary = <span class="keyword">new</span> <span class="title class_">ManageSalaries</span>();
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Salary : &quot;</span>, mgtSalary.<span class="title function_">calculateSalaries</span>(<span class="number">1</span>, <span class="number">100</span>));</code></pre>

<p>Áõ¥Êé•‰øÆÊîπ salaryRates Êï∞ÁªÑ‰ºöËøùÂèçÂºÄÈó≠ÂéüÂàô„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÈúÄË¶Å‰∏∫‰∏Ä‰∏™Êñ∞ËßíËâ≤ËøõË°åÂ∑•ËµÑËÆ°ÁÆó„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñπÊ≥ïÔºåÂ∞ÜÂ∑•ËµÑÊ∑ªÂä†Âà∞ salaryRates Êï∞ÁªÑ‰∏≠ÔºåËÄå‰∏çÊòØÂØπÂéü‰ª£Á†ÅËøõË°å‰øÆÊîπ„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">ManageSalaries</span> &#123;
  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;
    <span class="variable language_">this</span>.<span class="property">salaryRates</span> = [
      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">role</span>: <span class="string">&#x27;developer&#x27;</span>, <span class="attr">rate</span>: <span class="number">100</span> &#125;,
      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">role</span>: <span class="string">&#x27;architect&#x27;</span>, <span class="attr">rate</span>: <span class="number">200</span> &#125;,
      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">role</span>: <span class="string">&#x27;manager&#x27;</span>, <span class="attr">rate</span>: <span class="number">300</span> &#125;,
    ];
  &#125;

  <span class="title function_">calculateSalaries</span>(<span class="params">empId, hoursWorked</span>) &#123;
    <span class="keyword">let</span> salaryObject = <span class="variable language_">this</span>.<span class="property">salaryRates</span>.<span class="title function_">find</span>(<span class="function">(<span class="params">o</span>) =&gt;</span> o.<span class="property">id</span> === empId);
    <span class="keyword">return</span> hoursWorked * salaryObject.<span class="property">rate</span>;
  &#125;

  <span class="title function_">addSalaryRate</span>(<span class="params">id, role, rate</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">salaryRates</span>.<span class="title function_">push</span>(&#123; <span class="attr">id</span>: id, <span class="attr">role</span>: role, <span class="attr">rate</span>: rate &#125;);
  &#125;
&#125;

<span class="keyword">const</span> mgtSalary = <span class="keyword">new</span> <span class="title class_">ManageSalaries</span>();
mgtSalary.<span class="title function_">addSalaryRate</span>(<span class="number">4</span>, <span class="string">&#x27;developer&#x27;</span>, <span class="number">250</span>);
<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Salary : &#x27;</span>, mgtSalary.<span class="title function_">calculateSalaries</span>(<span class="number">4</span>, <span class="number">100</span>));</code></pre>

<h2 id="Liskov-substitution-principle"><a href="#Liskov-substitution-principle" class="headerlink" title="Liskov substitution principle"></a>Liskov substitution principle</h2><p>ÂÅáËÆæP(y)ÊòØÁ±ªÂûãAÁöÑÂØπË±°yÁöÑ‰∏Ä‰∏™ÂèØËØÅÊòéÂ±ûÊÄßÔºåÈÇ£‰πàÂØπ‰∫éÁ±ªÂûãBÁöÑÂØπË±°xÔºåÂÖ∂‰∏≠BÊòØAÁöÑÂ≠êÁ±ªÂûãÔºåP(x)Â∫îËØ•‰∏∫Áúü</p>
<p>‰Ω†ËÉΩÂú®ÁΩë‰∏äÊâæÂà∞ÂÖ≥‰∫éÈáåÂºèÊõøÊç¢ÂéüÂàôÁöÑ‰∏çÂêåÂÆö‰πâÔºå‰ΩÜÂÆÉ‰ª¨ÈÉΩÊúâÁõ∏ÂêåÁöÑÂê´‰πâ„ÄÇÁÆÄÂçïÁöÑËØ¥ÔºåÈáåÂºèÊõøÊç¢ÂéüÂàôÊåáÂá∫ÔºåÂ¶ÇÊûúÁà∂Á±ªÁöÑÂ≠êÁ±ªÂú®Â∫îÁî®‰∏≠‰∫ßÁîüÊÑèÂ§ñË°å‰∏∫ÔºåÊàë‰ª¨Â∞±‰∏çÂ∫îËØ•Áî®Â≠êÁ±ªÊõøÊç¢Áà∂Á±ª„ÄÇ</p>
<p>‰æãÂ¶ÇÔºåÊúâ‰∏Ä‰∏™Âêç‰∏∫ Animal ÁöÑÁ±ªÔºåÂÆÉÂåÖÊã¨‰∏Ä‰∏™Âêç‰∏∫ <code>eat()</code> ÁöÑÂáΩÊï∞„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">Animal</span>&#123;
  <span class="title function_">eat</span>(<span class="params"></span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Animal Eats&quot;</span>)
  &#125;
&#125;</code></pre>

<p>Áé∞Âú®ÔºåÊàëÂ∞ÜÊää Animal Á±ªÊâ©Â±ïÊàê‰∏Ä‰∏™Âêç‰∏∫BirdÁöÑÊñ∞Á±ªÔºåÂÖ∂ÂáΩÊï∞Âêç‰∏∫ <code>fly()</code> „ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">Bird</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;
  <span class="title function_">fly</span>(<span class="params"></span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Bird Flies&quot;</span>)
  &#125;
&#125;

<span class="keyword">var</span> parrot = <span class="keyword">new</span> <span class="title class_">Bird</span>();
parrot.<span class="title function_">eat</span>();
parrot.<span class="title function_">fly</span>();</code></pre>

<p>Âú®‰πãÂâçÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàëÊ†πÊçÆ Bird Á±ªÂàõÂª∫‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ parrot ÁöÑÂØπË±°ÔºåÂπ∂ÂêåÊó∂Êã•Êúâ eat Âíå fly ÊñπÊ≥ï„ÄÇÁî±‰∫éÈπ¶ÈπâËÉΩÂ§üÂÆåÊàêËøô‰∏§‰∏™Âä®‰ΩúÔºåÂõ†Ê≠§Â∞Ü Animal Á±ªÊâ©Â±ïÂà∞ Bird Á±ªÂπ∂‰∏çËøùÂèçÈáåÂºèÊõøÊç¢ÂéüÂàô</p>
<p>Áé∞Âú®Êàë‰ª¨Ëøõ‰∏ÄÊ≠•Êâ©Â±ï Bird ÔºåÂàõÂª∫‰∫Ü‰∏Ä‰∏™Âêç‰∏∫ Ostrich ÁöÑÊñ∞Á±ª</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">Ostrich</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Bird</span>&#123;
  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ostriches Do Not Fly&quot;</span>)
&#125;

<span class="keyword">var</span> ostrich = <span class="keyword">new</span> <span class="title class_">Ostrich</span>();
ostrich.<span class="title function_">eat</span>();
ostrich.<span class="title function_">fly</span>();</code></pre>

<p>Ëøô‰∏™ÂØπ Bird Á±ªÁöÑÊâ©Â±ïÂ∞±ËøùÂèç‰∫ÜÈáåÂºèÊõøÊç¢ÂéüÂàôÔºåÂõ†‰∏∫È∏µÈ∏ü‰∏ç‰ºöÈ£ûË°åÔºåËøôÂèØËÉΩ‰ºöÂú®Â∫îÁî®‰∏≠ÂºïÂèëÊÑèÂ§ñË°å‰∏∫„ÄÇËß£ÂÜ≥Ëøô‰∏™ÊÉÖÂÜµÁöÑÊúÄ‰Ω≥ÊñπÊ≥ïÊòØ‰ªé Animal Á±ªÊâ©Â±ï Ostrich Á±ª„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">Ostrich</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;

  <span class="title function_">walk</span>(<span class="params"></span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ostrich Walks&quot;</span>)
  &#125;

&#125;</code></pre>

<h2 id="Interface-segregation-principle"><a href="#Interface-segregation-principle" class="headerlink" title="Interface segregation principle"></a>Interface segregation principle</h2><p>ÂÆ¢Êà∑Á´Ø‰∏çÂ∫îËØ•Ê∑ªÂä†‰ªñ‰ª¨Ê∞∏Ëøú‰∏ç‰ºö‰ΩøÁî®ÁöÑ‰æùËµñÊé•Âè£„ÄÇ</p>
<p>Ëøô‰∏™ÂéüÂàôÂíåÊé•Âè£ÊúâÂÖ≥Ôºå‰∏ªË¶ÅÊòØÂ∞ÜÂ§ßÊé•Âè£ÂàÜ‰∏∫Â∞èÊé•Âè£„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºåÂÅáÂ¶Ç‰Ω†Ë¶ÅÂéªÈ©æÊ†°Â≠¶‰π†Â¶Ç‰ΩïÈ©æÈ©∂Ê±ΩËΩ¶Ôºå‰ªñ‰ª¨Áªô‰Ω†‰∏ÄÂ§ßÂ•óÂÖ≥‰∫éÈ©æÈ©∂Ê±ΩËΩ¶„ÄÅÂç°ËΩ¶„ÄÅÁÅ´ËΩ¶ÁöÑËØ¥Êòé„ÄÇÁî±‰∫é‰Ω†Âè™ÈúÄË¶ÅÂ≠¶‰π†È©æÈ©∂Ê±ΩËΩ¶Ôºå‰Ω†‰∏çÈúÄË¶ÅÂÖ∂‰ªñÁöÑ‰ø°ÊÅØ„ÄÇÈ©æÊ†°Â∞±Â∫îËØ•ÊääËØ¥ÊòéÂàÜÂºÄÔºåÂè™Áªô‰Ω†‰∏ìÈó®ÈíàÂØπÊ±ΩËΩ¶ÁöÑËØ¥Êòé„ÄÇ</p>
<p>Áî±‰∫é JavaScript ‰∏çÊîØÊåÅ interface ÔºåÊâÄ‰ª•Âú®Âü∫‰∫é JavaScript ÁöÑÂ∫îÁî®‰∏≠ÂæàÈöæÈááÁî®Ëøô‰∏ÄÂéüÂàô„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® JavaScript ÁªÑÂêàÊù•ÂÆûÁé∞Ëøô‰∏ÄÁÇπ„ÄÇÁªÑÂêàÂÖÅËÆ∏ÂºÄÂèë‰∫∫ÂëòÂú®‰∏çÁªßÊâøÊï¥‰∏™Á±ªÁöÑÊÉÖÂÜµ‰∏ãÊ∑ªÂä†ÂäüËÉΩ„ÄÇÂÅáËÆæÊúâ‰∏Ä‰∏™Âêç‰∏∫ DrivingTest ÁöÑÁ±ªÔºåÁÑ∂ÂêéÊúâ‰∏§‰∏™Âêç‰∏∫ startCarTest Âíå startTruckTest ÁöÑÂáΩÊï∞„ÄÇÁÑ∂ÂêéÊàë‰ª¨Êúâ CarDrivingTest Âíå TruckDrivingTest Êâ©Â±ï DrivingTest Á±ªÔºåÁÑ∂ÂêéÊàë‰ª¨ÂøÖÈ°ªÂº∫Âà∂Ëøô‰∏§‰∏™Á±ªÂÆûÁé∞ startCarTest Âíå startTruckTest sÂáΩÊï∞„ÄÇ</p>
<pre><code class="highlight js"><span class="title class_">Class</span> <span class="title class_">DrivingTest</span> &#123;
  <span class="title function_">constructor</span>(<span class="params">userType</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">userType</span> = userType;
  &#125;

  <span class="title function_">startCarTest</span>(<span class="params"></span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(‚Äú<span class="title class_">This</span> is <span class="keyword">for</span> <span class="title class_">Car</span> <span class="title class_">Drivers</span>‚Äù‚Äô);
  &#125;

  <span class="title function_">startTruckTest</span>(<span class="params"></span>) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(‚Äú<span class="title class_">This</span> is <span class="keyword">for</span> <span class="title class_">Truck</span> <span class="title class_">Drivers</span>‚Äù);
  &#125;
&#125;

<span class="keyword">class</span> <span class="title class_">CarDrivingTest</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DrivingTest</span> &#123;
  <span class="title function_">constructor</span>(<span class="params">userType</span>) &#123;
    <span class="variable language_">super</span>(userType);
  &#125;

  <span class="title function_">startCarTest</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> ‚Äú<span class="title class_">Car</span> <span class="title class_">Test</span> <span class="title class_">Started</span>‚Äù;
  &#125;

  <span class="title function_">startTruckTest</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> <span class="literal">null</span>;
  &#125;
&#125;

<span class="keyword">class</span> <span class="title class_">TruckDrivingTest</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DrivingTest</span> &#123;
  <span class="title function_">constructor</span>(<span class="params">userType</span>) &#123;
    <span class="variable language_">super</span>(userType);
  &#125;

  <span class="title function_">startCarTest</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> <span class="literal">null</span>;
  &#125;

  <span class="title function_">startTruckTest</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> ‚Äú<span class="title class_">Truck</span> <span class="title class_">Test</span> <span class="title class_">Started</span>‚Äù;
  &#125;
&#125;

<span class="keyword">const</span> carTest = <span class="keyword">new</span> <span class="title class_">CarDrivingTest</span>(carDriver );
<span class="variable language_">console</span>.<span class="title function_">log</span>(carTest.<span class="title function_">startCarTest</span>());
<span class="variable language_">console</span>.<span class="title function_">log</span>(carTest.<span class="title function_">startTruckTest</span>());

<span class="keyword">const</span> truckTest = <span class="keyword">new</span> <span class="title class_">TruckDrivingTest</span>( ruckdriver );
<span class="variable language_">console</span>.<span class="title function_">log</span>(truckTest.<span class="title function_">startCarTest</span>());
<span class="variable language_">console</span>.<span class="title function_">log</span>(truckTest.<span class="title function_">startTruckTest</span>());</code></pre>

<p>ÁÑ∂ËÄåÔºåËøôÁßçÂÆûÁé∞ÊñπÊ≥ïËøùÂèç‰∫ÜÊé•Âè£ÂàÜÁ¶ªÂéüÂàôÔºåÂõ†‰∏∫Êàë‰ª¨Âº∫Ëø´ÈÇ£‰∏§‰∏™Êâ©Â±ïÁ±ªÂÆûÁé∞Ëøô‰∏§ÁßçÂäüËÉΩ„ÄÇÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÁªÑÂêàÊù•‰∏∫ÊâÄÈúÄÁöÑÁ±ªÊ∑ªÂä†ÂäüËÉΩÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÊâÄÁ§∫„ÄÇ</p>
<pre><code class="highlight js"><span class="title class_">Class</span> <span class="title class_">DrivingTest</span> &#123;
  <span class="title function_">constructor</span>(<span class="params">userType</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">userType</span> = userType;
  &#125;
&#125;

<span class="keyword">class</span> <span class="title class_">CarDrivingTest</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DrivingTest</span> &#123;
  <span class="title function_">constructor</span>(<span class="params">userType</span>) &#123;
    <span class="variable language_">super</span>(userType);
  &#125;
&#125;

<span class="keyword">class</span> <span class="title class_">TruckDrivingTest</span> <span class="keyword">extends</span> <span class="title class_ inherited__">DrivingTest</span> &#123;
  <span class="title function_">constructor</span>(<span class="params">userType</span>) &#123;
    <span class="variable language_">super</span>(userType);
  &#125;
&#125;

<span class="keyword">const</span> carUserTests = &#123;
  <span class="title function_">startCarTest</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> ‚Äò<span class="title class_">Car</span> <span class="title class_">Test</span> <span class="title class_">Started</span>‚Äô;
  &#125;,
&#125;;

<span class="keyword">const</span> truckUserTests = &#123;
  <span class="title function_">startTruckTest</span>(<span class="params"></span>) &#123;
    <span class="keyword">return</span> ‚Äò<span class="title class_">Truck</span> <span class="title class_">Test</span> <span class="title class_">Started</span>‚Äô;
  &#125;,
&#125;;

<span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">CarDrivingTest</span>.<span class="property"><span class="keyword">prototype</span></span>, carUserTests);
<span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">TruckDrivingTest</span>.<span class="property"><span class="keyword">prototype</span></span>, truckUserTests);

<span class="keyword">const</span> carTest = <span class="keyword">new</span> <span class="title class_">CarDrivingTest</span>(carDriver );
<span class="variable language_">console</span>.<span class="title function_">log</span>(carTest.<span class="title function_">startCarTest</span>());
<span class="variable language_">console</span>.<span class="title function_">log</span>(carTest.<span class="title function_">startTruckTest</span>()); <span class="comment">// Will throw an exception</span>

<span class="keyword">const</span> truckTest = <span class="keyword">new</span> <span class="title class_">TruckDrivingTest</span>( ruckdriver );
<span class="variable language_">console</span>.<span class="title function_">log</span>(truckTest.<span class="title function_">startTruckTest</span>());
<span class="variable language_">console</span>.<span class="title function_">log</span>(truckTest.<span class="title function_">startCarTest</span>()); <span class="comment">// Will throw an exception</span></code></pre>

<p>Áé∞Âú®Ôºå <code>carTest.startTruckTest()</code> Â∞ÜÊäõÂá∫‰∏Ä‰∏™ÂºÇÂ∏∏ÔºåÂõ†‰∏∫ <code>startTruckTest()</code> ÂáΩÊï∞Ê≤°ÊúâÂàÜÈÖçÁªô CarDrivingTest Á±ª„ÄÇ</p>
<h2 id="Dependency-inversion-principle"><a href="#Dependency-inversion-principle" class="headerlink" title="Dependency inversion principle"></a>Dependency inversion principle</h2><p>È´òÂ±ÇÊ®°ÂùóÂ∫îËØ•‰ΩøÁî®ÊäΩË±°Âåñ„ÄÇÂπ∂‰∏îÔºå‰ªñ‰ª¨‰∏çÂ∫îËØ•‰æùËµñ‰∫é‰ΩéÂ±ÇÊ®°Âùó„ÄÇ</p>
<p>‰æùËµñÂÄíÁΩÆÊòØÂÖ≥‰∫éËß£ËÄ¶‰ª£Á†ÅÁöÑ„ÄÇÈÅµÂæ™Ëøô‰∏™ÂéüÂàôÂ∞Ü‰Ωø‰Ω†ËÉΩÂ§üÁÅµÊ¥ªÂú∞Âú®ÊúÄÈ´òÁ∫ßÂà´‰∏äÊâ©Â±ïÂíåÊîπÂèò‰Ω†ÁöÑÂ∫îÁî®ËÄå‰∏çÂá∫Áé∞‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ</p>
<p>ÂÖ≥‰∫éJavaScriptÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅËÄÉËôëÊäΩË±°ÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫JavaScriptÊòØ‰∏ÄÁßçÂä®ÊÄÅËØ≠Ë®Ä„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨ÈúÄË¶ÅÁ°Æ‰øùÈ´òÂ±ÇÊ®°Âùó‰∏ç‰æùËµñ‰∫é‰ΩéÂ±ÇÊ®°Âùó„ÄÇ</p>
<p>Êàë‰ª¨Êù•Áî®‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊù•Ëß£Èáä‰æùËµñÂÄíÁΩÆÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ„ÄÇÂÅáËÆæ‰Ω†Âú®‰Ω†ÁöÑÂ∫îÁî®‰∏≠ÈúÄË¶Å‰ΩøÁî® Yahoo ÁöÑ email API ÔºåÁé∞Âú®‰Ω†ÈúÄË¶ÅÊääÂÆÉÊîπ‰∏∫ Gmail ÁöÑ API „ÄÇÂ¶ÇÊûú‰Ω†ÂÉè‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏ÄÊ†∑ÂÆûÁé∞‰∫ÜÊ≤°Êúâ‰æùËµñÂÄíÁΩÆÁöÑÊéßÂà∂Âô®Ôºå‰Ω†ÈúÄË¶ÅÂØπÊØè‰∏™ÊéßÂà∂Âô®ÈÉΩËøõË°å‰øÆÊîπ„ÄÇËøôÊòØÂõ†‰∏∫Â§ö‰∏™ÊéßÂà∂Âô®‰ΩøÁî®‰∫Ü Yahoo API Ôºå‰Ω†ÈúÄË¶ÅÊâæÂà∞ÊØè‰∏™ÂÆû‰æãÂπ∂Êõ¥Êñ∞ÂÆÉ„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">EmailController</span> &#123; 
  <span class="title function_">sendEmail</span>(<span class="params">emailDetails</span>) &#123; 
    <span class="comment">// Need to change this line in every controller that uses YahooAPI.const response = YahooAPI.sendEmail(emailDetails); </span>
    <span class="keyword">if</span> (response.<span class="property">status</span> == <span class="number">200</span>) &#123; 
       <span class="keyword">return</span> <span class="literal">true</span>;
    &#125; <span class="keyword">else</span> &#123;
       <span class="keyword">return</span> <span class="literal">false</span>;
    &#125;
  &#125;
&#125;</code></pre>

<p>‰æùËµñÂÄíÁΩÆÂéüÂàôÂèØ‰ª•Â∏ÆÂä©ÂºÄÂèëËÄÖÈÅøÂÖçËøôÁßçÈ´òÊòÇÁöÑÈîôËØØÔºåÂú®Ëøô‰∏™ÂéüÂàô‰∏ãÔºåÂ∞Ü email API Â§ÑÁêÜÈÉ®ÂàÜËΩ¨ÁßªÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊéßÂà∂Âô®„ÄÇÁÑ∂Âêé‰Ω†Âè™ÈúÄË¶ÅÂú® email API ÂèëÁîüÊîπÂèòÊó∂ÊîπÂèòËØ•ÊéßÂà∂Âô®Âç≥ÂèØ„ÄÇ</p>
<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">EmailController</span> &#123; 
  <span class="title function_">sendEmail</span>(<span class="params">emailDetails</span>) &#123; 
    <span class="keyword">const</span> response = <span class="title class_">EmailApiController</span>.<span class="title function_">sendEmail</span>(emailDetails);   
    <span class="keyword">if</span> (response.<span class="property">status</span> == <span class="number">200</span>) &#123; 
       <span class="keyword">return</span> <span class="literal">true</span>;
    &#125; <span class="keyword">else</span> &#123;
       <span class="keyword">return</span> <span class="literal">false</span>;
    &#125;
  &#125;
&#125;

<span class="keyword">class</span> <span class="title class_">EmailApiController</span> &#123;
  <span class="title function_">sendEmail</span>(<span class="params">emailDetails</span>) &#123;
    <span class="comment">// Only need to change this controller. return YahooAPI.sendEmail(emailDetails);</span>
  &#125;
&#125;</code></pre>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Âú®ËøôÁØáÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨ËÆ®ËÆ∫‰∫ÜÂú®ËΩØ‰ª∂ËÆæËÆ°‰∏≠SOLIDÂéüÂàôÁöÑÈáçË¶ÅÊÄßÔºå‰ª•ÂèäÊàë‰ª¨Â¶Ç‰ΩïÂú®JavaScriptÂ∫îÁî®‰∏≠ÈááÁî®Ëøô‰∫õÊ¶ÇÂøµ„ÄÇ‰Ωú‰∏∫ÂºÄÂèë‰∫∫ÂëòÔºåÁêÜËß£Âπ∂Âú®Êàë‰ª¨ÁöÑÂ∫îÁî®‰∏≠‰ΩøÁî®Ëøô‰∫õÊ†∏ÂøÉÊ¶ÇÂøµÊòØÂæàÈáçË¶ÅÁöÑ„ÄÇÊúâÊó∂ÔºåÂú®Â§ÑÁêÜ‰∏Ä‰∫õÂ∞èÁöÑÂ∫îÁî®Êó∂ÔºåËøô‰∫õÂéüÂàôÁöÑÂ•ΩÂ§ÑÂèØËÉΩÂπ∂‰∏çÊòéÊòæÔºå‰ΩÜ‰∏ÄÊó¶‰Ω†ÂºÄÂßãÂú®‰∏Ä‰∏™Â§ßËßÑÊ®°ÁöÑÈ°πÁõÆ‰∏äÂ∑•‰ΩúÊó∂Ôºå‰Ω†‰∏ÄÂÆö‰ºöÁü•ÈÅìÂÆÉ‰ª¨ÁöÑ‰∏çÂêå„ÄÇ</p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëWhy Japanese Websites Look So Different</title>
    <url>/2023/06/10/%E3%80%90%E7%BF%BB%E3%80%91Why-Japanese-Websites-Look-So-Different/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://medium.com/@mirijam.missbichler/why-japanese-websites-look-so-different-2c7273e8be1e">Why Japanese Websites Look So Different</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://medium.com/@mirijam.missbichler">Mirijam Missbichler</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Â§öÂπ¥‰ª•Êù•ÔºåÊàëÂ§öÊ¨°Êé•Ëß¶ËøáÊó•Êú¨ÁΩëÁ´ôÔºåÊó†ËÆ∫ÊòØÁ†îÁ©∂Á≠æËØÅ„ÄÅËÆ°ÂàíÊóÖË°åÔºåËøòÊòØÁÆÄÂçïÁöÑÂú®ÁΩë‰∏äË¥≠Áâ©„ÄÇÊàëËä±‰∫ÜÂæàÈïøÊó∂Èó¥Êâç‰π†ÊÉØ‰∏ãÈù¢ËøôÊ†∑ÁöÑÊñáÂ≠óÂ∏ÉÂ±ÄÔºå‰ΩøÁî®Â§ßÈáèÈ≤úËâ≥ÁöÑÈ¢úËâ≤ÂíåÂçÅÂ§öÁßç‰∏çÂêåÁöÑÂ≠ó‰Ωì</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lfpAOTRBmUP6k80b2GNGlg.png"></p>
<p>ÂØπ‰∫é‰π†ÊÉØ‰ΩøÁî®Ë•øÊñπÁΩëÁ´ôÁöÑ‰∫∫ÔºåÊúâËÆ∏Â§öÁΩëÁ´ôËÆæËÆ°ÁöÑÁÆÄÁ∫¶‰∏îÊòì‰∫éÊµèËßàÔºå‰ΩÜÊòØ‰∏∫‰ªÄ‰πàËøôÁßçÊõ¥Âä†Â§çÊùÇÁöÑÈ£éÊ†ºÂú®Êó•Êú¨Âç¥ÂæàÊµÅË°å„ÄÇ</p>
<p>ÊæÑÊ∏Ö‰∏Ä‰∏ãÔºåËøô‰∫õ‰∏çÊòØËøáÂéªÁöÑÁΩëÁ´ôÔºåÊòØÁé∞Âú®Ê≠£Âú®Áª¥Êä§ÁöÑÁΩëÁ´ôÔºåÊØîÂ¶Ç‰∏ãÈù¢Ëøô‰∏™ÁΩëÁ´ôÊúÄÂêé‰∏ÄÊ¨°Êõ¥Êñ∞ÊòØÂú®2023Âπ¥„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*52jHrlyvsqRw2l7hwfMS5A.png"></p>
<p>Êàë‰ª¨ÂèØ‰ª•‰ªéÂá†‰∏™‰∏çÂêåËßíÂ∫¶Êù•ÂàÜÊûêËøôÁßçËÆæËÆ°Ôºö</p>
<ul>
<li>Â≠ó‰ΩìÂíåÁΩëÁ´ôÂºÄÂèëÁöÑÈôêÂà∂</li>
<li>ÊäÄÊúØÂèëÂ±ïÂÅúÊªû</li>
<li>Êú∫ÊûÑÁº∫‰πèÊï∞Â≠óÁ¥†ÂÖª</li>
<li>ÊñáÂåñÁöÑÂΩ±Âìç</li>
</ul>
<p>Â∞±ÂÉèÂ§ßÂ§öÊï∞ËØùÈ¢ò‰∏ÄÊ†∑ÔºåÂèØËÉΩÊ≤°Êúâ‰∏Ä‰∏™Ê≠£Á°ÆÁöÑÁ≠îÊ°à„ÄÇËøôÁßçÁΩëÁ´ôËÆæËÆ°ÊòØÂêÑÁßçÂõ†Á¥†ÈïøÊúü‰∫íÁõ∏‰ΩúÁî®ÁöÑÁªìÊûú</p>
<h2 id="Fonts-amp-Front-End-Website-Development-Constraints"><a href="#Fonts-amp-Front-End-Website-Development-Constraints" class="headerlink" title="Fonts &amp; Front-End Website Development Constraints"></a>Fonts &amp; Front-End Website Development Constraints</h2><p>‰∏∫ÁΩóÈ©¨ËØ≠Ë®ÄÂàõÂª∫Êñ∞ÁöÑÂ≠ó‰ΩìÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÊåëÊàòÔºåÊØè‰∏™‰∫∫Âè™Ë¶ÅÂØπÂ≠ó‰ΩìËÆæËÆ°ÊúâÂü∫Êú¨ÁöÑ‰∫ÜËß£ÔºåÂπ∂‰∏îÁî®ÈÄÇÂΩìÁöÑÁ®ãÂ∫èÂíå‰∏Ä‰∫õÊó∂Èó¥Â∞±ÂèØ‰ª•ÊâøÂèóÔºå‰ΩÜÊòØ‰∏∫Êó•ËØ≠ÂàõÂª∫Â≠ó‰ΩìÊòØ‰∏Ä‰∏™ÂæàÈöæÁöÑ‰∫ãÊÉÖ</p>
<p>È¶ñÂÖàÂ¶ÇÊûú‰ªéÂ§¥ÂàõÂª∫‰∏Ä‰∏™Ëã±ËØ≠Â≠ó‰ΩìÔºå‰Ω†‰ºöÁúãÂà∞Â§ßÁ∫¶230‰∏™Â≠óÂΩ¢Ôºå‰∏Ä‰∏™Â≠óÂΩ¢ÊòØ‰∏Ä‰∏™Â≠óÊØçÁöÑÂçïÁã¨Â±ïÁ§∫(A a a ÁÆó3‰∏™Â≠óÂΩ¢)ÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Ë¶ÜÁõñÊâÄÊúâÂü∫‰∫éÊãâ‰∏ÅÂ≠óÊØçÁöÑËØ≠Ë®ÄÔºåÂ∞±ÈúÄË¶Å840‰∏™Â≠óÂΩ¢„ÄÇ‰ΩÜÊòØÂØπ‰∫éÊó•ËØ≠ÔºåÁî±‰∫é‰∏âÁßç‰∏çÂêåÁöÑ‰π¶ÂÜôÁ≥ªÁªüÂíåÊó†Êï∞ÁöÑÊ±âÂ≠óÔºå‰Ω†Â∞±‰ºöÁúãÂà∞7000 - 16000‰∏™Â≠óÂΩ¢ÁîöËá≥Êõ¥Â§ö„ÄÇÂõ†Ê≠§ÔºåÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊó•ËØ≠Â≠ó‰ΩìÈúÄË¶Å‰∏Ä‰∏™ÊúâÁªÑÁªáÁöÑÂõ¢ÈòüËä±Ë¥πÊØîÊãâ‰∏ÅËØ≠Â≠ó‰ΩìÁõ∏ÂΩìÂ§öÁöÑÊó∂Èó¥ÊâçÂèØËÉΩ</p>
<p>ÊØ´‰∏çÂ•áÊÄ™ÔºåÂØπ‰∫é‰∏≠ÊñáÂíå(Ê±âÂ≠ó)Èü©ÊñáÂ≠ó‰ΩìÊù•ËØ¥ÔºåÁ±ª‰ººÁöÑÂ∑•‰ΩúÈáè‰πüÊòØÂøÖÁÑ∂ÁöÑÔºåËøôÂØºËá¥Ëøô‰∫õËØ≠Ë®ÄÈÄöÂ∏∏Ë¢´ÊâÄË∞ìÁöÑCJKÂ≠ó‰ΩìÊâÄË¶ÜÁõñ</p>
<p>ÈöèÁùÄË∂äÊù•Ë∂äÂ∞ëÁöÑËÆæËÆ°Â∏àÊé•ÂèóËøô‰∏ÄÁâπÊÆäÊåëÊàòÔºåÂú®Âª∫Á´ã‰∏Ä‰∏™ÁΩëÁ´ôÊó∂ÂèØ‰æõÈÄâÊã©ÁöÑÂ≠ó‰Ωì‰πüÂ∞±Ë∂äÊù•Ë∂äÂ∞ë„ÄÇÂÜçÂä†‰∏äÁº∫‰πèÂ§ßÂÜôÂ≠ó‰ΩìÂíåÊó•ÊñáÂ≠ó‰ΩìÔºåÈúÄË¶ÅÂºïÂÖ•ËæÉÂ§ß‰ΩìÁßØÁöÑÂ∫ìÔºå‰ºöÂØºËá¥Âä†ËΩΩÊó∂Èó¥ËøáÈïøÔºåÊúÄÁªà‰Ω†Â∞±ÈúÄË¶Å‰ΩøÁî®‰∏çÂêåÁöÑÊñπÊ≥ïÔºåÊù•ÂàõÂª∫ËßÜËßâÂ±ÇÊ¨°„ÄÇ</p>
<p>Êàë‰ª¨ÂèØ‰ª•ÊãøÁæéÂõΩÂíåÊó•Êú¨ÁöÑÊòüÂ∑¥ÂÖã‰∏ªÈ°µ‰∏∫‰æãÔºö</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PfaaGd_Bl2fTN9uqAT-bKA.png"></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D-TiKrBADjkMrnHjBAQ4bQ.png"></p>
<p>Â∞±ËøôÊ†∑ÔºåÊàë‰ª¨ÂèØ‰ª•Ëß£Èáä‰∏∫‰ªÄ‰πàÂØπ‰∫éËÆ∏Â§öÊó•Êú¨ÁΩëÁ´ôÂÄæÂêë‰∫éÁî®ÊñáÂ≠óÂØÜÈõÜÁöÑÂõæÂÉèÊù•Ë°®Á§∫ÂÜÖÂÆπÁ±ªÂà´„ÄÇÊúâÊó∂ÂÄô‰Ω†ÁîöËá≥ÂèØ‰ª•ÁúãÂà∞ÊØè‰∏™Áì∑Á†ñÈÉΩ‰ΩøÁî®Ëá™Â∑±ÁâπÂÆöÁöÑÂ≠ó‰ΩìÔºåÁâπÂà´ÊòØÈôêÊó∂‰ºòÊÉ†Êó∂„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Imrz53GsvI3Jmibv4Lltxw.png"></p>
<h2 id="Technological-Development-x2F-Stagnation-amp-Institutional-Digital-Literacy"><a href="#Technological-Development-x2F-Stagnation-amp-Institutional-Digital-Literacy" class="headerlink" title="Technological Development&#x2F;Stagnation &amp; Institutional Digital Literacy"></a>Technological Development&#x2F;Stagnation &amp; Institutional Digital Literacy</h2><p>ËôΩÁÑ∂ÂÖ≥‰∫é ‚ÄúÂ§±ÂéªÁöÑÂçÅÂπ¥‚Äù ÂíåÊó•Êú¨ÊäÄÊúØËøõÊ≠•ÁöÑÂÖ≥Á≥ªÊúâÊó†Êï∞ÁöÑËÆ®ËÆ∫Ôºå‰ΩÜÊàëÊúÄÂñúÊ¨¢Ëøô‰∏™ÊÄªÁªìÔºö</p>
<blockquote>
<p>Japan, living in the year 2000 since 1985. (<a href="https://www.reddit.com/r/japan/comments/10herkr/comment/j59m31c/?context=3">thanks Reddit</a>)</p>
</blockquote>
<p>Â¶ÇÊûú‰Ω†ÂØπÊó•Êú¨ÊÑüÂÖ¥Ë∂£Ôºå‰Ω†ÂèØËÉΩ‰ºöÁÜüÊÇâÂÖàËøõÊäÄÊúØÂíåËøáÊó∂ÊäÄÊúØÁöÑËøôÁßçÂØπÊØîÔºåËøôÁßçÂØπÊØîÂú®ËÆ∏Â§öÂú∞ÊñπÈÉΩÂ≠òÂú®„ÄÇ‰Ωú‰∏∫‰∏ñÁïåÊú∫Âô®‰∫∫È¢ÜÂüüÁöÑÈ¢ÜÂÖàËÄÖ‰πã‰∏ÄÔºåÂ∞Ü‰∏ÄÂ∫ß<a href="https://www.unicorn-gundam-statue.jp/en/">Áúü‰∫∫Â§ßÂ∞èÁöÑÈ´òËææÈõïÂÉè</a>ÊîæÂú®Âæ°Âè∞Âú∫‰∫∫Â∑•Â≤õ‰∏äÁöÑÂõΩÂÆ∂ÔºåÂç¥‰ªçÁÑ∂‰æùËµñËΩØÈ©±Âíå‰º†ÁúüÊú∫ÔºåÂπ∂Âú®2022Âπ¥Êó∂Èù¢ÂØπ<a href="https://www.bloomberg.com/news/articles/2022-06-15/end-of-internet-explorer-era-spells-trouble-for-japan-businesses?leadSource=uverify%20wall#xj4y7vzkg">windows ieÂÖ≥Èó≠</a>Èô∑ÂÖ•ÊÅêÊÖå</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KDYVc3z22_A-ELz8Q1KHIw.png"></p>
<p>Âú®Âæ∑ÂõΩÔºåÂâçÊÄªÁêÜÂÆâÊ†ºÊãâ-ÈªòÂÖãÂ∞îÂú®2013Âπ¥Áß∞‰∫íËÅîÁΩë‰∏∫ ‚ÄúÊú™Áü•È¢ÜÂüü‚ÄùÔºàÂæ∑ÊñáÂéüËØùÔºö‚ÄùDas Internet ist f√ºr uns alle Neuland‚ÄùÔºâÂêéÔºåË¢´ÂÖ®ÂõΩÂèñÁ¨ë„ÄÇÁÑ∂ËÄåÔºåËøô‰∏ÄÊÉÖÂÜµË¢´ÂâçÁΩëÁªúÂÆâÂÖ®ÈÉ®ÈïøÊ®±Áî∞‰πâÂ≠ùÂú®2018Âπ¥Ë∂ÖË∂ä„ÄÇÊçÆÊä•ÈÅìÔºå‰ªñÂ£∞Áß∞‰ªéÊú™‰ΩøÁî®ËøáËÆ°ÁÆóÊú∫ÔºåÂπ∂‰∏îÂΩìÂú®ËÆÆ‰ºöË¢´ÈóÆÂèäUSBÈ©±Âä®Âô®ÁöÑÊ¶ÇÂøµÊó∂Ôºå‰ªñ‚ÄúÂõ∞ÊÉë‰∏çËß£‚Äù(<a href="https://www.theguardian.com/world/2018/nov/15/japan-cyber-security-ministernever-used-computer-yoshitaka-sakurada">Êù•Ê∫ê</a>)„ÄÇ</p>
<p>ÂØπ‰∫éÈÇ£‰∫õÊ≤°ÊúâÊú∫‰ºöÁúãÂà∞ÂπïÂêéÁöÑ‰∫∫Êù•ËØ¥ÔºåËøôÊ†∑ÁöÑÁä∂ÂÜµÂèØËÉΩÂê¨Ëµ∑Êù•ÂæàÂ•áÊÄ™„ÄÇÂõ†‰∏∫Êó•Êú¨Âú®ÊäÄÊúØÁ¥†ÂÖªÊñπÈù¢Ôºå‰∏ÄÁõ¥‰∏•ÈáçÊªûÂêé„ÄÇÂõ†Ê≠§ÔºåÊé®Êñ≠Ëøô‰∫õÈóÆÈ¢òÂØπÊó•Êú¨ÁΩëÁ´ôËÆæËÆ°ÂèëÂ±ï‰πüËµ∑Âà∞‰∫Ü‰∏ÄÁÇπÈòªÁ¢çÁöÑ‰ΩúÁî®„ÄÇËÄå‰∏îÔºåÊó•Êú¨ÁöÑÁΩëÁ´ôËÆæËÆ°‰πüÈù¢‰∏¥ÁùÄËøôÁßçÂõ∞Â¢É„ÄÇÂè™ÈúÄÂú®Ë∞∑Ê≠åÊàñPinterest‰∏äÊêúÁ¥¢Êó•Êú¨Êµ∑Êä•ËÆæËÆ°ÔºåÂ∞±ËÉΩËßÅËØÅ‰∏ÄÁßçÊà™ÁÑ∂‰∏çÂêå‰∏îÁé∞‰ª£ÂåñÁöÑÂπ≥Èù¢ËÆæËÆ°Ê∞¥Âπ≥„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y4nu6H_pheQBXEiAIZz6jA.png"></p>
<h2 id="Cultural-Influence"><a href="#Cultural-Influence" class="headerlink" title="Cultural Influence"></a>Cultural Influence</h2><p>Âú®ÂàÜÊûê‰ªª‰ΩïÁ±ªÂûãÁöÑËÆæËÆ°ÈÄâÊã©Êó∂ÔºåÊñáÂåñ‰π†‰øó„ÄÅÂÄæÂêë„ÄÅÂÅèËßÅÂíåÂÅèÂ•ΩÈÉΩ‰∏çÂ∫îË¢´‰Ωé‰º∞„ÄÇÁÑ∂ËÄåÔºå‚ÄúËøôÊòØÊñáÂåñ‚ÄùÁöÑËßÇÁÇπÂ≠òÂú®Ëøá‰∫éÁÆÄÂåñ‰∏ªÈ¢òÁöÑÈ£éÈô©ÔºåÂπ∂ÂèØËÉΩË¢´Áî®‰Ωú‰∏∫ÂêÑÁßçÂ∑ÆÂºÇËæ©Êä§ÁöÑÂÄüÂè£„ÄÇËÄåË¶ÅÊëÜËÑ±‰∏™‰∫∫ÁöÑËßÇÁÇπÂÅèËßÅÊòØÂõ∞ÈöæÁöÑÔºåÁîöËá≥‰∏çÂèØËÉΩÂÆåÂÖ®ÂÅöÂà∞„ÄÇ</p>
<p>ÊâÄ‰ª•Ôºå‰ªéÊàë‰ª¨ÁöÑËßíÂ∫¶Êù•ÁúãÔºåÂæàÂÆπÊòìÁúãÂæÖËøô‰∏™ÁΩëÁ´ô‚Ä¶</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Tgk9_5Ci-B4DoITuGqQTw.png"></p>
<p>‚Ä¶ÊÑüËßâÈöæ‰ª•Êé•ÂèóÔºåÂπ∂‰∏îËÆ§‰∏∫ÂÆÉÁöÑËÆæËÆ°ÂæàÁ≥üÁ≥ïÔºåÁÑ∂ÂêéÂÆ£Â∏ÉÁªìÊùü„ÄÇÂõ†‰∏∫Ë∞Å‰ºö‰ΩøÁî®Ëøô‰∏™Ê∑∑‰π±Êó†Â∫èÁöÑÁΩëÁ´ôÂë¢Ôºü</p>
<p>Ê≠£ÊòØÂõ†‰∏∫ËøôÁßçÊó†Áü•ÔºåËøô‰∫õÊúâË∂£ÁöÑËßÅËß£Â∞±Ë¢´ÂøΩËßÜ‰∫Ü„ÄÇÁé∞Âú®ÔºåÊàë‰∏çËÉΩÁ°ÆÂàáÁöÑÂëäËØâ‰Ω†Êó•Êú¨ÊñáÂåñÂ¶Ç‰ΩïÂΩ±Âìç‰∫ÜËøôÁßçËÆæËÆ°„ÄÇÁÑ∂ËÄåÔºåÊàëÂæàÂπ∏ËøêÂú∞ËÉΩÂ§ü‰ªé‰∏éÊó•Êú¨Êú¨Âúü‰∫∫ÁöÑÂØπËØù‰∏≠Ëé∑ÂæóÂêØÁ§∫Ôºå‰πüÊúâÂú®Êó•Êú¨Â∑•‰ΩúÂíåÁîüÊ¥ªÁöÑÁªèÈ™åÂèØ‰ª•ÂÄüÈâ¥„ÄÇ</p>
<p>ÊàëÊõæÁªèÂèÇ‰∏éËøá‰∏ÄÊ¨°‰∏éËøô‰∏™ÂàÜÊûêÁõ∏ÂÖ≥‰ΩÜ‰∏éÁΩëÁ´ôÊó†ÂÖ≥ÁöÑÂØπËØùÔºåÊòØÂÖ≥‰∫éYouTubeÁöÑÁº©Áï•ÂõæÔºåÂõ†‰∏∫ËøôÂêåÊ†∑ËÆ©‰∫∫Èöæ‰ª•Êé•Âèó</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0lwaEIIIUc5peoMMo6fM_Q.png"></p>
<p>ÂØπ‰∫é‰∏Ä‰∏™‰π†ÊÉØ‰∫ÜËÆ∏Â§öË•øÊñπÈ¢ëÈÅì‰ΩøÁî®ÁöÑÊûÅÁÆÄÂíåÂÖâÊªëËÆæËÆ°ÁöÑ‰∫∫Êù•ËØ¥Ôºå‰ª•‰∏Ä‰∏™Ê†áÈ¢òÔºåÂèçÂ§çÂá∫Áé∞ÁöÑË∞ÉËâ≤ÊùøÂíåÊúâÈôêÁöÑÂ≠ó‰Ωì‰∏∫ÁâπËâ≤Ôºå‰∏äÈù¢ÁöÑÁº©Áï•ÂõæËÆ©‰∫∫Èöæ‰ª•Êé•ÂèóÔºåÊàëÊõæÈóÆ‰∏Ä‰∏™Êó•Êú¨‰∫∫‰∏∫‰ªÄ‰πàËÆ∏Â§öÈùûÂ∏∏ÂèóÊ¨¢ËøéÁöÑÈ¢ëÈÅìÁöÑÁº©Áï•ÂõæÈÉΩÊòØËøôÊ†∑ËÆæËÆ°ÁöÑÔºåÁÑ∂ËÄåÔºå‰ªñÈùûÂ∏∏ÊÉäËÆ∂ËøôÁßçËßÜ‰∏∫Ê∑∑‰π±ÁöÑÊÉ≥Ê≥ï„ÄÇ‰ªñËÆ§‰∏∫Êó•Êú¨‰∫∫ÁöÑËßÜÈ¢ëÁúãËµ∑Êù•Êõ¥ÊúâÂê∏ÂºïÂäõÔºåÊèê‰æõ‰∫Ü‰∏Ä‰∫õËÉΩËÆ©‰∫∫Êäì‰ΩèÁöÑ‰ø°ÊÅØÔºåËÆ©‰∫∫‰ª¨Êõ¥ÂÆπÊòìÂÜ≥ÂÆöËßÜÈ¢ëÊòØÂê¶ÊúâË∂£„ÄÇÊàëÁªô‰ªñÁúãËã±ÊñáËßÜÈ¢ëÁº©Áï•ÂõæÂÅöÂØπÊØîÊó∂Ôºå‰ªñËÆ§‰∏∫ÈùûÂ∏∏Ê®°Á≥ä‰∏îÊó†ËÅä„ÄÇ</p>
<p>ËÄåÊ≠£ÊòØËøôÁßçÂØªÊ±Ç‰ø°ÊÅØÁöÑÊÄÅÂ∫¶ÔºåÂèØËÉΩÊòØÊàë‰ª¨ÁöÑËßÇÂøµÂá∫Áé∞Â¶ÇÊ≠§Â§ßÂàÜÊ≠ßÁöÑÊ†πÊú¨ÂéüÂõ†„ÄÇÂú®Êó•Êú¨ÔºåËßÑÈÅøÈ£éÈô©„ÄÅÂèçÂ§çÊ£ÄÊü•ÂíåÂØπÂÅöÂÜ≥ÂÆöÊó∂ÁöÑÁäπË±´‰∏çÂÜ≥ÁöÑÁ®ãÂ∫¶ÊòéÊòæÈ´ò‰∫éË•øÊñπÂõΩÂÆ∂„ÄÇËøô‰∏éÊõ¥Â§öÁöÑÈõÜ‰Ωì‰∏ª‰πâÁ§æ‰ºöÂøÉÊÄÅÂØÜÂàáÁõ∏ÂÖ≥ÔºåÊØîÂ¶ÇÔºåÂ∞Ü‰∏Ä‰ªΩÊñá‰ª∂ÂèëÈÄÅÁªôÂïÜ‰∏ö‰ºô‰º¥‰πãÂâçÔºåËøõË°åÂèåÈáçÔºàÊàñ‰∏âÈáçÔºâÊ£ÄÊü•ÂèØËÉΩ‰ºöËä±Ë¥πÊõ¥Â§öÊó∂Èó¥Ôºå‰ΩÜÂç¥Â§ßÂ§ßÈôç‰ΩéÈîôËØØÊ∫úËµ∞ÁöÑÈ£éÈô©Ôºå‰ªéËÄåÈò≤Ê≠¢Áõ∏ÂÖ≥‰∫∫Âëò‰∏¢ËÑ∏„ÄÇ</p>
<p>ÂõûÂà∞ÁΩëÁ´ôËÆæËÆ°ÔºåËøô‰∏™ÊñáÂåñËßíÂ∫¶Êõ¥ËÉΩÂä©‰∫éËß£Èáä‰∏∫‰ªÄ‰πàÁΩë‰∏äË¥≠Áâ©„ÄÅÊñ∞ÈóªÂíåÊîøÂ∫úÁΩëÁ´ô‰ªéÂ§ñÈÉ®Êù•ÁúãÂæÄÂæÄÊòØ‚ÄùÊúÄÁ≥üÁ≥ïÁöÑÁäØÁΩ™ËÄÖ‚Äù„ÄÇÊØïÁ´üÔºåÂú®Ëøô‰∫õÊÉÖÂÜµ‰∏ãÔºåÂ§ßÈáèÁöÑÁªÜËäÇÁõ¥Êé•ÂØπÂ∫îÁùÄÂ•ΩÁöÑÁöÑË¥≠‰π∞ÂÜ≥Á≠ñ„ÄÅÈ´òÊïàÂú∞‰øùÊåÅÊúÄÊñ∞‰ø°ÊÅØÊàñÁ°Æ‰øù‰Ω†Êã•ÊúâÊüê‰∏™ÊµÅÁ®ãÁöÑÊâÄÊúâÂøÖË¶Å‰ø°ÊÅØ„ÄÇ</p>
<p>ÊúâË∂£ÁöÑÊòØÔºåÂÖ≥‰∫éÁæéÂõΩ‰∫∫Âíå‰∏≠ÂõΩ&#x2F;Êó•Êú¨‰∫∫ÂØπ‰ø°ÊÅØÁöÑÊÑüÁü•ÊñπÂºèÔºåÊúâÁùÄÂ§ßÈáèÁ†îÁ©∂„ÄÇ‰∏Ä‰∫õÁ†îÁ©∂ÁöÑÁªìÊûú‰ºº‰πéË°®ÊòéÔºåÊó•Êú¨‰∫∫ÂØπ‰ø°ÊÅØÁöÑÊÑüÁü•Êõ¥Âä†ÂÖ®Èù¢ÔºåËÄåÁæéÂõΩ‰∫∫ÂàôÂÄæÂêë‰∫éÈÄâÊã©‰∏Ä‰∏™ÁÑ¶ÁÇπÊù•ÂºïÂØº‰ªñ‰ª¨ÁöÑÊ≥®ÊÑèÂäõ(<a href="https://www.wired.com/2008/03/japanese-more-s/">Êù•Ê∫ê</a>)„ÄÇËøôÂ∞±ÁªôÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∏™Ëß£ÈáäÔºå‰∏∫‰ªÄ‰πàË•øÊñπ‰∫∫Âç≥‰ΩøÂú®Êó•ËØ≠Ê∞¥Âπ≥ÂæàÈ´òÁöÑÊÉÖÂÜµ‰∏ã‰πüÂæàÈöæ‰ΩøÁî®ËøôÁ±ªÁΩëÁ´ô</p>
<p>ÊúÄÂêéÔºåÈúÄË¶ÅÊåáÂá∫ÔºåÁΩëÁ´ô‰∏çÊòØÂçïÁã¨Â≠òÂú®ÁöÑ„ÄÇ‰ªéÊùÇÂøóÂà∞Âú∞ÈìÅÈáåÁöÑÂπøÂëäÁ≠âÂêÑÁßçÂ™í‰Ωì‰πüÂ∞ΩÂèØËÉΩÂú®Â∞èÁöÑÁ©∫Èó¥ÈáåÂ°ûËøõÂ∞ΩÂèØËÉΩÂ§öÁöÑ‰ø°ÊÅØÔºå‰∫∫‰ª¨ÂèØËÉΩÂè™ÊòØ‰π†ÊÉØ‰∫ÜËøôÁßçÊó†Â§Ñ‰∏çÂú®ÁöÑÂ±ïÁ§∫ÂØºËá¥Ê≤°Êúâ‰∫∫ÊÉ≥Ë¶ÅË¥®ÁñëÂÆÉ„ÄÇ</p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q6KRgu_BarZlRVPehgytsA.png"></p>
<p>ÈïøËØùÁü≠ËØ¥ÔºåËøôÊó¢‰∏çÊòØ‰∏∫‰∫ÜÊâæÂà∞Ê†áÈ¢òÁöÑÁªùÂØπÁ≠îÊ°àÔºå‰πü‰∏çÊòØ‰∏∫‰∫ÜÂä†Âº∫Êó•Êú¨‰∫∫Áã¨ÁâπÊÄßÁöÑÊ¶ÇÂøµ„ÄÇÁõ∏ÂèçÔºåÁâπÂà´ÊòØÁúãÂà∞‰∏Ä‰∫õ‰∏ìÊ≥®‰∫éÂ∞ÜÊüêÁßçËß£ÈáäËßÜ‰∏∫‚ÄúÁúüÊ≠£Á≠îÊ°à‚ÄùÁöÑËÆ®ËÆ∫ÂêéÔºåÊàëÊÉ≥Ë¶ÅËØ¥ÊòéÁßëÊäÄ„ÄÅÂéÜÂè≤ÂíåÊñáÂåñÂΩ±ÂìçÁöÑËåÉÂõ¥ÂØºËá¥ÊúÄÁªàÂΩ¢ÊàêÁöÑËøôÁßçÂ∑ÆÂºÇ„ÄÇ</p>
<h2 id="Sources-amp-further-reading"><a href="#Sources-amp-further-reading" class="headerlink" title="Sources &amp; further reading"></a>Sources &amp; further reading</h2><h3 id="Fonts-amp-Typography"><a href="#Fonts-amp-Typography" class="headerlink" title="Fonts &amp; Typography"></a>Fonts &amp; Typography</h3><p>Interview with Font Designer Akira Kobayashi: <a href="https://www.smashingmagazine.com/2015/04/interview-with-akira-kobayashi/">https://www.smashingmagazine.com/2015/04/interview-with-akira-kobayashi/</a></p>
<p>A detailed breakdown of the creation process behind a Chinese font: <a href="https://qz.com/522079/the-long-incredibly-tortuous-and-fascinating-process-of-creating-a-chinese-font">https://qz.com/522079/the-long-incredibly-tortuous-and-fascinating-process-of-creating-a-chinese-font</a></p>
<p>An example of a Japanese font including glyph count from Adobe Fonts: <a href="https://fonts.adobe.com/fonts/source-han-sans-japanese#fonts-section">https://fonts.adobe.com/fonts/source-han-sans-japanese#fonts-section</a></p>
<p>CJK Fonts: <a href="https://en.wikipedia.org/wiki/List_of_CJK_fonts">https://en.wikipedia.org/wiki/List_of_CJK_fonts</a></p>
<h3 id="Japan-amp-Technology"><a href="#Japan-amp-Technology" class="headerlink" title="Japan &amp; Technology"></a>Japan &amp; Technology</h3><p>An article on Japan‚Äôs fading hi-tech image and where it came from: <a href="https://thenextweb.com/news/japan-loves-fax-machine-techno-orientalism">https://thenextweb.com/news/japan-loves-fax-machine-techno-orientalism</a></p>
<p>Bloomberg on the effects of the Internet Explorer shutdown in Japan: <a href="https://www.bloomberg.com/news/articles/2022-06-15/end-of-internet-explorer-era-spells-trouble-for-japan-businesses#xj4y7vzkg?leadSource=uverify%20wall">https://www.bloomberg.com/news/articles/2022-06-15/end-of-internet-explorer-era-spells-trouble-for-japan-businesses#xj4y7vzkg?leadSource=uverify%20wall</a></p>
<p>The Guardian on the 2018 statement made by Japan‚Äôs former Cybersecurity Minister: <a href="https://www.theguardian.com/world/2018/nov/15/japan-cyber-security-ministernever-used-computer-yoshitaka-sakurada">https://www.theguardian.com/world/2018/nov/15/japan-cyber-security-ministernever-used-computer-yoshitaka-sakurada</a></p>
<p>Reading up on the Lost Decades: <a href="https://en.wikipedia.org/wiki/Lost_Decades">https://en.wikipedia.org/wiki/Lost_Decades</a></p>
<h3 id="Cultural-Influences"><a href="#Cultural-Influences" class="headerlink" title="Cultural Influences"></a>Cultural Influences</h3><p>Wired on several studies about perception differences: <a href="https://www.wired.com/2008/03/japanese-more-s/">https://www.wired.com/2008/03/japanese-more-s/</a></p>
<p>A study on the same topic: <a href="https://www.researchgate.net/publication/11645680_Attending_holistically_vs_analytically_Comparing_the_context_sensitivity_of_Japanese_and_Americans_Journal_of_Personality_and_Social_Psychology_81_922-934">https://www.researchgate.net/publication/11645680_Attending_holistically_vs_analytically_Comparing_the_context_sensitivity_of_Japanese_and_Americans_Journal_of_Personality_and_Social_Psychology_81_922-934</a></p>
]]></content>
      <tags>
        <tag>Translate</tag>
        <tag>Web Design</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„ÄëStop using &amp;&amp; in React Conditional Rendering</title>
    <url>/2023/05/20/%E3%80%90%E7%BF%BB%E3%80%91Stop-using-in-React-Conditional-Rendering/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://www.crocoder.dev/blog/react-conditional-rendering/">Stop using &amp;&amp; in React Conditional Rendering</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://twitter.com/devabram">David Abram</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Êù°‰ª∂Ê∏≤ÊüìÊòØReact‰∏≠ÁöÑ‰∏ÄÈ°πÊäÄÊúØÔºåÂÆÉÂÖÅËÆ∏‰Ω†Ê†πÊçÆÊüê‰∫õÊù°‰ª∂Êù•Â±ïÁ§∫ÊàñÈöêËóèÁî®Êà∑ÁïåÈù¢ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇËøôÊÑèÂë≥ÁùÄ‰Ω†ÂèØ‰ª•Ê†πÊçÆ‰Ω†Â∫îÁî®Á®ãÂ∫èÂú®‰ªª‰ΩïÊó∂Èó¥ÂèëÁîüÁöÑÊÉÖÂÜµÊù•ÊòæÁ§∫‰∏çÂêåÁöÑÂÜÖÂÆπÂíåÁªÑ‰ª∂</p>
<p>ÊØîÂ¶ÇÔºå‰Ω†Ê≠£Âú®ÊûÑÂª∫‰∏Ä‰∏™ÁΩëÁ´ôÔºåÁî®Êà∑ÂèØ‰ª•ÁôªÂΩïÂπ∂Êü•Áúã‰ªñ‰ª¨ÁöÑ‰∏™‰∫∫ËµÑÊñô‰ø°ÊÅØ„ÄÇÂΩìÁî®Êà∑Ê≤°ÊúâÁôªÂΩïÊó∂Ôºå‰Ω†ÂèØËÉΩÊÉ≥Â±ïÁ§∫‰∏Ä‰∏™ÁôªÂΩïË°®Âçï„ÄÇ‰ΩÜÂΩìÁî®Êà∑ÁôªÂΩïÂêéÔºå‰Ω†ÂèØËÉΩÊÉ≥Â±ïÁ§∫‰ªñ‰ª¨ÁöÑËµÑÊñô‰ø°ÊÅØ„ÄÇ</p>
<p>ËÆ©Êàë‰ª¨ÁúãÁúãReact‰∏≠Êù°‰ª∂Ê∏≤ÊüìÁöÑ‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ</p>
<h3 id="The-CrocDemo-component"><a href="#The-CrocDemo-component" class="headerlink" title="The CrocDemo component"></a>The CrocDemo component</h3><pre><code class="highlight js"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;

<span class="keyword">const</span> <span class="title class_">CrocDemo</span>: <span class="title class_">React</span>.<span class="property">FC</span> = <span class="function">() =&gt;</span> &#123;
  <span class="keyword">const</span> crocodiles = [<span class="string">&#x27;Lyle&#x27;</span>, <span class="string">&#x27;Snappy&#x27;</span>, <span class="string">&#x27;Mr. Vile&#x27;</span>];

  <span class="keyword">const</span> dodos = [];

  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;&gt;</span></span>
<span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;crocodiles.length &amp;&amp; `crocodiles: $&#123;crocodiles.map(() =&gt; &#x27;üêä&#x27;).join(&#x27; &#x27;)&#125;`&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
<span class="language-xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;dodos.length &amp;&amp; `dodos: $&#123;dodos.map(() =&gt; &#x27;ü¶§&#x27;).join(&#x27; &#x27;)&#125;`&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span>
<span class="language-xml">    <span class="tag">&lt;/&gt;</span></span>
  );
&#125;;</code></pre>

<p>ËøôÊÆµ‰ª£Á†ÅÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Âêç‰∏∫<code>CrocDemo</code>ÁöÑReactÁªÑ‰ª∂</p>
<p>Âú®Ëøô‰∏™ÁªÑ‰ª∂‰∏≠ÔºåÂÆö‰πâ‰∫Ü‰∏§‰∏™Êï∞ÁªÑÔºö<code>crocodiles</code>Âíå<code>dodos</code>„ÄÇcrocodilesÊï∞ÁªÑÂåÖÂê´‰∏âÊù°È≥ÑÈ±ºÁöÑÂêçÂ≠ó„ÄÇËÄådodosÊï∞ÁªÑÊòØÁ©∫ÁöÑ„ÄÇËøôÊòØÂΩìÁÑ∂ÁöÑÔºåÂõ†‰∏∫Ê∏°Ê∏°È∏üÂ∑≤ÁªèÁÅ≠Áªù‰∫Ü</p>
<p>ÁÑ∂ÂêéËØ•ÁªÑ‰ª∂ËøîÂõû‰∫Ü‰∏Ä‰∫õJSX‰ª£Á†ÅÔºåÂåÖÊã¨‰∏§‰∏™divÂÖÉÁ¥†ÔºåÁ¨¨‰∏Ä‰∏™divÂÖÉÁ¥†ÊòæÁ§∫È≥ÑÈ±ºÁöÑÂêçÂ≠óÔºåÁ¨¨‰∫å‰∏™divÂÖÉÁ¥†ÊòæÁ§∫Ê∏°Ê∏°È∏üÁöÑÂêçÂ≠ó„ÄÇ</p>
<p>ËøôÊÆµ‰ª£Á†Å‰∏≠ÊúâÊÑèÊÄùÁöÑ‰∏ÄÈÉ®ÂàÜÊòØÂ¶Ç‰ΩïÂ±ïÁ§∫Ëøô‰∫õÂêçÂ≠ó„ÄÇdivÂÖÉÁ¥†‰ΩøÁî®‰∏ÄÁßçÂè´ÂÅöÊù°‰ª∂Ê∏≤ÊüìÁöÑÊäÄÊúØÊù•ÂÜ≥ÂÆöÊòØÂê¶ÊòæÁ§∫ÂêçÂ≠ó„ÄÇ</p>
<p>Á¨¨‰∏Ä‰∏™divÂÖÉÁ¥†Ê£ÄÊü•crocodiesÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊòØÂê¶Â§ß‰∫é0„ÄÇÂ¶ÇÊûúÊòØÔºåËøô‰∏™divÂÖÉÁ¥†Â∞±‰ºöÊòæÁ§∫crocodilesÊñáÊú¨ÔºåÁÑ∂ÂêéÊòØ‰∏ÄÁ≥ªÂàóÁöÑÈ≥ÑÈ±ºË°®ÊÉÖ„ÄÇËøô‰∫õË°®ÊÉÖÊòØÁî®mapÂáΩÊï∞ÂàõÂª∫ÔºåÂÆÉÊ†πÊçÆÂéüÊï∞ÁªÑ‰∏≠ÁöÑÈ≥ÑÈ±ºÊï∞ÈáèÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑË°®ÊÉÖÊï∞ÁªÑÔºåÁÑ∂ÂêéÁî®joinÂáΩÊï∞Â∞ÜËøô‰∫õË°®ÊÉÖËøûÊé•Êàê‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÊòæÁ§∫Âú®divÂÖÉÁ¥†ÂÜÖ„ÄÇ</p>
<p>Á¨¨‰∫å‰∏™divÂÖÉÁ¥†ÊåâÁÖßÁõ∏ÂêåÁöÑÊ®°ÂºèÔºåÂΩìÂÆÉÊ£ÄÊü•dodosÊï∞ÁªÑÁöÑÈïøÂ∫¶ÊòØÂê¶Â§ß‰∫é0„ÄÇÁî±‰∫édodosÊï∞ÁªÑÊòØÁ©∫ÁöÑÔºåÊâÄ‰ª•Ëøô‰∏™divÂÖÉÁ¥†‰∏ç‰ºöÊòæÁ§∫‰ªª‰Ωï‰∏úË•ø„ÄÇ</p>
<p>ÊâÄ‰ª•ÔºåÊúÄÁªàÁöÑÁªìÊûúÊòØÔºåÂ¶ÇÊûúÈ≥ÑÈ±ºÊï∞ÁªÑ‰∏≠Êúâ‰ªª‰ΩïÈ≥ÑÈ±ºÔºåCrocDemoÁªÑ‰ª∂Â∞±‰ºöÊòæÁ§∫È≥ÑÈ±ºÁöÑÂêçÂ≠ó(Ë°®ÊÉÖÁ¨¶Âè∑)ÔºåËÄåÂØπdodosÊï∞ÁªÑÂàô‰∏çÊòæÁ§∫„ÄÇ</p>
<p>Ëá≥Â∞ëÊ≤°ÊúâÂ±ïÁ§∫ÂÖ≥‰∫édodosÊï∞ÁªÑÁöÑÂÜÖÂÆπ„ÄÇ</p>
<pre><code class="highlight text">crocodiles: üêä üêä üêä
0</code></pre>

<p>ÂóØ‚Ä¶ ÁúãËµ∑Êù•ÊòØÊúâ‰∏Ä‰∏™ÈöèÊú∫ÁöÑ0ÔºåÊàë‰ª¨ÊúüÊúõÁöÑÊòØ‰ªÄ‰πàÈÉΩ‰∏çÂ±ïÁ§∫ÔºåËøôÊòØ‰∏∫‰ªÄ‰πàÂë¢Ôºü</p>
<p>ËÆ©Êàë‰ª¨ËØïÁùÄÁî®ÂÖ∑Êúâ‰∏çÂêå<code>false value</code>ÁöÑ<code>&amp;&amp;</code>ËøêÁÆóÁ¨¶Êù•‰∫ÜËß£ÂèëÁîü‰∫Ü‰ªÄ‰πà</p>
<pre><code class="highlight js"><span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
&lt;&gt;&#123;<span class="literal">false</span> &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&lt;/&gt;

<span class="comment">/* This will render 0 üò° */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;0 &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span>

<span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;&quot;&quot;  &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span>

<span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;null &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span>

<span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;undefined &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span>

<span class="comment">/* This will render NaN üò° */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;NaN &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span></code></pre>

<p>Âú®JavaScript‰∏≠Ôºå<code>&amp;&amp;</code>ËøêÁÆóÁ¨¶‰ºöÊ£ÄÊü•Â∑¶Âè≥Êìç‰ΩúÂØπË±°ÊòØÂê¶ÈÉΩÊòØtrueÔºåÂ¶ÇÊûúÂ∑¶ËæπÁöÑÊìç‰ΩúÂØπË±°ÊòØfalseÔºåÈÇ£‰πàÂè≥ËæπÁöÑÊìç‰ΩúÂØπË±°Â∞±‰∏ç‰ºöË¢´Ê£ÄÊü•ÔºåÂπ∂‰∏î<code>&amp;&amp;</code>ËøêÁÆóÁ¨¶‰ºöËøîÂõûÂ∑¶ËæπÁöÑÊìç‰ΩúÂØπË±°</p>
<p>Âú®Ë°®ËææÂºè<code>&#123;0 &amp;&amp; &lt;div&gt;üëã&lt;/div&gt;&#125;</code>‰∏≠ÔºåÂ∑¶ËæπÁöÑÊìç‰ΩúÂØπË±°ÊòØ0ÔºåËøôÂú®javascript‰∏≠ÊòØ‰∏Ä‰∏™<code>false value</code>ÔºåÂõ†‰∏∫Â∑¶ËæπÁöÑÊìç‰ΩúÂØπË±°ÊòØfalseÔºåÊâÄ‰ª•Âè≥ËæπÁöÑÊìç‰ΩúÂØπË±°‰∏ç‰ºöË¢´Ê£ÄÊü•„ÄÇÂπ∂‰∏îËøîÂõûÂ∑¶ËæπÁöÑÊìç‰ΩúÂØπË±°Ôºå‰πüÂ∞±ÊòØ0</p>
<p>ÂΩìReactËØïÂõæÊ∏≤ÊüìËØ•ÁªÑ‰ª∂Êó∂ÔºåÂÆÉÂ∞Ü0Ëß£Èáä‰∏∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÂπ∂Â∞ÜÂÖ∂Ê∏≤ÊüìÂà∞È°µÈù¢‰∏ä„ÄÇüò°üò°üò°</p>
<p>NaNÁöÑÊÉÖÂÜµÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ</p>
<pre><code class="highlight js"><span class="comment">/* This will render NaN üò° */</span>
&lt;&gt;&#123;<span class="title class_">NaN</span> &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&lt;/&gt;</code></pre>

<p>ÈÇ£‰πàÔºåÊàë‰ª¨ÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢Ôºü</p>
<h3 id="Use-the-ternary-operator"><a href="#Use-the-ternary-operator" class="headerlink" title="Use the ternary operator"></a>Use the ternary operator</h3><p>ÊúâÂá†ÁßçÊñπÊ≥ïÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇÁ¨¨‰∏Ä‰∏™(‰πüÊòØÊúÄÂ•ΩÁöÑ)ÊñπÊ≥ïÊòØ‰ΩøÁî®‰∏âÂÖÉËøêÁÆóÁ¨¶„ÄÇ‰∏âÂÖÉËøêÁÆóÁ¨¶ÊòØ‰∏Ä‰∏™Êù°‰ª∂ËøêÁÆóÁ¨¶ÔºåÂÆÉÊ£ÄÊü•‰∏Ä‰∏™Êù°‰ª∂ÊòØÂê¶‰∏∫true„ÄÇÂ¶ÇÊûúÊù°‰ª∂‰∏∫trueÔºåÂÆÉËøîÂõûÁ¨¨‰∏Ä‰∏™Êìç‰ΩúÂØπË±°ÔºåÂ¶ÇÊûúÊù°‰ª∂‰∏∫falseÔºåËøôËøîÂõûÁ¨¨‰∫å‰∏™Êìç‰ΩúÂØπË±°„ÄÇ</p>
<pre><code class="highlight js"><span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
&lt;&gt;&#123;<span class="number">0</span> ? <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> : <span class="literal">null</span>&#125;&lt;/&gt;

<span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;NaN ? <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span> : null&#125;<span class="tag">&lt;/&gt;</span></span></code></pre>

<h3 id="Convert-falsy-values-to-Boolean"><a href="#Convert-falsy-values-to-Boolean" class="headerlink" title="Convert falsy values to Boolean"></a>Convert falsy values to Boolean</h3><p>Âè¶Â§ñÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÊâÄÊúâÁöÑfalseËΩ¨‰∏∫booleanÔºåÊàñËÄÖ‰ΩøÁî®<code>!!</code>ËøêÁÆóÁ¨¶Ôºå<code>!!</code>ËøêÁÆóÁ¨¶ÊòØÂ∞Ü‰∏Ä‰∏™ÂÄºËΩ¨‰∏∫Â∏ÉÂ∞îÂÄºÁöÑÔºåÂÆÉÊú¨Ë¥®‰∏äÊòØÂ∞Ü‰∏Ä‰∏™true valueÊàñËÄÖfalse valueËΩ¨Êç¢‰∏∫trueÊàñfalseÁöÑ‰∏Ä‰∏™ÈÄüËÆ∞ÊñπÊ≥ï„ÄÇ</p>
<pre><code class="highlight js"><span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
&lt;&gt;&#123;<span class="title class_">Boolean</span>(<span class="number">0</span>) &amp;&amp; <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&#125;&lt;/&gt;

<span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;Boolean(NaN) &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span>

<span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;!!0 &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span>

<span class="comment">/* This won&#x27;t render anything ‚úÖ */</span>
<span class="language-xml"><span class="tag">&lt;&gt;</span>&#123;!!NaN &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>üëã<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;<span class="tag">&lt;/&gt;</span></span></code></pre>

<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>Êù°‰ª∂Ê∏≤ÊüìÊòØReact‰∏≠ÁöÑ‰∏ÄÈ°πÊäÄÊúØÔºåÂÆÉÂÖÅËÆ∏‰Ω†Ê†πÊçÆÊüê‰∫õÊù°‰ª∂Êù•Â±ïÁ§∫ÊàñËÄÖÈöêËóèÁî®Êà∑ÁïåÈù¢ÁöÑÊüê‰∫õÈÉ®ÂàÜ„ÄÇÂΩì‰Ω†ÊÉ≥Ê†πÊçÆÂ∫îÁî®Á®ãÂ∫è‰∏≠ÂèëÁîüÁöÑ‰∫ãÊÉÖÊù•ÊòæÁ§∫‰∏çÂêåÁöÑÂÜÖÂÆπÊàñÁªÑ‰ª∂Êó∂ÔºåËøôÂæàÊúâÁî®„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂú®‰ΩøÁî®<code>&amp;&amp;</code>ËøêÁÆóÁ¨¶Êó∂ÔºåÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ¶Ç0ÂíåNaNËøôÊ†∑ÁöÑfalse valueÔºå‰ºöÊÑèÂ§ñÂú∞ÂØºËá¥ÊÑèÂ§ñÁöÑÊ∏≤Êüì„ÄÇ</p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®‰∏âÂÖÉËøêÁÆóÁ¨¶ÊàñÂ∞Üfalse valueËΩ¨Êç¢‰∏∫boolean„ÄÇËøô‰∫õÊäÄÊúØÂ∞ÜÊúâÂä©‰∫éÁ°Æ‰øù‰Ω†ÁöÑReactÁªÑ‰ª∂ÂÆåÂÖ®ÂëàÁé∞Âá∫‰Ω†ÊâÄÊúüÊúõÁöÑÊïàÊûú„ÄÇ</p>
]]></content>
      <tags>
        <tag>React</tag>
        <tag>Translate</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂâçÁ´ØÁöÑDockerÂ≠¶‰π†ËÆ∞ÂΩï</title>
    <url>/2022/10/30/%E5%89%8D%E7%AB%AF%E7%9A%84Docker%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<h2 id="DockerÁÆÄ‰ªã"><a href="#DockerÁÆÄ‰ªã" class="headerlink" title="DockerÁÆÄ‰ªã"></a>DockerÁÆÄ‰ªã</h2><ul>
<li>Docker ÊòØ‰∏Ä‰∏™Â∫îÁî®<strong>ÊâìÂåÖ</strong>„ÄÅ<strong>ÂàÜÂèë</strong>„ÄÅ<strong>ÈÉ®ÁΩ≤</strong>ÁöÑÂ∑•ÂÖ∑ÔºåÂèØ‰ª•‰ΩøÂ∫îÁî®ÈÉ®ÁΩ≤Êõ¥Âä†ËΩªÈáèÔºåÂèØÁßªÊ§çÔºåÂèØÊâ©Â±ïÔºåÂèØ‰ª•ÁêÜËß£‰∏∫‰∏Ä‰∏™ËΩªÈáèÁöÑËôöÊãüÊú∫<ul>
<li>ÊâìÂåÖÔºöÂ∞±ÊòØÊää‰Ω†ËΩØ‰ª∂ËøêË°åÊâÄÈúÄÁöÑ‰æùËµñ„ÄÅÁ¨¨‰∏âÊñπÂ∫ì„ÄÅËΩØ‰ª∂ÊâìÂåÖÂà∞‰∏ÄËµ∑ÔºåÂèòÊàê‰∏Ä‰∏™ÂÆâË£ÖÂåÖ</li>
<li>ÂàÜÂèëÔºö‰Ω†ÂèØ‰ª•Êää‰Ω†ÊâìÂåÖÂ•ΩÁöÑ‚ÄúÂÆâË£ÖÂåÖ‚Äù‰∏ä‰º†Âà∞‰∏Ä‰∏™ÈïúÂÉè‰ªìÂ∫ìÔºåÂÖ∂‰ªñ‰∫∫ÂèØ‰ª•ÈùûÂ∏∏Êñπ‰æøÁöÑËé∑ÂèñÂíåÂÆâË£Ö</li>
<li>ÈÉ®ÁΩ≤ÔºöÊãøÁùÄ‚ÄúÂÆâË£ÖÂåÖ‚ÄùÂ∞±ÂèØ‰ª•‰∏Ä‰∏™ÂëΩ‰ª§ËøêË°åËµ∑Êù•Â∫îÁî®ÔºåËá™Âä®Ê®°ÊãüÂá∫‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑËøêË°åÁéØÂ¢ÉÔºå‰∏çÁÆ°ÊòØÂú®Windows&#x2F;Mac&#x2F;Linux</li>
</ul>
</li>
<li>dockerÊû∂ÊûÑÂõæ<br><img src="https://s1.ax1x.com/2022/10/30/xI2lGR.png"></li>
</ul>
<ul>
<li><strong>docker client</strong>: Âç≥dockerÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑</li>
<li><strong>docker host</strong>: ÂÆø‰∏ªÊú∫Ôºådocker daemonÁöÑËøêË°åÁéØÂ¢ÉÊúçÂä°Âô®</li>
<li><strong>docker daemon</strong>: dockerÁöÑÂÆàÊä§ËøõÁ®ãÔºådocker clientÈÄöËøáÂëΩ‰ª§Ë°å‰∏édocker daemon‰∫§‰∫í</li>
<li><strong>image</strong>: ÈïúÂÉèÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ÂÆâË£ÖÂåÖÔºåÂèØ‰ª•Êñπ‰æøÁöÑËøõË°å‰º†Êí≠ÂíåÂÆâË£Ö</li>
<li><strong>container</strong>: ÂÆπÂô®ÔºåÈïúÂÉèÁöÑËøêË°åÂÆû‰æãÔºåÊØè‰∏™ËΩØ‰ª∂ËøêË°åÁéØÂ¢ÉÈÉΩÊòØÁã¨Á´ãÁöÑÔºåÈöîÁ¶ªÁöÑ</li>
<li><strong>registry</strong>: ÈïúÂÉè‰ªìÂ∫ìÔºåÂèØ‰ª•‰ªéÈïúÂÉè‰ªìÂ∫ìÊãâÂèñÂíåÊé®ÈÄÅÈïúÂÉè</li>
</ul>
<h3 id="Â∫ïÂ±ÇÂéüÁêÜ"><a href="#Â∫ïÂ±ÇÂéüÁêÜ" class="headerlink" title="Â∫ïÂ±ÇÂéüÁêÜ"></a>Â∫ïÂ±ÇÂéüÁêÜ</h3><p>dockerÂ∫ïÂ±Ç‰ΩøÁî®‰∫Ü‰∏Ä‰∫õlinuxÂÜÖÊ†∏ÁöÑÁâπÊÄßÔºå<code>namespace</code>Ôºå<code>cgroups</code>Ôºå<code>unionFS</code></p>
<h3 id="namespace"><a href="#namespace" class="headerlink" title="namespace"></a>namespace</h3><ul>
<li>namespaceÔºå‰πüÂè´ÂëΩÂêçÁ©∫Èó¥ÔºåÂêçÁß∞Á©∫Èó¥ÔºåÂÆÉË°®Á§∫‰∏Ä‰∏™Ê†áËØÜÁ¨¶ÁöÑÂèØËßÅËåÉÂõ¥„ÄÇ‰∏Ä‰∏™Ê†áËØÜÁ¨¶ÂèØÂú®Â§ö‰∏™ÂêçÂ≠óÁ©∫Èó¥‰∏≠ÂÆö‰πâÔºåÂÆÉÂú®‰∏çÂêåÂêçÂ≠óÁ©∫Èó¥‰∏≠ÁöÑÂê´‰πâÊòØ‰∫í‰∏çÁõ∏Âπ≤ÁöÑ„ÄÇËøôÊ†∑ÔºåÂú®‰∏Ä‰∏™Êñ∞ÁöÑÂêçÂ≠óÁ©∫Èó¥‰∏≠ÂèØÂÆö‰πâ‰ªª‰ΩïÊ†áËØÜÁ¨¶ÔºåÂÆÉ‰∏ç‰ºö‰∏é‰ªª‰ΩïÂ∑≤ÊúâÁöÑÊ†áËØÜÁ¨¶ÂèëÁîüÂÜ≤Á™ÅÔºåÂõ†‰∏∫Â∑≤ÊúâÁöÑÂÆö‰πâÈÉΩÂ§Ñ‰∫éÂÖ∂‰ªñÂëΩÂêçÁ©∫Èó¥‰∏≠</li>
<li>docker‰ΩøÁî®linux namespaceÊûÑÂª∫ÈöîÁ¶ªÁöÑÁéØÂ¢ÉÔºåÂÆÉÁî±‰ª•‰∏ãnamespaceÁªÑÊàê<ul>
<li>pidÔºöÈöîÁ¶ªËøõÁ®ã</li>
<li>netÔºöÈöîÁ¶ªÁΩëÁªú</li>
<li>ipcÔºöÈöîÁ¶ªIPC</li>
<li>mntÔºöÈöîÁ¶ªÊñá‰ª∂Á≥ªÁªüÊåÇËΩΩ</li>
<li>utsÔºöÈöîÁ¶ªhostname</li>
<li>userÔºöÈöîÁ¶ªuid&#x2F;gid</li>
</ul>
</li>
</ul>
<h3 id="cgroups"><a href="#cgroups" class="headerlink" title="cgroups"></a>cgroups</h3><ul>
<li>cgroupsÔºåÊòØÊéßÂà∂ÁªÑÁæ§(control groups)ÁöÑÁÆÄÂÜôÔºåÊòØÁî®Êù•ÈôêÂà∂„ÄÅÊéßÂà∂‰∏éÂàÜÁ¶ª‰∏Ä‰∏™ËøõÁ®ãÁªÑÁöÑËµÑÊ∫ê(Â¶ÇCPU„ÄÅÂÜÖÂ≠ò„ÄÅÁ£ÅÁõòËæìÂÖ•ËæìÂá∫Á≠â)</li>
<li>cgroupsÂäüËÉΩÔºö<ul>
<li>ËµÑÊ∫êÈôêÂà∂ÔºöËÆæÁΩÆÂÜÖÂ≠òÈôêÂà∂ÔºåÂåÖÊã¨ËôöÊãüÂÜÖÂ≠ò</li>
<li>‰ºòÂÖàÁ∫ßÔºö‰∏Ä‰∫õËµÑÊ∫êÂèØ‰ª•ÂæóÂà∞Â§ßÈáèÁöÑCPUÊàñÁ£ÅÁõòIOÂêûÂêêÈáè</li>
<li>ÁªìÁÆóÔºöÁî®Êù•Â∫¶ÈáèÁ≥ªÁªüÂÆûÈôÖÁî®‰∫ÜÂ§öÂ∞ëËµÑÊ∫ê</li>
<li>ÊéßÂà∂ÔºöÂÜªÁªìÁªÑÊàñÊ£ÄÊü•ÁÇπÂíåÈáçÂêØÂä®</li>
</ul>
</li>
</ul>
<h3 id="unionFS"><a href="#unionFS" class="headerlink" title="unionFS"></a>unionFS</h3><ul>
<li>unionFS(Union file systems)ÊòØ‰∏ÄÁßçÂàÜÂ±Ç„ÄÅËΩªÈáèÁ∫ßÂπ∂‰∏îÈ´òÊÄßËÉΩÁöÑÊñá‰ª∂ÊÄßËÉΩÔºåÊîØÊåÅÂØπÊñá‰ª∂Á≥ªÁªüÁöÑ‰øÆÊîπ‰Ωú‰∏∫‰∏ÄÊ¨°Êèê‰∫§Êù•‰∏ÄÂ±ÇÂ±ÇÁöÑÂè†Âä†„ÄÇdockerÁöÑÈïúÂÉè‰∏éÂÆπÂô®Â∞±ÊòØÂàÜÂ±ÇÂ≠òÂÇ®ÔºåÂèØÁî®ÁöÑÂ≠òÂÇ®ÂºïÊìéÂë¶aufsÔºåoverlayÁ≠â</li>
</ul>
<h3 id="ÈïúÂÉè"><a href="#ÈïúÂÉè" class="headerlink" title="ÈïúÂÉè"></a>ÈïúÂÉè</h3><ul>
<li>ÈïúÂÉèÊòØ‰∏Ä‰ªΩÁî®Êù•ÂàõÈÄ†ÂÆπÂô®ÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåËÄåÂÆπÂô®ÂèØ‰ª•ËßÜ‰ΩúÊúÄÂ∞èÂûãÁöÑ‰∏Ä‰∏™Êìç‰ΩúÁ≥ªÁªü</li>
<li>dockerÁöÑÈïúÂÉèÂíåÂÆπÂô®ÈÉΩ‰ΩøÁî®‰∫ÜunionFSÂÅöÂàÜÂ±ÇÂ≠òÂÇ®ÔºåÈïúÂÉè‰Ωú‰∏∫Âè™ËØªÂ±ÇÊòØÂÖ±‰∫´ÁöÑÔºåËÄåÂÆπÂô®Âú®ÈïúÂÉè‰πã‰∏äÈôÑÂä†‰∫Ü‰∏ÄÂ±ÇÂèØÂÜôÂ±ÇÔºåÊúÄÂ§ßÁ®ãÂ∫¶Âú∞ÂáèÂ∞ë‰∫ÜÁ©∫Èó¥ÁöÑÊµ™Ë¥π</li>
<li>ÈïúÂÉèÁöÑÁõ∏ÂÖ≥ÂëΩ‰ª§<ul>
<li>ÈïúÂÉèÊãâÂèñÔºö<code>docker pull node:alpine</code></li>
<li>Êü•ÁúãÈïúÂÉè‰ø°ÊÅØÔºö<code>docker inspect node:alpine</code></li>
<li>ÂàóÂá∫ÊâÄÊúâÈïúÂÉèÔºö<code>docker images</code></li>
<li>ÈïúÂÉèÊâìÂåÖÔºö<code>docker build -t docker-app:v1.0.0</code><ul>
<li><code>-t</code>ÔºöËÆæÁΩÆÈïúÂÉèÂêçÂ≠óÂíåÁâàÊú¨Âè∑</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><ul>
<li>DockerfileÊòØdockerÊûÑÂª∫ÈïúÂÉèÁöÑÈÖçÁΩÆÊñá‰ª∂ÔºåÊØîÂ¶Ç‰∏Ä‰∏™ÁÆÄÂçïÁöÑDockerfileÂ¶Ç‰∏ã<pre><code class="highlight dockerfile"><span class="keyword">FROM</span> node:<span class="number">16</span>
<span class="keyword">MAINTAINER</span> songlh

<span class="keyword">ADD</span><span class="language-bash"> . /app</span>
<span class="keyword">WORKDIR</span><span class="language-bash"> /app</span>

<span class="keyword">RUN</span><span class="language-bash"> npm install pnpm -g</span>
<span class="keyword">RUN</span><span class="language-bash"> pnpm install</span>

<span class="keyword">CMD</span><span class="language-bash"> pnpm run dev</span></code></pre></li>
<li>Â∏∏Áî®Êåá‰ª§</li>
<li><code>FROM</code>ÔºöË°®Á§∫Âü∫‰∫é‰∏Ä‰∏™Â∑≤ÊúâÁöÑÂü∫Á°ÄÈïúÂÉèÔºå<code>FROM &lt;image&gt; [AS &lt;name&gt;]</code></li>
<li><code>MAINTAINER</code>ÔºöÂ£∞ÊòédockerfileÈïúÂÉèÊûÑÂª∫ÁöÑ‰ΩúËÄÖ</li>
<li><code>ADD</code>ÔºöË°®Á§∫ÊääÂÆø‰∏ªÊú∫ÁöÑÊñá‰ª∂ÊàñÁõÆÂΩïÂä†ÂÖ•Âà∞ÈïúÂÉèÁöÑÊñá‰ª∂Á≥ªÁªüÔºå<code>ADD [--chown=&lt;user&gt;:&lt;group&gt;] &lt;src&gt;... &lt;dest&gt;</code></li>
<li><code>RUN</code>: Âú®ÈïúÂÉè‰∏≠ÊâßË°åÂëΩ‰ª§ÔºåÁî±‰∫éufsÁöÑÊñá‰ª∂Á≥ªÁªüÔºåÂÆÉ‰ºöÂú®ÂΩìÂâçÈïúÂÉèÁöÑÈ°∂Â±ÇÊñ∞Â¢û‰∏ÄÂ±ÇÔºå<code>RUN &lt;command&gt;</code></li>
<li><code>CMD</code>: ÊåáÂÆöÂÆπÂô®Â¶Ç‰ΩïÂêØÂä®Ôºå‰∏Ä‰∏™Dockerfile‰∏≠Âè™ÂÖÅËÆ∏Êúâ‰∏Ä‰∏™CMD</li>
<li><code>WORKDIR</code>ÔºöËÆæÁΩÆÂ∑•‰ΩúÁõÆÂΩï</li>
<li><code>ENV</code>ÔºöËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè</li>
</ul>
<h2 id="ÂÆπÂô®"><a href="#ÂÆπÂô®" class="headerlink" title="ÂÆπÂô®"></a>ÂÆπÂô®</h2><ul>
<li><code>docker run</code>ÔºöÂàõÂª∫ÂÆπÂô®<ul>
<li><code>docker run -p 8080:8080 --name docker-hello docker-app:v1.0.0</code>Ë°®Á§∫Âü∫‰∫édocker-appÈïúÂÉèÁöÑv1.0.0ÁâàÊú¨ÂàõÂª∫‰∏Ä‰∏™ÂÆπÂô®Âπ∂Âú®Êú¨Âú∞ÁöÑ8080Á´ØÂè£ËøêË°åÔºåÂÆπÂô®ÂêçÂ≠óÂè´<code>docker-hellp</code></li>
<li><code>-p host-port:container-port</code>ÔºöÂÆø‰∏ªÊú∫‰∏éÂÆπÂô®Á´ØÂè£Êò†Â∞ÑÔºåÊñπ‰æøÂÆπÂô®ÂØπÂ§ñÊèê‰æõÊúçÂä°</li>
<li><code>--name</code>Ôºö‰∏∫ÂÆπÂô®ÊåáÂÆöÂêçÁß∞</li>
<li><code>-d</code>ÔºöÂêéÂè∞ËøêË°å</li>
<li><code>--rm</code>ÔºöÂΩìÂÅúÊ≠¢ÂÆπÂô®Êó∂Ëá™Âä®Ê∏ÖÈô§ÂÆπÂô®</li>
</ul>
</li>
<li><code>docker stop</code>ÔºöÂÅúÊ≠¢ÂÆπÂô®</li>
<li><code>docker rm</code>ÔºöÂà†Èô§ÂÆπÂô®</li>
<li><code>docker exec -it container-name</code>ÔºöËøõÂÖ•ÂÆπÂô®ÁéØÂ¢É</li>
<li><code>docker ps</code>ÔºöÂàóÂá∫ÊâÄÊúâÂÆπÂô®</li>
<li><code>docker port</code>ÔºöÊü•ÁúãÂÆπÂô®Á´ØÂè£Êò†Â∞Ñ</li>
<li><code>docker stats</code>ÔºöÊü•ÁúãÂÆπÂô®ËµÑÊ∫êÂç†Áî®</li>
</ul>
<h2 id="ÁõÆÂΩïÊåÇËΩΩ"><a href="#ÁõÆÂΩïÊåÇËΩΩ" class="headerlink" title="ÁõÆÂΩïÊåÇËΩΩ"></a>ÁõÆÂΩïÊåÇËΩΩ</h2><ul>
<li>ÊåâÁÖßÁõÆÂâçÂ∑≤ÊúâÁü•ËØÜÔºåÂ¶ÇÊûúÊîπ‰∫ÜÈ°πÁõÆ‰ª£Á†Å‰∏ç‰ºöÁ´ãÂàªÁîüÊïàÔºåÈúÄË¶ÅÈáçÊñ∞buildÂíårunÔºåÂæàÈ∫ªÁÉ¶ÔºåËÄå‰∏îÂÆπÂô®‰∫ßÁîüÁöÑÊï∞ÊçÆÔºåÂ¶ÇÊûúÂÆπÂô®Âà†Èô§‰∫ÜÂ∞±‰ºöÊ≤°ÊúâÔºåÁõÆÂΩïÊåÇËΩΩÂ∞±ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢ò</li>
<li>ÁõÆÂâçÁöÑÊåÇËΩΩÊñπÂºè<ul>
<li><code>bind mount</code>ÔºöÁõ¥Êé•ÊääÂÆø‰∏ªÊú∫ÁõÆÂΩïÊò†Â∞ÑÂà∞ÂÆπÂô®ÂÜÖÔºåÈÄÇÂêàÊåÇËΩΩ‰ª£Á†ÅÁõÆÂΩïÂíåÈÖçÁΩÆÊñá‰ª∂ÔºåÂèØÊåÇËΩΩÂà∞Â§ö‰∏™ÂÆπÂô®‰∏ä</li>
<li><code>volume</code>ÔºöÁî±ÂÆπÂô®ÂàõÂª∫ÂíåÁÆ°ÁêÜÔºåÂàõÂª∫Âú®ÂÆø‰∏ªÊú∫ÔºåÊâÄ‰ª•Âà†Èô§ÂÆπÂô®‰∏ç‰ºö‰∏¢Â§±ÔºåÂÆòÊñπÊé®ËçêÔºåÊõ¥È´òÊïàÔºåLinuxÊñá‰ª∂Á≥ªÁªüÔºåÈÄÇÂêàÂ≠òÂÇ®Êï∞ÊçÆÂ∫ìÊï∞ÊçÆ„ÄÇÂèØÊåÇËΩΩÂà∞Â§ö‰∏™ÂÆπÂô®‰∏ä</li>
<li><code>tmpfs mount</code>ÔºöÈÄÇÂêàÂ≠òÂÇ®‰∏¥Êó∂Êñá‰ª∂ÔºåÂ≠òÂÇ®Âú®ÂÆø‰∏ªÊú∫ÂÜÖÂ≠ò‰∏≠„ÄÇ‰∏çÂèØÂ§öÂÆπÂô®ÂÖ±‰∫´</li>
<li><img src="https://s1.ax1x.com/2022/10/30/xI2Qi9.png"></li>
</ul>
</li>
</ul>
<h3 id="bind-mount"><a href="#bind-mount" class="headerlink" title="bind mount"></a>bind mount</h3><ul>
<li><code>bind mount</code>ÊòØÈÄöËøá<code>-v</code>ÂèÇÊï∞Êù•ÁªëÂÆöÂÆø‰∏ªÊú∫ÁõÆÂΩïÔºåÊØîÂ¶ÇÂ∞ÜÂ§ñÈÉ®ÁöÑhtmlÊñáÊ°£ÊåÇËΩΩÂà∞NginxÂÆπÂô®ÁöÑÊ†πÁõÆÂΩï‰∏ã<ul>
<li><code>docker run -v ~/html:/usr/share/nginx/html -p 81:80 -d --name nginx_bind nginx:latest</code></li>
</ul>
</li>
<li>ËøôÁßçÊñπÂºèÁöÑÁº∫ÁÇπÂ∞±ÊòØË¢´ÊåÇËΩΩÁöÑÂÆø‰∏ªÊú∫ÁõÆÂΩï(ÊàñÊñá‰ª∂)‰∏çÂèó‰øùÊä§Ôºå‰ªª‰ΩïÂÆπÂô®ÈÉΩÂèØ‰ª•ÈöèÊÑè‰øÆÊîπ</li>
</ul>
<h3 id="volume"><a href="#volume" class="headerlink" title="volume"></a>volume</h3><ul>
<li>volume‰πüÊòØ‰∏Ä‰∏™Êñá‰ª∂Ôºå‰ΩÜÊòØËøô‰∏™Êñá‰ª∂ÊòØÂú®dockerÁöÑÁÆ°ÊéßËåÉÂõ¥ÂÜÖÔºådockerÂèØ‰ª•ÈÄöËøáÊåÇËΩΩÁöÑËÆæÂÆöÊù•ÊéßÂà∂ÂÆπÂô®ÂØπvolumeÁöÑËØªÂÜôÊùÉÈôê</li>
<li>ÈÄöËøá<code>docker volume create volume-name</code>ÂàõÂª∫‰∏Ä‰∏™VolumeÔºåÂÆûÈôÖ‰∏äÊòØÂú®dockerÁöÑ<code>/var/lib/docker/volumes/</code>Êñá‰ª∂Â§πÂÜÖÂàõÂª∫‰∏Ä‰∏™Áõ∏ÂêåÂêçÂ≠óÁöÑÊñá‰ª∂Â§πÊù•‰øùÂ≠òÊï∞ÊçÆ</li>
<li>ÊØîÂ¶ÇËÆæÁΩÆ‰∏Ä‰∏™Âè™ËÉΩËØªÂèñvolume<ul>
<li><code>docker run --mount type=volume,source=nginx-volume,destination=/usr/share/nginx/html,readonly -p 82:80 -d --name nginx_volume nginx:latest</code></li>
</ul>
</li>
</ul>
<h3 id="tmpfs-mount"><a href="#tmpfs-mount" class="headerlink" title="tmpfs mount"></a>tmpfs mount</h3><ul>
<li>tmpfsÊåÇËΩΩÊòØ‰∏¥Êó∂ÁöÑÔºå‰ªÖ‰øùÁïôÂú®‰∏ªÊú∫ÂÜÖÂ≠ò‰∏≠„ÄÇÂΩìÂÆπÂô®ÂÅúÊ≠¢Êó∂ÔºåtmpfsÊåÇËΩΩË¢´ÁßªÈô§ÔºåÂÜôÂÖ•ÁöÑÊñá‰ª∂‰∏ç‰ºöË¢´ÊåÅ‰πÖÂåñ</li>
<li><code>docker run --mount type=tmpfs,destination=/usr/share/nginx/html -p 83:80 -d --name nginx-tempfs nginx:latest</code></li>
<li>tmpfsÂõ†‰∏∫‰∏çÊòØÊåÅ‰πÖÂåñÔºå‰∏ÄËà¨‰∏ç‰ΩøÁî®</li>
</ul>
<h2 id="ÂÆπÂô®ÈÄö‰ø°"><a href="#ÂÆπÂô®ÈÄö‰ø°" class="headerlink" title="ÂÆπÂô®ÈÄö‰ø°"></a>ÂÆπÂô®ÈÄö‰ø°</h2><ul>
<li>ÂÆπÂô®Èó¥ÁöÑÈÄö‰ø°Ê†πÊçÆÂ™í‰ªãÂèØ‰ª•ÂàÜ‰∏∫ÔºövolumeÂÖ±‰∫´ÈÄö‰ø°„ÄÅÁΩëÁªúÈÄö‰ø°</li>
<li>Ê†πÊçÆÈÄö‰ø°ËåÉÂõ¥ÂèØ‰ª•ÂàÜ‰∏∫ÔºöÂêå‰∏ªÊú∫ÈÄö‰ø°„ÄÅË∑®‰∏ªÊú∫ÈÄö‰ø°</li>
</ul>
<h3 id="ÁΩëÁªúÈÄö‰ø°"><a href="#ÁΩëÁªúÈÄö‰ø°" class="headerlink" title="ÁΩëÁªúÈÄö‰ø°"></a>ÁΩëÁªúÈÄö‰ø°</h3><ul>
<li>DockerÁöÑÁΩëÁªúÈÄö‰ø°Ê®°ÂûãÂàÜ‰∏∫‰ª•‰∏ãÂá†ÁßçÔºåÂú®ÂÆâË£ÖDocker‰ª•ÂêéÔºå‰ºöÈªòËÆ§ÂàõÂª∫‰∏âÁßçÁΩëÁªúÔºåÂèØ‰ª•ÈÄöËøá<code>docker network ls</code>Êü•Áúã<ul>
<li><strong>bridge</strong>Ôºö‰∏∫ÊØè‰∏Ä‰∏™ÂÆπÂô®ÂàÜÈÖç„ÄÅËÆæÁΩÆIPÁ≠âÔºåÂπ∂Â∞ÜÂÆπÂô®ËøûÊé•Âà∞‰∏Ä‰∏™<code>docker0</code>ËôöÊãüÁΩëÊ°•ÔºåÈªòËÆ§‰∏∫ËØ•Ê®°Âºè</li>
<li><strong>host</strong>ÔºöÂÆπÂô®Â∞Ü‰∏ç‰ºöËôöÊãüÂá∫Ëá™Â∑±ÁöÑÁΩëÂç°ÔºåÈÖçÁΩÆËá™Â∑±ÁöÑIPÁ≠âÔºåËÄåÊòØ‰ΩøÁî®ÂÆø‰∏ªÊú∫ÁöÑIPÂíåÁ´ØÂè£</li>
<li><strong>none</strong>ÔºöÂÆπÂô®ÊúâÁã¨Á´ãÁöÑ<code>network namespace</code>Ôºå‰ΩÜÂπ∂Ê≤°ÊúâÂØπÂÖ∂ËøõË°å‰ªª‰ΩïÁΩëÁªúËÆæÁΩÆÔºåÂ¶ÇÂàÜÈÖç<code>veth pair</code>ÂíåÁΩëÊ°•ËøûÊé•ÔºåIPÁ≠â</li>
<li><strong>overlay</strong>ÔºöÂèØ‰ª•ËøûÊé•Â§ö‰∏™dockerÂÆàÊä§ËøõÁ®ãÊàñËÄÖÊª°Ë∂≥ÈõÜÁæ§ÊúçÂä°‰πãÈó¥ÁöÑÈÄö‰ø°ÔºåÈÄÇÁî®‰∫é‰∏çÂêåÂÆø‰∏ªÊú∫‰∏äÁöÑdockerÂÆπÂô®‰πãÈó¥ÁöÑÈÄö‰ø°</li>
<li><strong>macvlan</strong>: ÂèØ‰ª•‰∏∫dockerÂÆπÂô®ÂàÜÈÖçMACÂú∞ÂùÄÔºå‰ΩøÂÖ∂ÂÉèÁúüÂÆûÁöÑÁâ©ÁêÜÂèä‰∏ÄÊ†∑ËøêË°å</li>
</ul>
</li>
<li>DockerÂÜÖÁΩÆÁöÑ<code>bridge network</code>Ôºå‰πüÂ∞±ÊòØdocker0Êé•Âè£ÊâÄÂ±ûÁöÑnetworkÔºåÊâÄÊúâÊú™ÊåáÂÆönetworkÁöÑÂÆπÂô®ÔºåÈªòËÆ§ËøûÊé•Âà∞Ê≠§network‰∏≠ÔºåÂÖ∂ÁΩëÊÆµÊú™<code>172.17.0.1/16</code>ÔºåÊâÄ‰ª•‰∏§‰∏™Êú™ËøõË°å‰ªª‰ΩïËøûÊé•Êìç‰ΩúÁöÑÂÆπÂô®ÊòØÂèØ‰ª•ÈÄöËøáIPÂú∞ÂùÄ‰∫íÁõ∏ÈÄö‰ø°ÁöÑÔºåÂõ†‰∏∫‰ªñ‰ª¨ÂêåÂú®‰∏Ä‰∏™network‰∏ãÔºå‰ΩÜÈÄö‰ø°Âè™ËÉΩÈÄöËøáIPÂú∞ÂùÄËøõË°åÔºå‰∏çÂèØ‰ª•ÈÄöËøáÂÆπÂô®ÂêçÈÄö‰ø°<ul>
<li><img src="https://s1.ax1x.com/2022/10/30/xI21R1.png"></li>
</ul>
</li>
<li>ÂàõÂª∫Ëá™ÂÆö‰πâÁΩëÁªúÔºö<code>docker network create custom_network</code></li>
<li>Êü•ÁúãÁΩëÁªúÊ®°ÂºèÔºö<code>docker network ls</code></li>
<li>ÈÄöËøáËá™ÂÆö‰πâÁΩëÁªúÂàõÂª∫ÂÆπÂô®Ôºö<code>docker run -di --name docker-app --net custom_network docker-app:v1.0.0</code></li>
<li>Êü•ÁúãÂÆπÂô®ÁöÑÁΩëÁªú‰ø°ÊÅØÔºö<code>docker inspect ÂÆπÂô®ÂêçÁß∞|ID</code>ÔºåÁÑ∂ÂêéÂú®<code>NetworkSettings</code>ËäÇÁÇπ‰∏≠ÂèØ‰ª•ÁúãÂà∞</li>
<li>‰∏∫ÂÆπÂô®ËøûÊé•Êñ∞ÁöÑÁΩëÁªúÔºö<code>docker network connect ÁΩëÁªúÂêçÁß∞ ÂÆπÂô®ÂêçÁß∞</code></li>
<li>Êñ≠ÂºÄÁΩëÁªúÔºö<code>docker network disconnect ÁΩëÁªúÂêçÁß∞ ÂÆπÂô®ÂêçÁß∞</code></li>
</ul>
<h2 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h2><ul>
<li>docker-composeÊòØÁî®‰∫éÂÆö‰πâÂíåËøêË°åÂ§öÂÆπÂô®DockerÂ∫îÁî®Á®ãÂ∫èÁöÑÂ∑•ÂÖ∑„ÄÇÈÄöËøácomposeÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®YMLÊñá‰ª∂Êù•ÈÖçÁΩÆÂ∫îÁî®Á®ãÂ∫èÈúÄË¶ÅÁöÑÊâÄÊúâÊúçÂä°ÔºåÁÑ∂Âêé‰ΩøÁî®‰∏Ä‰∏™ÂëΩ‰ª§Â∞±ÂèØ‰ª•‰ªéYMLÊñá‰ª∂ÈÖçÁΩÆ‰∏≠ÂàõÂª∫Âπ∂ÂêØÂä®ÊâÄÊúâÊúçÂä°</li>
<li>‰ΩøÁî®ÂàÜ‰∏âÊ≠•<ul>
<li><ol>
<li>‰ΩøÁî®DockerfileÂÆö‰πâÂ∫îÁî®Á®ãÂ∫èÁöÑÁéØÂ¢É</li>
</ol>
</li>
<li><ol start="2">
<li>‰ΩøÁî®docker-compose.ymlÂÆö‰πâÊûÑÊàêÂ∫îÁî®Á®ãÂ∫èÁöÑÊúçÂä°ÔºåËøôÊ†∑ÂÆÉ‰ª¨ÂèØ‰ª•Âú®ÈöîÁ¶ªÁéØÂ¢É‰∏≠‰∏ÄËµ∑ËøêË°å</li>
</ol>
</li>
<li><ol start="3">
<li>ÊúÄÂêéÔºåÊâßË°ådocker-compose upÂëΩ‰ª§ÂêØÂä®Âπ∂ËøêË°åÊï¥‰∏™Â∫îÁî®Á®ãÂ∫è</li>
</ol>
</li>
</ul>
</li>
<li>ÊØîÂ¶ÇËøêË°å‰∏Ä‰∏™webÈ°πÁõÆÂíåredisÔºåÂèØ‰ª•ÁºñÂÜô‰∏Ä‰∏™Â¶Ç‰∏ãÁöÑ<code>docker-compose.yml</code>Êñá‰ª∂<pre><code class="highlight yml"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span>

<span class="attr">services:</span>
  <span class="attr">app:</span>
    <span class="attr">build:</span> <span class="string">./</span>
    <span class="attr">ports:</span>
      <span class="bullet">-</span> <span class="number">80</span><span class="string">:8080</span>
    <span class="attr">volumes:</span>
      <span class="bullet">-</span> <span class="string">./:/app</span>
  <span class="attr">redis:</span>
    <span class="attr">image:</span> <span class="string">redis:5.0.13</span>
    <span class="attr">volumes:</span>
      <span class="bullet">-</span> <span class="string">redis:/data</span>
<span class="attr">volumes:</span>
  <span class="attr">redis:</span></code></pre></li>
<li>versionÔºöÊåáÂÆöÊú¨yml‰æù‰ªéÁöÑcomposeÂì™‰∏™ÁâàÊú¨ÊåáÂÆöÁöÑ</li>
<li>build: ÊåáÂÆöÊûÑÂª∫ÈïúÂÉè‰∏ä‰∏ãÊñáË∑ØÂæÑ</li>
<li>imageÔºöÊåáÂÆöÂêØÂä®ÂÆπÂô®ÁöÑÈïúÂÉè</li>
<li>volumesÔºöÂç∑ÊåÇËΩΩË∑ØÂæÑËÆæÁΩÆÔºåÂ¶ÇÊûúË∑®Â§ö‰∏™ÊúçÂä°Âπ∂ÈáçÁî®ÊåÇËΩΩÂç∑ÔºåÂèØ‰ª•Âú®volumesÂÖ≥ÈîÆÂ≠ó‰∏≠ÂëΩÂêçÊåÇËΩΩÂç∑</li>
<li>portsÔºöÊö¥Èú≤Á´ØÂè£‰ø°ÊÅØ</li>
</ul>
<h2 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h2><ul>
<li><a href="https://blog.csdn.net/Mr_YanMingXin/article/details/123016807">ÊµÖË∞àDockerÂ∫ïÂ±ÇÂéüÁêÜ</a></li>
<li><a href="https://docker.easydoc.net/">DockerÂø´ÈÄüÂÖ•Èó®</a></li>
<li><a href="https://q.shanyue.tech/deploy/docker.html#%E6%9C%AF%E8%AF%AD">Docker‰ΩøÁî®ÊåáÂçó</a></li>
<li><a href="https://juejin.cn/post/6993979788020940830">Docker‰∏éÊï∞ÊçÆÔºö‰∏âÁßçÊåÇËΩΩÊñπÂºè</a></li>
<li><a href="https://www.cnblogs.com/mrhelloworld/p/docker11.html">Docker ÁΩëÁªúÊ®°ÂºèËØ¶Ëß£ÂèäÂÆπÂô®Èó¥ÁΩëÁªúÈÄö‰ø°</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Âü∫‰∫écanvasÂÆûÁé∞ÁöÑÂ§öÂäüËÉΩÁîªÊùø</title>
    <url>/2022/09/21/%E5%9F%BA%E4%BA%8Ecanvas%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%A4%9A%E5%8A%9F%E8%83%BD%E7%94%BB%E6%9D%BF/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>ÊúÄËøëÁ©∫Èó≤Êó∂Èó¥ÊØîËæÉÂ§öÔºåÂ∞±ÊÉ≥ÂÅöÁÇπÂ∞èÂ∑•ÂÖ∑Áé©Áé©ÔºåÊñπÊ°àÈÄâ‰∫ÜÂ•ΩÂá†‰∏™ÔºåÊúÄÁªàÂÜ≥ÂÆöÂÅö‰∏Ä‰∏™Âü∫‰∫écanvasÁöÑÁîªÊùøÔºåÁõÆÂâçÂ∑≤ÁªèÂÆåÊàê‰∫ÜÁ¨¨‰∏ÄÁâàÔºåÊúâ‰ª•‰∏ã‰∏ªË¶ÅÂäüËÉΩ</p>
<ol>
<li>ÁîªÁ¨îÔºàÂä®ÊÄÅÂÆΩÂ∫¶ËÆæÁΩÆÔºåÈ¢úËâ≤ËÆæÁΩÆÔºâ</li>
<li>Ê©°ÁöÆÊì¶</li>
<li>Êí§ÂõûÔºåÂèçÊí§ÂõûÔºåÊ∏ÖÈô§ÁîªÊùøÔºå‰øùÂ≠ò</li>
<li>ÁîªÊùøÊãñÊãΩ</li>
<li>Â§öÂõæÂ±Ç</li>
</ol>
<h2 id="È¢ÑËßà"><a href="#È¢ÑËßà" class="headerlink" title="È¢ÑËßà"></a>È¢ÑËßà</h2><p>ÁõÆÂâçÂÆûÁé∞ÊïàÊûúÂ¶Ç‰∏ã<br><img src="https://img-blog.csdnimg.cn/img_convert/6ee0b9163552f4c61abfde6af199b3ed.png"><br>È¢ÑËßàÂú∞ÂùÄÔºö<a href="https://lhrun.github.io/paint-board/">https://lhrun.github.io/paint-board/</a><br>repoÔºö<a href="https://github.com/LHRUN/paint-board">https://github.com/LHRUN/paint-board</a></p>
<h2 id="ÁîªÊùøËÆæËÆ°"><a href="#ÁîªÊùøËÆæËÆ°" class="headerlink" title="ÁîªÊùøËÆæËÆ°"></a>ÁîªÊùøËÆæËÆ°</h2><ol>
<li>È¶ñÂÖàÊòØÂª∫Á´ã‰∏Ä‰∏™canvasÁîªÊùøÁ±ªÔºåÊâÄÊúâcanvas‰∏äÁöÑÊìç‰ΩúÂíåÊï∞ÊçÆÂÖ®ÈÉΩÂú®Ê≠§Â§ÑÁêÜÔºå‰æãÂ¶ÇÂàùÂßãÂåñÔºåÊ∏≤ÊüìÔºåÊãñÊãΩÁîªÊùøÁ≠âÁ≠â<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">PaintBoard</span> &#123;
  <span class="attr">canvas</span>: <span class="title class_">HTMLCanvasElement</span>
  <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span>
  ...
  <span class="title function_">constructor</span>(<span class="params">canvas: HTMLCanvasElement</span>) &#123;&#125;
  <span class="comment">// ÂàùÂßãÂåñcanvas</span>
  <span class="title function_">initCanvas</span>(<span class="params"></span>) &#123;&#125;
  <span class="comment">// Ê∏≤Êüì</span>
  <span class="title function_">render</span>(<span class="params"></span>) &#123;&#125;
  <span class="comment">// ÊãñÊãΩ</span>
  <span class="title function_">drag</span>(<span class="params"></span>) &#123;&#125;
  ...
&#125;</code></pre></li>
<li>ÁÑ∂ÂêéÂü∫‰∫écanvasÁ±ªÔºåÊ†πÊçÆÂΩìÂâçÁöÑÊìç‰ΩúÔºåÂª∫Á´ãÂØπÂ∫îÁöÑcanvasÂÖÉÁ¥†ÔºåÊØîÂ¶ÇÁîªÁ¨îÔºåÊ©°ÁöÆÊì¶ÔºåÂü∫Êú¨Á±ªÂûãÂ¶Ç‰∏ã<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">CanvasElement</span> &#123;
  <span class="attr">type</span>: string <span class="comment">// ÂÖÉÁ¥†Á±ªÂûã</span>
  <span class="attr">layer</span>: number <span class="comment">// ÂõæÂ±Ç</span>
  <span class="comment">// ...</span>
  <span class="title function_">constructor</span>(<span class="params">type: string, layer: number</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">type</span> = type
    <span class="variable language_">this</span>.<span class="property">layer</span> = layer
    <span class="comment">// ...</span>
  &#125;
  <span class="comment">// ...</span>
&#125;</code></pre></li>
<li>ÊúÄÂêéÊ†πÊçÆÊ∏≤ÊüìÈÄªËæëÔºåËøò‰ºöÂ∞ÅË£Ö‰∏Ä‰∫õÈÄöÁî®ÁöÑÈÄªËæëÊù•ÊîπÂèòcanvas‰∏äÊúÄÁªàÁöÑÂ±ïÁ§∫ÔºåÊØîÂ¶ÇÊí§ÂõûÔºåÂèçÊí§ÂõûÔºåÂõæÂ±ÇÊìç‰ΩúÁ≠âÁ≠â</li>
</ol>
<h2 id="ÁîªÁ¨î"><a href="#ÁîªÁ¨î" class="headerlink" title="ÁîªÁ¨î"></a>ÁîªÁ¨î</h2><ul>
<li>ÂÆûÁé∞ÁîªÁ¨îÊïàÊûúÈ¶ñÂÖàË¶ÅÂú®Èº†Ê†áÊåâ‰∏ãÊó∂Âª∫Á´ã‰∏Ä‰∏™ÁîªÁ¨îÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Êé•ÂèóÂü∫Á°ÄÂÆΩÂ∫¶ÔºåÈ¢úËâ≤ÔºåÂàùÂßãÂåñÈº†Ê†áÁßªÂä®ËÆ∞ÂΩïÂíåÁ∫øÂÆΩËÆ∞ÂΩïÔºåÁÑ∂ÂêéÂú®Èº†Ê†áÁßªÂä®Êó∂ËÆ∞ÂΩïÈº†Ê†áÁßªÂä®ÁöÑÂùêÊ†á</li>
<li>‰∏∫‰∫Ü‰ΩìÁé∞Èº†Ê†áÁßªÂä®Âø´ÔºåÁ∫øÂÆΩÂ∞±ÂèòÁ™ÑÔºåÁßªÂä®ÊÖ¢ÔºåÁ∫øÂÆΩÂ∞±ÊÅ¢Â§çÊ≠£Â∏∏Ëøô‰∏™ÊïàÊûúÔºåÊàë‰ºöËÆ°ÁÆóÂΩìÂâçÁßªÂä®ÁöÑÈÄüÂ∫¶ÔºåÁÑ∂ÂêéÊ†πÊçÆÈÄüÂ∫¶ËÆ°ÁÆóÁ∫øÂÆΩ<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">FreeLine</span> <span class="keyword">extends</span> <span class="title class_ inherited__">CanvasElement</span> &#123;
  ...
  <span class="title function_">constructor</span>(<span class="params">color: string, width: number, layer: number</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">positions</span> = [] <span class="comment">// Èº†Ê†áÁßªÂä®‰ΩçÁΩÆËÆ∞ÂΩï</span>
    <span class="variable language_">this</span>.<span class="property">lineWidths</span> = [<span class="number">0</span>] <span class="comment">// Á∫øÂÆΩËÆ∞ÂΩï</span>
    <span class="variable language_">this</span>.<span class="property">color</span> = color <span class="comment">// ÂΩìÂâçÁªòÁ∫øÈ¢úËâ≤</span>
    <span class="variable language_">this</span>.<span class="property">maxWidth</span> = width <span class="comment">// ÊúÄÂ§ßÁ∫øÂÆΩ</span>
    <span class="variable language_">this</span>.<span class="property">minWidth</span> = width / <span class="number">2</span> <span class="comment">// ÊúÄÂ∞èÁ∫øÂÆΩ</span>
    <span class="variable language_">this</span>.<span class="property">lastLineWidth</span> = width <span class="comment">// ÊúÄÂêéÁªòÁ∫øÂÆΩÂ∫¶</span>
  &#125;
&#125;</code></pre></li>
<li>ËÆ∞ÂΩïÈº†Ê†á‰ΩçÁΩÆÂíåÂΩìÂâçÁ∫øÂÆΩ<pre><code class="highlight js">interface <span class="title class_">MousePosition</span> &#123;
  <span class="attr">x</span>: number
  <span class="attr">y</span>: number
&#125;

<span class="title function_">addPosition</span>(<span class="params">position: MousePosition</span>) &#123;
  <span class="variable language_">this</span>.<span class="property">positions</span>.<span class="title function_">push</span>(position)
  <span class="comment">// Â§ÑÁêÜÂΩìÂâçÁ∫øÂÆΩ</span>
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> &gt; <span class="number">1</span>) &#123;
    <span class="keyword">const</span> mouseSpeed = <span class="variable language_">this</span>.<span class="title function_">_computedSpeed</span>(
      <span class="variable language_">this</span>.<span class="property">positions</span>[<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> - <span class="number">2</span>],
      <span class="variable language_">this</span>.<span class="property">positions</span>[<span class="variable language_">this</span>.<span class="property">positions</span>.<span class="property">length</span> - <span class="number">1</span>]
    )
    <span class="keyword">const</span> lineWidth = <span class="variable language_">this</span>.<span class="title function_">_computedLineWidth</span>(mouseSpeed)
    <span class="variable language_">this</span>.<span class="property">lineWidths</span>.<span class="title function_">push</span>(lineWidth)
  &#125;
&#125;

<span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆóÁßªÂä®ÈÄüÂ∫¶</span>
<span class="comment"> * <span class="doctag">@param</span> start Ëµ∑ÁÇπ</span>
<span class="comment"> * <span class="doctag">@param</span> end ÁªàÁÇπ</span>
<span class="comment"> */</span>
<span class="title function_">_computedSpeed</span>(<span class="params">start: MousePosition, end: MousePosition</span>) &#123;
  <span class="comment">// Ëé∑ÂèñË∑ùÁ¶ª</span>
  <span class="keyword">const</span> moveDistance = <span class="title function_">getDistance</span>(start, end)

  <span class="keyword">const</span> curTime = <span class="title class_">Date</span>.<span class="title function_">now</span>()
  <span class="comment">// Ëé∑ÂèñÁßªÂä®Èó¥ÈöîÊó∂Èó¥   lastMoveTimeÔºöÊúÄÂêéÈº†Ê†áÁßªÂä®Êó∂Èó¥</span>
  <span class="keyword">const</span> moveTime = curTime - <span class="variable language_">this</span>.<span class="property">lastMoveTime</span>
  <span class="comment">// ËÆ°ÁÆóÈÄüÂ∫¶</span>
  <span class="keyword">const</span> mouseSpeed = moveDistance / moveTime
  <span class="comment">// Êõ¥Êñ∞ÊúÄÂêéÁßªÂä®Êó∂Èó¥</span>
  <span class="variable language_">this</span>.<span class="property">lastMoveTime</span> = curTime
  <span class="keyword">return</span> mouseSpeed
&#125;

<span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆóÁîªÁ¨îÂÆΩÂ∫¶</span>
<span class="comment"> * <span class="doctag">@param</span> speed Èº†Ê†áÁßªÂä®ÈÄüÂ∫¶</span>
<span class="comment"> */</span>
<span class="title function_">_computedLineWidth</span>(<span class="params">speed: number</span>) &#123;
  <span class="keyword">let</span> lineWidth = <span class="number">0</span>
  <span class="keyword">const</span> minWidth = <span class="variable language_">this</span>.<span class="property">minWidth</span>
  <span class="keyword">const</span> maxWidth = <span class="variable language_">this</span>.<span class="property">maxWidth</span>
  <span class="keyword">if</span> (speed &gt;= <span class="variable language_">this</span>.<span class="property">maxSpeed</span>) &#123;
    lineWidth = minWidth
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (speed &lt;= <span class="variable language_">this</span>.<span class="property">minSpeed</span>) &#123;
    lineWidth = maxWidth
  &#125; <span class="keyword">else</span> &#123;
    lineWidth = maxWidth - (speed / <span class="variable language_">this</span>.<span class="property">maxSpeed</span>) * maxWidth
  &#125;

  lineWidth = lineWidth * (<span class="number">1</span> / <span class="number">3</span>) + <span class="variable language_">this</span>.<span class="property">lastLineWidth</span> * (<span class="number">2</span> / <span class="number">3</span>)
  <span class="variable language_">this</span>.<span class="property">lastLineWidth</span> = lineWidth
  <span class="keyword">return</span> lineWidth
&#125;</code></pre></li>
<li>‰øùÂ≠òÂùêÊ†áÂêéÔºåÊ∏≤ÊüìÂ∞±ÊòØÈÅçÂéÜÊâÄÊúâÂùêÊ†á<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">freeLineRender</span>(<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  instance: FreeLine</span>
<span class="params"></span>) &#123;
  context.<span class="title function_">save</span>()
  context.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
  context.<span class="property">strokeStyle</span> = instance.<span class="property">color</span>
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; instance.<span class="property">positions</span>.<span class="property">length</span>; i++) &#123;
    <span class="title function_">_drawLine</span>(instance, i, context)
  &#125;
  context.<span class="title function_">restore</span>()
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÁîªÁ¨îËΩ®ËøπÊòØÂÄüÈâ¥‰∫ÜÁΩë‰∏äÁöÑ‰∏Ä‰∫õÊñπÊ°àÔºåÂàÜ‰∏§ÁßçÊÉÖÂÜµ</span>
<span class="comment"> * 1. Â¶ÇÊûúÊòØÂâç‰∏§‰∏™ÂùêÊ†áÔºåÂ∞±ÈÄöËøálineToËøûÊé•Âç≥ÂèØ</span>
<span class="comment"> * 2. Â¶ÇÊûúÊòØÂâç‰∏§‰∏™ÂùêÊ†á‰πãÂêéÁöÑÂùêÊ†áÔºåÂ∞±ÈááÁî®Ë¥ùÂ°ûÂ∞îÊõ≤Á∫øËøõË°åËøûÊé•Ôºå</span>
<span class="comment"> *    ÊØîÂ¶ÇÁé∞Âú®Êúâa, b, c ‰∏â‰∏™ÁÇπÔºåÂà∞cÁÇπÊó∂ÔºåÊääabÂùêÊ†áÁöÑ‰∏≠Èó¥ÁÇπ‰Ωú‰∏∫Ëµ∑ÁÇπ</span>
<span class="comment"> *     bcÂùêÊ†áÁöÑ‰∏≠Èó¥ÁÇπ‰Ωú‰∏∫ÁªàÁÇπÔºåbÁÇπ‰Ωú‰∏∫ÊéßÂà∂ÁÇπËøõË°åËøûÊé•</span>
<span class="comment"> */</span>
<span class="keyword">function</span> <span class="title function_">_drawLine</span>(<span class="params"></span>
<span class="params">  instance: FreeLine,</span>
<span class="params">  i: number,</span>
<span class="params">  context: CanvasRenderingContext2D</span>
<span class="params"></span>) &#123;
  <span class="keyword">const</span> &#123; positions, lineWidths &#125; = instance
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: centerX, <span class="attr">y</span>: centerY &#125; = positions[i - <span class="number">1</span>]
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: endX, <span class="attr">y</span>: endY &#125; = positions[i]
  context.<span class="title function_">beginPath</span>()
  <span class="keyword">if</span> (i == <span class="number">1</span>) &#123;
    context.<span class="title function_">moveTo</span>(centerX, centerY)
    context.<span class="title function_">lineTo</span>(endX, endY)
  &#125; <span class="keyword">else</span> &#123;
    <span class="keyword">const</span> &#123; <span class="attr">x</span>: startX, <span class="attr">y</span>: startY &#125; = positions[i - <span class="number">2</span>]
    <span class="keyword">const</span> lastX = (startX + centerX) / <span class="number">2</span>
    <span class="keyword">const</span> lastY = (startY + centerY) / <span class="number">2</span>
    <span class="keyword">const</span> x = (centerX + endX) / <span class="number">2</span>
    <span class="keyword">const</span> y = (centerY + endY) / <span class="number">2</span>
    context.<span class="title function_">moveTo</span>(lastX, lastY)
    context.<span class="title function_">quadraticCurveTo</span>(centerX, centerY, x, y)
  &#125;

  context.<span class="property">lineWidth</span> = lineWidths[i]
  context.<span class="title function_">stroke</span>()
&#125;</code></pre></li>
</ul>
<h2 id="Ê©°ÁöÆÊì¶"><a href="#Ê©°ÁöÆÊì¶" class="headerlink" title="Ê©°ÁöÆÊì¶"></a>Ê©°ÁöÆÊì¶</h2><ul>
<li>Ê©°ÁöÆÊì¶ÊòØ‰∏Ä‰∏™Á∫øÁä∂Êì¶Èô§ÔºåÊàëÈááÁî®ÁöÑÊñπÊ°àÊòØÈÄöËøáËÆ°ÁÆóÊØè‰∏™ÁÇπÁöÑÂúÜÂºßËΩ®ËøπÂíå‰∏§‰∏™ÁÇπ‰πãÈó¥ÁöÑÁü©ÂΩ¢Âå∫ÂüüÔºåÁÑ∂ÂêéÈÄöËøáclipÂâ™ÂàáÂêéÊ∏ÖÈô§<br><img src="https://img-blog.csdnimg.cn/img_convert/8ae8229d79cd8b69d175d5fbb68e3c43.png"><pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ê©°ÁöÆÊì¶Ê∏≤Êüì</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> * <span class="doctag">@param</span> cleanCanvas Ê∏ÖÈô§ÁîªÊùø</span>
<span class="comment"> * <span class="doctag">@param</span> instance CleanLine</span>
<span class="comment"> */</span>
<span class="keyword">function</span> <span class="title function_">cleanLineRender</span>(<span class="params"></span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  cleanCanvas: () =&gt; <span class="keyword">void</span>,</span>
<span class="params">  instance: CleanLine</span>
<span class="params"></span>) &#123;
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; instance.<span class="property">positions</span>.<span class="property">length</span> - <span class="number">1</span>; i++) &#123;
    <span class="title function_">_cleanLine</span>(
      instance.<span class="property">positions</span>[i],
      instance.<span class="property">positions</span>[i + <span class="number">1</span>],
      context,
      cleanCanvas,
      instance.<span class="property">cleanWidth</span>
    )
  &#125;
&#125;

<span class="comment">/**</span>
<span class="comment"> * Á∫øÁä∂Ê∏ÖÈô§</span>
<span class="comment"> * <span class="doctag">@param</span> start Ëµ∑ÁÇπ</span>
<span class="comment"> * <span class="doctag">@param</span> end ÁªàÁÇπ</span>
<span class="comment"> * <span class="doctag">@param</span> context canvas‰∫åÁª¥Ê∏≤Êüì‰∏ä‰∏ãÊñá</span>
<span class="comment"> * <span class="doctag">@param</span> cleanCanvas Ê∏ÖÈô§ÁîªÊùø</span>
<span class="comment"> * <span class="doctag">@param</span> cleanWidth Ê∏ÖÊ•öÂÆΩÂ∫¶</span>
<span class="comment"> */</span>
<span class="keyword">function</span> <span class="title function_">_cleanLine</span>(<span class="params"></span>
<span class="params">  start: MousePosition,</span>
<span class="params">  end: MousePosition,</span>
<span class="params">  context: CanvasRenderingContext2D,</span>
<span class="params">  cleanCanvas: () =&gt; <span class="keyword">void</span>,</span>
<span class="params">  cleanWidth: number</span>
<span class="params"></span>)&#123;
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: x1, <span class="attr">y</span>: y1 &#125; = start
  <span class="keyword">const</span> &#123; <span class="attr">x</span>: x2, <span class="attr">y</span>: y2 &#125; = end

  <span class="comment">// Ëé∑ÂèñÈº†Ê†áËµ∑ÁÇπÂíåÁªàÁÇπ‰πãÈó¥ÁöÑÁü©ÂΩ¢Âå∫ÂüüÁ´ØÁÇπ</span>
  <span class="keyword">const</span> asin = cleanWidth * <span class="title class_">Math</span>.<span class="title function_">sin</span>(<span class="title class_">Math</span>.<span class="title function_">atan</span>((y2 - y1) / (x2 - x1)))
  <span class="keyword">const</span> acos = cleanWidth * <span class="title class_">Math</span>.<span class="title function_">cos</span>(<span class="title class_">Math</span>.<span class="title function_">atan</span>((y2 - y1) / (x2 - x1)))
  <span class="keyword">const</span> x3 = x1 + asin
  <span class="keyword">const</span> y3 = y1 - acos
  <span class="keyword">const</span> x4 = x1 - asin
  <span class="keyword">const</span> y4 = y1 + acos
  <span class="keyword">const</span> x5 = x2 + asin
  <span class="keyword">const</span> y5 = y2 - acos
  <span class="keyword">const</span> x6 = x2 - asin
  <span class="keyword">const</span> y6 = y2 + acos

  <span class="comment">// Ê∏ÖÈô§Êú´Á´ØÂúÜÂºß</span>
  context.<span class="title function_">save</span>()
  context.<span class="title function_">beginPath</span>()
  context.<span class="title function_">arc</span>(x2, y2, cleanWidth, <span class="number">0</span>, <span class="number">2</span> * <span class="title class_">Math</span>.<span class="property">PI</span>)
  context.<span class="title function_">clip</span>()
  <span class="title function_">cleanCanvas</span>()
  context.<span class="title function_">restore</span>()

  <span class="comment">// Ê∏ÖÈô§Áü©ÂΩ¢Âå∫Âüü</span>
  context.<span class="title function_">save</span>()
  context.<span class="title function_">beginPath</span>()
  context.<span class="title function_">moveTo</span>(x3, y3)
  context.<span class="title function_">lineTo</span>(x5, y5)
  context.<span class="title function_">lineTo</span>(x6, y6)
  context.<span class="title function_">lineTo</span>(x4, y4)
  context.<span class="title function_">closePath</span>()
  context.<span class="title function_">clip</span>()
  <span class="title function_">cleanCanvas</span>()
  context.<span class="title function_">restore</span>()
&#125;</code></pre></li>
</ul>
<h2 id="Êí§Âõû„ÄÅÂèçÊí§Âõû"><a href="#Êí§Âõû„ÄÅÂèçÊí§Âõû" class="headerlink" title="Êí§Âõû„ÄÅÂèçÊí§Âõû"></a>Êí§Âõû„ÄÅÂèçÊí§Âõû</h2><ul>
<li>ÂÆûÁé∞Êí§ÂõûÔºåÂèçÊí§ÂõûÂ∞±Ë¶ÅÊääcanvas‰∏äÁöÑÊØè‰∏™ÂÖÉÁ¥†ÁöÑÊ∏≤ÊüìÊï∞ÊçÆËøõË°åÂ≠òÂÇ®ÔºåÈÄöËøáÊîπÂèòÊéßÂà∂ÂèòÈáèÔºåÈôêÂà∂Ê∏≤ÊüìÂÖÉÁ¥†ÁöÑÈÅçÂéÜÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ËææÂà∞Êí§ÂõûÁöÑÊïàÊûú</li>
<li>È¶ñÂÖàÁîªÊùøÂàùÂßãÂåñÊó∂Âª∫Á´ã‰∏Ä‰∏™historyÁ±ªÔºåÁÑ∂ÂêéÂª∫Á´ãÁºìÂ≠òÂíåstepÊï∞ÊçÆÔºåÊí§ÂõûÂíåÂèçÊí§ÂõûÊó∂ÔºåÂè™ÈúÄË¶Å‰øÆÊîπstepÂç≥ÂèØ<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">History</span>&lt;T&gt; &#123;
  <span class="attr">cacheQueue</span>: T[]
  <span class="attr">step</span>: number
  <span class="title function_">constructor</span>(<span class="params">cacheQueue: T[]</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">cacheQueue</span> = cacheQueue
    <span class="variable language_">this</span>.<span class="property">step</span> = cacheQueue.<span class="property">length</span> - <span class="number">1</span>
  &#125;
  <span class="comment">// Ê∑ªÂä†Êï∞ÊçÆ</span>
  <span class="title function_">add</span>(<span class="params">data: T</span>) &#123;
    <span class="comment">// Â¶ÇÊûúÂú®ÂõûÈÄÄÊó∂Ê∑ªÂä†Êï∞ÊçÆÂ∞±Âà†Èô§ÊöÇÂ≠òÊï∞ÊçÆ</span>
    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">step</span> !== <span class="variable language_">this</span>.<span class="property">cacheQueue</span>.<span class="property">length</span> - <span class="number">1</span>) &#123;
      <span class="variable language_">this</span>.<span class="property">cacheQueue</span>.<span class="property">length</span> = <span class="variable language_">this</span>.<span class="property">step</span> + <span class="number">1</span>
    &#125;
    <span class="variable language_">this</span>.<span class="property">cacheQueue</span>.<span class="title function_">push</span>(data)
    <span class="variable language_">this</span>.<span class="property">step</span> = <span class="variable language_">this</span>.<span class="property">cacheQueue</span>.<span class="property">length</span> - <span class="number">1</span>
  &#125;

  <span class="comment">// ÈÅçÂéÜcacheQueue</span>
  <span class="title function_">each</span>(<span class="params">cb?: (ele: T, i: number) =&gt; <span class="keyword">void</span></span>) &#123;
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= <span class="variable language_">this</span>.<span class="property">step</span>; i++) &#123;
      cb?.(<span class="variable language_">this</span>.<span class="property">cacheQueue</span>[i], i)
    &#125;
  &#125;

  <span class="comment">// ÂêéÈÄÄ</span>
  <span class="title function_">undo</span>(<span class="params"></span>) &#123;
    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">step</span> &gt;= <span class="number">0</span>) &#123;
      <span class="variable language_">this</span>.<span class="property">step</span>--
      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cacheQueue</span>[<span class="variable language_">this</span>.<span class="property">step</span>]
    &#125;
  &#125;

  <span class="comment">// ÂâçËøõ</span>
  <span class="title function_">redo</span>(<span class="params"></span>) &#123;
    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">step</span> &lt; <span class="variable language_">this</span>.<span class="property">cacheQueue</span>.<span class="property">length</span> - <span class="number">1</span>) &#123;
      <span class="variable language_">this</span>.<span class="property">step</span>++
      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cacheQueue</span>[<span class="variable language_">this</span>.<span class="property">step</span>]
    &#125;
  &#125;
&#125;</code></pre></li>
<li>ÈíàÂØπÁîªÊùøÔºåÈÄöËøáÁõëÂê¨Èº†Ê†áÊåâ‰∏ãÊìç‰ΩúÔºåÂú®history‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂØπÊ∏≤ÊüìÂáΩÊï∞ÁöÑÈÅçÂéÜÈôêÂà∂Âà∞stepÂ∞±ËææÂà∞‰∫ÜÊí§ÂõûÁöÑÊïàÊûú<pre><code class="highlight js"><span class="keyword">class</span> <span class="title class_">PaintBoard</span> &#123;
  ...
  <span class="comment">/**</span>
<span class="comment">   * ËÆ∞ÂΩïÂΩìÂâçÂÖÉÁ¥†ÔºåÂπ∂Âä†ÂÖ•history</span>
<span class="comment">   */</span>
  <span class="title function_">recordCurrent</span>(<span class="params">type: string</span>) &#123;
    <span class="keyword">let</span> <span class="attr">ele</span>: <span class="variable constant_">ELEMENT_INSTANCE</span> | <span class="literal">null</span> = <span class="literal">null</span>
    <span class="keyword">switch</span> (type) &#123;
      <span class="keyword">case</span> <span class="variable constant_">CANVAS_ELE_TYPE</span>.<span class="property">FREE_LINE</span>:
        ele = <span class="keyword">new</span> <span class="title class_">FreeLine</span>(
          <span class="variable language_">this</span>.<span class="property">currentLineColor</span>,
          <span class="variable language_">this</span>.<span class="property">currentLineWidth</span>,
          <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="property">current</span>
        )
        <span class="keyword">break</span>
      <span class="keyword">case</span> <span class="variable constant_">CANVAS_ELE_TYPE</span>.<span class="property">CLEAN_LINE</span>:
        ele = <span class="keyword">new</span> <span class="title class_">CleanLine</span>(<span class="variable language_">this</span>.<span class="property">cleanWidth</span>, <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="property">current</span>)
        <span class="keyword">break</span>
      <span class="attr">default</span>:
        <span class="keyword">break</span>
    &#125;
    <span class="keyword">if</span> (ele) &#123;
      <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">add</span>(ele)
      <span class="variable language_">this</span>.<span class="property">currentEle</span> = ele
    &#125;
  &#125;

  <span class="comment">/**</span>
<span class="comment">   * ÈÅçÂéÜhistoryÊ∏≤ÊüìÊï∞ÊçÆ</span>
<span class="comment">   */</span>
  <span class="title function_">render</span>(<span class="params"></span>) &#123;
    <span class="comment">// Ê∏ÖÈô§ÁîªÂ∏É</span>
    <span class="variable language_">this</span>.<span class="title function_">cleanCanvas</span>()
    <span class="comment">// ÈÅçÂéÜhistory</span>
    <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">each</span>(<span class="function">(<span class="params">ele</span>) =&gt;</span> &#123;
      <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">save</span>()
      <span class="comment">// render....</span>
      <span class="variable language_">this</span>.<span class="property">context</span>,<span class="title function_">resore</span>()
    &#125;)
    <span class="comment">// ÁºìÂ≠òÊï∞ÊçÆ</span>
    <span class="variable language_">this</span>.<span class="title function_">cache</span>()
  &#125;
&#125;</code></pre></li>
</ul>
<h2 id="ÊãñÊãΩÁîªÂ∏É"><a href="#ÊãñÊãΩÁîªÂ∏É" class="headerlink" title="ÊãñÊãΩÁîªÂ∏É"></a>ÊãñÊãΩÁîªÂ∏É</h2><ul>
<li>ÊãñÊãΩÁîªÂ∏ÉÁöÑÂÆûÁé∞ÊòØÈÄöËøáËÆ°ÁÆóÈº†Ê†áÁßªÂä®Ë∑ùÁ¶ªÔºåÊ†πÊçÆË∑ùÁ¶ªÊîπÂèòÁîªÂ∏ÉÁöÑÂéüÁÇπ‰ΩçÁΩÆÔºåËææÂà∞ÊãñÊãΩÁöÑÊïàÊûú</li>
</ul>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">drag</span>(<span class="params">position: MousePosition</span>) &#123;
  <span class="keyword">const</span> mousePosition = &#123;
    <span class="attr">x</span>: position.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">canvasRect</span>.<span class="property">left</span>,
    <span class="attr">y</span>: position.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">canvasRect</span>.<span class="property">top</span>
  &#125;
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">originPosition</span>.<span class="property">x</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">originPosition</span>.<span class="property">y</span>) &#123;
    <span class="keyword">const</span> translteX = mousePosition.<span class="property">x</span> - <span class="variable language_">this</span>.<span class="property">originPosition</span>.<span class="property">x</span>
    <span class="keyword">const</span> translteY = mousePosition.<span class="property">y</span> - <span class="variable language_">this</span>.<span class="property">originPosition</span>.<span class="property">y</span>
    <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">translate</span>(translteX, translteY)
    <span class="variable language_">this</span>.<span class="property">originTranslate</span> = &#123;
      <span class="attr">x</span>: translteX + <span class="variable language_">this</span>.<span class="property">originTranslate</span>.<span class="property">x</span>,
      <span class="attr">y</span>: translteY + <span class="variable language_">this</span>.<span class="property">originTranslate</span>.<span class="property">y</span>
    &#125;
    <span class="variable language_">this</span>.<span class="title function_">render</span>()
  &#125;
  <span class="variable language_">this</span>.<span class="property">originPosition</span> = mousePosition
&#125;</code></pre>

<h2 id="Â§öÂõæÂ±Ç"><a href="#Â§öÂõæÂ±Ç" class="headerlink" title="Â§öÂõæÂ±Ç"></a>Â§öÂõæÂ±Ç</h2><p>ÂÆûÁé∞Â§öÂõæÂ±ÇÈúÄË¶ÅÂØπ‰ª•‰∏ãÂá†‰∏™Âú∞ÊñπËøõË°åÂ§ÑÁêÜ</p>
<ol>
<li>ÁîªÊùøÂàùÂßãÂåñÊó∂Âª∫Á´ãÂõæÂ±ÇÁ±ªÔºåÊâÄÊúâÁöÑÂõæÂ±ÇÊï∞ÊçÆÂíåÂõæÂ±ÇÈÄªËæëÂÖ®Âú®Ê≠§Â§Ñ</li>
<li>ÁÑ∂ÂêéÂØπcanvas‰∏äÁöÑÂÖÉÁ¥†Âä†layerÂ±ûÊÄßÔºåÁî®‰∫éÂà§Êñ≠ÂΩíÂ±û‰∫éÂì™‰∏™ÂõæÂ±Ç</li>
<li>ÁîªÊùøÁöÑÊ∏≤ÊüìÂáΩÊï∞Êîπ‰∏∫ÊåâÁÖßÂõæÂ±ÇÈ°∫Â∫èËøõË°åÊ∏≤Êüì</li>
<li>ÊãñÊãΩÊàñËÄÖÈöêËóèÂõæÂ±ÇÈÉΩÈúÄË¶ÅÈáçÊñ∞Ê∏≤ÊüìÔºåÂà†Èô§ÂõæÂ±ÇÊääÂØπÂ∫îÁöÑÁºìÂ≠òÂõæÂ±ÇÂÖÉÁ¥†ËøõË°åÂà†Èô§</li>
</ol>
<pre><code class="highlight js">interface <span class="title class_">ILayer</span> &#123;
  <span class="attr">id</span>: number <span class="comment">// ÂõæÂ±Çid</span>
  <span class="attr">title</span>: string <span class="comment">// ÂõæÂ±ÇÂêçÁß∞</span>
  <span class="attr">show</span>: boolean <span class="comment">// ÂõæÂ±ÇÂ±ïÁ§∫Áä∂ÊÄÅ</span>
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÂõæÂ±Ç</span>
<span class="comment"> */</span>
<span class="keyword">class</span> <span class="title class_">Layer</span> &#123;
  <span class="attr">stack</span>: <span class="title class_">ILayer</span>[] <span class="comment">// ÂõæÂ±ÇÊï∞ÊçÆ</span>
  <span class="attr">current</span>: number <span class="comment">// ÂΩìÂâçÂõæÂ±Ç</span>
  <span class="attr">render</span>: <span class="function">() =&gt;</span> <span class="keyword">void</span> <span class="comment">// ÁîªÊùøÊ∏≤Êüì‰∫ã‰ª∂</span>

  <span class="title function_">constructor</span>(<span class="params">render: () =&gt; <span class="keyword">void</span>, initData?: Layer</span>) &#123;
    <span class="keyword">const</span> &#123;
      stack = [
        &#123;
          <span class="attr">id</span>: <span class="number">1</span>,
          <span class="attr">title</span>: <span class="string">&#x27;item1&#x27;</span>,
          <span class="attr">show</span>: <span class="literal">true</span>
        &#125;
      ],
      id = <span class="number">1</span>,
      current = <span class="number">1</span>
    &#125; = initData || &#123;&#125;
    <span class="variable language_">this</span>.<span class="property">stack</span> = stack
    <span class="variable language_">this</span>.<span class="property">id</span> = id
    <span class="variable language_">this</span>.<span class="property">current</span> = current
    <span class="variable language_">this</span>.<span class="property">render</span> = render
  &#125;
  ...
&#125;

<span class="keyword">class</span> <span class="title class_">PaintBoard</span> &#123;
  <span class="comment">// ÈÄöËøáÂõæÂ±ÇËøõË°åÊéíÂ∫è</span>
   <span class="title function_">sortOnLayer</span>(<span class="params"></span>) &#123;
     <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;
       <span class="keyword">return</span> (
         <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="property">stack</span>.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">&#123; id &#125;</span>) =&gt;</span> id === b?.<span class="property">layer</span>) -
         <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="property">stack</span>.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">&#123; id &#125;</span>) =&gt;</span> id === a?.<span class="property">layer</span>)
       )
     &#125;)
   &#125;

   <span class="comment">// Ê∏≤ÊüìÂáΩÊï∞Âè™Ê∏≤ÊüìÂõæÂ±ÇÂ±ïÁ§∫Áä∂ÊÄÅÁöÑÂÖÉÁ¥†</span>
   <span class="title function_">render</span>(<span class="params"></span>) &#123;
     <span class="keyword">const</span> showLayerIds = <span class="keyword">new</span> <span class="title class_">Set</span>(
       <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="property">stack</span>.<span class="property">reduce</span>&lt;number[]&gt;(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;
         <span class="keyword">return</span> cur.<span class="property">show</span> ? [...acc, cur.<span class="property">id</span>] : acc
       &#125;, [])
     )
     <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">each</span>(<span class="function">(<span class="params">ele</span>) =&gt;</span> &#123;
       <span class="keyword">if</span> (ele?.<span class="property">layer</span> &amp;&amp; showLayerIds.<span class="title function_">has</span>(ele.<span class="property">layer</span>)) &#123;
         ...
       &#125;
     &#125; 
   &#125;
&#125;</code></pre>

<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><ul>
<li>ÊàëÊú¨ÁØá‰∏ªË¶ÅÊòØÂàÜ‰∫´‰∏Ä‰∫õ‰∏ªË¶ÅÈÄªËæëÔºåËøòÊúâ‰∏Ä‰∫õÂÖºÂÆπÈóÆÈ¢òÂíå‰∏Ä‰∫õUI‰∫§‰∫íÂ∞±‰∏çÂèôËø∞‰∫Ü</li>
<li>Ëøô‰∏™ÁîªÊùøÂÜô‰∏ãÊù•Â§ßÊ¶ÇÁî®‰∫Ü‰∏Ä‰∏™ÊòüÊúüÔºåÊúâÂ•ΩÂ§öÂäüËÉΩËøòÊ≤°ÂÜô‰∏äÔºåÂ¶ÇÊûúËøáÊÆµÊó∂Èó¥ÊúâÁ©∫ÁöÑËØùÂ∞±ÁªßÁª≠ÂÜô‰∏ãÂéªÔºåÂπ∂Ëøõ‰∏ÄÊ≠•‰ºòÂåñÔºåÁé∞Âú®ËøòÊòØÊúâÁÇπ‰ºòÂåñÈóÆÈ¢òÊ≤°ÊúâÂÜôÂ•ΩÔºåÊØîÂ¶ÇÁîªÁ¨îÂÆΩÂ∫¶ÊòæÁ§∫ÁöÑËøòÊòØÊúâÁÇπÈóÆÈ¢òÔºåÂéüÁÇπ‰ΩçÁΩÆÂíå‰∏Ä‰∫õÂàùÂßãÂåñËÆæËÆ°ÁöÑ‰∏çÂ§™Â•ΩÔºå‰∏çËøáÂÜôÂÆåËøô‰∏™ÁîªÊùøËøòÊòØÊå∫ÊúâÊàêÂ∞±ÊÑüÁöÑ</li>
</ul>
<h2 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h2><ul>
<li><a href="https://www.cnblogs.com/axes/p/3850309.html">HTML5 ÂÆûÁé∞Ê©°ÁöÆÊì¶ÁöÑÊì¶Èô§ÊïàÊûú</a></li>
<li><a href="https://juejin.cn/post/7091276963146530847">ÊàëÂÅö‰∫Ü‰∏Ä‰∏™Âú®Á∫øÁôΩÊùøÔºÅ</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>canvas</tag>
      </tags>
  </entry>
  <entry>
    <title>„ÄêÁøª„Äë‚Äúreturn null‚Äù vs ‚Äúreturn false‚Äù in React</title>
    <url>/2023/05/13/%E3%80%90%E7%BF%BB%E3%80%91%E2%80%9Creturn-null%E2%80%9D-vs-%E2%80%9Creturn-false%E2%80%9D-in-React/</url>
    <content><![CDATA[<blockquote>
<p>‰∏∫‰∫ÜÊèêÈ´òËã±ËØ≠Ê∞¥Âπ≥Âíå‰øùÊåÅÊäÄÊúØÊàêÈïøÔºåÂºÄÂßãÊåâËÆ°ÂàíÁøªËØë‰∏Ä‰∫õÁü≠ÁØáÂíåÂçöÂÆ¢ÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª<br>ÂéüÊñáÔºö<a href="https://caglayanyanikoglu.medium.com/return-null-vs-return-false-in-react-826d8abcc429">‚Äúreturn null‚Äù vs ‚Äúreturn false‚Äù in React</a><br>Âéü‰ΩúËÄÖÔºö<a href="https://caglayanyanikoglu.medium.com/">√áaƒülayan Yanƒ±koƒülu</a></p>
</blockquote>
<h1 id="Ê≠£Êñá"><a href="#Ê≠£Êñá" class="headerlink" title="Ê≠£Êñá"></a>Ê≠£Êñá</h1><p>Â§ßÂÆ∂Â•ΩÔºåÂú®Êú¨Âë®ÁöÑ#SundayTechMusingsÔºåÊàëÂ∞ÜÂ∞ùËØïËß£ÈáäÂú®React‰∏≠‚Äùreturn null‚ÄùÂíå‚Äùreturn false‚Äù‰πãÈó¥ÁöÑÂå∫Âà´„ÄÇ</p>
<p>ËøôÂÆûÈôÖ‰∏ä‰∏éÊÄßËÉΩÊúâÂÖ≥ÔºåÂú®ÂÜô‰πãÂâçÔºå‰Ω†ÂèØ‰ª•ÁúãÁúãÊàëÁöÑÊñáÁ´†<a href="https://tech.jotform.com/react-performance-improvements-356f81b1904f">Performance Optimization Techniques</a></p>
<p><img src="https://miro.medium.com/v2/resize:fit:1400/0*yaIvvEwXKIvFQ_8g"></p>
<p>ÊàëÁü•ÈÅìÂæàÂ§ö‰∫∫ËÆ§‰∏∫‚Äùreturn null‚ÄùÂíå‚Äùreturn false‚ÄùÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂÆûÈôÖ‰∏äÊòØÈùûÂ∏∏Áõ∏‰ººÁöÑÔºå‰ΩÜÊòØ‰πüÊúâ‰∏Ä‰∫õÂå∫Âà´ÔºåËøôÂíåReactÁöÑÂ∑•‰ΩúÊñπÂºèÊúâÂÖ≥„ÄÇ</p>
<p>Âú®‰ΩøÁî®ReactÂºÄÂèëÊó∂ÔºåÈÄöÂ∏∏‰ºö‰ΩøÁî®Êù°‰ª∂Ê∏≤ÊüìÊ†πÊçÆ‰∏çÂêåÁöÑÊù°‰ª∂ÊòæÁ§∫‰∏çÂêåÁöÑÁªÑ‰ª∂„ÄÇÂú®‰∏Ä‰∫õÊù°‰ª∂‰∏ãÔºå‰Ω†ÂèØËÉΩÊÉ≥ÊòéÁ°ÆÊåáÂá∫‰∏Ä‰∏™ÁªÑ‰ª∂‰∏çÂ∫îËØ•Ê∏≤Êüì‰ªª‰Ωï‰∏úË•ø„ÄÇËøôÂ∞±ÊòØnullÂíåfalseÁöÑÊù•ÂéÜÔºåËôΩÁÑ∂Ëøô‰∏§‰∏™ÂÄºÈÉΩ‰ºöÈòªÊ≠¢‰∏Ä‰∏™ÁªÑ‰ª∂ÁöÑÊ∏≤ÊüìÔºå‰ΩÜÊòØÂÆÉ‰ª¨‰πãÈó¥ÊúâÁùÄÈáçË¶ÅÁöÑÂå∫Âà´„ÄÇ</p>
<h3 id="Returning-null"><a href="#Returning-null" class="headerlink" title="Returning null"></a>Returning null</h3><p>ÂΩì‰∏Ä‰∏™ÁªÑ‰ª∂ËøîÂõûnullÔºåÂÆÉ‰ºöÂëäËØâReact‰∏çË¶ÅÂú®DOM‰∏≠‰∏∫ËØ•ÁªÑ‰ª∂Ê∏≤Êüì‰ªª‰Ωï‰∏úË•ø„ÄÇÂΩì‰Ω†ÊÉ≥Ë¶ÅÊ†πÊçÆÊüêÁßçÁä∂ÊÄÅÊúâÊù°‰ª∂Âú∞Ê∏≤Êüì‰∏Ä‰∏™ÁªÑ‰ª∂Êó∂Ôºå‰ΩÜ‰∏çÂ∏åÊúõÂú®‰∏çÁ¨¶ÂêàËØ•Áä∂ÊÄÅÊó∂ÊòæÁ§∫‰ªª‰Ωï‰∏úË•øÊó∂ÔºåËøîÂõûnullÂ∞±ÂæàÊúâÁî®ÔºåÊØîÂ¶ÇËØ¥Ôºö</p>
<pre><code class="highlight js"><span class="keyword">const</span> <span class="title function_">Greeting</span> = (<span class="params">props</span>) =&gt; &#123;
  <span class="keyword">if</span> (!props.<span class="property">name</span>) &#123;
    <span class="keyword">return</span> <span class="literal">null</span>;
  &#125;

  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;props.name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;
&#125;;</code></pre>

<p>Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõ <code>name</code> propÔºåÁªÑ‰ª∂‰ºöËøîÂõûnullÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÊ∏≤Êüì<code>&lt;h1&gt;</code>ÂÖÉÁ¥†„ÄÇÂ¶ÇÊûúÊèê‰æõ‰∫Ü <code>name</code> propÔºåËØ•ÁªÑ‰ª∂Â∞±‰ºöÊ∏≤ÊüìÂ∏¶ÊúâÂÆûÈôÖÂÜÖÂÆπÁöÑ<code>&lt;h1&gt;</code>ÂÖÉÁ¥†ÔºåËøôÂÆûÈôÖ‰∏äÊòØÊØè‰∏™‰∫∫ÁöÑÁªèÂÖ∏ÂÅöÊ≥ï„ÄÇ</p>
<h3 id="Returning-false"><a href="#Returning-false" class="headerlink" title="Returning false"></a>Returning false</h3><p>ÂΩì‰∏Ä‰∏™ÁªÑ‰ª∂ËøîÂõûfalseÊó∂ÔºåÂÆÉÂëäËØâ‰ºöReact‰∏çË¶ÅÂÜçDOM‰∏≠‰∏∫ËØ•ÁªÑ‰ª∂Ê∏≤Êüì‰ªª‰Ωï‰∏úË•øÔºåÂ∞±ÂÉènull‰∏ÄÊ†∑„ÄÇÁÑ∂ËÄåÔºåÊúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂå∫Âà´ÔºöËøîÂõûfalse‰πü‰ºöÈòªÊ≠¢ËØ•ÁªÑ‰ª∂Âú®Êú™Êù•ÁöÑÊõ¥Êñ∞„ÄÇËøôÊòØÂõ†‰∏∫ReactÂ∞ÜfalseËß£Èáä‰∏∫‚ÄúÂç∏ËΩΩ‚ÄùÁªÑ‰ª∂ÁöÑ‰ø°Âè∑ÔºåËøôÊÑèÂë≥ÁùÄ‰ªéDOM‰∏≠ÂÆåÂÖ®Âà†Èô§ÂÆÉ„ÄÇ</p>
<p>‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ËøîÂõûfalseÁöÑÁªÑ‰ª∂ÁöÑ‰æãÂ≠êÔºö</p>
<pre><code class="highlight js"><span class="keyword">const</span> <span class="title function_">Button</span> = (<span class="params">props</span>) =&gt; &#123;
  <span class="keyword">if</span> (!props.<span class="property">onClick</span>) &#123;
    <span class="keyword">return</span> <span class="literal">false</span>;
  &#125;

  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;props.onClick&#125;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>;
&#125;;</code></pre>

<p>Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõ <code>onClick</code> propÔºåÁªÑ‰ª∂Â∞±‰ºöËøîÂõûfalseÔºå‰ªéËÄåÈòªÊ≠¢ <code>&lt;button&gt;</code>ÂÖÉÁ¥†Ê∏≤Êüì„ÄÇÂ¶ÇÊûúÊèê‰æõ‰∫Ü <code>onClick</code> propÔºåÁªÑ‰ª∂‰ºöÁî®ÊåáÂÆöÁöÑÁÇπÂáªÂ§ÑÁêÜÊù•Ê∏≤Êüì <code>&lt;button&gt;</code> ÂÖÉÁ¥†</p>
<p>ÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåËøîÂõûfalseÂèØËÉΩ‰ºöÊúâÊÑèÊÉ≥‰∏çÂà∞ÁöÑÂêéÊûúÔºåÊØîÂ¶ÇÂú®Â∫îËØ•Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÈòªÊ≠¢ÁªÑ‰ª∂ÁöÑÊõ¥Êñ∞„ÄÇÂá∫‰∫éËøô‰∏™ÂéüÂõ†ÔºåÂΩì‰Ω†ÊÉ≥Âú®‰∏çÂΩ±ÂìçÊú™Êù•Êõ¥Êñ∞ÁöÑÊÉÖÂÜµ‰∏ãÈòªÊ≠¢Ê∏≤ÊüìÔºå‰ΩøÁî®nullÈÄöÂ∏∏Êõ¥ÂÆâÂÖ®</p>
<p>‰ªé‰∏Ä‰∏™ÁªÑ‰ª∂ÁöÑÊ∏≤ÊüìÊñπÊ≥ï‰∏≠ËøîÂõûfalseÔºåÂè™ÊúâÂú®ËØ•ÁªÑ‰ª∂Ê≤°Êúâ‰ªª‰ΩïÂâØ‰ΩúÁî®Êó∂ÊâçÊúâÁî®ÔºåÊØîÂ¶ÇÊõ¥Êñ∞Áä∂ÊÄÅÊàñËÄÖËß¶ÂèëAPIËØ∑Ê±Ç„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÁªÑ‰ª∂ÊúâÂâØ‰ΩúÁî®Âπ∂ËøîÂõûfalseÊó∂ÔºåËøô‰∫õÂâØ‰ΩúÁî®‰ªçÁÑ∂‰ºöÂèëÁîüÔºåÂèØËÉΩ‰ºöÂØºËá¥ÊÑèÂ§ñÁöÑË°å‰∏∫„ÄÇ</p>
<p><a href="https://github.com/facebook/react/blob/main/packages/react/src/ReactElementValidator.js#L347-L385">react&#x2F;ReactElementValidator.js at main</a></p>
<p>Â¶ÇÊûú‰Ω†Âú®ReactÂ∫ì‰∏≠Ê£ÄÊü•‰∏äÈù¢ËøôÊÆµ‰ª£Á†ÅÊó∂Ôºå‰Ω†‰ºöÁúãÂà∞‰∏Ä‰∏™‚Äùnull‚ÄùÊ£ÄÊü•Ôºå‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÁêÜËß£ReactÁöÑÂ∑•‰ΩúÔºå‰Ω†ÂèØ‰ª•ÁúãÁúãËøôÊÆµ‰ª£Á†Å„ÄÇ</p>
<h3 id="To-sum-up"><a href="#To-sum-up" class="headerlink" title="To sum up"></a>To sum up</h3><p>ÊÄªËÄåË®Ä‰πãÔºåËøîÂõûnullÂíåËøîÂõûfalseÈÉΩ‰ºöÈòªÊ≠¢‰∏Ä‰∏™ÁªÑ‰ª∂Âú®DOM‰∏≠Ê∏≤Êüì‰ªª‰Ωï‰∏úË•øÔºå‰ΩÜÂÆÉ‰ª¨‰πãÈó¥ÊúâÈáçË¶ÅÁöÑÂå∫Âà´„ÄÇnullÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñπÊ≥ïÊù•ÊúâÊù°‰ª∂ÁöÑÊ∏≤Êüì‰∏Ä‰∏™ÁªÑ‰ª∂ÔºåÂπ∂‰∏î‰∏çÂΩ±ÂìçÊú™Êù•ÁöÑÊõ¥Êñ∞ÔºåËÄåfalseÂàôÊòØÂêëReactÂèëÂá∫Âç∏ËΩΩÁªÑ‰ª∂ÁöÑ‰ø°Âè∑ÔºåÂπ∂ÂèØËÉΩÂØºËá¥ÊÑèÊÉ≥‰∏çÂà∞ÁöÑÂêéÊûú„ÄÇ‰∏∫‰Ω†ÁâπÂÆöÁöÑÁî®‰æãÈÄâÊã©Ê≠£Á°ÆÁöÑÈÄâÈ°πÊòØÂæàÈáçË¶ÅÁöÑ</p>
]]></content>
      <tags>
        <tag>React</tag>
        <tag>Translate</tag>
      </tags>
  </entry>
  <entry>
    <title>Âü∫‰∫émarkdown-itÊâìÈÄ†ÁöÑmarkdownÁºñËæëÂô®</title>
    <url>/2022/10/12/%E5%9F%BA%E4%BA%8Emarkdown-it%E6%89%93%E9%80%A0%E7%9A%84markdown%E7%BC%96%E8%BE%91%E5%99%A8/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>markdown-itÊòØ‰∏Ä‰∏™Áî®Êù•Ëß£ÊûêmarkdownÁöÑÂ∫ìÔºåÂÆÉÂèØ‰ª•Â∞ÜmarkdownÁºñËØë‰∏∫htmlÔºåÁÑ∂ÂêéËß£ÊûêÊó∂markdown-it‰ºöÊ†πÊçÆËßÑÂàôÁîüÊàêtokensÔºåÂ¶ÇÊûúÈúÄË¶ÅËá™ÂÆö‰πâÔºåÂ∞±ÈÄöËøárulesÂáΩÊï∞ÂØπtokenËøõË°åÂ§ÑÁêÜ<br>ÊàëÁé∞Âú®Âü∫‰∫émarkdown-itÂ∑≤ÂÆåÊàêÁ¨¨‰∏ÄÁâàÁºñËæëÂô®ÔºåÁé∞Êúâ‰ª•‰∏ãÂäüËÉΩÔºö</p>
<ol>
<li>Âø´Êç∑ÁºñËæëÊåâÈíÆ</li>
<li>‰ª£Á†ÅÂùó‰∏ªÈ¢òÂàáÊç¢</li>
<li>ÂêåÊ≠•ÊªöÂä®</li>
<li>ÁõÆÂΩïÂàóË°®ÁîüÊàê</li>
<li>ÂÜÖÂÆπÁä∂ÊÄÅÁºìÂ≠ò</li>
</ol>
<h2 id="È¢ÑËßà"><a href="#È¢ÑËßà" class="headerlink" title="È¢ÑËßà"></a>È¢ÑËßà</h2><p>ÁõÆÂâçÂÆûÁé∞ÊïàÊûúÂ¶Ç‰∏ã<br><img src="https://s1.ax1x.com/2022/10/12/xaMejs.jpg"></p>
<p>È¢ÑËßàÂú∞ÂùÄÔºö<a href="https://lhrun.github.io/md-editor/">https://lhrun.github.io/md-editor/</a><br>repoÔºö<a href="https://github.com/LHRUN/md-editor">https://github.com/LHRUN/md-editor</a> Ê¨¢Ëøéstar‚≠êÔ∏è</p>
<h2 id="ÁºñËæëÂô®ËÆæËÆ°"><a href="#ÁºñËæëÂô®ËÆæËÆ°" class="headerlink" title="ÁºñËæëÂô®ËÆæËÆ°"></a>ÁºñËæëÂô®ËÆæËÆ°</h2><ol>
<li>È°µÈù¢Â∏ÉÂ±ÄÂàÜÂõõÈÉ®ÂàÜÔºåÈ°∂ÈÉ®ÊòØÂø´Êç∑Â∑•ÂÖ∑Ê†èÔºåÁÑ∂Âêé‰∏ª‰ΩìÂÜÖÂÆπÂàÜ‰∏âÈÉ®ÂàÜÔºåÁºñËæëÂå∫Âüü(textarea)„ÄÅhtmlÂ±ïÁ§∫Âå∫Âüü„ÄÅÁõÆÂΩïÂàóË°®(ÂèØÂ±ïÁ§∫ÈöêËóè)ÔºåÂõ†‰∏∫ÊàëÊòØÁî®reactÂºÄÂèëÁöÑÔºåÊâÄ‰ª•htmlÂ≠óÁ¨¶‰∏≤ÊàëÊòØÈÄöËøá<a href="https://zh-hans.reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml">dangerouslySetInnerHTML</a>ËÆæÁΩÆ</li>
<li>markdown-itÂàùÂßãÂåñ<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="variable constant_">MD</span> = <span class="keyword">new</span> <span class="title class_">MarkdownIt</span>(&#123;
  <span class="attr">html</span>: <span class="literal">true</span>, <span class="comment">// Âú®Ê∫êÁ†Å‰∏≠ÂêØÁî®HTMLÊ†áÁ≠æ</span>
  <span class="attr">linkify</span>: <span class="literal">true</span>, <span class="comment">// Â∞ÜÁ±ª‰ººURLÁöÑÊñáÊú¨Ëá™Âä®ËΩ¨Êç¢‰∏∫ÈìæÊé•</span>
  <span class="attr">breaks</span>: <span class="literal">true</span>, <span class="comment">// ËΩ¨Êç¢ÊÆµËêΩÈáåÁöÑ &#x27;\n&#x27; Âà∞ &lt;br&gt;</span>
  <span class="attr">highlight</span>: <span class="keyword">function</span> (<span class="params">str, lang</span>) &#123;
    <span class="keyword">return</span> <span class="title function_">highlightFormatCode</span>(str, lang)
  &#125;
&#125;)
  .<span class="title function_">use</span>(<span class="title class_">MarkdownItSub</span>)
  .<span class="title function_">use</span>(<span class="title class_">MarkdownItSup</span>)
  .<span class="title function_">use</span>(<span class="title class_">MarkdownItMark</span>)
  .<span class="title function_">use</span>(<span class="title class_">MarkdownItDeflist</span>)
  .<span class="title function_">use</span>(<span class="title class_">MarkdownItTaskLists</span>)
  .<span class="title function_">use</span>(markdownItAbbr)
  .<span class="title function_">use</span>(markdownItFootnote)
  <span class="comment">// ÂÖ∂‰ΩôÁöÑmarkdownItÊèí‰ª∂...</span>

<span class="keyword">const</span> highlightFormatCode = (<span class="attr">str</span>: string, <span class="attr">lang</span>: string): <span class="function"><span class="params">string</span> =&gt;</span> &#123;
  <span class="keyword">if</span> (lang &amp;&amp; hljs.<span class="title function_">getLanguage</span>(lang)) &#123;
    <span class="keyword">try</span> &#123;
      <span class="keyword">return</span> <span class="title function_">codeBlockStyle</span>(hljs.<span class="title function_">highlight</span>(lang, str, <span class="literal">true</span>).<span class="property">value</span>)
    &#125; <span class="keyword">catch</span> (e) &#123;
      <span class="variable language_">console</span>.<span class="title function_">error</span>(e)
    &#125;
  &#125;

  <span class="keyword">return</span> <span class="title function_">codeBlockStyle</span>(<span class="variable constant_">MD</span>.<span class="property">utils</span>.escapeHtml(str))
&#125;

<span class="keyword">const</span> codeBlockStyle = (<span class="attr">val</span>: string): <span class="function"><span class="params">string</span> =&gt;</span> &#123;
  <span class="keyword">return</span> <span class="string">`&lt;pre class=&quot;hljs&quot; style=&quot;padding: 10px;border-radius: 10px;&quot;&gt;&lt;code&gt;<span class="subst">$&#123;val&#125;</span>&lt;/code&gt;&lt;/pre&gt;`</span>
&#125;</code></pre></li>
</ol>
<h2 id="Âø´Êç∑ÁºñËæëÊåâÈíÆ"><a href="#Âø´Êç∑ÁºñËæëÊåâÈíÆ" class="headerlink" title="Âø´Êç∑ÁºñËæëÊåâÈíÆ"></a>Âø´Êç∑ÁºñËæëÊåâÈíÆ</h2><p>Âø´Êç∑‰æøÊç∑ÊåâÈíÆ‰∏ªË¶ÅÊòØÈÄöËøáÂà§Êñ≠textareaÁöÑÂÖâÊ†á‰ΩçÁΩÆÔºåÁÑ∂ÂêéÈÄöËøáÂÖâÊ†á‰ΩçÁΩÆÊîπÂèòÁºñËæëÂô®ÊñáÊú¨ÂÜÖÂÆπÔºåÊØîÂ¶ÇÊ∑ªÂä†ÂõæÁâá</p>
<pre><code class="highlight js"><span class="comment">// Ëé∑ÂèñÂÖâÊ†á‰ΩçÁΩÆ</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getCursorPosition</span> = (<span class="params">editor: HTMLTextAreaElement</span>) =&gt; &#123;
  <span class="keyword">const</span> &#123; selectionStart, selectionEnd &#125; = editor
  <span class="keyword">return</span> [selectionStart, selectionEnd]
&#125;

<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">addImage</span> = (<span class="params"></span>
<span class="params">  editor: HTMLTextAreaElement,</span>
<span class="params">  source: string,</span>
<span class="params">  setSource: (v: string) =&gt; <span class="keyword">void</span></span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> [start, end] = <span class="title function_">getCursorPosition</span>(editor)
  <span class="keyword">let</span> val = source
  <span class="keyword">if</span> (start === end) &#123;
    val = <span class="string">`<span class="subst">$&#123;source.slice(<span class="number">0</span>, start)&#125;</span>\n![ÂõæÁâáÊèèËø∞](url)\n<span class="subst">$&#123;source.slice(end)&#125;</span>`</span>
  &#125; <span class="keyword">else</span> &#123;
    val = <span class="string">`<span class="subst">$&#123;source.slice(<span class="number">0</span>, start)&#125;</span>\n![<span class="subst">$&#123;source.slice(</span></span>
<span class="subst"><span class="string">      start,</span></span>
<span class="subst"><span class="string">      end</span></span>
<span class="subst"><span class="string">    )&#125;</span>](url)\n<span class="subst">$&#123;source.slice(end)&#125;</span>`</span>
  &#125;
  <span class="title function_">setSource</span>(val)
&#125;</code></pre>

<h2 id="‰ª£Á†ÅÂùó‰∏ªÈ¢òÂàáÊç¢"><a href="#‰ª£Á†ÅÂùó‰∏ªÈ¢òÂàáÊç¢" class="headerlink" title="‰ª£Á†ÅÂùó‰∏ªÈ¢òÂàáÊç¢"></a>‰ª£Á†ÅÂùó‰∏ªÈ¢òÂàáÊç¢</h2><ul>
<li>‰ª£Á†ÅÂùóÈ´ò‰∫ÆÊàëÊòØÈááÁî®‰∫Ü<strong>highlight.js</strong>ÔºåÂõ†‰∏∫Ëøô‰∏™Â∫ìÊèê‰æõ‰∫ÜÂæàÂ§ö‰∏ªÈ¢òÊ†∑ÂºèÔºåÊâÄ‰ª•‰∏ªÈ¢òÂàáÊç¢ÔºåÊàëÂè™ÈúÄË¶ÅÊîπÂèòcss linkÂç≥ÂèØ<pre><code class="highlight js"><span class="comment">// codeThemeÂ∞±ÊòØÂ∑≤ÈÄâÁöÑ‰∏ªÈ¢òÂêçÂ≠ó</span>
<span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;
  <span class="keyword">if</span> (codeTheme) &#123;
    <span class="title function_">switchLink</span>(
      <span class="string">&#x27;code-style&#x27;</span>,
      <span class="string">`https://cdn.bootcdn.net/ajax/libs/highlight.js/11.6.0/styles/<span class="subst">$&#123;codeTheme&#125;</span>.min.css`</span>
    )
  &#125;
&#125;, [codeTheme])

<span class="comment">/**</span>
<span class="comment"> * ÂàáÊç¢html css link</span>
<span class="comment"> * <span class="doctag">@param</span> key link key ÊåáÂÆöÂîØ‰∏ÄÊ†áËØÜÔºåÁî®‰∫éÂàáÊç¢link</span>
<span class="comment"> * <span class="doctag">@param</span> href link href</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">switchLink</span> = (<span class="params">key: string, href: string</span>) =&gt; &#123;
  <span class="keyword">const</span> head = <span class="variable language_">document</span>.<span class="property">head</span>
  <span class="keyword">const</span> oldLink = head.<span class="title function_">getElementsByClassName</span>(key)
  <span class="keyword">if</span> (oldLink.<span class="property">length</span>) head.<span class="title function_">removeChild</span>(oldLink[<span class="number">0</span>])

  <span class="keyword">const</span> newLink = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;link&#x27;</span>)
  newLink.<span class="title function_">setAttribute</span>(<span class="string">&#x27;rel&#x27;</span>, <span class="string">&#x27;stylesheet&#x27;</span>)
  newLink.<span class="title function_">setAttribute</span>(<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;text/css&#x27;</span>)
  newLink.<span class="title function_">setAttribute</span>(<span class="string">&#x27;class&#x27;</span>, key)
  newLink.<span class="title function_">setAttribute</span>(<span class="string">&#x27;href&#x27;</span>, href)
  newLink.<span class="property">onerror</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;
    <span class="variable language_">console</span>.<span class="title function_">error</span>(e)
    message.<span class="title function_">error</span>(<span class="string">&#x27;Ëé∑Âèñcss linkÂ§±Ë¥•&#x27;</span>)
  &#125;
  head.<span class="title function_">appendChild</span>(newLink)
&#125;</code></pre></li>
</ul>
<h2 id="ÂêåÊ≠•ÊªöÂä®"><a href="#ÂêåÊ≠•ÊªöÂä®" class="headerlink" title="ÂêåÊ≠•ÊªöÂä®"></a>ÂêåÊ≠•ÊªöÂä®</h2><p>ÂêåÊ≠•ÊªöÂä®ÊòØÊàëËÆ§‰∏∫ÊúÄÈöæÊêûÁöÑ‰∏Ä‰∏™ÂäüËÉΩÔºåÂõ†‰∏∫Êàë‰∏çÊÉ≥‰ªÖ‰ªÖÈÄöËøáÁôæÂàÜÊØîÊù•ËÆ°ÁÆóÊªöÂä®Ë∑ùÁ¶ªÔºåÂõ†‰∏∫ËøôÊ†∑ÁöÑËØùÂ¶ÇÊûúÁºñËæëÂå∫ÂüüÊ∑ªÂä†‰∫Ü‰∏ÄÂ†ÜÂõæÁâáÔºåÈ¢ÑËßàÂ∞±‰ºöÊúâÈùûÂ∏∏Â§ßÁöÑÈ´òÂ∫¶Â∑Æ„ÄÇÊàëÂú®ÁΩë‰∏äÊâæ‰∫ÜËÆ∏Â§öÊñπÊ°àÔºåÊúÄÂêéÂèëÁé∞markdown-itÁöÑÂÆòÊñπÂÆûÁé∞ÊòØÊàëËÉΩÊâæÂà∞Âπ∂ËÉΩÂÆûÁé∞ÁöÑÊúÄ‰Ω≥ÊñπÊ°àÔºåÂ§ßËá¥ÂÆûÁé∞ÊÄùË∑ØÊòØÂ¶Ç‰∏ã</p>
<ol>
<li><p>È¶ñÂÖàÂú®ÁºñËØëÊó∂ÂØπÊ†áÈ¢òÂÖÉÁ¥†ÂíåÊÆµËêΩÂÖÉÁ¥†Ê∑ªÂä†Ë°åÂè∑</p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ê≥®ÂÖ•Ë°åÂè∑</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="attr">injectLineNumbers</span>: <span class="title class_">Renderer</span>.<span class="property">RenderRule</span> = <span class="function">(<span class="params"></span></span>
<span class="params"><span class="function">  tokens,</span></span>
<span class="params"><span class="function">  idx,</span></span>
<span class="params"><span class="function">  options,</span></span>
<span class="params"><span class="function">  _env,</span></span>
<span class="params"><span class="function">  slf</span></span>
<span class="params"><span class="function"></span>) =&gt;</span> &#123;
  <span class="keyword">let</span> line
  <span class="keyword">if</span> (tokens[idx].<span class="property">map</span> &amp;&amp; tokens[idx].<span class="property">level</span> === <span class="number">0</span>) &#123;
    line = (tokens[idx].<span class="property">map</span> <span class="keyword">as</span> [number, number])[<span class="number">0</span>]
    tokens[idx].<span class="title function_">attrJoin</span>(<span class="string">&#x27;class&#x27;</span>, <span class="string">&#x27;line&#x27;</span>)
    tokens[idx].<span class="title function_">attrSet</span>(<span class="string">&#x27;data-line&#x27;</span>, <span class="title class_">String</span>(line))
  &#125;
  <span class="keyword">return</span> slf.<span class="title function_">renderToken</span>(tokens, idx, options)
&#125;

<span class="variable constant_">MD</span>.<span class="property">renderer</span>.<span class="property">rules</span>.<span class="property">heading_open</span> = <span class="variable constant_">MD</span>.<span class="property">renderer</span>.<span class="property">rules</span>.<span class="property">paragraph_open</span> = injectLineNumbers</code></pre>
</li>
<li><p>ÊªöÂä®ÂâçËÆ°ÁÆóÂá∫ÂΩìÂâçÁºñËæëÂå∫ÂüüÊØèË°åÂØπÂ∫îÁöÑÈ¢ÑËßàÂÅèÁßªË∑ùÁ¶ªÔºåÊúâÊ†áËÆ∞Ë°åÂè∑ÁöÑÂÖÉÁ¥†Áõ¥Êé•ËÆ°ÁÆóoffsetÔºåÊú™Ê†áËÆ∞Ë°åÂè∑ÁöÑÂÖÉÁ¥†Â∞±Á≠âÊØîËÆ°ÁÆó</p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÁºñËæëÂå∫ÂüüÊØèË°åÂØπÂ∫îÁöÑÈ¢ÑËßàÂÅèÁßªË∑ùÁ¶ª</span>
<span class="comment"> * <span class="doctag">@param</span> editor ÁºñËæëÂÖÉÁ¥†</span>
<span class="comment"> * <span class="doctag">@param</span> review È¢ÑËßàÂÖÉÁ¥†</span>
<span class="comment"> * <span class="doctag">@returns</span> number[]</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="title function_">buildScrollMap</span> = (<span class="params"></span>
<span class="params">  editor: HTMLTextAreaElement,</span>
<span class="params">  review: HTMLDivElement</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> <span class="attr">lineHeightMap</span>: number[] = []
  <span class="keyword">let</span> linesCount = <span class="number">0</span> <span class="comment">// ÁºñËæëÂå∫ÊÄªË°åÊï∞</span>

  <span class="comment">/**</span>
<span class="comment">   * ‰∏¥Êó∂ÂàõÂª∫ÂÖÉÁ¥†Ëé∑ÂèñÊØèÊ¨°Êç¢Ë°å‰πãÈó¥ÁöÑÊÄªË°åÊï∞</span>
<span class="comment">   */</span>
  <span class="keyword">const</span> sourceLine = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)
  sourceLine.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;absolute&#x27;</span>
  sourceLine.<span class="property">style</span>.<span class="property">visibility</span> = <span class="string">&#x27;hidden&#x27;</span>
  sourceLine.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&#x27;auto&#x27;</span>
  sourceLine.<span class="property">style</span>.<span class="property">width</span> = <span class="string">`<span class="subst">$&#123;editor.clientWidth&#125;</span>px`</span>
  sourceLine.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&#x27;15px&#x27;</span>
  sourceLine.<span class="property">style</span>.<span class="property">lineHeight</span> = <span class="string">`<span class="subst">$&#123;LINE_HEIGHT&#125;</span>px`</span>
  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(sourceLine)
  <span class="keyword">let</span> acc = <span class="number">0</span>
  editor.<span class="property">value</span>.<span class="title function_">split</span>(<span class="string">&#x27;\n&#x27;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">str</span>) =&gt;</span> &#123;
    lineHeightMap.<span class="title function_">push</span>(acc)
    <span class="keyword">if</span> (str.<span class="property">length</span> === <span class="number">0</span>) &#123;
      acc++
      <span class="keyword">return</span>
    &#125;
    sourceLine.<span class="property">textContent</span> = str
    <span class="keyword">const</span> h = sourceLine.<span class="property">offsetHeight</span>
    acc += <span class="title class_">Math</span>.<span class="title function_">round</span>(h / <span class="variable constant_">LINE_HEIGHT</span>)
  &#125;)
  sourceLine.<span class="title function_">remove</span>()
  lineHeightMap.<span class="title function_">push</span>(acc)
  linesCount = acc

  <span class="comment">// ÊúÄÁªàËæìÂá∫ÁöÑÂÅèÁßªmap</span>
  <span class="keyword">const</span> <span class="attr">_scrollMap</span>: number[] = <span class="keyword">new</span> <span class="title class_">Array</span>(linesCount).<span class="title function_">fill</span>(-<span class="number">1</span>)

  <span class="comment">/**</span>
<span class="comment">   * Ëé∑ÂèñÊ†áËÆ∞Ë°åÂè∑ÁöÑoffsetË∑ùÁ¶ª</span>
<span class="comment">   */</span>
  <span class="keyword">const</span> nonEmptyList = []
  nonEmptyList.<span class="title function_">push</span>(<span class="number">0</span>)
  _scrollMap[<span class="number">0</span>] = <span class="number">0</span>
  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;.line&#x27;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">el</span>) =&gt;</span> &#123;
    <span class="keyword">let</span> <span class="attr">t</span>: string | number = el.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-line&#x27;</span>) <span class="keyword">as</span> string
    <span class="keyword">if</span> (t === <span class="string">&#x27;&#x27;</span>) &#123;
      <span class="keyword">return</span>
    &#125;
    t = lineHeightMap[<span class="title class_">Number</span>(t)]
    <span class="keyword">if</span> (t !== <span class="number">0</span>) &#123;
      nonEmptyList.<span class="title function_">push</span>(t)
    &#125;
    _scrollMap[t] = <span class="title class_">Math</span>.<span class="title function_">round</span>((el <span class="keyword">as</span> <span class="title class_">HTMLElement</span>).<span class="property">offsetTop</span> - review.<span class="property">offsetTop</span>)
  &#125;)

  nonEmptyList.<span class="title function_">push</span>(linesCount)
  _scrollMap[linesCount] = review.<span class="property">scrollHeight</span>

  <span class="comment">/**</span>
<span class="comment">   * Êú™Ê†áËÆ∞Ë°åÂè∑ÁöÑÂÖÉÁ¥†Á≠âÊØîËÆ°ÁÆó</span>
<span class="comment">   */</span>
  <span class="keyword">let</span> pos = <span class="number">0</span>
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; linesCount; i++) &#123;
    <span class="keyword">if</span> (_scrollMap[i] !== -<span class="number">1</span>) &#123;
      pos++
      <span class="keyword">continue</span>
    &#125;
    <span class="keyword">const</span> a = nonEmptyList[pos]
    <span class="keyword">const</span> b = nonEmptyList[pos + <span class="number">1</span>]
    _scrollMap[i] = <span class="title class_">Math</span>.<span class="title function_">round</span>(
      (_scrollMap[b] * (i - a) + _scrollMap[a] * (b - i)) / (b - a)
    )
  &#125;

  <span class="keyword">return</span> _scrollMap
&#125;</code></pre>
</li>
<li><p>ÁºñËæëÂå∫ÂüüÊªöÂä®Ê†πÊçÆÂÖ∑‰ΩìË°åËé∑ÂèñÈúÄÊªöÂä®È´òÂ∫¶</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">editorScroll</span> = (<span class="params"></span>
<span class="params">  editor: HTMLTextAreaElement,</span>
<span class="params">  preview: HTMLDivElement</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">if</span> (!scrollMap) &#123;
    scrollMap = <span class="title function_">buildScrollMap</span>(editor, preview)
  &#125;

  <span class="keyword">const</span> lineNo = <span class="title class_">Math</span>.<span class="title function_">floor</span>(editor.<span class="property">scrollTop</span> / <span class="variable constant_">LINE_HEIGHT</span>)
  <span class="keyword">const</span> posTo = scrollMap[lineNo]
  preview.<span class="title function_">scrollTo</span>(&#123; <span class="attr">top</span>: posTo &#125;)
&#125;</code></pre></li>
<li><p>È¢ÑËßàÂå∫ÂüüÊªöÂä®Ê†πÊçÆÂΩìÂâçÁöÑÊªöÂä®È´òÂ∫¶Êü•ÂØπÂ∫îÁºñËæëÂå∫ÂüüÁöÑË°åÔºåÁÑ∂ÂêéÊ†πÊçÆËÆ°ÁÆóÊªöÂä®È´òÂ∫¶</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">previewScroll</span> = (<span class="params"></span>
<span class="params">  editor: HTMLTextAreaElement,</span>
<span class="params">  preview: HTMLDivElement</span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">if</span> (!scrollMap) &#123;
    scrollMap = <span class="title function_">buildScrollMap</span>(editor, preview)
  &#125;

  <span class="keyword">const</span> lines = <span class="title class_">Object</span>.<span class="title function_">keys</span>(scrollMap)
  <span class="keyword">if</span> (lines.<span class="property">length</span> &lt; <span class="number">1</span>) &#123;
    <span class="keyword">return</span>
  &#125;
  <span class="keyword">let</span> line = lines[<span class="number">0</span>]
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; lines.<span class="property">length</span>; i++) &#123;
    <span class="keyword">if</span> (scrollMap[<span class="title class_">Number</span>(lines[i])] &lt; preview.<span class="property">scrollTop</span>) &#123;
      line = lines[i]
      <span class="keyword">continue</span>
    &#125;
    <span class="keyword">break</span>
  &#125;
  editor.<span class="title function_">scrollTo</span>(&#123; <span class="attr">top</span>: <span class="variable constant_">LINE_HEIGHT</span> * <span class="title class_">Number</span>(line) &#125;)
&#125;</code></pre></li>
</ol>
<h3 id="ÂêåÊ≠•ÊªöÂä®Ê≥®ÊÑèÁÇπ"><a href="#ÂêåÊ≠•ÊªöÂä®Ê≥®ÊÑèÁÇπ" class="headerlink" title="ÂêåÊ≠•ÊªöÂä®Ê≥®ÊÑèÁÇπ"></a>ÂêåÊ≠•ÊªöÂä®Ê≥®ÊÑèÁÇπ</h3><ol>
<li>Âú®ÊîπÂèòÁºñËæëÂÜÖÂÆπÂíåÁ™óÂè£Â§ßÂ∞èÊó∂ÈúÄÊ∏ÖÁ©∫ËÆ°ÁÆóÁªìÊûúÔºåÂõ†‰∏∫Ëøô‰∏§‰∏™‰∏ÄÊîπÂèòÔºåÊØèË°åÁöÑÂÅèÁßªË∑ùÁ¶ªÂ∞±‰ºöÂèëÁîüÂèòÂåñÔºåÂú®ÊªöÂä®Êó∂ÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó</li>
<li>ÂêåÊ≠•ÊªöÂä®Êó∂‰ºöÊúâ‰∏Ä‰∏™Êó†ÈôêËß¶ÂèëÁöÑÈóÆÈ¢òÔºåÂõ†‰∏∫ÁºñËæëÂå∫ÂüüÊªöÂä®Ôºå‰ºöËß¶ÂèëÈ¢ÑËßàÂå∫ÂüüÁöÑ<code>scrollTo()</code>ÔºåÁÑ∂ÂêéÈ¢ÑËßàÂå∫ÂüüÁöÑÊªöÂä®ÁõëÂê¨ÊñπÊ≥ïÂ∞±‰ºöË¢´Ëß¶ÂèëÔºåÁÑ∂ÂêéËøôÊ†∑Â∞±‰ºöÊó†ÈôêËß¶Âèë‰∏ãÂéªÔºåÊâÄ‰ª•ÈúÄË¶Å‰∏Ä‰∏™ÂèòÈáèËÆ∞‰ΩèÂΩìÂâçÁöÑÊâãÂä®ÊªöÂä®ÁöÑÂå∫ÂüüÔºåËøõË°åÈôêÂà∂</li>
</ol>
<h2 id="ÁõÆÂΩïÂàóË°®ÁîüÊàê"><a href="#ÁõÆÂΩïÂàóË°®ÁîüÊàê" class="headerlink" title="ÁõÆÂΩïÂàóË°®ÁîüÊàê"></a>ÁõÆÂΩïÂàóË°®ÁîüÊàê</h2><p>ÁõÆÂΩïÂàóË°®ÈÄöËøárulesÁöÑ<code>heading_open</code>ÊñπÊ≥ïÔºåËé∑ÂèñÂΩìÂâçÊ†áÈ¢òÁöÑtokenÔºåÁÑ∂ÂêéÈÄöËøátokenÂæóÂá∫Ê†áÈ¢òÁöÑÂÖ∑‰ΩìÂÜÖÂÆπËøõË°åÊãºÊé•ÔºåÊúÄÂêéÊ†πÊçÆlevelËÆ°ÁÆóÂ≠ó‰ΩìÂ§ßÂ∞è</p>
<ul>
<li>Ëé∑ÂèñÊ†áÈ¢òÂÜÖÂÆπ<pre><code class="highlight js"><span class="keyword">const</span> <span class="title function_">getTitle</span> = (<span class="params">tokens: Token[], idx: number</span>) =&gt; &#123;
  <span class="keyword">const</span> &#123; children &#125; = tokens[idx + <span class="number">1</span>]
  <span class="keyword">const</span> &#123; markup &#125; = tokens[idx]
  <span class="keyword">const</span> val = children?.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;acc&#125;</span><span class="subst">$&#123;cur.content&#125;</span>`</span>, <span class="string">&#x27;&#x27;</span>) || <span class="string">&#x27;&#x27;</span>
  toc.<span class="title function_">push</span>(&#123;
    val,
    <span class="attr">level</span>: markup.<span class="property">length</span>
  &#125;)
&#125;</code></pre></li>
<li>htmlÂ±ïÁ§∫<pre><code class="highlight js">&#123;showToc &amp;&amp; (
  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.toc&#125;</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.tocTitle&#125;</span>&gt;</span>ÁõÆÂΩï<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">      &#123;tocList.map((&#123; val, level &#125;, index) =&gt; &#123;</span>
<span class="language-xml">        const fontSize = ((7 - level) / 10) * 40</span>
<span class="language-xml"></span>
<span class="language-xml">        return (</span>
<span class="language-xml">          <span class="tag">&lt;<span class="name">div</span></span></span>
<span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span>
<span class="tag"><span class="language-xml">              <span class="attr">marginLeft:</span> `$&#123;<span class="attr">level</span> * <span class="attr">10</span>&#125;<span class="attr">px</span>`,</span></span>
<span class="tag"><span class="language-xml">              <span class="attr">fontSize:</span> `$&#123;<span class="attr">fontSize</span> &gt;</span> 12 ? fontSize : 12&#125;px`</span>
<span class="language-xml">            &#125;&#125;</span>
<span class="language-xml">            key=&#123;index&#125;</span>
<span class="language-xml">          &gt;</span>
<span class="language-xml">            &#123;val&#125;</span>
<span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
<span class="language-xml">        )</span>
<span class="language-xml">      &#125;)&#125;</span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
)&#125;</code></pre></li>
</ul>
<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>ÂèØËÉΩÂÆåÊàêÁöÑÊúâÁÇπÁ≤óÁ≥ôÔºå‰ª•ÂêéÊúâÊó∂Èó¥ÁªßÁª≠ÂÆåÂñÑÁªÜËäÇÔºåÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª</p>
<h2 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h2><ul>
<li><a href="https://blog.csdn.net/m0_67393295/article/details/123220722">ÊâãÊääÊâãÂ∏¶‰Ω†10ÂàÜÈíüÊâãÊí∏‰∏Ä‰∏™ÁÆÄÊòìÁöÑMarkdownÁºñËæëÂô®</a></li>
<li><a href="https://github.com/markdown-it/markdown-it/blob/master/support/demo_template/index.js">markdown-it.github.io</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>markdown</tag>
        <tag>markdown-it</tag>
      </tags>
  </entry>
  <entry>
    <title>Â∞èÁ®ãÂ∫èÊªöÂä®Êó•ÂéÜÁªÑ‰ª∂</title>
    <url>/2021/04/13/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%BB%9A%E5%8A%A8%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="Â∞èÁ®ãÂ∫èÊªöÂä®Êó•ÂéÜÁªÑ‰ª∂"><a href="#Â∞èÁ®ãÂ∫èÊªöÂä®Êó•ÂéÜÁªÑ‰ª∂" class="headerlink" title="Â∞èÁ®ãÂ∫èÊªöÂä®Êó•ÂéÜÁªÑ‰ª∂"></a>Â∞èÁ®ãÂ∫èÊªöÂä®Êó•ÂéÜÁªÑ‰ª∂</h2><p>ÂâçÊÆµÊó∂Èó¥‰∫ßÂìÅÊèêÂá∫Ëøô‰∏™ÈúÄÊ±ÇÔºåË¶ÅÊ±ÇÂÅö‰∏Ä‰∏™Êó•ÂéÜÂÆπÂô®ÔºåÂπ∂Ë¶ÅÊ±ÇÊòØÊªöÂä®Ôºå‰∏çËÉΩÊòØÈÇ£ÁßçÊØè‰∏™ÊúàÂàáÊç¢ÁöÑÂÆπÂô®ÔºåÊâÄ‰ª•ÊàëÂ∞±Âú®ÁΩë‰∏äÂ§ßÊ¶ÇÊü•Êâæ‰∫Ü‰∏Ä‰∏ãÁ±ª‰ººÁªÑ‰ª∂ÔºåÊªöÂä®ÁöÑÂÆπÂô®ËæÉÂ∞ëÔºå‰∫éÊòØÊàëÂ∞±Ëá™Â∑±ÂÜô‰∫ÜËøô‰∏™ÁªÑ‰ª∂Ôºå‰ª•‰∏ãÊòØÂ§ßÊ¶ÇÁöÑjsÊÄùË∑ØÔºåwxmlÂíåcssÂ∞±‰∏çÈôÑ‰∏ä‰∫ÜÔºåÊØè‰∏™UIÈÉΩÊúâ‰∏çÂêåÁöÑÊÉ≥Ê≥ï</p>
<ol>
<li><p>Âú®ready‰∏≠ÂàùÂßãÂåñÁªÑ‰ª∂Êï∞ÊçÆ</p>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * <span class="doctag">@description</span>: ÂàùÂßãÂåñ</span>
<span class="comment"> */</span>
<span class="title function_">ready</span>(<span class="params"></span>) &#123;
  <span class="comment">// Ëøô‰∏§‰∏™Êï∞ÊçÆÊòØ‰ªéÈ°µÈù¢‰∏≠‰º†ËøáÊù•ÁöÑÔºåËµ∑ÂßãÊó∂Èó¥ÂíåÁªìÊùüÊó∂Èó¥</span>
  <span class="comment">// Êï∞ÁªÑÁ±ªÂûã [year, month, day]</span>
  <span class="keyword">const</span> &#123; endDate, startDate &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  <span class="keyword">let</span> monthList = [] <span class="comment">// Ëøô‰∏™Áî®‰∫éwxml‰∏≠ÈÅçÂéÜÔºå‰ª•ÊØèÊúà‰∏∫item</span>

  <span class="comment">// Êú™Ë∑®Âπ¥</span>
  <span class="keyword">if</span> ( endDate[<span class="number">0</span>] === startDate[<span class="number">0</span>]) &#123;
    <span class="keyword">let</span> rangeMonth = endDate[<span class="number">1</span>] - startDate[<span class="number">1</span>]
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= rangeMonth; i++) &#123;
      <span class="keyword">let</span> date = [startDate[<span class="number">0</span>], startDate[<span class="number">1</span>] + i + <span class="number">1</span>]
      <span class="comment">// monthInitData()ÂàùÂßãÂåñÊØèÊúàÊï∞ÊçÆ</span>
      <span class="keyword">let</span> days = <span class="variable language_">this</span>.<span class="title function_">monthInitData</span>(startDate[<span class="number">0</span>], startDate[<span class="number">1</span>] + i)
      monthList.<span class="title function_">push</span>(&#123;
        date,
        days,
      &#125;)
    &#125;
  &#125; <span class="keyword">else</span> &#123;
    <span class="comment">// Ë∑®Âπ¥ÂâçÊúà‰ªΩ</span>
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, lng = <span class="number">12</span> - startDate[<span class="number">1</span>]; i &lt; lng; i++) &#123;
      <span class="keyword">let</span> date = [startDate[<span class="number">0</span>], startDate[<span class="number">1</span>] + i + <span class="number">1</span>]
      <span class="keyword">let</span> days = <span class="variable language_">this</span>.<span class="title function_">monthInitData</span>(startDate[<span class="number">0</span>], startDate[<span class="number">1</span>] + i)
      monthList.<span class="title function_">push</span>(&#123;
        date,
        days,
      &#125;)
    &#125;

    <span class="comment">// Ë∑®Âπ¥ÂêéÊúà‰ªΩ</span>
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt;= endDate[<span class="number">1</span>]; i++) &#123;
      <span class="keyword">let</span> date = [endDate[<span class="number">0</span>], i + <span class="number">1</span>]
      <span class="keyword">let</span> days = <span class="variable language_">this</span>.<span class="title function_">monthInitData</span>(endDate[<span class="number">0</span>], i)
      monthList.<span class="title function_">push</span>(&#123;
        date,
        days,
      &#125;)
    &#125;
  &#125;
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    monthList,
  &#125;)
&#125;</code></pre>
</li>
<li><p>ÂàùÂßãÂåñÊØèÊúàÊï∞ÊçÆ: </p>
<blockquote>
<p>ÈÄªËæëÊòØËé∑ÂèñÊØè‰∏™ÊúàÁ¨¨‰∏ÄÂ§©ÁöÑÊòüÊúüÊï∞ÂíåÊØè‰∏™ÊúàÁöÑÊúÄÂ§ßÂ§©Êï∞ÔºåÁÑ∂ÂêéÂú®‰πãÂâçÂíå‰πãÂêéÁöÑÁ©∫Êï∞ÊçÆÂ°´ÂÖÖitemÂç†‰Ωç<br>ÁÑ∂ÂêéÈÅçÂéÜÔºåÊ†πÊçÆ‰∏çÂêåÁöÑÈúÄÊ±ÇÔºåÂú®ÈÅçÂéÜ‰∏≠Â§ÑÁêÜÔºåÊúÄÂêéÂú®html‰∏≠flexÂ∏ÉÂ±ÄÂç≥ÂèØ</p>
</blockquote>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * <span class="doctag">@description</span>: ÂàùÂßãÂåñÊØèÊúàÊï∞ÊçÆ</span>
<span class="comment"> * <span class="doctag">@param</span>: &#123; number &#125; year Âπ¥</span>
<span class="comment"> * <span class="doctag">@param</span>: &#123; number &#125; month Êúà</span>
<span class="comment"> */</span>
<span class="title function_">monthInitData</span>(<span class="params">year, month</span>) &#123;
  <span class="keyword">let</span> &#123; calendarValue, startDate, endDate &#125;= <span class="variable language_">this</span>.<span class="property">data</span>, <span class="comment">// ÂΩìÂâçÁÇπÂáªÊó∂Èó¥ÔºåËµ∑ÂßãÊó∂Èó¥ÔºåÁªìÊùüÊó∂Èó¥</span>
    firstWeek = <span class="keyword">new</span> <span class="title class_">Date</span>(year, month, <span class="number">1</span>).<span class="title function_">getDay</span>(), <span class="comment">// Êú¨ÊúàÁöÑÁ¨¨‰∏ÄÂ§©ÁöÑÊòüÊúüÊï∞</span>
    days = [], <span class="comment">// Êó•ÊúüÊï∞ÁªÑ</span>
    max = <span class="variable language_">this</span>.<span class="title function_">getMonthMax</span>(year, month + <span class="number">1</span>), <span class="comment">// ÊØèÊúàÊúÄÂ§ßÂ§©Êï∞</span>
    lastWeek = <span class="keyword">new</span> <span class="title class_">Date</span>(year, (month + <span class="number">1</span>), <span class="number">0</span>).<span class="title function_">getDay</span>() <span class="comment">// Êú¨ÊúàÁöÑÊúÄÂêé‰∏ÄÂ§©ÁöÑÊòüÊúüÊï∞</span>

  <span class="comment">// Â°´ÂÖÖÊØèÊúà‰∏ÄÂè∑‰πãÂâçÁöÑÁ©∫Êï∞ÊçÆ</span>
  <span class="keyword">if</span> (firstWeek &gt; <span class="number">0</span>) &#123;
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; firstWeek; i++) &#123;
      days.<span class="title function_">push</span>(&#123;
        <span class="attr">day</span>: <span class="number">0</span>
      &#125;)
    &#125;
  &#125;

  <span class="keyword">let</span> currentTime = <span class="number">0</span>, 
      startTime = <span class="number">0</span>,
      endTime = <span class="number">0</span>

  <span class="keyword">if</span> (calendarValue[<span class="number">0</span>]) &#123;
    currentTime = <span class="keyword">new</span> <span class="title class_">Date</span>(calendarValue[<span class="number">0</span>], calendarValue[<span class="number">1</span>], calendarValue[<span class="number">2</span>]).<span class="title function_">getTime</span>()
  &#125;
  <span class="keyword">if</span> (startDate[<span class="number">0</span>]) &#123;
    startTime = <span class="keyword">new</span> <span class="title class_">Date</span>(startDate[<span class="number">0</span>], startDate[<span class="number">1</span>], startDate[<span class="number">2</span>]).<span class="title function_">getTime</span>()
  &#125;
  <span class="keyword">if</span> (endDate[<span class="number">0</span>]) &#123;
    endTime = <span class="keyword">new</span> <span class="title class_">Date</span>(endDate[<span class="number">0</span>], endDate[<span class="number">1</span>], endDate[<span class="number">2</span>]).<span class="title function_">getTime</span>()
  &#125;

  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= max; i++) &#123;
    <span class="comment">// ‰ª•‰∏ãÁä∂ÊÄÅÊòØÈúÄË¶ÅÂú®html‰∏≠Âà§Êñ≠Â§ÑÁêÜÔºåÊ†πÊçÆËá™Â∑±ÈúÄÊ±ÇÊîπÂèò</span>
    <span class="keyword">let</span> current = <span class="literal">false</span>, <span class="comment">// ÂΩìÂâçÁÇπÂáªÁä∂ÊÄÅ</span>
      disabled = <span class="literal">false</span>, <span class="comment">// Á¶ÅÊ≠¢Áä∂ÊÄÅ</span>
      now = <span class="literal">false</span>, <span class="comment">// ‰ªäÂ§©ÊòæÁ§∫ÊñáÊ°à</span>
      time = <span class="keyword">new</span> <span class="title class_">Date</span>(year, month, i).<span class="title function_">getTime</span>(),
      nowTime = [<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>(), <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMonth</span>(), <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>()]
    <span class="keyword">if</span> (currentTime &amp;&amp; currentTime == time) current = <span class="literal">true</span>
    <span class="keyword">if</span> (startTime &amp;&amp; startTime &gt; time) disabled = <span class="literal">true</span>
    <span class="keyword">if</span> (endTime &amp;&amp; endTime &lt; time) disabled = <span class="literal">true</span>
    <span class="keyword">if</span> (year === nowTime[<span class="number">0</span>] &amp;&amp; month === nowTime[<span class="number">1</span>] &amp;&amp; i === nowTime[<span class="number">2</span>]) now = <span class="literal">true</span>

    days.<span class="title function_">push</span>(&#123;
      <span class="attr">day</span>: i,
      current,
      disabled,
      now,
    &#125;)
  &#125;

  <span class="comment">// Â°´ÂÖÖÊØèÊúàÊúÄÂêé‰∏ÄÂ§©‰πãÂêéÁöÑÁ©∫Êï∞ÊçÆ</span>
  <span class="keyword">if</span> (lastWeek != <span class="number">6</span>) &#123;
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = (<span class="number">6</span> - lastWeek); i &lt; l; i++) &#123;
      days.<span class="title function_">push</span>(&#123;
        <span class="attr">day</span>: <span class="number">0</span>
      &#125;)
    &#125;
  &#125;
  <span class="keyword">return</span> days
&#125;,

<span class="comment">/**</span>
<span class="comment"> * Ëé∑Âèñ‰∏Ä‰∏™ÊúàÊúÄÂ§ßÂ§©Êï∞</span>
<span class="comment"> * <span class="doctag">@method</span> <span class="variable">getMonthMax</span></span>
<span class="comment"> * <span class="doctag">@param</span>: &#123; number &#125; year Âπ¥‰ªΩ</span>
<span class="comment"> * <span class="doctag">@param</span>: &#123; number &#125; month Êúà‰ªΩ</span>
<span class="comment"> */</span>
<span class="title function_">getMonthMax</span>(<span class="params">year, month</span>) &#123;
  <span class="keyword">let</span> max = <span class="number">31</span>
  <span class="keyword">if</span> (month == <span class="number">4</span> || month == <span class="number">6</span> || month == <span class="number">9</span> || month == <span class="number">11</span>) &#123;
    max = <span class="number">30</span>
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (month == <span class="number">2</span>) &#123;
    <span class="keyword">if</span> (((year % <span class="number">4</span>) == <span class="number">0</span> &amp;&amp; (year % <span class="number">100</span>) &gt; <span class="number">0</span>) || (year % <span class="number">400</span>) == <span class="number">0</span>) &#123;
      max = <span class="number">29</span>
    &#125; <span class="keyword">else</span> &#123;
      max = <span class="number">28</span>
    &#125; 
  &#125;

  <span class="keyword">return</span> max
&#125;,
</code></pre></li>
</ol>
<ul>
<li>‰ª•‰∏äÂ∞±ÊòØÊ†∏ÂøÉÈÄªËæëÔºåÂÉè‰∏Ä‰∫õÂºπÁ™ó‰∫ã‰ª∂Âíå‰∏Ä‰∫õÁÇπÂáª‰∫ã‰ª∂Â∞±‰∏çÈôÑ‰∏äÊù•‰∫Ü</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂâçÁ´ØÁôªÂΩïÊ®°ÂùóËÆæËÆ°</title>
    <url>/2022/09/10/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%89%8D%E7%AB%AF%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97%E8%AE%BE%E8%AE%A1/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁôªÂΩïÂü∫Êú¨‰∏äÊòØÊØè‰∏™Â∞èÁ®ãÂ∫èÈÉΩÂøÖÂ§áÁöÑÂäüËÉΩÔºå‰ΩÜÊòØÈöèÁùÄ‰∏öÂä°ÁöÑÈÄêÊ∏êÂ§çÊùÇÔºåÈúÄË¶ÅËÄÉËôëÁöÑÊÉÖÂÜµ‰ºöË∂äÊù•Ë∂äÂ§öÔºåÊâÄ‰ª•ÁôªÂΩïÂäüËÉΩÁöÑÂÅ•Â£ÆÂíåÈ´òÊïàÊòØÂÄºÂæóÈáçÁÇπÂÖ≥Ê≥®ÁöÑÔºåÊàë‰ºöÊåâÁÖß‰ª•ÂæÄÁªèÈ™åÂÆûÁé∞‰∏Ä‰∏™ËæÉ‰ºòÈõÖÁöÑÁôªÂΩïÊñπÊ°à</p>
<h2 id="Âü∫Êú¨ÁôªÂΩïÊµÅÁ®ã"><a href="#Âü∫Êú¨ÁôªÂΩïÊµÅÁ®ã" class="headerlink" title="Âü∫Êú¨ÁôªÂΩïÊµÅÁ®ã"></a>Âü∫Êú¨ÁôªÂΩïÊµÅÁ®ã</h2><ol>
<li>Ëé∑ÂèñÂæÆ‰ø°ÁôªÂΩïÂá≠ËØÅÔºåÈÄöËøá<code>wx.login</code>Ëé∑ÂèñÔºåËøô‰∏™api‰ºöËøîÂõû‰∏Ä‰∏™Â∏¶ÊúâÊó∂ÊïàÊÄßÁöÑcode</li>
<li>ÂèëÈÄÅcodeÁªôÊúçÂä°Á´ØÔºåËøô‰∏ÄÊ≠•Â∞±ÊòØÈÄöËøá‰Ω†ÂíåÂêéÁ´ØÂÆö‰πâÁöÑÊé•Âè£ÂèëÈÄÅ</li>
<li>ÊúçÂä°Á´ØÊ†πÊçÆÂâçÁ´ØÂèëÈÄÅÁöÑcodeËé∑ÂèñÁî®Êà∑Ë∫´‰ªΩ‰ø°ÊÅØÔºåÂΩìÁÑ∂Ëøô‰∏ÄÊ≠•Â∞±‰∏çÊòØÂâçÁ´ØÁöÑÈÄªËæë‰∫Ü</li>
<li>ÊúçÂä°Á´ØÂ§ÑÁêÜÂÆåÂêéÔºå‰ºöÊääÁî®Êà∑‰ø°ÊÅØÂíåsessinIdÂèëÈÄÅÁªôÂâçÁ´ØÔºåÁÑ∂ÂêéÂâçÁ´ØÊääÈúÄË¶ÅÁöÑ‰ø°ÊÅØËøõË°åÂ≠òÂÇ®ÔºåÊé•‰∏ãÊù•ÁöÑËØ∑Ê±ÇÂ∞±ÂèØ‰ª•Â∏¶ÁùÄsessinIdÊù•Ë°®Á§∫Ë∫´‰ªΩ</li>
<li>‰∏ãÈù¢ÊòØÂæÆ‰ø°ÂÆòÊñπÁöÑÊµÅÁ®ãÂõæ<br><img src="https://img-blog.csdnimg.cn/3b0b114c140247ebbc666b027dfbda66.png#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></li>
</ol>
<h2 id="ÈÄªËæëÂ∞ÅË£Ö"><a href="#ÈÄªËæëÂ∞ÅË£Ö" class="headerlink" title="ÈÄªËæëÂ∞ÅË£Ö"></a>ÈÄªËæëÂ∞ÅË£Ö</h2><p>ÈíàÂØπ‰ª•‰∏äÁôªÂΩïÊµÅÁ®ãÔºåÊàë‰ºöÂ∞ÅË£Ö‰ª•‰∏ãÂá†‰∏™ÊñπÊ≥ï‰æõ‰∏öÂä°Â±ÇË∞ÉÁî®</p>
<table>
<thead>
<tr>
<th>ÊñπÊ≥ïÂêç</th>
<th>ÂäüËÉΩ</th>
</tr>
</thead>
<tbody><tr>
<td><code>getLoginCode</code></td>
<td>Ëé∑ÂèñÂæÆ‰ø°ÁôªÂΩïÂá≠ËØÅ</td>
</tr>
<tr>
<td><code>staticLogin</code></td>
<td>ÈùôÈªòÁôªÂΩï</td>
</tr>
<tr>
<td><code>singleLogin</code></td>
<td>ÁôªÂΩïËØ∑Ê±ÇÂ∞ÅË£Ö</td>
</tr>
<tr>
<td><code>checkLogin</code></td>
<td>Âà§Êñ≠ÊòØÂê¶ÁôªÂΩï</td>
</tr>
<tr>
<td><code>getPhoneNum</code></td>
<td>Ëé∑ÂèñÂæÆ‰ø°ÊéàÊùÉÊâãÊú∫Âè∑</td>
</tr>
</tbody></table>
<ul>
<li><p>Êàë‰π†ÊÉØÂú®promiseËØ∑Ê±Ç‰∏≠‰ΩøÁî®await-toÊñπÊ≥ïÔºåËøôÊòØ‰∏Ä‰∏™ÈíàÂØπÂºÇÊ≠•ÊØîËæÉ‰ºòÈõÖÁöÑÊñπÊ°à</p>
<ul>
<li><a href="https://blog.grossman.io/how-to-write-async-await-without-try-catch-blocks-in-javascript/">How to write async await without try-catch blocks in Javascript</a></li>
</ul>
</li>
<li><p>getLoginCodeÔºå‰∏Ä‰∏™ÁÆÄÂçïÁöÑpromiseÂ∞ÅË£ÖËé∑Âèñcode</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getLoginCode</span> = (<span class="params"></span>) =&gt; &#123;
  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;
      wx.<span class="title function_">login</span>(&#123;
        success (res) &#123;
          <span class="keyword">if</span> (res.<span class="property">code</span>) &#123;
            <span class="title function_">resolve</span>(res.<span class="property">code</span>)
          &#125; <span class="keyword">else</span> &#123;
            <span class="title function_">reject</span>(res)
          &#125;
        &#125;,
        <span class="title function_">fail</span>(<span class="params">err</span>) &#123;
          <span class="title function_">reject</span>(err)
        &#125;
      &#125;)
  &#125;)
&#125;</code></pre>
</li>
<li><p>ÈùôÈªòÁôªÂΩïÂ∞ÅË£ÖÔºåËé∑ÂèñÁî®Êà∑‰ø°ÊÅØÔºåÂπ∂ËøõË°åÂ≠òÂÇ®</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">staticLogin</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;
  <span class="comment">// Â¶ÇÊûúÂ∑≤ÁªèÁôªÂΩïÔºåÁõ¥Êé•ËøîÂõûÁôªÂΩï‰ø°ÊÅØ</span>
  <span class="keyword">if</span> (<span class="title function_">checkLogin</span>()) &#123;
    <span class="keyword">return</span> <span class="title function_">getLoginInfo</span>()
  &#125;
  <span class="keyword">const</span> [loginErr, loginRes] = <span class="keyword">await</span> <span class="title function_">_to</span>(<span class="title function_">singleLogin</span>());
  <span class="keyword">if</span> (loginErr) &#123;
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(loginErr);
  &#125;
  <span class="comment">// Â≠òÂÇ®Áî®Êà∑‰ø°ÊÅØÔºåËøô‰∏™Â∞±Ê†πÊçÆËá™Â∑±ÁöÑÊÉÖÂÜµ‰∫ÜÔºåÊàëËøôÈöè‰æøÂÆö‰∏™ÊñπÊ≥ï</span>
  <span class="title function_">setLoginInfo</span>(&#123;
    ...loginRes,
  &#125;)
  <span class="keyword">return</span> loginRes;
&#125;</code></pre>
</li>
<li><p>ÁôªÂΩïËØ∑Ê±ÇÂ∞ÅË£ÖÔºåËøôÈáåÊàëÊòØÁî®Âçï‰æãÊ®°ÂºèÂπ∂ËøîÂõû‰∫Ü‰∏Ä‰∏™promiseÔºåËøôÊ†∑ÂÅöÊòØ‰∏∫‰∫ÜÔºå‰Ω†Â§öÊ¨°Ë∞ÉÁî®singleLoginÊó∂ÔºåÊØîÂ¶ÇÂø´ÈÄüÂàáÊç¢È°µÈù¢ÔºåÂø´ÈÄüÁÇπÂáªÂ§ö‰∏™ÈúÄÁôªÂΩïÂå∫ÂüüÔºåÂú®Êï∞ÊçÆÊ≤°ÊúâËøîÂõûÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ºöÁ≠âÂæÖÔºåËÄå‰∏çÊòØËß¶ÂèëÂ§öÊ¨°ËØ∑Ê±Ç</p>
<pre><code class="highlight js"><span class="keyword">let</span> loginInstance = <span class="literal">null</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">singleLogin</span> = (<span class="params"></span>) =&gt; &#123;
  <span class="keyword">if</span> (loginInstance) &#123;
    <span class="keyword">return</span> loginInstance
  &#125;
  <span class="comment">// loginReqÔºöÂ∞ÅË£ÖËØ∑Ê±ÇÔºåÂåÖÊã¨ËØ∑Ê±ÇÂêéÁ´ØÂíågetLoginCode</span>
  loginInstance = <span class="title function_">loginReq</span>()
  loginInstance.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;
    loginInstance = <span class="literal">null</span>;
    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">reject</span>(err);
  &#125;)
  <span class="keyword">return</span> loginInstance
&#125;</code></pre>
</li>
<li><p>checkLoginÔºåÊ£ÄÊü•ÊòØÂê¶ÁôªÂΩïÔºåËøô‰∏™Â∞±Áúã‰Ω†Â≠òÂÇ®Âú®ÈÇ£‰∏™Âú∞Êñπ‰∫ÜÔºåËßÜÊÉÖÂÜµËÄåÂÆö</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">checkLogin</span> = (<span class="params"></span>) =&gt; &#123;
  <span class="keyword">return</span> <span class="title class_">Boolean</span>(loginInfo?.<span class="property">sid</span>)
&#125;</code></pre>
</li>
<li><p>getPhoneNum</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getPhoneNum</span> = <span class="keyword">async</span> (<span class="params">iv, encryptedData</span>) =&gt; &#123;
  <span class="keyword">const</span> [codeErr, codeRes] = <span class="keyword">await</span> <span class="title function_">_to</span>(<span class="title function_">getLoginCode</span>())
  <span class="keyword">if</span> (codeErr) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(codeErr);
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(codeErr);
  &#125;
  <span class="comment">// decryptÔºöËØ∑Ê±ÇÂêéÁ´Ø</span>
  <span class="keyword">const</span> [phoneErr, phoneRes] = <span class="keyword">await</span> <span class="title function_">_to</span>(<span class="title function_">decrypt</span>(&#123;
    iv,
    encryptedData,
    <span class="attr">code</span>: codeRes.<span class="property">code</span>
  &#125;))
  <span class="keyword">if</span> (phoneErr) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(phoneErr);
    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(phoneErr);
  &#125;
  <span class="keyword">const</span> phoneNumber = phoneRes.<span class="property">result</span>.<span class="property">phoneNumber</span>
  <span class="title function_">setLoginInfo</span>(&#123;
    phoneNumber,
  &#125;)
  <span class="keyword">return</span> phoneNumber
&#125;</code></pre></li>
</ul>
<h2 id="‰∏öÂä°Â±Ç"><a href="#‰∏öÂä°Â±Ç" class="headerlink" title="‰∏öÂä°Â±Ç"></a>‰∏öÂä°Â±Ç</h2><p>‰∏öÂä°Â±ÇÊàë‰ºöÂú®‰ª•‰∏ãÂá†‰∏™Âú∞ÊñπË∞ÉÁî®</p>
<ol>
<li><p>ËØ∑Ê±ÇÂâçÊ†πÊçÆoptionsÂà§Êñ≠ÊòØÂê¶ÈúÄÁôªÂΩïÔºåÂπ∂ËøõË°åÂ§ÑÁêÜ</p>
<pre><code class="highlight js"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">REQUEST</span> = <span class="keyword">async</span> (<span class="params">requestObj</span>) =&gt; &#123;
  <span class="comment">// isLogin ÂΩìÂâçÊé•Âè£ËØ∑Ê±ÇÊòØÂê¶ÈúÄË¶ÅÁôªÂΩï</span>
  <span class="keyword">if</span> (requestObj.<span class="property">isLogin</span> &amp;&amp; !<span class="title function_">checkLogin</span>()) &#123;
    <span class="keyword">const</span> [loginErr, loginRes] = <span class="keyword">await</span> <span class="title function_">_to</span>(<span class="title function_">staticLogin</span>());
    <span class="keyword">if</span> (loginErr) &#123;
      <span class="title class_">Toast</span>(<span class="string">&#x27;ÁôªÂΩïÂ§±Ë¥•&#x27;</span>)
      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(loginErr);
    &#125;
  &#125;
  ...
&#125;</code></pre>
</li>
<li><p>ÁôªÂΩïÊåâÈíÆÔºåËøô‰∏™‰∏ªË¶ÅÁî®‰∫éÁôªÂΩïÂ§±Ë¥•ÂÖúÂ∫ïÁöÑÊÉÖÂÜµÔºåËÆ©Áî®Êà∑‰∏ªÂä®ÁÇπÂáªÔºåÁî®‰∫éÁôªÂΩïÂºπÁ™óÁ≠âÁªÑ‰ª∂ÔºåÂè™ÈúÄË∞ÉÁî®<code>staticLogin</code>Âç≥ÂèØ</p>
</li>
<li><p>Ëé∑ÂèñÁî®Êà∑ÊéàÊùÉÊâãÊú∫Âè∑ÊåâÈíÆ</p>
<pre><code class="highlight js"><span class="comment">// index.html</span>
<span class="comment">// Áî®Êà∑‰∏ªÂä®Ëß¶ÂèëËøõË°åÊéàÊùÉÊâãÊú∫Âè∑</span>
&lt;button open-type=<span class="string">&quot;getPhoneNumber&quot;</span> bindgetphonenumber=<span class="string">&quot;bindPhoneNumber&quot;</span>&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span>
&lt;/button&gt;

<span class="comment">// index.js</span>
<span class="keyword">async</span> <span class="title function_">bindPhoneNumber</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> iv = e.<span class="property">detail</span>.<span class="property">iv</span>;
  <span class="keyword">const</span> encryptedData = e.<span class="property">detail</span>.<span class="property">encryptedData</span>;
  <span class="keyword">const</span> [phoneErr, phoneRes] = <span class="keyword">await</span> <span class="title function_">_to</span>(<span class="title function_">getPhoneNum</span>(iv, encryptedData));
  <span class="keyword">if</span> (phoneErr) &#123;
    <span class="title class_">Toast</span>(<span class="string">&#x27;Ëé∑ÂèñÊâãÊú∫Âè∑Â§±Ë¥•&#x27;</span>);
    <span class="keyword">return</span>;
  &#125;
  <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;getPhoneNumber&#x27;</span>, phoneRes);
&#125;</code></pre>
</li>
<li><p>È°µÈù¢ÁªÑ‰ª∂ÔºåÂú®Â∞èÁ®ãÂ∫è‰∏≠‰∏ÄËà¨ÈÉΩÊúâ‰∏Ä‰∏™È°µÈù¢ÁªÑ‰ª∂ÔºåÁî®‰∫éÂ∞ÅË£Ö‰∏Ä‰∫õÈ°µÈù¢ÂøÖÈúÄÁöÑÂäüËÉΩÔºåÊØîÂ¶ÇloadingÔºåÂØºËà™Ê†èÔºåÊó†ÊïàÈ°µÈù¢Á≠âÁ≠âÔºåÁôªÂΩï‰πüÊòØÂøÖÈúÄÁöÑÔºåÊâÄ‰ª•ÊàëÊääÁôªÂΩïÈÄªËæëÂ∞ÅË£ÖÂà∞È°µÈù¢ÁªÑ‰ª∂‰∏äÔºåÂ¶ÇÊûúÊàêÂäü‰ºöÈÄöËøátriggerEventËß¶ÂèëÁªôÈ°µÈù¢ÔºåÂ¶ÇÊûúÂ§±Ë¥•Â∞±ÂºπÂá∫ÁôªÂΩïÂºπÁ™óÔºåÂΩìÁÑ∂ËøôÁßçÂ§ÑÁêÜ‰∏çÂ§™ÁªÜÔºåÊ†πÊçÆ‰∏öÂä°ÁöÑ‰∏çÂêåÊîπÂèòÁõ∏ÂÖ≥ÁöÑÈÄªËæë<br><img src="https://img-blog.csdnimg.cn/f6cd710acc4d45a1a7d88042623ad4bc.png#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
</li>
</ol>
<pre><code class="highlight js"><span class="comment">// index.html</span>
&lt;view&gt;
  ...
  &lt;login-modal show=&#123;loginShow&#125; &#123;...props&#125; /&gt;
&lt;/view&gt;

<span class="comment">// index.js</span>
<span class="keyword">async</span> <span class="title function_">created</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> [loginErr, loginRes] = <span class="keyword">await</span> <span class="title function_">_to</span>(<span class="title function_">staticLogin</span>());
  <span class="keyword">if</span> (loginErr) &#123;
    <span class="title class_">Toast</span>(<span class="string">&#x27;ÁôªÂΩïÂ§±Ë¥•&#x27;</span>);
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      <span class="attr">loginShow</span>: <span class="literal">true</span>,
    &#125;);
    <span class="keyword">return</span>;
  &#125;
  <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;login&#x27;</span>, loginRes);
&#125;</code></pre>
<ol start="5">
<li>ËøòÊúâ‰∏Ä‰∫õ‰∏çÊòØÂ§™ÈÄöÁî®ÁöÑ‰∏öÂä°ÁªÑ‰ª∂Â∞±‰∏çÂèôËø∞‰∫Ü‚Ä¶</li>
</ol>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂçïÊåáÊãñÊãΩÂíåÂèåÊåáÁº©ÊîæÊóãËΩ¨</title>
    <url>/2021/08/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8D%95%E6%8C%87%E6%8B%96%E6%8B%BD%E5%92%8C%E5%8F%8C%E6%8C%87%E7%BC%A9%E6%94%BE%E6%97%8B%E8%BD%AC/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>Â∞èÁ®ãÂ∫èÂçïÊåáÊãñÊãΩÂíåÂèåÊåáÊìç‰ΩúÊòØ‰∏Ä‰∏™ÊØîËæÉÂ∏∏Áî®ÁöÑÂäüËÉΩÔºåÊïàÊûúÂ¶Ç‰∏ãÂõæ<br><img src="https://img-blog.csdnimg.cn/babbbc7162d241e9b0fb01e0b18531eb.gif#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
<ul>
<li>ÂÆûÁé∞Ëøô‰∏â‰∏™ÂäüËÉΩÔºå‰∏ªË¶ÅÁî®‰∏â‰∏™Ëß¶Êë∏‰∫ã‰ª∂<code>touchstart</code>„ÄÅ<code>touchmove</code>„ÄÅ<code>touchend</code><pre><code class="highlight html"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;height: 100vh; width: 100vw&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">image</span></span>
<span class="tag">    <span class="attr">src</span>=<span class="string">&quot;...&quot;</span></span>
<span class="tag">    <span class="attr">style</span>=<span class="string">&quot;transform: translate(&#123;&#123;translateX&#125;&#125;px, &#123;&#123;translateY&#125;&#125;px) scale(&#123;&#123;scale&#125;&#125;) rotate(&#123;&#123;rotate&#125;&#125;deg);&quot;</span></span>
<span class="tag">    <span class="attr">catch:touchstart</span>=<span class="string">&quot;touchStart&quot;</span></span>
<span class="tag">    <span class="attr">catch:touchmove</span>=<span class="string">&quot;touchMove&quot;</span></span>
<span class="tag">    <span class="attr">catch:touchend</span>=<span class="string">&quot;touchEnd&quot;</span></span>
<span class="tag">  /&gt;</span>
<span class="tag">&lt;/<span class="name">view</span>&gt;</span></code></pre></li>
<li>Áî®‰∫Ü‰ª•‰∏ãÂèòÈáè<pre><code class="highlight ts"><span class="title class_">Page</span>(&#123;
  <span class="attr">data</span>: &#123;
    <span class="attr">translateX</span>: <span class="number">0</span>, <span class="comment">// ‰ΩçÁßªxÂùêÊ†á Âçï‰Ωçpx</span>
    <span class="attr">translateY</span>: <span class="number">0</span>, <span class="comment">// ‰ΩçÁßªyÂùêÊ†á Âçï‰Ωçpx</span>
    <span class="attr">distance</span>: <span class="number">0</span>, <span class="comment">// ÂèåÊåáÊé•Ëß¶ÁÇπË∑ùÁ¶ª</span>
    <span class="attr">scale</span>: <span class="number">1</span>, <span class="comment">// Áº©ÊîæÂÄçÊï∞</span>
    <span class="attr">rotate</span>: <span class="number">0</span>, <span class="comment">// ÊóãËΩ¨ËßíÂ∫¶</span>
    <span class="attr">oldRotate</span>: <span class="number">0</span>, <span class="comment">// ‰∏ä‰∏ÄÊ¨°ÊóãËΩ¨ÂÅúÊ≠¢ÂêéÁöÑËßíÂ∫¶</span>
    <span class="attr">startMove</span>: &#123; <span class="comment">// Ëµ∑Âßã‰ΩçÁßªË∑ùÁ¶ª</span>
      <span class="attr">x</span>: <span class="number">0</span>,
      <span class="attr">y</span>: <span class="number">0</span>,
    &#125;,
    <span class="attr">startTouches</span>: [] <span class="comment">// Ëµ∑ÂßãÁÇπtouchÊï∞ÁªÑ</span>
  &#125;,
&#125;)</code></pre></li>
</ul>
<h2 id="ÂçïÊåáÊãñÊãΩ"><a href="#ÂçïÊåáÊãñÊãΩ" class="headerlink" title="ÂçïÊåáÊãñÊãΩ"></a>ÂçïÊåáÊãñÊãΩ</h2><ul>
<li>ÂÆûÁé∞ÂçïÊåáÊãñÊãΩÊØîËæÉÁÆÄÂçïÔºåÂè™ÈúÄË¶ÅËÆ∞ÂΩïÁßªÂä®ÁöÑÁÇπÂùêÊ†áÔºåÁÑ∂ÂêéÂáèÂéªËµ∑ÂßãÁÇπÂùêÊ†áÔºåÂ∞±ÂèØ‰ª•Ê±ÇÂá∫Áõ∏ÂØπÈ°µÈù¢ÁöÑÁßªÂä®Ë∑ùÁ¶ª</li>
<li><code>touchstart</code><pre><code class="highlight ts"><span class="title function_">touchStart</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> touches = e.<span class="property">touches</span>
  <span class="keyword">const</span> &#123; translateX, translateY &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  <span class="keyword">const</span> &#123; pageX, pageY &#125; = touches[<span class="number">0</span>]
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">startMove</span> = &#123;
    <span class="attr">x</span>: pageX - translateX,
    <span class="attr">y</span>: pageY - translateY
  &#125;
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">startTouches</span> = touches
&#125;,</code></pre></li>
<li><code>touchmove</code><pre><code class="highlight ts"><span class="title function_">touchMove</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> touches = e.<span class="property">touches</span>
  <span class="keyword">const</span> &#123; <span class="attr">pageX</span>: onePageX, <span class="attr">pageY</span>: onePageY &#125; = touches[<span class="number">0</span>]
  <span class="keyword">const</span> &#123; startMove &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    <span class="attr">translateX</span>: onePageX - startMove.<span class="property">x</span>,
    <span class="attr">translateY</span>: onePageY - startMove.<span class="property">y</span>
  &#125;)
&#125;</code></pre></li>
</ul>
<h2 id="ÂèåÊåáÁº©Êîæ"><a href="#ÂèåÊåáÁº©Êîæ" class="headerlink" title="ÂèåÊåáÁº©Êîæ"></a>ÂèåÊåáÁº©Êîæ</h2><ul>
<li>ÂèåÊåáÁº©ÊîæÁöÑÂéüÁêÜÊòØÊ†πÊçÆ‰∏§ÁÇπÂùêÊ†áÊ±ÇÂá∫Ë∑ùÁ¶ª(ÂãæËÇ°ÂÆöÁêÜ)ÔºåÁÑ∂ÂêéÂú®Áî®ÁßªÂä®ÂùêÊ†áÁöÑË∑ùÁ¶ªÊØîÂ∞±ÂèØ‰ª•Ê±ÇÂá∫Áº©ÊîæÂÄçÊï∞</li>
<li><code>touchmove</code><pre><code class="highlight js"><span class="title function_">touchMove</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> touches = e.<span class="property">touches</span>
  <span class="keyword">const</span> &#123; <span class="attr">pageX</span>: onePageX, <span class="attr">pageY</span>: onePageY &#125; = touches[<span class="number">0</span>]
  <span class="keyword">const</span> &#123; startMove, scale, <span class="attr">distance</span>: oldDistance, startTouches &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  <span class="keyword">if</span> (touches.<span class="property">length</span> === <span class="number">2</span> &amp;&amp; startTouches.<span class="property">length</span> === <span class="number">2</span>) &#123;
    <span class="comment">// ÂèåÊåáÁº©Êîæ</span>
    <span class="keyword">const</span> &#123; <span class="attr">pageX</span>: twoPageX, <span class="attr">pageY</span>: twoPageY &#125; = touches[<span class="number">1</span>]
    <span class="comment">// Ê±ÇÂá∫ÂΩìÂâçÂèåÊåáË∑ùÁ¶ª</span>
    <span class="keyword">const</span> distance = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>((twoPageX - onePageX) ** <span class="number">2</span> + (twoPageY - onePageY) ** <span class="number">2</span>)
    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">distance</span> = distance
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      <span class="attr">scale</span>: scale * (distance / (oldDistance || distance))
    &#125;)
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (startTouches.<span class="property">length</span> !== <span class="number">2</span>) &#123;
    <span class="comment">// ÂçïÊåáÊãñÊãΩ</span>
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      <span class="attr">translateX</span>: onePageX - startMove.<span class="property">x</span>,
      <span class="attr">translateY</span>: onePageY - startMove.<span class="property">y</span>
    &#125;)
  &#125;
&#125;</code></pre></li>
<li><code>startTouches.length !== 2</code>Ëøô‰∏™Âà§Êñ≠ÁöÑÂéüÂõ†ÊòØÈò≤Ê≠¢ÂõæÁâáË∑≥Âä®ÔºåÂõ†‰∏∫Â¶ÇÊûú‰Ω†‰∏§‰∏™ÊâãÊåáËß¶Êë∏ÔºåÁÑ∂ÂêéÁ¶ªÂºÄ‰∏Ä‰∏™ÊâãÊåáÔºåÊàëÊòØÁ¶ÅÊ≠¢ÊãñÊãΩÁöÑÔºåÂè™ÊúâÂèåÊåáÈÉΩÁ¶ªÂºÄÂêéÂÜçÊ¨°Ëß¶Êë∏ÊâçËÉΩÂçïÊåáÊãñÊãΩ</li>
</ul>
<h2 id="ÂèåÊåáÊóãËΩ¨"><a href="#ÂèåÊåáÊóãËΩ¨" class="headerlink" title="ÂèåÊåáÊóãËΩ¨"></a>ÂèåÊåáÊóãËΩ¨</h2><ul>
<li>ÂèåÊåáÊóãËΩ¨ÁöÑÂéüÁêÜÊòØÊ†πÊçÆ‰∏âËßíÂáΩÊï∞Ê±ÇÂá∫Ëµ∑ÂßãÁÇπÁöÑËßíÂ∫¶ÔºåÁÑ∂ÂêéÂÜçÊ±ÇÂá∫ÁßªÂä®ÂùêÊ†áÁöÑËßíÂ∫¶ÔºåÁõ∏ÂáèÁÑ∂ÂêéÂä†‰∏ä‰∏ä‰∏ÄÊ¨°ÊóãËΩ¨ÁöÑËßíÂ∫¶Â∞±Á≠â‰∫é‰Ω†ÂΩìÂâçÊâÄÈúÄÁöÑÈÄâÊã©ËßíÂ∫¶</li>
<li><code>touchmove</code></li>
</ul>
<pre><code class="highlight ts"><span class="title function_">touchMove</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> touches = e.<span class="property">touches</span>
  <span class="keyword">const</span> &#123; <span class="attr">pageX</span>: onePageX, <span class="attr">pageY</span>: onePageY &#125; = touches[<span class="number">0</span>]
  <span class="keyword">const</span> &#123; startMove, scale, <span class="attr">distance</span>: oldDistance, startTouches, oldRotate &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  <span class="keyword">if</span> (touches.<span class="property">length</span> === <span class="number">2</span> &amp;&amp; startTouches.<span class="property">length</span> === <span class="number">2</span>) &#123;
    <span class="keyword">const</span> &#123; <span class="attr">pageX</span>: twoPageX, <span class="attr">pageY</span>: twoPageY &#125; = touches[<span class="number">1</span>]
    <span class="keyword">const</span> distance = <span class="title class_">Math</span>.<span class="title function_">sqrt</span>((twoPageX - onePageX) ** <span class="number">2</span> + (twoPageY - onePageY) ** <span class="number">2</span>)
+   <span class="keyword">let</span> rotate = <span class="variable language_">this</span>.<span class="title function_">getAngle</span>(touches[<span class="number">0</span>], touches[<span class="number">1</span>]) - <span class="variable language_">this</span>.<span class="title function_">getAngle</span>(startTouches[<span class="number">0</span>], startTouches[<span class="number">1</span>]) + oldRotate
  <span class="comment">// Â¶ÇÊûúÂ§ß‰∫é360Â∫¶ÔºåÂ∞±ÂáèÂéª360</span>
+   rotate = rotate &gt; <span class="number">360</span> ? rotate - <span class="number">360</span> : rotate
    <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">distance</span> = distance
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      <span class="attr">scale</span>: scale * (distance / (oldDistance || distance)),
+     rotate
    &#125;)
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (startTouches.<span class="property">length</span> !== <span class="number">2</span>) &#123;
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      <span class="attr">translateX</span>: onePageX - startMove.<span class="property">x</span>,
      <span class="attr">translateY</span>: onePageY - startMove.<span class="property">y</span>
    &#125;)
  &#125;
&#125;,</code></pre>
<ul>
<li><code>getAngle</code><pre><code class="highlight ts"><span class="title function_">getAngle</span>(<span class="params">p1, p2</span>) &#123;
  <span class="keyword">const</span> x = p1.<span class="property">pageX</span> - p2.<span class="property">pageX</span>
  <span class="keyword">const</span> y = p1.<span class="property">pageY</span>- p2.<span class="property">pageY</span>
  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">atan2</span>(y, x) * <span class="number">180</span> / <span class="title class_">Math</span>.<span class="property">PI</span>
&#125;</code></pre></li>
<li><code>touchend</code><pre><code class="highlight ts"><span class="title function_">touchEnd</span>(<span class="params"></span>) &#123;
  <span class="comment">// ‰øùÂ≠òÂΩìÂâçÊóãËΩ¨ËßíÂ∫¶</span>
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">oldRotate</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">rotate</span>
&#125;,</code></pre></li>
</ul>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><ul>
<li>‰ª£Á†ÅÁâáÊÆµ<code>https://developers.weixin.qq.com/s/0nS1tImU7Rs5</code></li>
<li>H5ÂéüÁêÜ‰∏ÄËá¥ÔºåÂè™ÈúÄÊîπ‰∏Ä‰∏ãËØ≠Ê≥ïÂç≥ÂèØ</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂõæÁâá‰∏ä‰º†&amp;‰πùÂÆ´Ê†ºÊãñÊãΩÁªÑ‰ª∂</title>
    <url>/2021/09/08/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0-%E4%B9%9D%E5%AE%AB%E6%A0%BC%E6%8B%96%E6%8B%BD%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂõæÁâá‰∏ä‰º†-amp-‰πùÂÆ´Ê†ºÊãñÊãΩÁªÑ‰ª∂"><a href="#ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂõæÁâá‰∏ä‰º†-amp-‰πùÂÆ´Ê†ºÊãñÊãΩÁªÑ‰ª∂" class="headerlink" title="ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂõæÁâá‰∏ä‰º†&amp;‰πùÂÆ´Ê†ºÊãñÊãΩÁªÑ‰ª∂"></a>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂõæÁâá‰∏ä‰º†&amp;‰πùÂÆ´Ê†ºÊãñÊãΩÁªÑ‰ª∂</h2><h3 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h3><ul>
<li><p>ÂõæÁâá‰∏ä‰º†Âä†‰πùÂÆ´Ê†ºÊãñÊãΩÊòØ‰∏Ä‰∏™ÊØîËæÉÂ∏∏Áî®ÁöÑÁªÑ‰ª∂ÔºåÂ∏∏Áî®‰∫éÂèëÂ∏ñÊàñËÄÖËØÑËÆ∫Á≠âÂÜÖÂÆπ‰∏ä‰º†Ê®°ÂùóÔºåÊàëËøôÁØá‰πùÂÆ´Ê†ºÊãñÊãΩÁöÑÊÄùË∑ØÊòØÂÄüÈâ¥‰∫Ü<a href="https://www.cnblogs.com/haha1212/p/11562944.html"><strong>‰∏ÄÊ¨æ‰ºòÈõÖÁöÑÂ∞èÁ®ãÂ∫èÊãñÊãΩÊéíÂ∫èÁªÑ‰ª∂ÂÆûÁé∞</strong></a>ËøôÁØáÊñáÁ´†</p>
</li>
<li><p>ÂÆûÁé∞ÊïàÊûúÂ¶Ç‰∏ãÂõæ<br><img src="https://img-blog.csdnimg.cn/cc8c84d6bc3049349e94b95f540916c7.gif" alt="ËØ∑Ê∑ªÂä†ÂõæÁâáÊèèËø∞"></p>
</li>
<li><p>ÂÆûÁé∞ÂéüÁêÜÔºöÊñ∞Â¢ûÂõæÁâáÊó∂Ôºå‰∏∫ÊØè‰∏Ä‰∏™ÂõæÁâáÂ¢ûÂä†‰∏Ä‰∏™keyÂ±ûÊÄßÔºåÂíåtranX„ÄÅtranYÂ±ûÊÄßÔºåÁî®‰∫étransform‰ΩçÁßªÔºåÁÑ∂ÂêéËøô‰∏™‰πùÂÆ´Ê†ºÁöÑÊãñÊãΩÊñ∞Â¢ûÂà†Èô§ÈÉΩÊòØ‰ª•key‰∏∫Ê†áËÆ∞Êù•‰øÆÊîπtranXÂíåtranYÔºå‰ªéËÄåËææÂà∞ÊãñÊãΩÊïàÊûú</p>
</li>
<li><p>‰ΩøÁî®‰∫Ü‰ª•‰∏ãÂèòÈáè</p>
<pre><code class="highlight js"><span class="attr">data</span>: &#123;
  <span class="attr">ITEM_SIZE</span>: <span class="number">100</span>, <span class="comment">// ÂõæÁâáÂ§ßÂ∞è Âçï‰Ωçpx</span>
  <span class="attr">dragImgList</span>: [], <span class="comment">// ÂõæÁâáÂàóË°® &#123; src: string, key: number, tranX: number, tranY: number &#125;[]</span>
  <span class="attr">containerRes</span>: &#123;&#125;, <span class="comment">// ÊãñÊãΩÂÆπÂô®Â±ûÊÄß</span>
  <span class="attr">currentKey</span>: -<span class="number">1</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁöÑkey</span>
  <span class="attr">currentIndex</span>: -<span class="number">1</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁöÑindex</span>
  <span class="attr">tranX</span>: <span class="number">0</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁßªÂä®ÁöÑxË∑ùÁ¶ª</span>
  <span class="attr">tranY</span>: <span class="number">0</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁßªÂä®ÁöÑyË∑ùÁ¶ª</span>
  <span class="attr">uploadPosition</span>: &#123; <span class="comment">// upload‰∏ä‰º†ÂõæÊ†á‰ΩçÁßªË∑ùÁ¶ª</span>
    <span class="attr">tranX</span>: <span class="number">0</span>,
    <span class="attr">tranY</span>: <span class="number">0</span>,
  &#125;
&#125;,</code></pre></li>
</ul>
<h3 id="WXML-amp-WXSS"><a href="#WXML-amp-WXSS" class="headerlink" title="WXML &amp; WXSS"></a>WXML &amp; WXSS</h3><pre><code class="highlight html"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;drag-container&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">view</span></span>
<span class="tag">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;dragImgList&#125;&#125;&quot;</span> </span>
<span class="tag">    <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span></span>
<span class="tag">    <span class="attr">style</span>=<span class="string">&quot;transform: translate(&#123;&#123;index === currentIndex ? tranX : item.tranX&#125;&#125;px, &#123;&#123;index === currentIndex ? tranY : item.tranY&#125;&#125;px); z-index: &#123;&#123;index === currentIndex ? 10 : 1&#125;&#125;;&quot;</span></span>
<span class="tag">    <span class="attr">class</span>=<span class="string">&quot;darg-item item-transition&quot;</span></span>
<span class="tag">    <span class="attr">mark:index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span>
<span class="tag">    <span class="attr">mark:key</span>=<span class="string">&quot;&#123;&#123;item.key&#125;&#125;&quot;</span></span>
<span class="tag">    <span class="attr">catch:longpress</span>=<span class="string">&quot;longPress&quot;</span></span>
<span class="tag">    <span class="attr">catch:touchmove</span>=<span class="string">&quot;touchMove&quot;</span></span>
<span class="tag">    <span class="attr">catch:touchend</span>=<span class="string">&quot;touchEnd&quot;</span></span>
<span class="tag">  &gt;</span>
    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;darg-item-img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.src&#125;&#125;&quot;</span>/&gt;</span>
    <span class="tag">&lt;<span class="name">text</span> <span class="attr">catch:tap</span>=<span class="string">&quot;deleteImg&quot;</span> <span class="attr">mark:key</span>=<span class="string">&quot;&#123;&#123;item.key&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;drag-item-delete&quot;</span>&gt;</span>√ó<span class="tag">&lt;/<span class="name">text</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">view</span>&gt;</span>
  <span class="tag">&lt;<span class="name">view</span></span>
<span class="tag">    <span class="attr">bindtap</span>=<span class="string">&quot;uploadImage&quot;</span></span>
<span class="tag">    <span class="attr">class</span>=<span class="string">&quot;darg-item drag-item-upload&quot;</span></span>
<span class="tag">    <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123;dragImgList.length &gt;= 9&#125;&#125;&quot;</span></span>
<span class="tag">    <span class="attr">style</span>=<span class="string">&quot;transform: translate(&#123;&#123;uploadPosition.tranX&#125;&#125;px, &#123;&#123;uploadPosition.tranY&#125;&#125;px);&quot;</span></span>
<span class="tag">  &gt;</span>+<span class="tag">&lt;/<span class="name">view</span>&gt;</span>
<span class="tag">&lt;/<span class="name">view</span>&gt;</span></code></pre>
<pre><code class="highlight css"><span class="selector-class">.drag-container</span>&#123;
  <span class="attribute">position</span>: relative;
  <span class="attribute">width</span>: <span class="number">300px</span>;
  <span class="attribute">height</span>: <span class="number">300px</span>;
&#125;
<span class="selector-class">.item-transition</span> &#123;
  <span class="attribute">transition</span>: transform <span class="number">0.1s</span>
&#125;
<span class="selector-class">.darg-item</span>&#123;
  <span class="attribute">position</span>: absolute;
  <span class="attribute">top</span>: <span class="number">0</span>;
  <span class="attribute">left</span>: <span class="number">0</span>;
  <span class="attribute">width</span>: <span class="number">100px</span>;
  <span class="attribute">height</span>: <span class="number">100px</span>;
&#125;
<span class="selector-class">.darg-item-img</span>&#123;
  <span class="attribute">width</span>: <span class="number">100%</span>;
  <span class="attribute">height</span>: <span class="number">100%</span>;
&#125;
<span class="selector-class">.drag-item-delete</span>&#123;
  <span class="attribute">position</span>: absolute;
  <span class="attribute">top</span>: <span class="number">0</span>;
  <span class="attribute">right</span>: <span class="number">0</span>;
  <span class="attribute">width</span>: <span class="number">58</span>rpx;
  <span class="attribute">height</span>: <span class="number">33</span>rpx;
  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.7</span>);
  <span class="attribute">font-size</span>: <span class="number">47</span>rpx;
  <span class="attribute">line-height</span>: <span class="number">25</span>rpx;
  <span class="attribute">text-align</span>: center;
  <span class="attribute">border-radius</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">64</span>rpx;
  <span class="attribute">color</span>: <span class="number">#fff</span>;
&#125;
<span class="selector-class">.drag-item-upload</span>&#123;
  <span class="attribute">background-color</span>: burlywood;
  <span class="attribute">font-size</span>: <span class="number">200</span>rpx;
  <span class="attribute">text-align</span>: center;
  <span class="attribute">color</span>: white;
  <span class="attribute">line-height</span>: <span class="number">200</span>rpx;
&#125;</code></pre>

<h3 id="ÂõæÁâá‰∏ä‰º†"><a href="#ÂõæÁâá‰∏ä‰º†" class="headerlink" title="ÂõæÁâá‰∏ä‰º†"></a>ÂõæÁâá‰∏ä‰º†</h3><ul>
<li>ÂõæÁâá‰∏ä‰º†ÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂàùÂßãÂåñ‰∏ä‰º†ÁöÑÂõæÁâáÔºåÁÑ∂ÂêéÊãºÊé•ÂõæÁâáÂàóË°®ÔºåÊúÄÂêé‰øÆÊîπ‰∏ä‰º†ÂõæÊ†á‰ΩçÁΩÆÂç≥ÂèØ<pre><code class="highlight js"><span class="title function_">uploadImage</span>(<span class="params"></span>) &#123;
  <span class="keyword">let</span> &#123; dragImgList, <span class="variable constant_">ITEM_SIZE</span> &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  wx.<span class="title function_">chooseImage</span>(&#123;
    <span class="attr">count</span>: <span class="number">9</span> - dragImgList.<span class="property">length</span>,
    <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;
      <span class="keyword">const</span> imgList = res.<span class="property">tempFilePaths</span>.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> (&#123;
        <span class="attr">tranX</span>: <span class="variable constant_">ITEM_SIZE</span> * ((dragImgList.<span class="property">length</span> + index) % <span class="number">3</span>),
        <span class="attr">tranY</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>((dragImgList.<span class="property">length</span> + index) / <span class="number">3</span>) * <span class="variable constant_">ITEM_SIZE</span>,
        <span class="attr">src</span>: item,
        <span class="attr">key</span>: dragImgList.<span class="property">length</span> + index
      &#125;))
      dragImgList = dragImgList.<span class="title function_">concat</span>(imgList)
      <span class="comment">// ‰øÆÊîπ‰∏ä‰º†ÂõæÊ†á‰ΩçÁΩÆ</span>
      <span class="variable language_">this</span>.<span class="title function_">setUploaPosition</span>(dragImgList.<span class="property">length</span>)
      <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
        dragImgList,
      &#125;)
    &#125;
  &#125;)
&#125;,</code></pre>
<pre><code class="highlight js"><span class="title function_">setUploaPosition</span>(<span class="params">listLength</span>) &#123;
  <span class="keyword">const</span> <span class="variable constant_">ITEM_SIZE</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">ITEM_SIZE</span>
  <span class="keyword">const</span> uploadPosition = &#123;
    <span class="attr">tranX</span>: listLength % <span class="number">3</span> * <span class="variable constant_">ITEM_SIZE</span>,
    <span class="attr">tranY</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(listLength / <span class="number">3</span>) * <span class="variable constant_">ITEM_SIZE</span>,
  &#125;
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    uploadPosition,
  &#125;)
&#125;,</code></pre></li>
</ul>
<h3 id="ÂõæÁâáÂà†Èô§"><a href="#ÂõæÁâáÂà†Èô§" class="headerlink" title="ÂõæÁâáÂà†Èô§"></a>ÂõæÁâáÂà†Èô§</h3><ul>
<li>È¶ñÂÖà‰ªéÂõæÁâáÂàóË°®‰∏≠Âà†Èô§ÊâÄÈúÄÂõæÁâáÔºåÁÑ∂Âêé‰øÆÊîπÂàóË°®ÔºåÊääÂ§ß‰∫éÊâÄÈÄâÂõæÁâákeyÁöÑkeyÂÖ®ÈÉ®Âáè‰∏ÄÔºåÊúÄÂêé‰øÆÊîπÂâ©‰ΩôÂõæÁâá‰ΩçÁΩÆÂíå‰∏ä‰º†ÂõæÊ†á‰ΩçÁΩÆ<pre><code class="highlight js"><span class="title function_">deleteImg</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> key = e.<span class="property">mark</span>.<span class="property">key</span>
  <span class="comment">// Âà†Èô§ÂõæÁâá</span>
  <span class="keyword">const</span> list = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">dragImgList</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">key</span> !== key)
  <span class="comment">// ‰øÆÊîπkeyÂÄº</span>
  list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">key</span> &gt; key &amp;&amp; item.<span class="property">key</span>--)
  <span class="comment">// ‰øÆÊîπÂâ©‰ΩôÂõæÁâá‰ΩçÁΩÆ</span>
  <span class="variable language_">this</span>.<span class="title function_">getListPosition</span>(list)
  <span class="comment">// ‰øÆÊîπ‰∏ä‰º†ÂõæÊ†á‰ΩçÁΩÆ</span>
  <span class="variable language_">this</span>.<span class="title function_">setUploaPosition</span>(list.<span class="property">length</span>)
&#125;</code></pre>
<pre><code class="highlight js"><span class="title function_">getListPosition</span>(<span class="params">list</span>) &#123;
  <span class="keyword">const</span> <span class="variable constant_">ITEM_SIZE</span> = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">ITEM_SIZE</span>
  <span class="keyword">const</span> dragImgList = list.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;
    item.<span class="property">tranX</span> = <span class="variable constant_">ITEM_SIZE</span> * (item.<span class="property">key</span> % <span class="number">3</span>);
    item.<span class="property">tranY</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(item.<span class="property">key</span> / <span class="number">3</span>) * <span class="variable constant_">ITEM_SIZE</span>;
    <span class="keyword">return</span> item
  &#125;)
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    dragImgList,
  &#125;)

  <span class="comment">// ÂêëÈ°µÈù¢‰º†ÈÄíÊúÄÊñ∞ÂõæÁâáÂàóË°®</span>
  <span class="keyword">const</span> urlList = [...dragImgList].<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">key</span> - b.<span class="property">key</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">src</span>)
  <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;updateImage&#x27;</span>, &#123;
    <span class="attr">list</span>: urlList
  &#125;)
&#125;,</code></pre></li>
</ul>
<h3 id="‰πùÂÆ´Ê†ºÊãñÊãΩ"><a href="#‰πùÂÆ´Ê†ºÊãñÊãΩ" class="headerlink" title="‰πùÂÆ´Ê†ºÊãñÊãΩ"></a>‰πùÂÆ´Ê†ºÊãñÊãΩ</h3><h4 id="ÂàùÂßãÂåñ"><a href="#ÂàùÂßãÂåñ" class="headerlink" title="ÂàùÂßãÂåñ"></a>ÂàùÂßãÂåñ</h4><ul>
<li>ÂàùÂßãÂåñÂè™ÈúÄËé∑ÂèñÂÆπÂô®ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÂç≥ÂèØÔºåÂõ†‰∏∫ÊãñÊãΩÁªÑ‰ª∂‰∏ç‰∏ÄÂÆöÊòØÂú®È°µÈù¢ÁöÑÂ∑¶‰∏äËßíÔºåÊâÄ‰ª•ÈúÄË¶ÅÁü•ÈÅìÂÆπÂô®ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ<pre><code class="highlight js"><span class="attr">lifetimes</span>: &#123;
  <span class="title function_">ready</span>(<span class="params"></span>) &#123;
    <span class="variable language_">this</span>.<span class="title function_">createSelectorQuery</span>()
      .<span class="title function_">select</span>(<span class="string">&quot;.drag-container&quot;</span>)
      .<span class="title function_">boundingClientRect</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;
        <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">containerRes</span> = res
      &#125;).<span class="title function_">exec</span>();
  &#125;
&#125;,</code></pre></li>
</ul>
<h4 id="longPress"><a href="#longPress" class="headerlink" title="longPress"></a>longPress</h4><ul>
<li>ËøôÈáåÈááÁî®longPressÔºåËÄå‰∏çÊòØtouchStartÁöÑÂéüÂõ†Ôºå‰∏ÄÊòØ‰∏∫‰∫Ü‰ºòÂåñ‰ΩìÈ™åÔºå‰∫åÊòØtouchStart‰∏éÂà†Èô§ÊåâÈíÆÂÜ≤Á™Å<pre><code class="highlight js"><span class="title function_">longPress</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> index = e.<span class="property">mark</span>.<span class="property">index</span>
  <span class="keyword">const</span> &#123; pageX, pageY &#125; = e.<span class="property">touches</span>[<span class="number">0</span>]
  <span class="keyword">const</span> &#123; top, left &#125; = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">containerRes</span>
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    <span class="attr">currentIndex</span>: index,
    <span class="attr">tranX</span>: pageX - <span class="number">50</span> - left,
    <span class="attr">tranY</span>: pageY - <span class="number">50</span> - top
  &#125;)
&#125;,</code></pre></li>
</ul>
<h4 id="touchMove"><a href="#touchMove" class="headerlink" title="touchMove"></a>touchMove</h4><ul>
<li>touchMoveÈ¶ñÂÖàËÆ°ÁÆóÂá∫‰ΩçÁßªË∑ùÁ¶ªÔºåÁÑ∂ÂêéÊ†πÊçÆ‰ΩçÁßªË∑ùÁ¶ªÊ±ÇÂá∫ÂÅúÊîæ‰ΩçÁΩÆÁöÑkeyÔºåÂ¶ÇÊûú‰∏ç‰∏ÄÊ†∑Â∞±‰øÆÊîπ‰ΩçÁΩÆ<pre><code class="highlight js"><span class="title function_">touchMove</span>(<span class="params">e</span>) &#123;
  <span class="comment">// Â¶ÇÊûúcurrentIndex &lt; 0ÔºåËØ¥ÊòéÂπ∂Ê≤°ÊúâËß¶ÂèëlongPress</span>
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentIndex</span> &lt; <span class="number">0</span>) <span class="keyword">return</span>
  <span class="keyword">const</span> &#123; pageX, pageY &#125; = e.<span class="property">touches</span>[<span class="number">0</span>]
  <span class="keyword">const</span> &#123; top, left &#125; = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">containerRes</span>
  <span class="keyword">const</span> tranX = pageX - <span class="number">50</span> - left
  <span class="keyword">const</span> tranY = pageY - <span class="number">50</span> - top
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    tranX,
    tranY
  &#125;)
  <span class="comment">// ÂØπÊØîÂΩìÂâçÁßªÂä®ÁöÑkeyÂíåÂÅúÊîæ‰ΩçÁΩÆÁöÑkeyÔºåÂ¶ÇÊûú‰∏ç‰∏ÄÊ†∑Â∞±‰øÆÊîπ‰ΩçÁΩÆ</span>
  <span class="keyword">const</span> currentKey = e.<span class="property">mark</span>.<span class="property">key</span>
  <span class="keyword">const</span> moveKey = <span class="variable language_">this</span>.<span class="title function_">getMoveKey</span>(tranX, tranY)
  <span class="keyword">if</span> (currentKey === moveKey || <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentKey</span> === currentKey) <span class="keyword">return</span>
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentKey</span> = currentKey
  <span class="variable language_">this</span>.<span class="title function_">insert</span>(currentKey, moveKey)
&#125;,</code></pre>
<pre><code class="highlight js"><span class="title function_">getMoveKey</span>(<span class="params">tranX, tranY</span>) &#123;
  <span class="keyword">const</span> &#123; <span class="attr">dragImgList</span>: list, <span class="variable constant_">ITEM_SIZE</span> &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  <span class="keyword">const</span> <span class="title function_">_getPositionNumber</span> = (<span class="params">position</span>) =&gt; &#123;
    <span class="keyword">const</span> positionNumber = <span class="title class_">Math</span>.<span class="title function_">round</span>(position/ <span class="variable constant_">ITEM_SIZE</span>)
    <span class="keyword">return</span> positionNumber &gt; <span class="number">2</span> ? <span class="number">2</span> : positionNumber &lt; <span class="number">0</span> ? <span class="number">0</span> : positionNumber
  &#125;
  <span class="keyword">const</span> endKey = <span class="number">3</span> * <span class="title function_">_getPositionNumber</span>(tranY) + <span class="title function_">_getPositionNumber</span>(tranX)
  <span class="keyword">return</span> endKey &gt;= list.<span class="property">length</span> ? list.<span class="property">length</span> - <span class="number">1</span> : endKey
&#125;,</code></pre>
<pre><code class="highlight js"><span class="title function_">insert</span>(<span class="params">origin, end</span>) &#123;
  <span class="keyword">const</span> dragImgList = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">dragImgList</span>
  dragImgList.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;
    <span class="keyword">if</span> (origin &lt; end) &#123;
      <span class="comment">// Â¶ÇÊûúËµ∑ÂßãkeyÂ∞è‰∫éÁªìÊùükeyÔºåÂ∞±ÊääÂå∫Èó¥ÂÜÖÁöÑkeyÂÖ®ÈÉ®Âáè‰∏Ä</span>
      <span class="keyword">if</span> (item.<span class="property">key</span> &gt; origin &amp;&amp; item.<span class="property">key</span> &lt;= end) item.<span class="property">key</span>--
      <span class="keyword">else</span> <span class="keyword">if</span> (item.<span class="property">key</span> === origin) item.<span class="property">key</span> = end
    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (origin &gt; end) &#123;
      <span class="comment">// Â¶ÇÊûúËµ∑ÂßãkeyÂ§ß‰∫éÁªìÊùükeyÔºåÂ∞±ÊääÂå∫Èó¥ÂÜÖÁöÑkeyÂÖ®ÈÉ®Âä†‰∏Ä</span>
      <span class="keyword">if</span> (item.<span class="property">key</span> &gt;= end &amp;&amp; item.<span class="property">key</span> &lt; origin) item.<span class="property">key</span>++
      <span class="keyword">else</span> <span class="keyword">if</span> (item.<span class="property">key</span> === origin) item.<span class="property">key</span> = end
    &#125;
  &#125;)
  <span class="variable language_">this</span>.<span class="title function_">getListPosition</span>(dragImgList)
&#125;,</code></pre></li>
</ul>
<h4 id="touchEnd"><a href="#touchEnd" class="headerlink" title="touchEnd"></a>touchEnd</h4><ul>
<li>touchEndÁî®‰∫éÈáçÁΩÆÊï∞ÊçÆ<pre><code class="highlight js"><span class="title function_">touchEnd</span>(<span class="params"></span>) &#123;
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    <span class="attr">tranX</span>: <span class="number">0</span>,
    <span class="attr">tranY</span>: <span class="number">0</span>,
    <span class="attr">currentIndex</span>: -<span class="number">1</span>,
  &#125;)
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentKey</span> = -<span class="number">1</span>
&#125;,</code></pre></li>
</ul>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><ul>
<li>‰ª£Á†ÅÁâáÊÆµ<code>https://developers.weixin.qq.com/s/2rFIJamX7xty</code></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÂõæÁâáÊãñÊãΩÊéíÂ∫èÁªÑ‰ª∂</title>
    <url>/2022/09/03/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%9B%BE%E7%89%87%E6%8B%96%E6%8B%BD%E6%8E%92%E5%BA%8F%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><ul>
<li>ÂõæÁâáÊãñÊãΩÊéíÂ∫èÊòØ‰∏Ä‰∏™ÊØîËæÉÂ∏∏Áî®ÁöÑÁªÑ‰ª∂ÔºåÂ∏∏Áî®‰∫éÂèëÂ∏ñÊàñËÄÖËØÑËÆ∫Á≠âÂÜÖÂÆπ‰∏ä‰º†Ê®°ÂùóÔºåÊàëÂÄüÈâ¥‰∫Ü<a href="https://www.cnblogs.com/haha1212/p/11562944.html">„Ää‰∏ÄÊ¨æ‰ºòÈõÖÁöÑÂ∞èÁ®ãÂ∫èÊãñÊãΩÊéíÂ∫èÁªÑ‰ª∂ÂÆûÁé∞„Äã</a>ËøôÁØáÊñáÁ´†ÁöÑÊãñÊãΩÊÄùË∑ØÔºåÂπ∂Â∞ÅË£ÖÊàê<a href="https://github.com/LHRUN/wx-drag-img">wx-drag-img</a>ÂèëÂ∏ÉÂà∞npm</li>
<li>ÂÆûÁé∞ÂéüÁêÜÔºöÊØè‰∏™ÂõæÁâáÂàùÂßãÂåñÊàëÈÉΩ‰ºöÂ∞ÅË£ÖÊàê‰∏Ä‰∏™ÊãñÊãΩÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÁÑ∂ÂêéËß¶Âèëtouch‰∫ã‰ª∂Êó∂ÔºåÈÄöËøáÊîπÂèòÂõæÁâáÁöÑkeyÊù•ËÆ°ÁÆótransform‰ΩçÁΩÆÔºå‰ªéËÄåËææÂà∞ÊãñÊãΩÊïàÊûú</li>
<li>ÂäüËÉΩÂåÖÊã¨ÂõæÁâá‰∏ä‰º†ÊãñÊãΩÂà†Èô§ÔºåÊ∫êÁ†ÅÂíånpmÂú∞ÂùÄÊàë‰ºöË¥¥Âú®ÁªìÂ∞æÔºåÂ¶ÇÊûúÊÑüËßâÂ•ΩÁöÑËØùÔºåÊ¨¢Ëøéstar</li>
<li>Êàë‰ºöÂú®‰∏ãÈù¢ÈÄêÊ≠•ÂàÜÊûêËøô‰∏™ÁªÑ‰ª∂ÁöÑÂÆûÁé∞ÊÄùË∑Ø</li>
<li>‰ΩøÁî®‰∫Ü‰ª•‰∏ãÂèòÈáè<pre><code class="highlight ts"><span class="comment">// ÊãñÊãΩÊï∞ÊçÆÁªìÊûÑ</span>
<span class="keyword">interface</span> <span class="title class_">IDragImg</span> &#123;
  <span class="attr">src</span>: <span class="built_in">string</span>; <span class="comment">// ÂõæÁâáË∑ØÂæÑ</span>
  <span class="attr">key</span>: <span class="built_in">number</span>; <span class="comment">// </span>
  <span class="attr">id</span>: <span class="built_in">number</span>; <span class="comment">// forÂæ™ÁéØÈÅçÂéÜ‰ΩøÁî®, ‰∏ç‰ºöÊîπÂèò, ÂàõÂª∫Êó∂Ëá™Â¢ûid</span>
  <span class="attr">tranX</span>: <span class="built_in">number</span>; <span class="comment">// xËΩ¥‰ΩçÁßªË∑ùÁ¶ª</span>
  <span class="attr">tranY</span>: <span class="built_in">number</span>; <span class="comment">// yËΩ¥‰ΩçÁßªË∑ùÁ¶ª</span>
&#125;

<span class="comment">// props</span>
&#123;
  previewSize <span class="comment">// ÂõæÁâáÂ§ßÂ∞è</span>
  defaultImgList <span class="comment">// ÂàùÂßãÂåñÂõæÁâáÊï∞ÁªÑ</span>
  maxCount <span class="comment">// ÂõæÁâá‰∏ä‰º†Êï∞ÈáèÈôêÂà∂</span>
  columns <span class="comment">// ÂàóÊï∞</span>
  gap <span class="comment">// ÂõæÁâáÈó¥Èöî</span>
  deleteStyle <span class="comment">// Âà†Èô§Ê†∑Âºè</span>
&#125;

<span class="attr">data</span>: &#123;
  <span class="attr">dragImgList</span>: <span class="title class_">IDragImg</span>[],
  <span class="attr">containerRes</span>: &#123;
    <span class="attr">top</span>: <span class="number">0</span>, <span class="comment">// ÂÆπÂô®Ë∑ùÁ¶ªÈ°µÈù¢È°∂ÈÉ®Ë∑ùÁ¶ª px</span>
    <span class="attr">left</span>: <span class="number">0</span>, <span class="comment">// ÂÆπÂô®Ë∑ùÁ¶ªÈ°µÈù¢Â∑¶ËæπË∑ùÁ¶ª px</span>
    <span class="attr">width</span>: <span class="number">0</span>, <span class="comment">// ÂÆπÂô®ÂÆΩÂ∫¶ px</span>
    <span class="attr">height</span>: <span class="number">0</span>, <span class="comment">// ÂÆπÂô®È´òÂ∫¶ px</span>
  &#125;, <span class="comment">// ÊãñÊãΩÂÆπÂô®Â±ûÊÄß</span>
  <span class="attr">currentKey</span>: -<span class="number">1</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁöÑkey</span>
  <span class="attr">currentIndex</span>: -<span class="number">1</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁöÑindex</span>
  <span class="attr">tranX</span>: <span class="number">0</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁßªÂä®ÁöÑxË∑ùÁ¶ª</span>
  <span class="attr">tranY</span>: <span class="number">0</span>, <span class="comment">// Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁßªÂä®ÁöÑyË∑ùÁ¶ª</span>
  <span class="attr">uploadPosition</span>: &#123; <span class="comment">// upload‰∏ä‰º†ÂõæÊ†á‰ΩçÁßªË∑ùÁ¶ª</span>
    <span class="attr">tranX</span>: <span class="number">0</span>,
    <span class="attr">tranY</span>: <span class="number">0</span>,
  &#125;
&#125;,</code></pre></li>
</ul>
<h2 id="WXML"><a href="#WXML" class="headerlink" title="WXML"></a>WXML</h2><pre><code class="highlight html"><span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;width: &#123;&#123;containerRes.width&#125;&#125;px; height: &#123;&#123;containerRes.height&#125;&#125;px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;drag-container&quot;</span>&gt;</span>
  <span class="tag">&lt;<span class="name">view</span></span>
<span class="tag">    <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;dragImgList&#125;&#125;&quot;</span></span>
<span class="tag">    <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span></span>
<span class="tag">    <span class="attr">style</span>=<span class="string">&quot;transform: translate(&#123;&#123;index === currentIndex ? tranX : item.tranX&#125;&#125;px, &#123;&#123;index === currentIndex ? tranY : item.tranY&#125;&#125;px); z-index: &#123;&#123;index === currentIndex ? 10 : 1&#125;&#125;; width: &#123;&#123;previewSize&#125;&#125;px; height: &#123;&#123;previewSize&#125;&#125;px;&quot;</span></span>
<span class="tag">    <span class="attr">class</span>=<span class="string">&quot;drag-item drag-item-transition&quot;</span></span>
<span class="tag">    <span class="attr">mark:index</span>=<span class="string">&quot;&#123;&#123;index&#125;&#125;&quot;</span></span>
<span class="tag">    <span class="attr">mark:key</span>=<span class="string">&quot;&#123;&#123;item.key&#125;&#125;&quot;</span></span>
<span class="tag">    <span class="attr">catch:longpress</span>=<span class="string">&quot;longPress&quot;</span></span>
<span class="tag">    <span class="attr">catch:touchmove</span>=<span class="string">&quot;touchMove&quot;</span></span>
<span class="tag">    <span class="attr">catch:touchend</span>=<span class="string">&quot;touchEnd&quot;</span></span>
<span class="tag">  &gt;</span>
    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;drag-item-img&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.src&#125;&#125;&quot;</span>/&gt;</span>
    <span class="comment">&lt;!-- Âà†Èô§ÂõæÊ†á --&gt;</span>
    <span class="tag">&lt;<span class="name">view</span> <span class="attr">catch:tap</span>=<span class="string">&quot;deleteImg&quot;</span> <span class="attr">mark:key</span>=<span class="string">&quot;&#123;&#123;item.key&#125;&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;drag-item-delete&quot;</span>&gt;</span>
      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;drag-item-delete_default&quot;</span> <span class="attr">style</span>=<span class="string">&quot;&#123;&#123;deleteStyle&#125;&#125;&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">view</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">view</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">view</span>&gt;</span>

  <span class="comment">&lt;!-- ‰∏ä‰º†ÂõæÁâá --&gt;</span>
  <span class="tag">&lt;<span class="name">view</span></span>
<span class="tag">    <span class="attr">bindtap</span>=<span class="string">&quot;uploadImage&quot;</span></span>
<span class="tag">    <span class="attr">class</span>=<span class="string">&quot;drag-item drag-upload&quot;</span></span>
<span class="tag">    <span class="attr">hidden</span>=<span class="string">&quot;&#123;&#123;dragImgList.length &gt;= maxCount&#125;&#125;&quot;</span></span>
<span class="tag">    <span class="attr">style</span>=<span class="string">&quot;transform: translate(&#123;&#123;uploadPosition.tranX&#125;&#125;px, &#123;&#123;uploadPosition.tranY&#125;&#125;px); width: &#123;&#123;previewSize&#125;&#125;px; height: &#123;&#123;previewSize&#125;&#125;px;&quot;</span></span>
<span class="tag">  &gt;</span>
    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;drag-upload_solt&quot;</span>&gt;</span>
      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;upload&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">view</span>&gt;</span>
    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;drag-upload_default&quot;</span>&gt;</span>
      <span class="tag">&lt;<span class="name">text</span>&gt;</span>+<span class="tag">&lt;/<span class="name">text</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">view</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">view</span>&gt;</span>
<span class="tag">&lt;/<span class="name">view</span>&gt;</span></code></pre>

<h2 id="ÂõæÁâá‰∏ä‰º†"><a href="#ÂõæÁâá‰∏ä‰º†" class="headerlink" title="ÂõæÁâá‰∏ä‰º†"></a>ÂõæÁâá‰∏ä‰º†</h2><ul>
<li>ÂõæÁâá‰∏ä‰º†ÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂàùÂßãÂåñ‰∏ä‰º†ÁöÑÂõæÁâáÔºåÁÑ∂ÂêéÊãºÊé•Âà∞Áé∞ÊúâÂõæÁâáÔºåÊúÄÂêé‰øÆÊîπ‰∏ä‰º†ÂõæÊ†á‰ΩçÁΩÆÂç≥ÂèØ</li>
<li>ÁÇπÂáª‰∏ä‰º†Âå∫ÂüüÂõûË∞ÉÂáΩÊï∞<code>uploadImage</code><pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * ‰∏ä‰º†ÂõæÁâá</span>
<span class="comment"> */</span>
<span class="keyword">async</span> <span class="title function_">uploadImage</span>(<span class="params"></span>) &#123;
  <span class="keyword">let</span> &#123; dragImgList, maxCount &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">try</span> &#123;
    <span class="keyword">const</span> res = <span class="keyword">await</span> wx.<span class="title function_">chooseMedia</span>(&#123;
      <span class="attr">count</span>: maxCount - dragImgList.<span class="property">length</span>,
      <span class="attr">mediaType</span>: [<span class="string">&#x27;image&#x27;</span>],
    &#125;);
    <span class="comment">// Ëé∑Âèñ‰∏ä‰º†ÂõæÁâáÊï∞ÊçÆÂêéÈúÄË¶ÅÂàùÂßãÂåñÂõæÁâáÊãΩÁªìÊûÑ</span>
    <span class="keyword">const</span> imgList = <span class="variable language_">this</span>.<span class="title function_">getDragImgList</span>(res?.<span class="property">tempFiles</span>?.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123; tempFilePath &#125;</span>) =&gt;</span> tempFilePath) || [], <span class="literal">false</span>);
    dragImgList = dragImgList.<span class="title function_">concat</span>(imgList);
    <span class="comment">// ‰øÆÊîπ‰∏ä‰º†Âå∫Âüü‰ΩçÁΩÆ</span>
    <span class="variable language_">this</span>.<span class="title function_">setUploaPosition</span>(dragImgList.<span class="property">length</span>);
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      dragImgList,
    &#125;);
    <span class="variable language_">this</span>.<span class="title function_">updateEvent</span>(dragImgList);
  &#125; <span class="keyword">catch</span> (error) &#123;
    <span class="variable language_">console</span>.<span class="title function_">log</span>(error);
  &#125;
&#125;,</code></pre></li>
<li>‰∏ä‰º†ÂêéÈúÄË¶ÅÂàùÂßãÂåñÊãñÊãΩÁöÑÊï∞ÊçÆÁªìÊûÑ<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ê†πÊçÆÂõæÁâáÂàóË°®ÁîüÊàêÊãñÊãΩÂàóË°®Êï∞ÊçÆÁªìÊûÑ</span>
<span class="comment"> * <span class="doctag">@param</span> list ÂõæÁâásrcÂàóË°®</span>
<span class="comment"> * <span class="doctag">@param</span> init ÊòØÂê¶ÊòØÂàùÂßãÂåñ</span>
<span class="comment"> */</span>
 <span class="title function_">getDragImgList</span>(<span class="params">list, init = <span class="literal">true</span></span>) &#123;
  <span class="keyword">let</span> &#123; dragImgList, previewSize, columns, gap &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">return</span> list.<span class="title function_">map</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;
    <span class="keyword">const</span> i = (init ? <span class="number">0</span> : dragImgList.<span class="property">length</span>) + index;
    <span class="keyword">return</span> &#123;
      <span class="attr">tranX</span>: (previewSize + gap) * (i % columns),
      <span class="attr">tranY</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(i / columns) * (previewSize + gap),
      <span class="attr">src</span>: item,
      <span class="attr">id</span>: i,
      <span class="attr">key</span>: i,
    &#125;;
  &#125;);
&#125;,</code></pre></li>
<li>‰øÆÊîπ‰∏ä‰º†Âå∫Âüü‰ΩçÁΩÆ<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * ‰øÆÊîπ‰∏ä‰º†Âå∫Âüü‰ΩçÁΩÆ</span>
<span class="comment"> * <span class="doctag">@param</span> listLength Êï∞ÁªÑÈïøÂ∫¶</span>
<span class="comment"> */</span>
<span class="title function_">setUploaPosition</span>(<span class="params">listLength</span>) &#123;
  <span class="keyword">const</span> &#123; previewSize, columns, gap &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">const</span> uploadPosition = &#123;
    <span class="attr">tranX</span>: listLength % columns * (previewSize + gap),
    <span class="attr">tranY</span>: <span class="title class_">Math</span>.<span class="title function_">floor</span>(listLength / columns) * (previewSize + gap),
  &#125;;
  <span class="keyword">const</span> &#123; width, height &#125; = <span class="variable language_">this</span>.<span class="title function_">getContainerRect</span>(listLength);
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    uploadPosition,
    [<span class="string">&#x27;containerRes.width&#x27;</span>]: width,
    [<span class="string">&#x27;containerRes.height&#x27;</span>]: height,
  &#125;);
&#125;,</code></pre></li>
<li>ÂõæÁâáÊï∞ÈáèÊîπÂèòÂêéÂ∞±Ë¶ÅÈáçÊñ∞Ëé∑ÂèñÂÆπÂô®ÂÆΩÈ´ò‰∫Ü<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * ÊîπÂèòÂõæÁâáÊï∞ÈáèÂêéËé∑ÂèñÂÆπÂô®ÂÆΩÈ´ò</span>
<span class="comment"> * <span class="doctag">@parma</span> listLength Êï∞ÁªÑÈïøÂ∫¶</span>
<span class="comment"> */</span>
<span class="title function_">getContainerRect</span>(<span class="params">listLength</span>) &#123;
  <span class="keyword">const</span> &#123; columns, previewSize, maxCount, gap &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">const</span> number = listLength === maxCount ? listLength : listLength + <span class="number">1</span>;
  <span class="keyword">const</span> row = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(number / columns)
  <span class="keyword">return</span> &#123;
    <span class="attr">width</span>: columns * previewSize + (columns - <span class="number">1</span>) * gap,
    <span class="attr">height</span>: row * previewSize + gap * (row - <span class="number">1</span>),
  &#125;;
&#125;,</code></pre></li>
<li>updateEvent<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * updateEvent</span>
<span class="comment"> * <span class="doctag">@describe</span> ‰∏ä‰º†Âà†Èô§ÊãñÊãΩÂêéËß¶Âèë‰∫ã‰ª∂ÊääÂàóË°®Êï∞ÊçÆÂèëÁªôÈ°µÈù¢</span>
<span class="comment"> */</span>
<span class="title function_">updateEvent</span>(<span class="params">dragImgList</span>) &#123;
  <span class="keyword">const</span> list = [...dragImgList].<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a.<span class="property">key</span> - b.<span class="property">key</span>).<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">src</span>);
    <span class="variable language_">this</span>.<span class="title function_">triggerEvent</span>(<span class="string">&#x27;updateImageList&#x27;</span>, &#123;
      list,
  &#125;);
&#125;,</code></pre></li>
</ul>
<h3 id="ÂõæÁâáÂà†Èô§"><a href="#ÂõæÁâáÂà†Èô§" class="headerlink" title="ÂõæÁâáÂà†Èô§"></a>ÂõæÁâáÂà†Èô§</h3><ul>
<li>È¶ñÂÖà‰ªéÂõæÁâáÂàóË°®‰∏≠Âà†Èô§ÊâÄÈúÄÂõæÁâáÔºåÁÑ∂Âêé‰øÆÊîπÂàóË°®ÔºåÊääÂ§ß‰∫éÊâÄÈÄâÂõæÁâákeyÁöÑkeyÂÖ®ÈÉ®Âáè‰∏ÄÔºåÊúÄÂêéËÆ°ÁÆóÂâ©‰ΩôÂõæÁâá‰ΩçÁΩÆÂíå‰∏ä‰º†ÂõæÊ†á‰ΩçÁΩÆ<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Âà†Èô§ÂõæÁâá</span>
<span class="comment"> */</span>
<span class="title function_">deleteImg</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> key = e.<span class="property">mark</span>.<span class="property">key</span>;
  <span class="keyword">const</span> list = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">dragImgList</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">key</span> !== key);
  <span class="comment">// Â§ß‰∫éÂà†Èô§ÂõæÁâákeyÁöÑkeyÂÖ®ÈÉ®Âáè1</span>
  list.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;
    item.<span class="property">key</span> &gt; key &amp;&amp; item.<span class="property">key</span>--;
  &#125;);
  <span class="comment">// Ëé∑Âèñ</span>
  <span class="variable language_">this</span>.<span class="title function_">getListPosition</span>(list);
  <span class="variable language_">this</span>.<span class="title function_">setUploaPosition</span>(list.<span class="property">length</span>);
&#125;,</code></pre>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆóÊï∞ÁªÑÁöÑ‰ΩçÁßª‰ΩçÁΩÆ</span>
<span class="comment"> * <span class="doctag">@param</span> list ÊãñÊãΩÂõæÁâáÊï∞ÁªÑ</span>
<span class="comment"> */</span>
<span class="title function_">getListPosition</span>(<span class="params">list</span>) &#123;
  <span class="keyword">const</span> &#123; previewSize, columns, gap &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">const</span> dragImgList = list.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;
    item.<span class="property">tranX</span> = (previewSize + gap) * (item.<span class="property">key</span> % columns);
    item.<span class="property">tranY</span> = <span class="title class_">Math</span>.<span class="title function_">floor</span>(item.<span class="property">key</span> / columns) * (previewSize + gap);
    <span class="keyword">return</span> item;
  &#125;)
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    dragImgList,
  &#125;);
  <span class="variable language_">this</span>.<span class="title function_">updateEvent</span>(dragImgList);
&#125;,</code></pre></li>
</ul>
<h2 id="ÂõæÁâáÊãñÊãΩ"><a href="#ÂõæÁâáÊãñÊãΩ" class="headerlink" title="ÂõæÁâáÊãñÊãΩ"></a>ÂõæÁâáÊãñÊãΩ</h2><h3 id="ÂàùÂßãÂåñ"><a href="#ÂàùÂßãÂåñ" class="headerlink" title="ÂàùÂßãÂåñ"></a>ÂàùÂßãÂåñ</h3><ul>
<li>ÂàùÂßãÂåñÂè™ÈúÄËé∑ÂèñÂÆπÂô®ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÂç≥ÂèØÔºåÂõ†‰∏∫ÊãñÊãΩÁªÑ‰ª∂‰∏ç‰∏ÄÂÆöÊòØÂú®È°µÈù¢ÁöÑÂ∑¶‰∏äËßíÔºåÊâÄ‰ª•ÈúÄË¶ÅÁü•ÈÅìÂÆπÂô®ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ<pre><code class="highlight js"><span class="attr">lifetimes</span>: &#123;
  <span class="title function_">ready</span>(<span class="params"></span>) &#123;
    <span class="variable language_">this</span>.<span class="title function_">createSelectorQuery</span>()
      .<span class="title function_">select</span>(<span class="string">&quot;.drag-container&quot;</span>)
      .<span class="title function_">boundingClientRect</span>(<span class="function">(<span class="params">&#123; top, left &#125;</span>) =&gt;</span> &#123;
        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
          [<span class="string">&#x27;containerRes.top&#x27;</span>]: top,
          [<span class="string">&#x27;containerRes.left&#x27;</span>]: left,
        &#125;);
      &#125;).<span class="title function_">exec</span>();
  &#125;
&#125;,</code></pre></li>
</ul>
<h3 id="longPress"><a href="#longPress" class="headerlink" title="longPress"></a>longPress</h3><ul>
<li>ËøôÈáåÈááÁî®longPressÔºåËÄå‰∏çÊòØtouchStartÁöÑÂéüÂõ†Ôºå‰∏ÄÊòØ‰∏∫‰∫Ü‰ºòÂåñ‰ΩìÈ™åÔºå‰∫åÊòØtouchStart‰∏éÂà†Èô§ÊåâÈíÆÂÜ≤Á™Å<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * ÈïøÊåâÂõæÁâá</span>
<span class="comment"> */</span>
<span class="title function_">longPress</span>(<span class="params">e</span>) &#123;
  <span class="keyword">const</span> index = e.<span class="property">mark</span>.<span class="property">index</span>;
  <span class="keyword">const</span> &#123; pageX, pageY &#125; = e.<span class="property">touches</span>[<span class="number">0</span>];
  <span class="keyword">const</span> &#123; previewSize, <span class="attr">containerRes</span>: &#123; top, left &#125; &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    <span class="attr">currentIndex</span>: index,
    <span class="attr">tranX</span>: pageX - previewSize / <span class="number">2</span> - left,
    <span class="attr">tranY</span>: pageY - previewSize / <span class="number">2</span> - top,
  &#125;);
&#125;,</code></pre></li>
</ul>
<h3 id="touchMove"><a href="#touchMove" class="headerlink" title="touchMove"></a>touchMove</h3><ul>
<li>touchMoveÈ¶ñÂÖàËÆ°ÁÆóÂá∫‰ΩçÁßªË∑ùÁ¶ªÔºåÁÑ∂ÂêéÊ†πÊçÆ‰ΩçÁßªË∑ùÁ¶ªÊ±ÇÂá∫ÂÅúÊîæ‰ΩçÁΩÆÁöÑkeyÔºåÂ¶ÇÊûú‰∏ç‰∏ÄÊ†∑Â∞±‰øÆÊîπ‰ΩçÁΩÆ</li>
<li>touchMove<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * touchMove</span>
<span class="comment"> */</span>
<span class="title function_">touchMove</span>(<span class="params">e</span>) &#123;
  <span class="comment">// Â¶ÇÊûúcurrentIndex &lt; 0ÔºåËØ¥ÊòéÂπ∂Ê≤°ÊúâËß¶ÂèëlongPress</span>
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentIndex</span> &lt; <span class="number">0</span>) &#123;
    <span class="keyword">return</span>;
  &#125;
  <span class="keyword">const</span> &#123; pageX, pageY &#125; = e.<span class="property">touches</span>[<span class="number">0</span>];
  <span class="keyword">const</span> &#123; previewSize, <span class="attr">containerRes</span>: &#123; top, left &#125; &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">const</span> tranX = pageX - previewSize / <span class="number">2</span> - left;
  <span class="keyword">const</span> tranY = pageY - previewSize / <span class="number">2</span> - top;
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    tranX,
    tranY
  &#125;);
  <span class="comment">// ÂØπÊØîÂΩìÂâçÁßªÂä®ÁöÑkeyÂíåÂÅúÊîæ‰ΩçÁΩÆÁöÑkeyÔºåÂ¶ÇÊûú‰∏ç‰∏ÄÊ†∑Â∞±‰øÆÊîπ‰ΩçÁΩÆ</span>
  <span class="keyword">const</span> currentKey = e.<span class="property">mark</span>.<span class="property">key</span>;
  <span class="keyword">const</span> moveKey = <span class="variable language_">this</span>.<span class="title function_">getMoveKey</span>(tranX, tranY);

  <span class="comment">// ÂΩìÁßªÂä®ÁöÑkeyÂíåÊ≠£Âú®ÂÅúÊîæ‰ΩçÁΩÆÁöÑkeyÁõ∏Á≠âÔºåÂ∞±Êó†È°ªÂ§ÑÁêÜ</span>
  <span class="keyword">if</span> (currentKey === moveKey || <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentKey</span> === currentKey) &#123;
    <span class="keyword">return</span>;
  &#125;
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentKey</span> = currentKey;
  <span class="variable language_">this</span>.<span class="title function_">replace</span>(currentKey, moveKey);
&#125;,</code></pre></li>
<li>getMoveKey<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆóÁßªÂä®‰∏≠ÁöÑkey</span>
<span class="comment"> * <span class="doctag">@param</span> tranX Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁöÑtranX</span>
<span class="comment"> * <span class="doctag">@param</span> tranY Ê≠£Âú®ÊãñÊãΩÂõæÁâáÁöÑtranY</span>
<span class="comment"> */</span>
<span class="title function_">getMoveKey</span>(<span class="params">tranX, tranY</span>) &#123;
  <span class="keyword">const</span> &#123; <span class="attr">dragImgList</span>: list, previewSize, columns &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">const</span> <span class="title function_">_getPositionNumber</span> = (<span class="params">drag, limit</span>) =&gt; &#123;
    <span class="keyword">const</span> positionNumber = <span class="title class_">Math</span>.<span class="title function_">round</span>(drag / previewSize);
    <span class="keyword">return</span> positionNumber &gt;= limit ? limit - <span class="number">1</span> : positionNumber &lt; <span class="number">0</span> ? <span class="number">0</span> : positionNumber;
  &#125;
  <span class="keyword">const</span> endKey = columns * <span class="title function_">_getPositionNumber</span>(tranY, <span class="title class_">Math</span>.<span class="title function_">ceil</span>(list.<span class="property">length</span> / columns)) + <span class="title function_">_getPositionNumber</span>(tranX, columns);
  <span class="keyword">return</span> endKey &gt;= list.<span class="property">length</span> ? list.<span class="property">length</span> - <span class="number">1</span> : endKey;
&#125;,</code></pre></li>
<li>replace<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * ÁîüÊàêÊãñÊãΩÂêéÁöÑÊñ∞Êï∞ÁªÑ</span>
<span class="comment"> * <span class="doctag">@param</span> start ÊãñÊãΩËµ∑ÂßãÁöÑkey</span>
<span class="comment"> * <span class="doctag">@param</span> end ÊãñÊãΩÁªìÊùüÁöÑkey</span>
<span class="comment"> */</span>
<span class="title function_">replace</span>(<span class="params">start, end</span>) &#123;
  <span class="keyword">const</span> dragImgList = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">dragImgList</span>;
  dragImgList.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;
    <span class="keyword">if</span> (start &lt; end) &#123;
      <span class="keyword">if</span> (item.<span class="property">key</span> &gt; start &amp;&amp; item.<span class="property">key</span> &lt;= end) item.<span class="property">key</span>--;
      <span class="keyword">else</span> <span class="keyword">if</span> (item.<span class="property">key</span> === start) item.<span class="property">key</span> = end;
    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (start &gt; end) &#123;
      <span class="keyword">if</span> (item.<span class="property">key</span> &gt;= end &amp;&amp; item.<span class="property">key</span> &lt; start) item.<span class="property">key</span>++;
      <span class="keyword">else</span> <span class="keyword">if</span> (item.<span class="property">key</span> === start) item.<span class="property">key</span> = end;
    &#125;
  &#125;);
  <span class="variable language_">this</span>.<span class="title function_">getListPosition</span>(dragImgList);
&#125;,</code></pre></li>
</ul>
<h3 id="touchEnd"><a href="#touchEnd" class="headerlink" title="touchEnd"></a>touchEnd</h3><ul>
<li>touchEndÁî®‰∫éÈáçÁΩÆÊï∞ÊçÆ<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * touchEnd</span>
<span class="comment"> */</span>
<span class="title function_">touchEnd</span>(<span class="params"></span>) &#123;
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    <span class="attr">tranX</span>: <span class="number">0</span>,
    <span class="attr">tranY</span>: <span class="number">0</span>,
    <span class="attr">currentIndex</span>: -<span class="number">1</span>,
  &#125;);
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">currentKey</span> = -<span class="number">1</span>;
&#125;,</code></pre></li>
</ul>
<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><ul>
<li><a href="https://github.com/LHRUN/wx-drag-img">repo</a></li>
<li><a href="https://www.npmjs.com/package/wx-drag-img">npm</a></li>
</ul>
<h2 id="ÂèÇËÄÉËµÑÊñô"><a href="#ÂèÇËÄÉËµÑÊñô" class="headerlink" title="ÂèÇËÄÉËµÑÊñô"></a>ÂèÇËÄÉËµÑÊñô</h2><ul>
<li><a href="https://www.cnblogs.com/haha1212/p/11562944.html">‰∏ÄÊ¨æ‰ºòÈõÖÁöÑÂ∞èÁ®ãÂ∫èÊãñÊãΩÊéíÂ∫èÁªÑ‰ª∂ÂÆûÁé∞</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁÄëÂ∏ÉÊµÅÂíåËôöÊãüÂàóË°®</title>
    <url>/2022/08/21/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%80%91%E5%B8%83%E6%B5%81%E5%92%8C%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8/</url>
    <content><![CDATA[<h2 id="ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁÄëÂ∏ÉÊµÅÂíåËôöÊãüÂàóË°®"><a href="#ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁÄëÂ∏ÉÊµÅÂíåËôöÊãüÂàóË°®" class="headerlink" title="ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁÄëÂ∏ÉÊµÅÂíåËôöÊãüÂàóË°®"></a>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁÄëÂ∏ÉÊµÅÂíåËôöÊãüÂàóË°®</h2><p>È¶ñÂÖàÂ£∞ÊòéËôΩÁÑ∂Êú¨ÁØáÊòØÂÜôÁöÑÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁöÑÊ°à‰æãÔºå‰ΩÜÊòØ‰πüÂèØÁî®‰∫éH5ÔºåÊÄùË∑ØÊòØÊÉ≥ÈÄöÁöÑÔºåÂè™ÊòØÊúâ‰∫õapiÁöÑÂ∑ÆÂºÇÔºåÊúÄÂêé‰ºöË¥¥‰ª£Á†ÅÁâáÊÆµ<br><img src="https://img-blog.csdnimg.cn/40f9275783f14ed4a2a020ec733b3043.gif#pic_center" alt="example"></p>
<h3 id="ËôöÊãüÂàóË°®"><a href="#ËôöÊãüÂàóË°®" class="headerlink" title="ËôöÊãüÂàóË°®"></a>ËôöÊãüÂàóË°®</h3><ul>
<li>‰∏ÄËà¨Âú®ÂÅöÈïøÂàóË°®‰ºòÂåñÊó∂ÔºåÁâπÂà´ÊòØÈù¢ËØïÊó∂ÔºåËôöÊãüÂàóË°®Â∞±ÊòØ‰∏™È´òÈ¢ëËØç„ÄÇËøô‰∏™ÂêçËØçÂê¨Ëµ∑Êù•ÂæàÈ´òÁ∫ßÔºåÂÖ∂ÂÆûÂéüÁêÜÂæàÁÆÄÂçï</li>
<li>ËôöÊãüÂàóË°®Â∞±ÊòØÂ∞ÜÈúÄË¶ÅÊ∏≤ÊüìÁöÑÊï∞ÁªÑÊï∞ÊçÆÊîπÈÄ†Êàê‰∫åÁª¥Êï∞ÁªÑÔºåÁÑ∂ÂêéÈÄöËøáÁõëÂê¨DOMÂú®ÂêàÈÄÇÁöÑÂú∞ÊñπÂàáÊç¢‰∏∫Âç†‰ΩçÂÖÉÁ¥†ÔºåËææÂà∞ÈïøÂàóË°®Êó†ÈôêÊªöÂä®Êó∂ÂáèÂ∞ëDOMÁöÑ‰ºòÂåñ</li>
<li>JS <pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Â§ÑÁêÜÂç†‰ΩçÂÖÉÁ¥†ÔºåÂ∞±ÊòØÂú®Ëé∑ÂèñÊñ∞ÁöÑÊï∞ÊçÆÂêé</span>
<span class="comment"> * ÈÄöËøáSelectQueryËé∑ÂèñÂΩìÂâçÊï∞ÊçÆÁöÑÂÆûÈôÖÈ´òÂ∫¶ÔºåÁÑ∂ÂêéÊääËøô‰∏™È´òÂ∫¶ËÆæÁΩÆÂà∞Âç†‰ΩçÂÖÉÁ¥†‰∏ä</span>
<span class="comment"> */</span>
<span class="title function_">getCurrentItemHeight</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> query = <span class="variable language_">this</span>.<span class="title function_">createSelectorQuery</span>();
  <span class="keyword">const</span> &#123; virtualId &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  query.<span class="title function_">select</span>(<span class="string">`#<span class="subst">$&#123;virtualId&#125;</span>`</span>).<span class="title function_">boundingClientRect</span>()
  query.<span class="title function_">exec</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      <span class="attr">height</span>: res[<span class="number">0</span>].<span class="property">height</span>
    &#125;, <span class="variable language_">this</span>.<span class="title function_">observePage</span>())
  &#125;)
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÁõëÂê¨ÂÖÉÁ¥†‰∏éÈ°µÈù¢ÁöÑÁõ∏‰∫§</span>
<span class="comment"> * ÂèØ‰ª•ÈÄâÊã©ÊåáÂÆöÂÖÉÁ¥†‰∏∫ÂèÇÁÖßÂå∫ÂüüÔºå‰πüÂèØ‰ª•ÈÄâÊã©È°µÈù¢‰∏∫ÂèÇÁÖßÂÖÉÁ¥†ÔºåÂè™ÊòØAPI‰∏çÂêå</span>
<span class="comment"> * <span class="doctag">@doc</span> https://developers.weixin.qq.com/miniprogram/dev/api/wxml/IntersectionObserver.html</span>
<span class="comment"> */</span>
<span class="title function_">observePage</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> &#123; virtualId, observeDistance, wrapId &#125; = <span class="variable language_">this</span>.<span class="property">data</span>
  <span class="keyword">let</span> <span class="title class_">IntersectionObserver</span> = wx.<span class="title function_">createIntersectionObserver</span>(<span class="variable language_">this</span>);
  (wrapId ? <span class="title class_">IntersectionObserver</span>.<span class="title function_">relativeTo</span>(<span class="string">`#<span class="subst">$&#123;wrapId&#125;</span>`</span>) : <span class="title class_">IntersectionObserver</span>.<span class="title function_">relativeToViewport</span>(&#123; <span class="attr">top</span>: observeDistance, <span class="attr">bottom</span>: observeDistance &#125;))
  .<span class="title function_">observe</span>(<span class="string">`#<span class="subst">$&#123;virtualId&#125;</span>`</span>, <span class="function">(<span class="params">&#123; intersectionRatio &#125;</span>) =&gt;</span> &#123;
    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
      <span class="attr">isShow</span>: intersectionRatio &gt; <span class="number">0</span>,
    &#125;)
  &#125;)
&#125;</code></pre></li>
<li>html<pre><code class="highlight js">&lt;view id=<span class="string">&quot;&#123;&#123;virtualId&#125;&#125;&quot;</span>&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:if</span>=<span class="string">&quot;&#123;&#123;isShow&#125;&#125;&quot;</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span>
  <span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:else</span> <span class="attr">style</span>=<span class="string">&quot;height: &#123;&#123; height &#125;&#125;px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span>
&lt;/view&gt;</code></pre></li>
</ul>
<h3 id="ÁÄëÂ∏ÉÊµÅ"><a href="#ÁÄëÂ∏ÉÊµÅ" class="headerlink" title="ÁÄëÂ∏ÉÊµÅ"></a>ÁÄëÂ∏ÉÊµÅ</h3><ul>
<li>ÁÄëÂ∏ÉÊµÅÔºåÂèàÁß∞ÁÄëÂ∏ÉÊµÅÂºèÂ∏ÉÂ±Ä„ÄÇËßÜËßâË°®Áé∞‰∏∫ÂèÇÂ∑Æ‰∏çÈΩêÁöÑÂ§öÊ†èÂ∏ÉÂ±ÄÔºåÈöèÁùÄÈ°µÈù¢ÊªöÂä®Êù°Âêë‰∏ãÊªöÂä®ÔºåËøôÁßçÂ∏ÉÂ±ÄËøò‰ºö‰∏çÊñ≠Âä†ËΩΩÊï∞ÊçÆÂùóÂπ∂ÈôÑÂä†Ëá≥ÂΩìÂâçÂ∞æÈÉ®</li>
<li>ÁÄëÂ∏ÉÊµÅÊúâÂ§öÁßçÂÜôÊ≥ïÔºåÊúâÈÄöËøáÁ∫ØCSSÂÆåÊàêÁöÑÔºå‰πüÊúâÂÄüÂä©JSÂÆåÊàêÁöÑÔºåÊñπÊ≥ïÂæàÂ§öÔºå‰ΩÜÊòØÊàë‰∏∫‰∫ÜÊé•‰∏ãÊù•ËÉΩ‰∏éËôöÊãüÂàóË°®Áõ∏ÁªìÂêàÔºåÂ∞±ÈááÁî®JSÁöÑÂÜôÊ≥ïÔºåÂ∞±ÊòØÈÄöËøáÂàóÊï∞ÊääÊØè‰∏ÄÂàóÂàÜ‰∏∫‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠êÂÖÉÁ¥†ÔºåÁÑ∂Âêé‰ºöËÆ∞ÂΩïÊØè‰∏ÄÂàóÁöÑÈ´òÂ∫¶ÔºåÈÄöËøáÂà§Êñ≠Âì™‰∏ÄÂàóÈ´òÂ∫¶ÊúÄÂ∞èÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÊçÆpushÂà∞È´òÂ∫¶ÊúÄÂ∞èÁöÑÈÇ£‰∏ÄÂàó<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÂàóË°®Êï∞ÊçÆ</span>
<span class="comment"> * <span class="doctag">@describe</span> ÁÄëÂ∏ÉÊµÅÂ§ÑÁêÜÔºåÂì™ÂàóÈ´òÂ∫¶Â∞èÔºåÂ∞±ÂæÄÂì™ÂàópushÊñ∞Êï∞ÊçÆ</span>
<span class="comment"> */</span>
<span class="title function_">getList</span>(<span class="params"></span>) &#123;
  <span class="keyword">let</span> &#123; <span class="attr">listQuery</span>: &#123; pageIndex, pageSize &#125;, columns, columnsHeight &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pageSize; i++) &#123;
    <span class="keyword">const</span> height = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">100</span>)
    <span class="keyword">const</span> item = height &lt; <span class="number">50</span> ? height + <span class="number">50</span> : height
    <span class="keyword">const</span> position = <span class="variable language_">this</span>.<span class="title function_">computePosition</span>(columnsHeight)
    columns[position].<span class="title function_">push</span>(item)
    columnsHeight += item
  &#125;
  <span class="comment">// Âú®html‰∏≠ÂèåÈáçÈÅçÂéÜcolumnsÔºåÁÑ∂ÂêéÈÄöËøáflexÔºö1ÂùáÂåÄÂàÜÂ∏É</span>
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    columns,
  &#125;)
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">columnsHeight</span> = columnsHeight
&#125;

<span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÈ´òÂ∫¶ÊúÄÂ∞èÂàó‰∏ãÊ†á</span>
<span class="comment"> */</span>
<span class="title function_">computePosition</span>(<span class="params">heights</span>) &#123;
  <span class="keyword">const</span> min = <span class="title class_">Math</span>.<span class="title function_">min</span>(...heights);
  <span class="keyword">return</span> heights.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item === min)
&#125;</code></pre></li>
</ul>
<h3 id="ÁÄëÂ∏ÉÊµÅÁªìÂêàËôöÊãüÂàóË°®"><a href="#ÁÄëÂ∏ÉÊµÅÁªìÂêàËôöÊãüÂàóË°®" class="headerlink" title="ÁÄëÂ∏ÉÊµÅÁªìÂêàËôöÊãüÂàóË°®"></a>ÁÄëÂ∏ÉÊµÅÁªìÂêàËôöÊãüÂàóË°®</h3><ul>
<li>ËÆ©ÁÄëÂ∏ÉÊµÅÊúâËôöÊãüÊªöÂä®ÁöÑËÉΩÂäõÔºåÊÄùË∑ØÂæàÁÆÄÂçïÔºåÂ∞±ÊòØËÆ°ÁÆóÊØèÂàóÁöÑÂÅèÁßªÈáèÔºåÂõ†‰∏∫ÁÄëÂ∏ÉÊµÅË¢´Êàë‰ª¨ÂàÜÊàê‰∫Ü‰∫åÁª¥Êï∞ÁªÑÔºåÊâÄ‰ª•ÊØèÂùóÂ≠êÂÖÉÁ¥†‰πãÈó¥Â∞±‰ºöÂõ†‰∏∫ÂàóÈ´òÂ∫¶ÁöÑ‰∏ç‰∏ÄËá¥‰∫ßÁîüÁ©∫ÁôΩÂå∫ÂüüÔºåÊâÄ‰ª•ÈúÄË¶ÅËÆ°ÁÆóËøô‰∏™Á©∫ÁôΩÂå∫ÂüüÁöÑÂ§ßÂ∞èÔºåÁÑ∂ÂêéÈÄöËøá<code>margin-top</code>ÁßªÂä®ÂàóÂÖÉÁ¥†ËææÂà∞ËßÜËßâ‰∏äÁöÑÁÄëÂ∏ÉÊµÅË°îÊé•ÊïàÊûú<br><img src="https://img-blog.csdnimg.cn/070e8c72d982470ca8808ad8121e6110.png#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></li>
</ul>
<pre><code class="highlight js"><span class="title function_">getList</span>(<span class="params"></span>) &#123;
  <span class="keyword">let</span> &#123; <span class="attr">listQuery</span>: &#123; pageIndex &#125;, column, columnsHeights &#125; = <span class="variable language_">this</span>.<span class="property">data</span>;
  <span class="keyword">const</span> columns = [];
  <span class="comment">// ‰∏ä‰∏ÄÁªÑÁöÑÈ´òÂ∫¶Êï∞ÊçÆÔºåÁî®‰∫éËÆ°ÁÆóÂÅèÁßªÂÄº</span>
  <span class="keyword">const</span> lastHeights = [...columnsHeights];
  <span class="comment">// Ëé∑ÂèñÊï∞ÊçÆ</span>
  <span class="keyword">const</span> list = <span class="variable language_">this</span>.<span class="title function_">getListData</span>();
  <span class="comment">// ÂàùÂßãÂåñÂΩìÂâçÂ±èÊï∞ÊçÆ</span>
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; column; i++ ) &#123;
    columns.<span class="title function_">push</span>([]);
  &#125;
  <span class="comment">// ÈÅçÂéÜÊñ∞Êï∞ÊçÆÔºåÂàÜÈÖçËá≥ÂêÑÂàó</span>
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;
    <span class="keyword">const</span> position = <span class="variable language_">this</span>.<span class="title function_">computePosition</span>(columnsHeights);
    columns[position].<span class="title function_">push</span>(list[i]);
    columnsHeights[position] += <span class="title class_">Number</span>(list[i].<span class="property">height</span>);
  &#125;
  <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;
    [<span class="string">`listData[<span class="subst">$&#123;pageIndex&#125;</span>]`</span>]: &#123;
      columns,
      <span class="attr">columnOffset</span>: <span class="variable language_">this</span>.<span class="title function_">computeOffset</span>(lastHeights),
    &#125;
  &#125;);
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">listQuery</span>.<span class="property">pageIndex</span> = pageIndex + <span class="number">1</span>;
  <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">columnsHeights</span> = columnsHeights;
&#125;,

<span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÂàóË°®Êï∞ÊçÆ</span>
<span class="comment"> */</span>
<span class="title function_">getListData</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> result = []
  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">listQuery</span>.<span class="property">pageSize</span>; i++) &#123;
    <span class="keyword">const</span> height = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">300</span>);
    <span class="keyword">const</span> item = &#123;
      <span class="attr">height</span>: height &lt; <span class="number">150</span> ? height + <span class="number">150</span> : height,
      <span class="attr">color</span>: <span class="variable language_">this</span>.<span class="title function_">randomRgbColor</span>(),
    &#125;;
    result.<span class="title function_">push</span>(item);
  &#125;
  <span class="keyword">return</span> result;
&#125;,

<span class="comment">/**</span>
<span class="comment"> * ÈöèÊú∫ÁîüÊàêRGBÈ¢úËâ≤</span>
<span class="comment"> */</span>
<span class="title function_">randomRgbColor</span>(<span class="params"></span>) &#123;
  <span class="keyword">var</span> r = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>); <span class="comment">//ÈöèÊú∫ÁîüÊàê256‰ª•ÂÜÖrÂÄº</span>
  <span class="keyword">var</span> g = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>); <span class="comment">//ÈöèÊú∫ÁîüÊàê256‰ª•ÂÜÖgÂÄº</span>
  <span class="keyword">var</span> b = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">256</span>); <span class="comment">//ÈöèÊú∫ÁîüÊàê256‰ª•ÂÜÖbÂÄº</span>
  <span class="keyword">return</span> <span class="string">`rgb(<span class="subst">$&#123;r&#125;</span>,<span class="subst">$&#123;g&#125;</span>,<span class="subst">$&#123;b&#125;</span>)`</span>; <span class="comment">//ËøîÂõûrgb(r,g,b)Ê†ºÂºèÈ¢úËâ≤</span>
&#125;,

<span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÊúÄÂ∞èÈ´òÂ∫¶Âàó‰∏ãÊ†á</span>
<span class="comment"> */</span>
<span class="title function_">computePosition</span>(<span class="params">heights</span>) &#123;
  <span class="keyword">const</span> min = <span class="title class_">Math</span>.<span class="title function_">min</span>(...heights);
  <span class="keyword">return</span> heights.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item === min);
&#125;,

<span class="comment">/**</span>
<span class="comment"> * ËÆ°ÁÆóÂÅèÁßªÈáè</span>
<span class="comment"> */</span>
<span class="title function_">computeOffset</span>(<span class="params">heights</span>) &#123;
  <span class="keyword">const</span> max = <span class="title class_">Math</span>.<span class="title function_">max</span>(...heights);
  <span class="keyword">return</span> heights.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> max - item);
&#125;,

<span class="title function_">onScrollLower</span>(<span class="params"></span>) &#123;
  <span class="variable language_">this</span>.<span class="title function_">getList</span>();
&#125;</code></pre>
<ul>
<li>WXML<pre><code class="highlight js">&lt;view&gt;
  <span class="language-xml"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;virtualScrollView&quot;</span> <span class="attr">eventhandle</span> <span class="attr">scroll-y</span> <span class="attr">bindscrolltolower</span>=<span class="string">&quot;onScrollLower&quot;</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; listData &#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;screenIndex&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;screenIndex&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;screenItem&quot;</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">VirtualItem</span> <span class="attr">virtualId</span>=<span class="string">&quot;virtual_&#123;&#123;pageIndex&#125;&#125;&quot;</span>&gt;</span></span>
<span class="language-xml">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;fall&quot;</span>&gt;</span></span>
<span class="language-xml">          <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123; screenItem.columns &#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;columnIndex&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;columnIndex&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;column&quot;</span> &gt;</span></span>
<span class="language-xml">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: -&#123;&#123;screenItem.columnOffset[columnIndex]&#125;&#125;px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;fallCol&quot;</span>&gt;</span></span>
<span class="language-xml">              <span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;column&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: &#123;&#123; item.height &#125;&#125;px; background-color: &#123;&#123; item.color &#125;&#125;;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;item&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span>
<span class="language-xml">                screen: &#123;&#123; screenIndex &#125;&#125;, column: &#123;&#123; columnIndex &#125;&#125;</span>
<span class="language-xml">              <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span>
<span class="language-xml">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span>
<span class="language-xml">          <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span>
<span class="language-xml">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;/<span class="name">VirtualItem</span>&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span>
<span class="language-xml">  <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span>
&lt;/view&gt;</code></pre></li>
</ul>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><ul>
<li>‰ª£Á†ÅÁâáÊÆµÔºö<a href="https://developers.weixin.qq.com/s/5P3DpGmI7PBc">https://developers.weixin.qq.com/s/5P3DpGmI7PBc</a></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
        <tag>ÁÄëÂ∏ÉÊµÅ</tag>
        <tag>ËôöÊãüÂàóË°®</tag>
      </tags>
  </entry>
  <entry>
    <title>ÂæÆ‰ø°Â∞èÁ®ãÂ∫èËìùÁâôÊéßÂà∂ÂºÄÈó®</title>
    <url>/2020/01/10/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%93%9D%E7%89%99%E6%8E%A7%E5%88%B6%E5%BC%80%E9%97%A8/</url>
    <content><![CDATA[<h2 id="Â∞èÁ®ãÂ∫è‰ΩéÂäüËÄóËìùÁâôÊéßÂà∂ÂºÄÈó®"><a href="#Â∞èÁ®ãÂ∫è‰ΩéÂäüËÄóËìùÁâôÊéßÂà∂ÂºÄÈó®" class="headerlink" title="Â∞èÁ®ãÂ∫è‰ΩéÂäüËÄóËìùÁâôÊéßÂà∂ÂºÄÈó®"></a>Â∞èÁ®ãÂ∫è‰ΩéÂäüËÄóËìùÁâôÊéßÂà∂ÂºÄÈó®</h2><h3 id="Êï¥‰ΩìÊµÅÁ®ã"><a href="#Êï¥‰ΩìÊµÅÁ®ã" class="headerlink" title="Êï¥‰ΩìÊµÅÁ®ã"></a>Êï¥‰ΩìÊµÅÁ®ã</h3><blockquote>
<ol>
<li>ÂàùÂßãÂåñËìùÁâôÊ®°Âùó<code>openBluetoothAdapter</code></li>
<li>Ëé∑ÂèñÊú¨Êú∫ËìùÁâôÈÄÇÈÖçÂô®Áä∂ÊÄÅ<code>getBluetoothAdapterState</code></li>
<li>ÊêúÁ¥¢Â§ñÂõ¥ËìùÁâôËÆæÂ§á<code>startBluetoothDevicesDiscovery</code></li>
<li>ÁõëÂê¨ÂØªÊâæÂà∞Êñ∞ËÆæÂ§á<code>onBluetoothDeviceFound</code></li>
<li>ËøûÊé•ËìùÁâô<code>createBLEConnection</code></li>
<li>Ëé∑ÂèñËìùÁâôËÆæÂ§áÁöÑÊúçÂä°<code>getBLEDeviceServices</code></li>
<li>Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄº<code>getBLEDeviceCharacteristics</code></li>
<li>ÂêØÁî®ÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩ<code>notifyBLECharacteristicValueChange</code></li>
<li>ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ<code>writeBLECharacteristicValue</code></li>
<li>ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó<code>closeBluetoothAdapter</code></li>
</ol>
</blockquote>
<h3 id="1-ÂàùÂßãÂåñËìùÁâôÊ®°Âùó"><a href="#1-ÂàùÂßãÂåñËìùÁâôÊ®°Âùó" class="headerlink" title="1. ÂàùÂßãÂåñËìùÁâôÊ®°Âùó"></a>1. ÂàùÂßãÂåñËìùÁâôÊ®°Âùó</h3><ul>
<li>ÂàùÂßãÂåñËìùÁâôÊ®°Âùó‰ΩøÁî®ÁöÑÊòØÔºö<code>wx.openBluetoothAdapter</code>ÔºåÂàùÂßãÂåñ‰πãÂâçÂØπËìùÁâôÂäüËÉΩÂÅö‰∏Ä‰∏™Âà§Êñ≠ÔºåÁúãÊâãÊú∫ÂæÆ‰ø°ÁâàÊú¨ÊòØÂê¶ÊîØÊåÅÊ≠§ÂäüËÉΩ</li>
<li>ÂàùÂßãÂåñ‰πãÂâçÈúÄË¶ÅÂÖ≥Èó≠ËìùÁâôÊ®°ÂùóÔºö<code>wx.closeBluetoothAdapter</code>ÔºåÂê¶ÂàôÂÆπÊòìÊêúÁ¥¢Â§±Ë¥•<pre><code class="highlight js"><span class="keyword">var</span> _this = <span class="variable language_">this</span>
<span class="keyword">if</span> (!wx.<span class="property">openBluetoothAdapter</span>) &#123;
  wx.<span class="title function_">showModal</span>(&#123;
    <span class="attr">title</span>: <span class="string">&#x27;ÊèêÁ§∫&#x27;</span>,
    <span class="attr">showCancel</span>: <span class="literal">false</span>,
    <span class="attr">content</span>: <span class="string">&#x27;ÂΩìÂâçÂæÆ‰ø°ÁâàÊú¨Ëøá‰ΩéÔºåÊó†Ê≥ï‰ΩøÁî®ËØ•ÂäüËÉΩÔºåËØ∑ÂçáÁ∫ßÂà∞ÊúÄÊñ∞ÂæÆ‰ø°ÁâàÊú¨ÂêéÈáçËØï&#x27;</span>,
  &#125;)
&#125; <span class="keyword">else</span> &#123;
  wx.<span class="title function_">closeBluetoothAdapter</span>(&#123;
    <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
      wx.<span class="title function_">openBluetoothAdapter</span>(&#123; <span class="comment">// ÂàùÂßãÂåñËìùÁâôÊ®°Âùó</span>
        <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ÂàùÂßãÂåñËìùÁâôÊàêÂäü&#x27;</span>)
          _this.<span class="title function_">getBluetoothAdapterState</span>()
        &#125;,
        <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;
          <span class="variable language_">console</span>.<span class="title function_">log</span>(err)
        &#125;
      &#125;)
    &#125;,
  &#125;)
&#125;</code></pre></li>
</ul>
<h3 id="2-Ëé∑ÂèñÊú¨Êú∫ËìùÁâôÈÄÇÈÖçÂô®Áä∂ÊÄÅ"><a href="#2-Ëé∑ÂèñÊú¨Êú∫ËìùÁâôÈÄÇÈÖçÂô®Áä∂ÊÄÅ" class="headerlink" title="2. Ëé∑ÂèñÊú¨Êú∫ËìùÁâôÈÄÇÈÖçÂô®Áä∂ÊÄÅ"></a>2. Ëé∑ÂèñÊú¨Êú∫ËìùÁâôÈÄÇÈÖçÂô®Áä∂ÊÄÅ</h3><ul>
<li>Ëé∑ÂèñÊú¨Êú∫ËìùÁâôÈÄÇÈÖçÂô®Áä∂ÊÄÅ‰ΩøÁî®ÁöÑÊòØ<code>wx.getBluetoothAdapterState</code>ÔºåË∞ÉÁî®ÊàêÂäüÂêéÔºå‰ºöËøîÂõû‰∏§‰∏™ÂèÇÊï∞<ul>
<li><code>discovering</code>Âà§Êñ≠ÊòØÂê¶Ê≠£Âú®ÊêúÁ¥¢ËÆæÂ§á</li>
<li><code>available</code>Âà§Êñ≠ËìùÁâôÈÄÇÈÖçÂô®ÊòØÂê¶ÂèØÁî®<pre><code class="highlight js"><span class="attr">getBluetoothAdapterState</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;
  <span class="keyword">var</span> _this = <span class="variable language_">this</span>
  wx.<span class="title function_">getBluetoothAdapterState</span>(&#123;
    <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
      <span class="keyword">if</span> (res.<span class="property">available</span> == <span class="literal">false</span>) &#123;
        wx.<span class="title function_">showToast</span>(&#123;
          <span class="attr">title</span>: <span class="string">&#x27;ËÆæÂ§áÊó†Ê≥ïÂºÄÂêØËìùÁâôËøûÊé•&#x27;</span>,
          <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,
          <span class="attr">duration</span>: <span class="number">2000</span>
        &#125;)
        wx.<span class="title function_">closeBluetoothAdapter</span>()
      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.<span class="property">discovering</span> == <span class="literal">false</span>) &#123;
        _this.<span class="title function_">startBluetoothDevicesDiscovery</span>() <span class="comment">// ÂºÄÂêØÊêúÁ¥¢Â§ñÂõ¥ËÆæÂ§á</span>
      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.<span class="property">available</span>)&#123;
        _this.<span class="title function_">startBluetoothDevicesDiscovery</span>() <span class="comment">// ËìùÁâôÈÄÇÈÖçÂô®Ê≠£Â∏∏ÔºåÂéªÊâßË°åÊêúÁ¥¢Â§ñÂõ¥ËÆæÂ§á</span>
      &#125;
    &#125;
  &#125;)
&#125;</code></pre></li>
</ul>
</li>
</ul>
<h3 id="3-ÊêúÁ¥¢Â§ñÂõ¥ËìùÁâôËÆæÂ§á"><a href="#3-ÊêúÁ¥¢Â§ñÂõ¥ËìùÁâôËÆæÂ§á" class="headerlink" title="3. ÊêúÁ¥¢Â§ñÂõ¥ËìùÁâôËÆæÂ§á"></a>3. ÊêúÁ¥¢Â§ñÂõ¥ËìùÁâôËÆæÂ§á</h3><ul>
<li>ÊêúÁ¥¢Â§ñÂõ¥ËìùÁâôËÆæÂ§á‰ΩøÁî®ÁöÑÊòØ<code>wx.startBluetoothDevicesDiscovery</code>ÔºåËøûÊé•ËÆæÂ§áÂêé‰∏ÄÂÆöË¶Å‰ΩøÁî®<code>wx.stopBluetoothDevicesDiscovery</code>ÂÅúÊ≠¢ÊêúÁ¥¢<pre><code class="highlight js"><span class="attr">startBluetoothDevicesDiscovery</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;
    <span class="keyword">var</span> _this = <span class="variable language_">this</span>
    wx.<span class="title function_">startBluetoothDevicesDiscovery</span>(&#123;
      <span class="attr">allowDuplicatesKey</span>: <span class="literal">false</span>,
      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
        <span class="keyword">if</span>(!res.<span class="property">isDiscovering</span>)&#123; <span class="comment">// ÊòØÂê¶Âú®ÊêúÁ¥¢ËÆæÂ§á</span>
          _this.<span class="title function_">getBluetoothAdapterState</span>()
        &#125;<span class="keyword">else</span>&#123;
          _this.<span class="title function_">onBluetoothDeviceFound</span>() <span class="comment">// ÊêúÁ¥¢ÊàêÂäüÂêéÔºåÊâßË°åÁõëÂê¨ËÆæÂ§áÁöÑapi</span>
        &#125;
      &#125;,
      <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;
        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ËìùÁâôÊêúÂØªÂ§±Ë¥•&quot;</span>)
        wx.<span class="title function_">stopBluetoothDevicesDiscovery</span>() <span class="comment">// Ê≤°ÊúâÊêúÁ¥¢Âà∞ËÆæÂ§á</span>
        wx.<span class="title function_">closeBluetoothAdapter</span>() <span class="comment">// ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó</span>
      &#125;
    &#125;)
&#125;</code></pre></li>
</ul>
<h3 id="4-ÁõëÂê¨ÂØªÊâæÂà∞Êñ∞ËÆæÂ§á"><a href="#4-ÁõëÂê¨ÂØªÊâæÂà∞Êñ∞ËÆæÂ§á" class="headerlink" title="4. ÁõëÂê¨ÂØªÊâæÂà∞Êñ∞ËÆæÂ§á"></a>4. ÁõëÂê¨ÂØªÊâæÂà∞Êñ∞ËÆæÂ§á</h3><ul>
<li>ÁõëÂê¨ÂØªÊâæÂà∞Êñ∞ËÆæÂ§á‰ΩøÁî®ÁöÑÊòØ<code>wx.onBluetoothDeviceFound</code>ÔºåÊØèÊêúÂà∞‰∏Ä‰∏™Êñ∞ËÆæÂ§áÂ∞±‰ºöËß¶Âèë‰∏ÄÊ¨°ÔºåÁÑ∂ÂêéËøîÂõû‰∏Ä‰∏™ÊêúÁ¥¢Âà∞ÁöÑËÆæÂ§áÂàóË°®ÔºåÂåÖÂê´‰∫ÜËÆæÂ§áÂêçÁß∞ÂíåmacÂú∞ÂùÄÔºå‰∏ÄËà¨ÈÉΩÊòØ‰ΩøÁî®ËÆæÂ§áÂêçÁß∞ÂíåmacÂú∞ÂùÄÊù•ÂåπÈÖçËÆæÂ§áÁöÑ<ul>
<li>ÂÆâÂçìÂíåIOSËøîÂõûÁöÑdeviceId‰∏ç‰∏ÄÊ†∑ÔºåÂÆâÂçìËøîÂõûÁöÑÊòØmacÂú∞ÂùÄÔºåIOSËøîÂõûÁöÑÊòØUUIDÔºåÂ¶ÇÊûúÊÉ≥ÈÄöËøámacÂú∞ÂùÄÊù•ÂåπÈÖçËÆæÂ§áÔºåÂèØ‰ª•ËÆ©macÂú∞ÂùÄÂ≠òÂÇ®Âú®<code>advertisData</code>Êï∞ÊçÆÊÆµ‰∏≠ÔºåÁÑ∂ÂêéËß£ÊûêËøô‰∏™Êï∞ÊçÆÊÆµÂæóÂà∞macÂú∞ÂùÄ</li>
<li>Êàë‰ΩøÁî®ÁöÑÊòØÈÄöËøáËÆæÂ§áÂêçÁß∞Êù•ËøõË°åÂåπÈÖç<pre><code class="highlight js"><span class="attr">onBluetoothDeviceFound</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;
  <span class="keyword">var</span> _this = <span class="variable language_">this</span>
  wx.<span class="title function_">onBluetoothDeviceFound</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;
    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;res.<span class="property">devices</span>.<span class="property">length</span>; i++)&#123;
      <span class="keyword">if</span>(res.<span class="property">devices</span>[i].<span class="property">name</span> == <span class="string">&quot;ËÆæÂ§áÂêçÁß∞&quot;</span> || res.<span class="property">devices</span>[i].<span class="property">localName</span> == <span class="string">&quot;ËÆæÂ§áÂêçÁß∞&quot;</span>)&#123;
        _this.<span class="title function_">setData</span>(&#123;
          <span class="attr">deviceId</span>: res.<span class="property">devices</span>[i].<span class="property">deviceId</span> <span class="comment">// ÊääÂåπÈÖçËÆæÂ§áÁöÑdeviceIdÂ≠òÂà∞data‰∏≠</span>
        &#125;)
        wx.<span class="title function_">stopBluetoothDevicesDiscovery</span>() <span class="comment">// ÂåπÈÖçÂà∞ËÆæÂ§áÂêéÂÖ≥Èó≠ÊêúÁ¥¢</span>
        _this.<span class="title function_">createBLEConnection</span>() <span class="comment">// ËøûÊé•ËìùÁâô</span>
      &#125;
    &#125;
  &#125;)
&#125;</code></pre></li>
</ul>
</li>
</ul>
<h3 id="5-ËøûÊé•ËìùÁâô"><a href="#5-ËøûÊé•ËìùÁâô" class="headerlink" title="5. ËøûÊé•ËìùÁâô"></a>5. ËøûÊé•ËìùÁâô</h3><ul>
<li>ËøûÊé•ËìùÁâô‰ΩøÁî®ÁöÑÊòØ<code>wx.createBLEConnection</code>ÔºåËøûÊé•ËìùÁâôÊòØÈÄöËøá<code>deviceId</code>ËøûÊé•Ôºå<code>deviceId</code>ÊòØÈÄöËøá<code>wx.onBluetoothDeviceFound</code>Ëé∑ÂèñÁöÑ</li>
<li>ËøûÊé•ËìùÁâôÂÆπÊòìÂ§±Ë¥•ÔºåÊâÄ‰ª•ÂèØ‰ª•ÂÆö‰∏Ä‰∏™ÂèòÈáè<code>count</code>Áî®Êù•ËÆ°ÁÆóËøûÊé•ÁöÑÊ¨°Êï∞ÔºåÂ¶ÇÊûúË∂ÖÂá∫ÁâπÂÆöÁöÑÊ¨°Êï∞Â∞±Âà§Êñ≠‰∏∫ËøûÊé•Â§±Ë¥•ÔºåÂÖ≥Èó≠ËìùÁâôÊ®°Âùó<pre><code class="highlight js"><span class="attr">createBLEConnection</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// ËøûÊé•‰ΩéÂäüËÄóËìùÁâô</span>
  <span class="keyword">var</span> _this = <span class="variable language_">this</span>
  wx.<span class="title function_">createBLEConnection</span>(&#123;
    <span class="attr">deviceId</span>: _this.<span class="property">data</span>.<span class="property">deviceId</span>,
    <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
      _this.<span class="title function_">getBLEDeviceServices</span>()
    &#125;,
    <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ËøûÊé•Â§±Ë¥•&quot;</span>)
      <span class="keyword">if</span>( count &lt; <span class="number">6</span> )&#123;
        count++
        _this.<span class="title function_">createBLEConnection</span>()
      &#125;<span class="keyword">else</span>&#123;
        wx.<span class="title function_">closeBluetoothAdapter</span>() <span class="comment">// ËøûÊé•Â§±Ë¥•ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó</span>
      &#125;
    &#125;
  &#125;)
&#125;</code></pre></li>
</ul>
<h3 id="6-Ëé∑ÂèñËìùÁâôËÆæÂ§áÁöÑÊúçÂä°"><a href="#6-Ëé∑ÂèñËìùÁâôËÆæÂ§áÁöÑÊúçÂä°" class="headerlink" title="6. Ëé∑ÂèñËìùÁâôËÆæÂ§áÁöÑÊúçÂä°"></a>6. Ëé∑ÂèñËìùÁâôËÆæÂ§áÁöÑÊúçÂä°</h3><ul>
<li>Ëé∑ÂèñËìùÁâôËÆæÂ§áÁöÑÊúçÂä°ÂàóË°®‰ΩøÁî®ÁöÑÊòØ<code>wx.getBLEDeviceServices</code><pre><code class="highlight js"><span class="attr">getBLEDeviceServices</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;
  <span class="keyword">var</span> _this = <span class="variable language_">this</span>
  wx.<span class="title function_">getBLEDeviceServices</span>(&#123;
    <span class="attr">deviceId</span>: _this.<span class="property">data</span>.<span class="property">deviceId</span>,
    <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
      <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;res.<span class="property">services</span>.<span class="property">length</span>; i++)&#123;
        <span class="comment">// Â¶ÇÊûúÊèêÂâçÂæóÁü•ÂèØ‰ª•Áõ¥Êé•Âà§Êñ≠ÔºåÂ¶ÇÊûú‰∏çÁü•ÈÅìÂèØ‰ª•Áî®ËìùÁâôÂ∑•ÂÖ∑Áúã‰∏Ä‰∏ãÊúçÂä°ÊâÄÈúÄÁöÑÂäüËÉΩ</span>
        <span class="keyword">if</span>(res.<span class="property">services</span>[i].<span class="property">uuid</span> == _this.<span class="property">data</span>.<span class="property">service</span>)&#123;
          _this.<span class="title function_">setData</span>(&#123;
            <span class="attr">serviceId</span>: res.<span class="property">services</span>[i].<span class="property">uuid</span>
          &#125;)
          _this.<span class="title function_">getBLEDeviceCharacteristics</span>()
        &#125;   
      &#125;
    &#125;,
    <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ëé∑ÂèñÊúçÂä°Â§±Ë¥•&quot;</span>)
      wx.<span class="title function_">closeBluetoothAdapter</span>() <span class="comment">// ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó</span>
    &#125;
  &#125;)
&#125;,</code></pre></li>
</ul>
<h3 id="7-Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄº"><a href="#7-Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄº" class="headerlink" title="7. Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄº"></a>7. Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄº</h3><ul>
<li>Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄº‰ΩøÁî®ÁöÑÊòØ<code>wx.getBLEDeviceCharacteristics</code><pre><code class="highlight js"><span class="attr">getBLEDeviceCharacteristics</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄº</span>
  <span class="keyword">var</span> _this = <span class="variable language_">this</span>
  wx.<span class="title function_">getBLEDeviceCharacteristics</span>(&#123;
    <span class="attr">deviceId</span>: _this.<span class="property">data</span>.<span class="property">deviceId</span>,
    <span class="attr">serviceId</span>: _this.<span class="property">data</span>.<span class="property">serviceId</span>,
    <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
      <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;res.<span class="property">characteristics</span>.<span class="property">length</span>; i++)&#123;
        <span class="keyword">let</span> model = res.<span class="property">characteristics</span>[i]
        <span class="keyword">if</span> ((model.<span class="property">properties</span>.<span class="property">notify</span> || model.<span class="property">properties</span>.<span class="property">indicate</span>) &amp;&amp; (model.<span class="property">properties</span>.<span class="property">read</span> &amp;&amp; model.<span class="property">properties</span>.<span class="property">write</span>))&#123;
          _this.<span class="title function_">setData</span>(&#123;
            <span class="attr">characteristicId</span>: model.<span class="property">uuid</span>
          &#125;)
          _this.<span class="title function_">notifyBLECharacteristicValueChange</span>()
        &#125;
      &#125;
    &#125;,
    <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Ëé∑ÂèñÊúçÂä°‰∏≠ÁöÑÁâπÂæÅÂÄºÂ§±Ë¥•&quot;</span>)
      wx.<span class="title function_">closeBluetoothAdapter</span>() <span class="comment">// ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó</span>
    &#125;
  &#125;)
&#125;,</code></pre></li>
</ul>
<h3 id="8-ÂêØÁî®ÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩ"><a href="#8-ÂêØÁî®ÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩ" class="headerlink" title="8. ÂêØÁî®ÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩ"></a>8. ÂêØÁî®ÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩ</h3><ul>
<li>ÂêØÁî®ÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩ‰ΩøÁî®ÁöÑÊòØ<code>wx.notifyBLECharacteristicValueChange</code><pre><code class="highlight js"><span class="attr">notifyBLECharacteristicValueChange</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// ÂêØÁî®ËìùÁâôÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩ</span>
    <span class="keyword">var</span> _this = <span class="variable language_">this</span>
    wx.<span class="title function_">notifyBLECharacteristicValueChange</span>(&#123;
      <span class="attr">deviceId</span>: _this.<span class="property">data</span>.<span class="property">deviceId</span>,
      <span class="attr">serviceId</span>: _this.<span class="property">data</span>.<span class="property">serviceId</span>,
      <span class="attr">characteristicId</span>: _thisa.<span class="property">characteristicId</span>,
      <span class="attr">state</span>: <span class="literal">true</span>,
      <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
        wx.<span class="title function_">onBLECharacteristicValueChange</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;
            <span class="variable language_">console</span>.<span class="title function_">log</span>(Â¶ÇÊûúË¶ÅÊâìÂç∞ÈúÄË¶Å‰ªéarraybufferÊ†ºÂºèËΩ¨‰∏∫Â≠óÁ¨¶‰∏≤Êàñ<span class="number">16</span>ËøõÂà∂)
        &#125;)
        _this.<span class="title function_">writeBLECharacteristicValue</span>() <span class="comment">// ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ</span>
      &#125;,
      <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;
        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ÂêØÁî®BLEËìùÁâôÁâπÂæÅÂÄºÂèòÂåñÊó∂ÁöÑnotifyÂäüËÉΩÈîôËØØ&quot;</span>)
        wx.<span class="title function_">closeBluetoothAdapter</span>() <span class="comment">// ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó</span>
      &#125;
    &#125;)</code></pre></li>
</ul>
<h3 id="9-ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ"><a href="#9-ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ" class="headerlink" title="9. ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ"></a>9. ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ</h3><ul>
<li>ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ<code>wx.writeBLECharacteristicValue</code>ÔºåËøôÊó∂ÂÄôÂ∞±ÊòØËæìÂÖ•ÊèêÂâçËÆæÂÆöÂ•ΩÁöÑÊåá‰ª§<pre><code class="highlight js"><span class="attr">writeBLECharacteristicValue</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="comment">// ÂêëËìùÁâôËÆæÂ§áÂÜôÂÖ•Êï∞ÊçÆ</span>
  <span class="keyword">var</span> _this = <span class="variable language_">this</span>
  wx.<span class="title function_">writeBLECharacteristicValue</span>(&#123;
    <span class="attr">deviceId</span>: _this.<span class="property">data</span>.<span class="property">deviceId</span>,
    <span class="attr">serviceId</span>: _this.<span class="property">data</span>.<span class="property">serviceId</span>,
    <span class="attr">characteristicId</span>: _this.<span class="property">data</span>.<span class="property">characteristicId</span>,
    <span class="attr">value</span>: buffer, <span class="comment">// Ëøô‰∏™ËæìÂÖ•ÁöÑÊåá‰ª§ÔºåÈúÄË¶ÅËΩ¨Êç¢ÊàêArrayBuffer</span>
    <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ÊàêÂäü&quot;</span>)
      wx.<span class="title function_">closeBluetoothAdapter</span>() <span class="comment">// ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó</span>
    &#125;,
    <span class="attr">fail</span>: <span class="function"><span class="params">err</span> =&gt;</span> &#123;
      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ËæìÂÖ•Êåá‰ª§Â§±Ë¥•&quot;</span>)
      wx.<span class="title function_">closeBluetoothAdapter</span>() <span class="comment">// ÂÖ≥Èó≠ËìùÁâôÊ®°Âùó</span>
    &#125;
  &#125;)
&#125;</code></pre></li>
</ul>
<h3 id="ËΩ¨Êç¢Ê†ºÂºè"><a href="#ËΩ¨Êç¢Ê†ºÂºè" class="headerlink" title="ËΩ¨Êç¢Ê†ºÂºè"></a>ËΩ¨Êç¢Ê†ºÂºè</h3><ul>
<li><p>Â≠óÁ¨¶‰∏≤ËΩ¨‰∏∫arraybuffer</p>
<pre><code class="highlight js"><span class="attr">string2buffer</span>: <span class="keyword">function</span> (<span class="params">str</span>) &#123;
    <span class="comment">// È¶ñÂÖàÂ∞ÜÂ≠óÁ¨¶‰∏≤ËΩ¨‰∏∫16ËøõÂà∂</span>
    <span class="keyword">let</span> val = <span class="string">&quot;&quot;</span>
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i++) &#123;
      <span class="keyword">if</span> (val === <span class="string">&#x27;&#x27;</span>) &#123;
        val = str.<span class="title function_">charCodeAt</span>(i).<span class="title function_">toString</span>(<span class="number">16</span>)
      &#125; <span class="keyword">else</span> &#123;
        val += <span class="string">&#x27;,&#x27;</span> + str.<span class="title function_">charCodeAt</span>(i).<span class="title function_">toString</span>(<span class="number">16</span>)
      &#125;
    &#125;
    <span class="comment">// Â∞Ü16ËøõÂà∂ËΩ¨Âåñ‰∏∫ArrayBuffer</span>
    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(val.<span class="title function_">match</span>(<span class="regexp">/[\da-f]&#123;2&#125;/gi</span>).<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">h</span>) &#123;
      <span class="keyword">return</span> <span class="built_in">parseInt</span>(h, <span class="number">16</span>)
    &#125;)).<span class="property">buffer</span>
&#125;</code></pre>
</li>
<li><p>arraybufferËΩ¨‰∏∫Â≠óÁ¨¶‰∏≤</p>
<pre><code class="highlight js"><span class="keyword">function</span> <span class="title function_">ab2str</span>(<span class="params">u,f</span>) &#123;
   <span class="keyword">var</span> b = <span class="keyword">new</span> <span class="title class_">Blob</span>([u]);
   <span class="keyword">var</span> r = <span class="keyword">new</span> <span class="title class_">FileReader</span>();
    r.<span class="title function_">readAsText</span>(b, <span class="string">&#x27;utf-8&#x27;</span>);
    r.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>)&#123;<span class="keyword">if</span>(f)f.<span class="title function_">call</span>(<span class="literal">null</span>,r.<span class="property">result</span>)&#125;
&#125;</code></pre></li>
</ul>
<h3 id="ËìùÁâôÈÅáËßÅÁöÑÂùë"><a href="#ËìùÁâôÈÅáËßÅÁöÑÂùë" class="headerlink" title="ËìùÁâôÈÅáËßÅÁöÑÂùë"></a>ËìùÁâôÈÅáËßÅÁöÑÂùë</h3><ul>
<li>1.ËãπÊûúÊâãÊú∫ÊúâÊó∂ÂÄôËæìÂÖ•Êåá‰ª§‰ºöÊòæÁ§∫ÂèëÈÄÅÊàêÂäüÔºå‰ΩÜÊòØËÆæÂ§áÂπ∂Ê≤°ÊúâÂèçÂ∫î<ul>
<li><pre><code>Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÊääÈúÄË¶ÅËæìÂÖ•ÁöÑÊåá‰ª§ÊîπÊàêÊØè10ÊØ´ÁßíËæìÂÖ•‰∏Ä‰∏™Â≠óËäÇ
</code></pre>
</li>
<li>Â¶ÇÊûúÊîπÊàêÊØè10ÊØ´ÁßíËæìÂÖ•‰∏Ä‰∏™Â≠óËäÇÔºåÂÆâÂçìÊâãÊú∫Â∞±‰ºöÈ¢ëÁπÅÂá∫Áé∞10008ÈîôËØØ</li>
<li>ÈíàÂØπËøô‰∏™ÈóÆÈ¢òÊàëÁî®‰∫Ü‰∏Ä‰∏™‰∏çÂ§™Â•ΩÁöÑÊñπÊ≥ïÔºåÊàëÂà§Êñ≠‰∫Ü‰∏Ä‰∏ãÊâãÊú∫ÁöÑÁ±ªÂûãÔºåÂ¶ÇÊûúÊòØiosÁöÑÂ∞±ÂàÜ10ÊØ´ÁßíËæìÂÖ•ÔºåÂ¶ÇÊûúÊòØÂÆâÂçìÁöÑÂ∞±‰∏ÄÊ¨°ÊÄßËæìÂÖ•</li>
</ul>
</li>
<li>2.Âú®Ë∞ÉÁî®<code>wx.onBluetoothDeviceFound</code>Ëøô‰∏™apiÊó∂ios‰ºöÁõëÂê¨‰∏§Ê¨°ÔºåÁÑ∂ÂêéÂ∞±‰ºöÂØºËá¥ÊúÄÂêéËÆæÂ§á‰ºöÊúâ‰∏§Ê¨°Êåá‰ª§ËæìÂÖ•<ul>
<li>Ëß£ÂÜ≥ÊñπÊ≥ïÔºöÊàëÂú®ÊêúÁ¥¢ËìùÁâôËÆæÂ§á‰πãÂâçÂÅö‰∫Ü‰∏Ä‰∏™ÂÆöÊó∂Âô®ÔºåÁÑ∂ÂêéÁî®<code>getBluetoothDevices</code>Êù•Êü•ÁúãÊâÄÊúâÂ∑≤ÊêúÁ¥¢Âà∞ÁöÑËìùÁâôÔºåÂú®Ëøô‰∏™ÈáåÈù¢ÂÅöÂà§Êñ≠Êù•ËøûÊé•ËìùÁâôËÆæÂ§á</li>
</ul>
</li>
<li>Êàë‰∏äÈù¢ÁöÑÊ≠•È™§Ê≤°ÊúâÊääËøô‰∫õÂùëÁöÑËß£ÂÜ≥Ê≠•È™§Âä†‰∏äÔºåÂ¶ÇÊûúÁ¢∞ËßÅÊ≠§Á±ªÈóÆÈ¢òÔºåÂèØ‰ª•Ëá™Â∑±Âú®ÂêàÈÄÇÁöÑ‰ΩçÁΩÆ‰øÆÊîπ‰∏Ä‰∏ã</li>
</ul>
<h3 id="‰∫åÁª¥Á†Å"><a href="#‰∫åÁª¥Á†Å" class="headerlink" title="‰∫åÁª¥Á†Å"></a>‰∫åÁª¥Á†Å</h3><p>ÊàëËá™Â∑±ÂÅö‰∫Ü‰∏Ä‰∏™Â∞èÁ®ãÂ∫èÁöÑËìùÁâôË∞ÉËØïÂô®Ôºå‰∏ãÈù¢ÊòØÂ∞èÁ®ãÂ∫èÁ†ÅÔºåÊ¨¢ËøéÂ§ßÂÆ∂‰ΩìÈ™å<br><img src="https://img-blog.csdnimg.cn/20200123154720532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDcxOTI1OA==,size_16,color_FFFFFF,t_70" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></p>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
        <tag>ËìùÁâô</tag>
      </tags>
  </entry>
  <entry>
    <title>Ëß£ÂÜ≥reactÁä∂ÊÄÅÁÆ°ÁêÜ---React Query</title>
    <url>/2021/06/12/%E8%A7%A3%E5%86%B3react%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-ReactQuery/</url>
    <content><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20210612171112847.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDcxOTI1OA==,size_16,color_FFFFFF,t_70#pic_center" alt="React Query"></p>
<h3 id="‰ªÄ‰πàÊòØReact-Query"><a href="#‰ªÄ‰πàÊòØReact-Query" class="headerlink" title="‰ªÄ‰πàÊòØReact Query"></a>‰ªÄ‰πàÊòØReact Query</h3><ul>
<li><code>react-query</code>ÊòØ‰∏Ä‰∏™ÈÄÇÁî®‰∫éreact hooksÁöÑËØ∑Ê±ÇÂ∫ìÔºåÂÆÉÂèØ‰ª•‰∏∫‰ªª‰ΩïÁ±ªÂûãÁöÑÂºÇÊ≠•Êï∞ÊçÆÊèê‰æõReactÁä∂ÊÄÅÁÆ°ÁêÜÂäüËÉΩÔºå‰ΩøReact‰∏≠ÁöÑËé∑Âèñ„ÄÅÁºìÂ≠ò„ÄÅÂêåÊ≠•ÂíåÊõ¥Êñ∞ÊúçÂä°Âô®Êï∞ÊçÆÂèòÂæóËΩªËÄåÊòì‰∏æ</li>
<li><code>react-query</code>‰∏é‰∏Ä‰∫õ‰º†ÁªüÁöÑÁä∂ÊÄÅÁÆ°ÁêÜÂ∫ìÂ¶Çredux,mobx‰∏çÂêåÔºåÂÆÉÊòØË¥üË¥£ÁÆ°ÁêÜÊúçÂä°Âô®‰∏éÂÆ¢Êà∑Á´Ø‰πãÈó¥ÁöÑÁä∂ÊÄÅÔºå‰∏Ä‰∫õÁî®Êà∑‰∫§‰∫íÁöÑ‰∏≠Èó¥Áä∂ÊÄÅÔºåÂ¶ÇloadingÁä∂ÊÄÅÔºåÈîôËØØ‰ø°ÊÅØÁ≠âÈÉΩÊòØÈÄöËøáhooksÁõ¥Êé•ËøîÂõû</li>
<li><a href="https://react-query-v2.tanstack.com/">React QueryÂÆòÁΩë</a></li>
</ul>
<h3 id="ÂàùÊ≠•‰ΩøÁî®"><a href="#ÂàùÊ≠•‰ΩøÁî®" class="headerlink" title="ÂàùÊ≠•‰ΩøÁî®"></a>ÂàùÊ≠•‰ΩøÁî®</h3><ol>
<li><code>yarn add react-query</code> or <code>npm i react-query</code>ÂÆâË£Öreact-query</li>
<li>‰ΩøÁî®<code>QueryClientProvider</code>ÁªÑ‰ª∂ËøûÊé•Âπ∂Êèê‰æõ‰∏Ä‰∏™<code>QueryClient</code>Âà∞‰Ω†ÁöÑÂ∫îÁî®Á®ãÂ∫è<pre><code class="highlight js"><span class="keyword">import</span> &#123; <span class="title class_">QueryClient</span>, <span class="title class_">QueryClientProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-query&#x27;</span>

&lt;<span class="title class_">QueryClientProvider</span> client=&#123;<span class="keyword">new</span> <span class="title class_">QueryClient</span>()&#125;&gt;
  &#123; ... &#125;
&lt;/<span class="title class_">QueryClientProvider</span>&gt;</code></pre></li>
</ol>
<h4 id="Devtools"><a href="#Devtools" class="headerlink" title="Devtools"></a>Devtools</h4><ul>
<li><code>yarn add react-query-devtools</code> or <code>npm i --save react-query-devtools</code>ÂÆâË£ÖDevtools</li>
<li><code>react-query-devtools</code>ÊòØ‰∏é<code>react-query</code>Áõ∏ÂåπÈÖçÁöÑÂºÄÂèëÂ∑•ÂÖ∑</li>
<li>ÂèØÂú®ÂºÄÂèë‰∏≠ÂÆûÊó∂Êü•ÁúãÁºìÂ≠òÔºåÊâãÂä®Ëé∑ÂèñÂíåÂà†Èô§Êü•ËØ¢Á≠âÁ≠â<pre><code class="highlight js"><span class="keyword">import</span> &#123; <span class="title class_">ReactQueryDevtools</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-query-devtools&#x27;</span>

<span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;
  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;&gt;</span>    </span>
<span class="language-xml">      &#123; ... &#125;</span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">ReactQueryDevtools</span> <span class="attr">initialIsOpen</span>=<span class="string">&#123;true&#125;</span> /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/&gt;</span></span>
  );
&#125;;</code></pre></li>
</ul>
<h3 id="Â¢ûÂà†ÊîπÊü•"><a href="#Â¢ûÂà†ÊîπÊü•" class="headerlink" title="Â¢ûÂà†ÊîπÊü•"></a>Â¢ûÂà†ÊîπÊü•</h3><ul>
<li>react-queryÊúÄÂ∏∏Áî®ÁöÑ‰∏§‰∏™hookÔºåÊü•ËØ¢(<code>useQuery</code>)„ÄÅÂ¢ûÂà†Êîπ(<code>useMutation</code>)</li>
</ul>
<h4 id="useQuery"><a href="#useQuery" class="headerlink" title="useQuery"></a>useQuery</h4><ul>
<li><code>useQuery</code>ÔºöÂú®<code>React Query</code>‰∏≠ÔºåÊü•ËØ¢ÊòØÂØπÊüê‰∫õÂºÇÊ≠•Êï∞ÊçÆÊ∫êÁöÑÂ£∞ÊòéÊÄß‰æùËµñ„ÄÇÊü•ËØ¢ÂèØ‰ª•‰∏é‰ªª‰ΩïÂü∫‰∫éPromiseÁöÑÊñπÊ≥ï(GET)‰∏ÄËµ∑‰ΩøÁî®Ôºå‰ªéÊúçÂä°Âô®Ëé∑ÂèñÊï∞ÊçÆ<pre><code class="highlight js"><span class="keyword">const</span> <span class="title function_">useTodos</span> = (<span class="params">param</span>) =&gt; &#123;
  <span class="keyword">const</span> request = <span class="title function_">useHttp</span>()

  <span class="comment">/**</span>
<span class="comment">   * Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØQueryKeyÔºåÊòØÊü•ËØ¢ÁöÑÂÖ≥ÈîÆÔºåÊòØ‰∏Ä‰∏™Áã¨‰∏ÄÊó†‰∫åÁöÑkeyÔºåÂπ∂Âú®‰πãÂêéÁöÑÂ¢ûÂà†Êîπ‰∏≠ÈúÄË¶ÅÔºå</span>
<span class="comment">   *   Â¶ÇÊûúÈúÄË¶ÅÂä®ÊÄÅÁöÑQueryKeyÔºåÂèØ‰ª•‰ΩøÁî®Êï∞ÁªÑÁöÑÊñπÂºèÔºåÂ¶Ç[&#x27;todos&#x27;, params]</span>
<span class="comment">   * Á¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÁî®‰∫éËé∑ÂèñÊï∞ÊçÆÁöÑÂºÇÊ≠•ÂáΩÊï∞</span>
<span class="comment">   * useQueryÁöÑÂìçÂ∫îËøîÂõûÂ∞±ÊòØËé∑ÂèñÂà∞ÁöÑÊï∞ÊçÆÂíå‰∏Ä‰∫õ‰∏≠Èó¥Áä∂ÊÄÅÔºåÂ¶ÇisLoadingÔºåerrorÔºåisIdle...</span>
<span class="comment">   */</span>
  <span class="keyword">return</span> <span class="title function_">useQuery</span>(<span class="string">&#x27;todos&#x27;</span>, <span class="function">() =&gt;</span>
    <span class="title function_">request</span>(<span class="string">&#x27;todos&#x27;</span>, &#123; <span class="attr">data</span>: param &#125;)
  )
&#125;

<span class="comment">// Âú®UIÁªÑ‰ª∂Ë∞ÉÁî®</span>
<span class="keyword">const</span> &#123; isLoading, error, <span class="attr">data</span>: todos &#125; = <span class="title function_">useTodos</span>()</code></pre></li>
</ul>
<h4 id="useMutation"><a href="#useMutation" class="headerlink" title="useMutation"></a>useMutation</h4><ul>
<li><code>useMutation</code>ÔºöÂ∏∏Áî®‰∫éÂàõÂª∫&#x2F;Êõ¥Êñ∞&#x2F;Âà†Èô§Êï∞ÊçÆÊàñÊâßË°åÊúçÂä°Âô®ÂâØ‰ΩúÁî®<pre><code class="highlight js"><span class="keyword">const</span> <span class="title function_">useAddTodo</span> = (<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> request = <span class="title function_">useHttp</span>()

  <span class="comment">/**</span>
<span class="comment">   * Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÊâßË°åÊìç‰ΩúÁöÑÂºÇÊ≠•ÂáΩÊï∞ÔºåÂú®ËøîÂõûÁöÑmutate‰∏≠Ëß¶Âèë</span>
<span class="comment">   * Á¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØÊâßË°åÊàêÂäüÊàñËÄÖÂ§±Ë¥•ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆÂáΩÊï∞ÔºåÂèØÁî®‰∫é‰∏Ä‰∫õÂ§ÑÁêÜÁºìÂ≠òÁöÑÊìç‰ΩúÔºå‰æãÂ¶Ç‰πêËßÇÊõ¥Êñ∞</span>
<span class="comment">   */</span>
  <span class="keyword">return</span> <span class="title function_">useMutation</span>(
    <span class="function">(<span class="params">data</span>) =&gt;</span>
      <span class="title function_">request</span>(<span class="string">`todos`</span>, &#123;
        data,
        <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,
      &#125;),
    &#123;
      <span class="title function_">onSuccess</span>(<span class="params"></span>)&#123;&#125;
      <span class="title function_">onError</span>(<span class="params"></span>)&#123;&#125;
      <span class="title function_">onSettled</span>(<span class="params"></span>)&#123;&#125;
      ...
    &#125;
  )
&#125;

<span class="comment">// Êìç‰ΩúÁªÑ‰ª∂Ë∞ÉÁî®</span>
<span class="keyword">const</span> <span class="title function_">TodosAddBtn</span> = (<span class="params"></span>) =&gt; &#123;
  ...
  <span class="keyword">const</span> &#123; mutateAsync, isLoading, error &#125; = <span class="title function_">useAddTodo</span>()
  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> mutateAsync(todoData)&#125;&gt;add<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span>
&#125;</code></pre></li>
</ul>
<h5 id="‰æãÔºöÁî®Á¨¨‰∫å‰∏™ÂèÇÊï∞ÈÖçÁΩÆ‰πêËßÇÊõ¥Êñ∞"><a href="#‰æãÔºöÁî®Á¨¨‰∫å‰∏™ÂèÇÊï∞ÈÖçÁΩÆ‰πêËßÇÊõ¥Êñ∞" class="headerlink" title="‰æãÔºöÁî®Á¨¨‰∫å‰∏™ÂèÇÊï∞ÈÖçÁΩÆ‰πêËßÇÊõ¥Êñ∞"></a>‰æãÔºöÁî®Á¨¨‰∫å‰∏™ÂèÇÊï∞ÈÖçÁΩÆ‰πêËßÇÊõ¥Êñ∞</h5><ul>
<li>‰πêËßÇÊõ¥Êñ∞Â∞±ÊòØÂú®‰∏Ä‰∫õËØ∑Ê±ÇÊàñËÄÖÊï∞ÊçÆÂ§ÑÁêÜÊ≤°ÊúâÁªìÊùüÁöÑÊó∂ÂÄôÔºåÊèêÂâçÁªôÁî®Êà∑ÊòæÁ§∫ÁêÜÊÉ≥ÁöÑÁªìÊûúÔºåÂ¶ÇÊûúÂ§±Ë¥•Â∞±ÂõûÊªöÊõ¥Êñ∞<pre><code class="highlight js"><span class="keyword">const</span> <span class="title function_">useAddConfig</span> = (<span class="params">queryKey</span>) =&gt; &#123;
  <span class="comment">// Ëé∑ÂèñÂΩìÂâçQueryClientÁöÑÂÆû‰æã</span>
  <span class="keyword">const</span> queryClient = <span class="title function_">useQueryClient</span>()
  
  <span class="keyword">return</span> &#123;
    <span class="comment">// ÂΩìmutateË¢´Ë∞ÉÁî®Êó∂Ëß¶Âèë</span>
    <span class="keyword">async</span> <span class="title function_">onMutate</span>(<span class="params">target</span>) &#123;
      <span class="comment">// Ëé∑ÂèñÂΩìÂâçÊï∞ÊçÆÂø´ÁÖßÔºåÁî®‰∫éÈîôËØØÊó∂ÂõûÊªöÊõ¥Êñ∞</span>
      <span class="keyword">const</span> previousItems = queryClient.<span class="title function_">getQueryData</span>(queryKey)
      <span class="comment">// ‰πêËßÇÊõ¥Êñ∞‰∏∫Êñ∞ÂÄº</span>
      queryClient.<span class="title function_">setQueryData</span>(queryKey, <span class="function">(<span class="params">old</span>) =&gt;</span> &#123;
        <span class="keyword">return</span> <span class="function">(<span class="params">target, old</span>) =&gt;</span> (old ? [...old, target] : [])
      &#125;)

      <span class="comment">// Ëøô‰∏™ËøîÂõûÂÄº‰ºö‰Ωú‰∏∫ÊúÄÂêé‰∏Ä‰∏™ÂèÇÊï∞‰º†ÈÄíÁªôonErrorÂíåonSettled</span>
      <span class="keyword">return</span> &#123; previousItems &#125;
    &#125;,
    <span class="comment">// ÊàêÂäüÂõûË∞É Ê∏ÖÈô§ÁºìÂ≠ò</span>
    <span class="attr">onSuccess</span>: <span class="function">() =&gt;</span> queryClient.<span class="title function_">invalidateQueries</span>(queryKey),
    <span class="comment">// Â§±Ë¥•ÂõûË∞É</span>
    <span class="title function_">onError</span>(<span class="params">error, newItem, context</span>) &#123;
      <span class="comment">// ÂΩìÂâçqueryKeyÁöÑÊï∞ÊçÆÂõûÊªö</span>
      queryClient.<span class="title function_">setQueryData</span>(
        queryKey,
        context.<span class="property">previousItems</span>
      )
    &#125;,
    <span class="comment">// Êó†ËÆ∫ÈîôËØØÊàñËÄÖÊàêÂäüÈÉΩ‰ºöËß¶ÂèëÔºåÊ≠§‰æãÂ≠êÊ≤°Êúâ‰ΩøÁî®</span>
    <span class="title function_">onSettled</span>(<span class="params"></span>) &#123;&#125;
  &#125;
&#125;</code></pre></li>
</ul>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><ul>
<li>Êú¨Âú∞&#x2F;ÂÆ¢Êà∑Á´Ø‰∏≠Èó¥Áä∂ÊÄÅ<ul>
<li>redux‰∏éreact-queryÈÉΩÂèØÔºåÊ≤°ÊúâËæÉÂ§ßÁöÑ‰ºòÁº∫ÁÇπ</li>
</ul>
</li>
<li>ÊúçÂä°Á´Ø‰∏≠Èó¥Áä∂ÊÄÅ<ul>
<li>Êé®Ëçêreact-queryÔºåÂ∞ÜÊúçÂä°Âô®Áä∂ÊÄÅ‰ªéÂÖ®Â±ÄÁä∂ÊÄÅ‰∏≠Ëß£ÊîæÂá∫Êù•ÔºåÁî®Êõ¥Â∞ëÁöÑ‰ª£Á†ÅÂÆûÁé∞Â§çÊùÇÁöÑÈúÄÊ±ÇÔºåËÆ©‰Ω†ÁöÑÁä∂ÊÄÅÁÆ°ÁêÜÊõ¥‰ºòÈõÖ</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>React</tag>
        <tag>ReactQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>Ëß£ÊûêVue3patchÊ†∏ÂøÉÁÆóÊ≥ïpatchKeyedChildren</title>
    <url>/2022/08/25/%E8%A7%A3%E6%9E%90Vue3patch%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95patchKeyedChildren/</url>
    <content><![CDATA[<h3 id="Ëß£ÊûêVue3patchÊ†∏ÂøÉÁÆóÊ≥ïpatchKeyedChildren"><a href="#Ëß£ÊûêVue3patchÊ†∏ÂøÉÁÆóÊ≥ïpatchKeyedChildren" class="headerlink" title="Ëß£ÊûêVue3patchÊ†∏ÂøÉÁÆóÊ≥ïpatchKeyedChildren"></a>Ëß£ÊûêVue3patchÊ†∏ÂøÉÁÆóÊ≥ïpatchKeyedChildren</h3><ul>
<li>locateÔºö<code>runtime-core &gt; renderer &gt; baseCreateRenderer &gt; patchKeyedChildren</code></li>
<li>patchKeyedChildrenÊòØpatchÁÆóÊ≥ï‰∏≠ËæÉ‰∏∫Â§çÊùÇÁöÑ‰∏ÄÊÆµÔºåÊõ¥ÊòØvueÊäÄÊúØÊ†àÈù¢ËØïÁöÑÈ´òÈ¢ëÁÇπÔºåÊúÄÂàùÊàëÊòØÂú®vue3.0 betaÁâàÊú¨Êó∂Â§ßÊ¶ÇÁúãËøáÊ∫êÁ†ÅÔºåÂêéÊù•Âú®„ÄävueËÆæËÆ°‰∏éÂàÜÊûê„Äã‰∏≠Áúã‰∫ÜÈúçÊò•Èò≥Â§ß‰Ω¨ÁöÑËß£ÊûêÔºåÊú¨ÁØáÂ∞±ÁÆÄË¶ÅÂàÜÊûê‰∏Ä‰∏ãÂÅö‰∏™ËÆ∞ÂΩï</li>
<li>È¶ñÂÖàpatchKeyedChildrenÊòØÂú®Â≠êÂàóË°®ÂØπÊØîÂπ∂‰∏îÊúâkeyÁöÑÊÉÖÂÜµ‰ºöËøõÂÖ•ÔºåÂπ∂‰∏îÈÄªËæëÂ§ßËá¥ÂàÜ‰∏∫5Ê≠•ÔºåËøô‰∏™ÁúãÊ∫êÁ†ÅÂÆòÊñπÊ≥®ÈáäÂ∞±ÂèØ‰ª•ÁúãÂá∫</li>
</ul>
<h4 id="Á¨¨‰∏ÄÊ≠•Ôºå‰ªéÂâçÂêëÂêéÈÅçÂéÜ"><a href="#Á¨¨‰∏ÄÊ≠•Ôºå‰ªéÂâçÂêëÂêéÈÅçÂéÜ" class="headerlink" title="Á¨¨‰∏ÄÊ≠•Ôºå‰ªéÂâçÂêëÂêéÈÅçÂéÜ"></a>Á¨¨‰∏ÄÊ≠•Ôºå‰ªéÂâçÂêëÂêéÈÅçÂéÜ</h4><p>Ëøô‰∏ÄÊ≠•ÊòØ‰ªéËäÇÁÇπÁªÑÂ§¥ÈÉ®ÂêëÂ∞æÈÉ®ÈÅçÂéÜÔºåÂ¶ÇÊûúÈÅçÂéÜËøáÁ®ã‰∏≠ÈÅáÂà∞Áõ∏‰ººËäÇÁÇπÔºåÂ∞±ËøõË°åpatchÂØπÊØîÔºåÂê¶ÂàôÂ∞±ÈÄÄÂá∫ÈÅçÂéÜÔºåÂπ∂ËÆ∞ÂΩïÂΩìÂâçÈÅçÂéÜÁöÑÊúÄÊñ∞‰∏ãÊ†á</p>
<pre><code class="highlight js"><span class="keyword">while</span> (i &lt;= e1 &amp;&amp; i &lt;= e2) &#123;
  <span class="keyword">const</span> n1 = c1[i]
  <span class="keyword">const</span> n2 = (c2[i] = optimized
    ? <span class="title function_">cloneIfMounted</span>(c2[i] <span class="keyword">as</span> <span class="title class_">VNode</span>)
    : <span class="title function_">normalizeVNode</span>(c2[i]))
  <span class="keyword">if</span> (<span class="title function_">isSameVNodeType</span>(n1, n2)) &#123;
    <span class="title function_">patch</span>(
      n1,
      n2,
      container,
      <span class="literal">null</span>,
      parentComponent,
      parentSuspense,
      isSVG,
      slotScopeIds,
      optimized
    )
  &#125; <span class="keyword">else</span> &#123;
    <span class="keyword">break</span>
  &#125;
  i++
&#125;</code></pre>

<h4 id="Á¨¨‰∫åÊ≠•Ôºå‰ªéÂêéÂêëÂâçÈÅçÂéÜ"><a href="#Á¨¨‰∫åÊ≠•Ôºå‰ªéÂêéÂêëÂâçÈÅçÂéÜ" class="headerlink" title="Á¨¨‰∫åÊ≠•Ôºå‰ªéÂêéÂêëÂâçÈÅçÂéÜ"></a>Á¨¨‰∫åÊ≠•Ôºå‰ªéÂêéÂêëÂâçÈÅçÂéÜ</h4><p>‰ªéÂêéÂêëÂâçÈÅçÂéÜÔºåÂ¶ÇÊûúÈÅáÂà∞Á¨¨‰∏ÄÊ≠•ËÆ∞ÂΩïÁöÑ‰∏ãÊ†áÂ∞±ÂÅúÊ≠¢ÔºåÁÑ∂ÂêéÈÅçÂéÜËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÈÅáÂà∞Áõ∏‰ººËäÇÁÇπ‰πüÊòØÁõ¥Êé•ËøõË°åpatchÂØπÊØîÔºåÂ¶ÇÊûú‰∏çÁõ∏ÂêåÂ∞±ÊòØÁõ¥Êé•ÈÄÄÂá∫ÈÅçÂéÜÔºåÂπ∂‰∏îËÆ∞ÂΩïÊóßËäÇÁÇπÁªÑÂíåÊñ∞ËäÇÁÇπÁªÑÁöÑÂ∞æÊåáÈíà</p>
<pre><code class="highlight js"><span class="keyword">while</span> (i &lt;= e1 &amp;&amp; i &lt;= e2) &#123;
  <span class="keyword">const</span> n1 = c1[e1]
  <span class="keyword">const</span> n2 = (c2[e2] = optimized
    ? <span class="title function_">cloneIfMounted</span>(c2[e2] <span class="keyword">as</span> <span class="title class_">VNode</span>)
    : <span class="title function_">normalizeVNode</span>(c2[e2]))
  <span class="keyword">if</span> (<span class="title function_">isSameVNodeType</span>(n1, n2)) &#123;
    <span class="title function_">patch</span>(
      n1,
      n2,
      container,
      <span class="literal">null</span>,
      parentComponent,
      parentSuspense,
      isSVG,
      slotScopeIds,
      optimized
    )
  &#125; <span class="keyword">else</span> &#123;
    <span class="keyword">break</span>
  &#125;
  e1--
  e2--
&#125;</code></pre>

<h4 id="Á¨¨‰∏âÊ≠•ÔºåÊ£ÄÊü•ÊóßËäÇÁÇπÁªÑ"><a href="#Á¨¨‰∏âÊ≠•ÔºåÊ£ÄÊü•ÊóßËäÇÁÇπÁªÑ" class="headerlink" title="Á¨¨‰∏âÊ≠•ÔºåÊ£ÄÊü•ÊóßËäÇÁÇπÁªÑ"></a>Á¨¨‰∏âÊ≠•ÔºåÊ£ÄÊü•ÊóßËäÇÁÇπÁªÑ</h4><p>Ëøô‰∏ÄÊ≠•Â∞±ÊòØÊ£ÄÊü•ÊóßËäÇÁÇπÁªÑÂú®‰∏ä‰∏§Ê≠•ÁöÑÈÅçÂéÜÂêéÊòØÂê¶ÈÅçÂéÜÂÆåÔºåÂ¶ÇÊûúÈÅçÂéÜÂÆåÔºåÈÇ£‰πàÊñ∞ËäÇÁÇπÁªÑÊ≤°ÊúâÈÅçÂéÜÂÆåÁöÑÂ∞±ÈÉΩÊòØÊñ∞ÁöÑdomÔºåÂèØ‰ª•ÂÖ®ÈÉ®ÂΩì‰ΩúÊñ∞Â¢ûËäÇÁÇπËøõË°åÊåÇËΩΩÂ§ÑÁêÜ</p>
<pre><code class="highlight js"><span class="keyword">if</span> (i &gt; e1) &#123;
  <span class="keyword">if</span> (i &lt;= e2) &#123;
    <span class="keyword">const</span> nextPos = e2 + <span class="number">1</span>
    <span class="keyword">const</span> anchor = nextPos &lt; l2 ? (c2[nextPos] <span class="keyword">as</span> <span class="title class_">VNode</span>).<span class="property">el</span> : parentAnchor
    <span class="keyword">while</span> (i &lt;= e2) &#123;
      <span class="comment">// patchÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫nullÔºåÂ∞±ÊòØ‰ª£Ë°®Ê≤°ÊúâÊóßËäÇÁÇπÔºåÁõ¥Êé•Â∞ÜÊñ∞ËäÇÁÇπÊèíÂÖ•</span>
      <span class="title function_">patch</span>(
        <span class="literal">null</span>,
        (c2[i] = optimized
          ? <span class="title function_">cloneIfMounted</span>(c2[i] <span class="keyword">as</span> <span class="title class_">VNode</span>)
          : <span class="title function_">normalizeVNode</span>(c2[i])),
        container,
        anchor,
        parentComponent,
        parentSuspense,
        isSVG,
        slotScopeIds,
        optimized
      )
      i++
    &#125;
  &#125;
&#125;</code></pre>

<h4 id="Á¨¨ÂõõÊ≠•ÔºåÊ£ÄÊü•Êñ∞ËäÇÁÇπÁªÑ"><a href="#Á¨¨ÂõõÊ≠•ÔºåÊ£ÄÊü•Êñ∞ËäÇÁÇπÁªÑ" class="headerlink" title="Á¨¨ÂõõÊ≠•ÔºåÊ£ÄÊü•Êñ∞ËäÇÁÇπÁªÑ"></a>Á¨¨ÂõõÊ≠•ÔºåÊ£ÄÊü•Êñ∞ËäÇÁÇπÁªÑ</h4><p>Â¶ÇÊûú‰∏ä‰∏ÄÊ≠•Ê£ÄÊü•ÊóßËäÇÁÇπÊú™ÈÅçÂéÜÂÆåÔºåÈÇ£‰πàÂ∞±Ê£ÄÊü•Êñ∞ËäÇÁÇπÁªÑÊòØÂê¶ÈÅçÂéÜÂÆåÔºåÂ¶ÇÊûúÈÅçÂéÜÂÆåÔºåÈÇ£‰πàÊóßÁöÑËäÇÁÇπÁªÑÂâ©‰ΩôÁöÑËäÇÁÇπËØ¥ÊòéÈÉΩÊòØË¶ÅÂç∏ËΩΩÁöÑÔºåÂõ†‰∏∫ÈÉΩ‰∏çÈúÄË¶Å‰∫Ü</p>
<pre><code class="highlight js"><span class="keyword">else</span> <span class="keyword">if</span> (i &gt; e2) &#123;
  <span class="comment">// ÊóßÂ≠êËäÇÁÇπÊú™Ë¢´ÈÅçÂéÜÂÆå</span>
  <span class="keyword">while</span> (i &lt;= e1) &#123;
    <span class="title function_">unmount</span>(c1[i], parentComponent, parentSuspense, <span class="literal">true</span>)
    i++
  &#125;
&#125;</code></pre>

<h4 id="Á¨¨‰∫îÊ≠•ÔºåÊú™Áü•Â∫èÂàó"><a href="#Á¨¨‰∫îÊ≠•ÔºåÊú™Áü•Â∫èÂàó" class="headerlink" title="Á¨¨‰∫îÊ≠•ÔºåÊú™Áü•Â∫èÂàó"></a>Á¨¨‰∫îÊ≠•ÔºåÊú™Áü•Â∫èÂàó</h4><ul>
<li>Â¶ÇÊûúÊñ∞ÊóßËäÇÁÇπÁªÑÈÉΩÊú™ÈÅçÂéÜÂÆåÔºåËØ¥ÊòéÂ≠òÂú®Êú™Áü•Â∫èÂàóÔºåÂèØËÉΩÂ≠òÂú®‰ΩçÁßªÁ≠âÊÉÖÂÜµÔºåÂ∞±ÈúÄË¶ÅËøõ‰∏ÄÊ≠•Â§ÑÁêÜ</li>
<li>È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™Êï∞ÁªÑÔºåÁî®‰∫éËÆ∞ÂΩïÊñ∞ÊóßËäÇÁÇπÁöÑÂØπÂ∫îÂÖ≥Á≥ª<pre><code class="highlight js"><span class="comment">// toBePatchedÊòØÊñ∞Â∫èÂàóÁöÑËäÇÁÇπÊï∞Èáè e2 - s2 + 1</span>
<span class="keyword">const</span> newIndexToOldIndexMap = <span class="keyword">new</span> <span class="title class_">Array</span>(toBePatched)
<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; toBePatched; i++) newIndexToOldIndexMap[i] = <span class="number">0</span></code></pre></li>
<li>ÁÑ∂Âêé‰ºöÈÅçÂéÜÊóßËäÇÁÇπÁªÑÔºåËøôÈáå‰ºöÁî®‰∏§‰∏™ÂèòÈáèËÆ∞ÂΩï<ul>
<li><code>let moved = false</code>Ôºö‰ΩçÁßªÊ†áËØÜÔºåÁî®‰∫éÂà§Êñ≠ÊòØÂê¶ÈúÄË¶Å‰ΩçÁßª</li>
<li><code>let patched = 0</code>ÔºöËÆ∞ÂΩïÂ∑≤ÊâßË°åpatchÁöÑÊñ∞ËäÇÁÇπÊï∞ÈáèÔºåÁî®‰∫éÂ§ÑÁêÜÂ¶ÇÊûúÂú®Êõ¥Êñ∞Êó∂Êõ¥Êñ∞ËøáÁöÑÊï∞ÈáèÂ§ß‰∫éÈúÄË¶ÅÊõ¥Êñ∞ÁöÑËäÇÁÇπÊï∞ÈáèÔºåÂ∞±Âç∏ËΩΩÂØπÂ∫îÊóßËäÇÁÇπ<pre><code class="highlight js"><span class="keyword">for</span> (i = s1; i &lt;= e1; i++) &#123;
  <span class="keyword">const</span> prevChild = c1[i]
  <span class="comment">// Â¶ÇÊûúÂ∑≤Êõ¥Êñ∞Êï∞ÈáèÂ§ß‰∫éÊñ∞ËäÇÁÇπÊï∞ÈáèÔºåÂ∞±Âç∏ËΩΩËäÇÁÇπ</span>
  <span class="keyword">if</span> (patched &gt;= toBePatched) &#123;
    <span class="title function_">unmount</span>(prevChild, parentComponent, parentSuspense, <span class="literal">true</span>)
    <span class="keyword">continue</span>
  &#125;
  <span class="keyword">let</span> newIndex <span class="comment">//Êñ∞ÊóßËäÇÁÇπkeyÁõ∏ÂêåÁöÑÊñ∞ËäÇÁÇπindex</span>
  <span class="keyword">if</span> (prevChild.<span class="property">key</span> != <span class="literal">null</span>) &#123;
    newIndex = keyToNewIndexMap.<span class="title function_">get</span>(prevChild.<span class="property">key</span>)
  &#125; <span class="keyword">else</span> &#123;
    <span class="keyword">for</span> (j = s2; j &lt;= e2; j++) &#123;
      <span class="keyword">if</span> (
        newIndexToOldIndexMap[j - s2] === <span class="number">0</span> &amp;&amp;
        <span class="title function_">isSameVNodeType</span>(prevChild, c2[j] <span class="keyword">as</span> <span class="title class_">VNode</span>)
      ) &#123;
        newIndex = j
        <span class="keyword">break</span>
      &#125;
    &#125;
  &#125;
  <span class="comment">// Â¶ÇÊûúnewIndex‰∏∫Á©∫ÔºåÂàôËØ¥ÊòéÊú™ÊâæÂà∞‰∏éÊóßËäÇÁÇπÂØπÂ∫îÁöÑÊñ∞ËäÇÁÇπÔºåÁõ¥Êé•Âç∏ËΩΩ</span>
  <span class="keyword">if</span> (newIndex === <span class="literal">undefined</span>) &#123;
    <span class="title function_">unmount</span>(prevChild, parentComponent, parentSuspense, <span class="literal">true</span>)
  &#125; <span class="keyword">else</span> &#123;
    <span class="comment">// Êõ¥Êñ∞Êñ∞ÊóßËäÇÁÇπÂÖ≥Á≥ªË°®</span>
    newIndexToOldIndexMap[newIndex - s2] = i + <span class="number">1</span>
    <span class="comment">/**</span>
<span class="comment">     * ËøôÈáåÁöÑmaxNexIndexSoFarÊòØËÆ∞ÂΩïÊØèÊ¨°patchÊúÄÂ§ßindex</span>
<span class="comment">     * ‰πüÊòØÁî®‰∫éÂà§Êñ≠ÊòØÂê¶‰∫ßÁîü‰∫Ü‰ΩçÁßªÔºåÂõ†‰∏∫Â¶ÇÊûúÊñ∞ËäÇÁÇπindexÊØîÊúÄÂ§ßindexÂ∞èÔºåÂ∞±ËØ¥ÊòéÂèëÁîü‰∫Ü‰ΩçÁßª</span>
<span class="comment">     * ‰æãÂ¶ÇÔºö</span>
<span class="comment">     *  (a b) c</span>
<span class="comment">     *  (a c  b)</span>
<span class="comment">     * Âú®Êñ∞ÊóßÂ∫èÂàóÂØπÊØîbÔºåcÊó∂ÔºåÁî±‰∫écÊúÄÊñ∞ÁöÑnewIndexÂ∑≤ÁªèÂ∞è‰∫ébÂØπÂ∫îÁöÑnewIndexÔºåÂõ†Ê≠§‰ºöËÆ∞ÂΩïÈúÄË¶Å‰ΩçÁßª</span>
<span class="comment">     */</span>
    <span class="keyword">if</span> (newIndex &gt;= maxNewIndexSoFar) &#123;
      maxNewIndexSoFar = newIndex
    &#125; <span class="keyword">else</span> &#123;
      moved = <span class="literal">true</span>
    &#125;
    <span class="title function_">patch</span>(
      prevChild,
      c2[newIndex] <span class="keyword">as</span> <span class="title class_">VNode</span>,
      container,
      <span class="literal">null</span>,
      parentComponent,
      parentSuspense,
      isSVG,
      slotScopeIds,
      optimized
    )
    patched++
  &#125;
&#125;</code></pre></li>
</ul>
</li>
<li>ÈÅçÂéÜÂÆåÊóßÂ∫èÂàóÂêéÔºåÂ∞±ÈúÄË¶ÅÁ°ÆÂÆöÂ¶Ç‰Ωï‰ΩçÁßª</li>
<li>È¶ñÂÖàÊòØÊ†πÊçÆÊñ∞ÊóßËäÇÁÇπÂÖ≥Á≥ªË°®ÁîüÊàêÊúÄÈïøÈÄíÂ¢ûÂ≠êÂ∫èÂàó(Ëøô‰∏™ÁÆóÊ≥ïÂ∞±‰∏çÈôàËø∞‰∫ÜÔºåËæÉÂ§çÊùÇÔºåÂèØ‰ª•Áúã<a href="https://juejin.cn/post/6952674285311754276#comment">Á≤æËØª„ÄäDOM diff ÊúÄÈïø‰∏äÂçáÂ≠êÂ∫èÂàó„Äã</a>)ÔºåÁÑ∂ÂêéÂÄíÂ∫èÈÅçÂéÜÊñ∞Â≠êËäÇÁÇπ<pre><code class="highlight js"><span class="comment">// ÊúÄÈïøÈÄíÂ¢ûÂ≠êÂ∫èÂàó</span>
<span class="keyword">const</span> increasingNewIndexSequence = moved
  ? <span class="title function_">getSequence</span>(newIndexToOldIndexMap)
  : <span class="variable constant_">EMPTY_ARR</span>
j = increasingNewIndexSequence.<span class="property">length</span> - <span class="number">1</span>
<span class="comment">// ‰ªéÊñ∞Â∫èÂàóÂ∞æÈÉ®ÂêëÂâçÈÅçÂéÜÔºåÁõÆÁöÑÊòØ‰∏∫‰∫Ü‰ΩøÁî®‰∏ä‰∏Ä‰∏™ÈÅçÂéÜÁöÑËäÇÁÇπÂÅöÈîöÁÇπ</span>
<span class="keyword">for</span> (i = toBePatched - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;
  <span class="keyword">const</span> nextIndex = s2 + i
  <span class="keyword">const</span> nextChild = c2[nextIndex] <span class="keyword">as</span> <span class="title class_">VNode</span>
  <span class="comment">// Â¶ÇÊûúÊòØÂ∫èÂàóÁöÑÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºåanchorÂ∞±ÊòØÁà∂ËäÇÁÇπÂØπÂ∫îÁöÑanchorÔºåÂê¶ÂàôÂ∞±ÊòØ‰∏ä‰∏Ä‰∏™Â≠êËäÇÁÇπ</span>
  <span class="keyword">const</span> anchor =
    nextIndex + <span class="number">1</span> &lt; l2 ? (c2[nextIndex + <span class="number">1</span>] <span class="keyword">as</span> <span class="title class_">VNode</span>).<span class="property">el</span> : parentAnchor
  <span class="comment">// Â¶ÇÊûúnewIndexToOldIndexMap[i]ËøòÊòØ0ÔºåÈÇ£‰πàËØ¥ÊòéÊñ∞ËäÇÁÇπÊ≤°ÊúâÂØπÂ∫îÁöÑÊóßËäÇÁÇπÔºåËØ¥ÊòéÊòØÊñ∞ËäÇÁÇπÔºåÁõ¥Êé•ÊåÇËΩΩ</span>
  <span class="keyword">if</span> (newIndexToOldIndexMap[i] === <span class="number">0</span>) &#123;
    <span class="title function_">patch</span>(
      <span class="literal">null</span>,
      nextChild,
      container,
      anchor,
      parentComponent,
      parentSuspense,
      isSVG,
      slotScopeIds,
      optimized
    )
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (moved) &#123;
    <span class="comment">// ÁÑ∂ÂêéÂú®moved‰∏∫trueÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÊúÄÈïøÂ≠êÂ∫èÂàó‰∏∫Á©∫ÊàñËÄÖÊúÄÈïøÂ≠êÂ∫èÂàóÂíåÂΩìÂâçËÆøÈóÆÁöÑÊñ∞ËäÇÁÇπindex‰∏çÂêåÔºåËØ¥ÊòéÂ∞±ÈúÄË¶ÅËøõË°å‰ΩçÁßª</span>
    <span class="keyword">if</span> (j &lt; <span class="number">0</span> || i !== increasingNewIndexSequence[j]) &#123;
      <span class="title function_">move</span>(nextChild, container, anchor, <span class="title class_">MoveType</span>.<span class="property">REORDER</span>)
    &#125; <span class="keyword">else</span> &#123;
      j--
    &#125;
  &#125;
&#125;</code></pre></li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Ëß£ÊûênextTick---vue3‰ªªÂä°Ë∞ÉÂ∫¶</title>
    <url>/2021/07/17/%E8%A7%A3%E6%9E%90nextTick-vue3%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6/</url>
    <content><![CDATA[<h3 id="nextTick"><a href="#nextTick" class="headerlink" title="nextTick"></a>nextTick</h3><ul>
<li>ÂÆö‰πâÔºöÂ∞ÜÂõûË∞ÉÊé®ËøüÂà∞‰∏ã‰∏Ä‰∏™ DOM Êõ¥Êñ∞Âë®Êúü‰πãÂêéÊâßË°åÔºåÂú®Êõ¥Êîπ‰∫Ü‰∏Ä‰∫õÊï∞ÊçÆ‰ª•Á≠âÂæÖ DOM Êõ¥Êñ∞ÂêéÁ´ãÂç≥‰ΩøÁî®ÂÆÉ</li>
<li>Âú®ÂÆûÈôÖ‰∏≠‰ΩøÁî®Ëøô‰∏™ÊñπÊ≥ï‰∏ÄËà¨ÊòØÁî®‰∫éÁªÑ‰ª∂Êõ¥Êñ∞Ôºå‰Ω†ÈúÄË¶ÅËé∑ÂèñÊõ¥Êñ∞ÂêéÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•‰ΩøÁî®nextTickÁ≠âÂæÖDOMÊõ¥Êñ∞<pre><code class="highlight js"><span class="keyword">import</span> &#123; createApp, nextTick &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>
<span class="keyword">const</span> app = <span class="title function_">createApp</span>(&#123;
    <span class="title function_">setup</span>(<span class="params"></span>) &#123;
      <span class="keyword">const</span> message = <span class="title function_">ref</span>(<span class="string">&#x27;Hello!&#x27;</span>)
      <span class="keyword">const</span> <span class="title function_">changeMessage</span> = <span class="keyword">async</span> newMessage =&gt; &#123;
        message.<span class="property">value</span> = newMessage
        <span class="comment">// ËøôÈáåÁöÑvalueÊòØÊóßÂÄº</span>
        <span class="keyword">await</span> <span class="title function_">nextTick</span>()
        <span class="comment">// nextTickÂêéËé∑ÂèñÁöÑÂ∞±ÊòØDOMÊõ¥Êñ∞ÂêéÁöÑvalue</span>
        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Now DOM is updated&#x27;</span>)
      &#125;
    &#125;
&#125;)</code></pre></li>
<li>Ëøô‰∏™api‰ΩøÁî®Êó∂Áõ∏ÂΩìÁÆÄÂçïÔºåËÄå‰∏îÁõ∏ÂΩìÂÆπÊòìÁêÜËß£Ôºå‰ΩÜÊòØ‰∏∫‰∫ÜÁü•ÂÖ∂ÊÑèÔºåËøòÊòØË¶ÅÁøª‰∏Ä‰∏ãÊ∫êÁ†Å‰∫ÜËß£ÂÆÉÁöÑÊâßË°åÊú∫Âà∂<pre><code class="highlight ts"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">nextTick</span>(<span class="params"></span>
<span class="params">  <span class="variable language_">this</span>: ComponentPublicInstance | <span class="built_in">void</span>,</span>
<span class="params">  fn?: () =&gt; <span class="built_in">void</span></span>
<span class="params"></span>): <span class="title class_">Promise</span>&lt;<span class="built_in">void</span>&gt; &#123;
  <span class="keyword">const</span> p = currentFlushPromise || resolvedPromise
  <span class="keyword">return</span> fn ? p.<span class="title function_">then</span>(<span class="variable language_">this</span> ? fn.<span class="title function_">bind</span>(<span class="variable language_">this</span>) : fn) : p
&#125;</code></pre></li>
<li>‰∏äÈù¢ÊòØvueÊ∫êÁ†Å‰∏≠nextTickÁöÑÂÆûÁé∞Ôºå‰∏∫‰∫ÜÊêûÊ∏ÖÊ•öÂÆûÁé∞ÈÄªËæëÔºåÂ∞±ÂøÖÈ°ªÊêûÊáÇ<code>currentFlushPromise</code>Ëøô‰∏™ÂèòÈáèÁöÑÂê´‰πâÔºåÊâÄ‰ª•Ë¶Å‰ªé‰ªªÂä°ÁöÑË∞ÉÂ∫¶Êú∫Âà∂ÂºÄÂßãÂàÜÊûê</li>
</ul>
<h3 id="‰ªªÂä°Ë∞ÉÂ∫¶"><a href="#‰ªªÂä°Ë∞ÉÂ∫¶" class="headerlink" title="‰ªªÂä°Ë∞ÉÂ∫¶"></a>‰ªªÂä°Ë∞ÉÂ∫¶</h3><p>È¶ñÂÖàËøô‰∏™Ë∞ÉÂ∫¶Êú∫Âà∂ÁöÑÂäüËÉΩÂú®<code>runtime-core</code>ÁöÑ<code>scheduler</code>Êñá‰ª∂</p>
<ul>
<li><p>API</p>
<pre><code class="highlight ts"><span class="comment">// Ëøô‰∏™Êñá‰ª∂‰ºöÊäõÂá∫‰ª•‰∏ãÂá†‰∏™APIÂáΩÊï∞</span>
<span class="title function_">nextTick</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// Â∞ÜÂáΩÊï∞Âú®‰ªªÂä°ÈòüÂàóÊ∏ÖÁ©∫ÂêéÊâßË°å</span>
<span class="title function_">queueJob</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// Ê∑ªÂä†‰ªªÂä°Âπ∂ÂºÄÂßãÊâßË°å‰ªªÂä°ÈòüÂàó</span>
<span class="title function_">invalidateJob</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// Âà†Èô§‰ªªÂä°</span>
<span class="title function_">queuePreFlushCb</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// Ê∑ªÂä†ÂâçÁΩÆÂõûË∞ÉÂáΩÊï∞Âπ∂ÂºÄÂßãÊâßË°å‰ªªÂä°ÈòüÂàó</span>
<span class="title function_">queuePostFlushCb</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// Ê∑ªÂä†ÂêéÁΩÆÂõûË∞ÉÂáΩÊï∞Âπ∂ÂºÄÂßãÊâßË°å‰ªªÂä°ÈòüÂàó</span>
<span class="title function_">flushPreFlushCbs</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// ÊâßË°åÂâçÁΩÆÂõûË∞ÉÂáΩÊï∞</span>
<span class="title function_">flushPostFlushCbs</span>(<span class="params"></span>)&#123;&#125; <span class="comment">// ÊâßË°åÂêéÁΩÆÂõûË∞ÉÂáΩÊï∞</span></code></pre></li>
<li><p>Êàë‰ª¨È¶ñÂÖàË¶ÅÁü•ÈÅìÂá†‰∏™ÂÖ≥ÈîÆÂèòÈáè</p>
<pre><code class="highlight ts"><span class="keyword">let</span> isFlushing = <span class="literal">false</span> <span class="comment">// ÊòØÂê¶Ê≠£Âú®Ê∏ÖÁ©∫‰ªªÂä°ÈòüÂàó</span>
<span class="keyword">let</span> isFlushPending = <span class="literal">false</span> <span class="comment">// Ê∏ÖÈòü‰ªªÂä°Â∑≤ÂàõÂª∫ÔºåÁ≠âÂæÖÊ∏ÖÁ©∫Áä∂ÊÄÅ</span>
<span class="keyword">const</span> <span class="attr">queue</span>: <span class="title class_">SchedulerJob</span>[] = [] <span class="comment">// ‰ªªÂä°ÈòüÂàó</span>
<span class="keyword">let</span> flushIndex = <span class="number">0</span> <span class="comment">// ÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑ‰ªªÂä°Âú®‰ªªÂä°ÈòüÂàó‰∏≠ÁöÑÁ¥¢Âºï</span></code></pre></li>
<li><p>ÁÑ∂ÂêéÊàë‰ª¨‰ªé<code>queueJob</code>Ëøô‰∏™ÂáΩÊï∞ÂºÄÂßã</p>
<pre><code class="highlight ts"><span class="comment">/* </span>
<span class="comment">  Ëøô‰∏™ÂáΩÊï∞‰∏ªË¶ÅÊòØÂ∞Ü‰∏Ä‰∏™‰ªªÂä°ËøõË°åÂÖ•ÈòüÊìç‰Ωú</span>
<span class="comment">  ÁÑ∂ÂêéÂú®Êª°Ë∂≥Êù°‰ª∂ÁöÑÊÉÖÂÜµ‰∏ãÂêØÂä®queueFlush</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">queueJob</span>(<span class="params">job: SchedulerJob</span>) &#123;
    <span class="comment">/**</span>
<span class="comment">     * ‰ªªÂä°ÂèØÂÖ•ÈòüÈÄªËæë</span>
<span class="comment">     * 1. ‰ªªÂä°ÈòüÂàó‰∏∫Á©∫</span>
<span class="comment">     * 2. ÂæÖÂÖ•Èòü‰ªªÂä°‰∏çËÉΩÂ≠òÂú®‰∫é‰ªªÂä°ÈòüÂàó‰∏≠(ÊåâÊÉÖÂÜµÂàÜÊûê)</span>
<span class="comment">     */</span>
    <span class="keyword">if</span> (
      (!queue.<span class="property">length</span> ||
        !queue.<span class="title function_">includes</span>(
          job,
          <span class="comment">/* </span>
<span class="comment">            Âú®Ê≠£Âú®Ê∏ÖÁ©∫ÈòüÂàó‰∏îÂΩìÂâçÂæÖÂÖ•Èòü‰ªªÂä°ÊòØÂèØ‰ª•ÈÄíÂΩíÊó∂Ôºå</span>
<span class="comment">            ËØ¥ÊòéÂΩìÂâç‰ªªÂä°‰∏ÄÂÆöÂíåÂΩìÂâçÊ≠£Âú®ÊâßË°å‰ªªÂä°ÊòØÂêå‰∏Ä‰ªªÂä°ÔºåÊâÄ‰ª•+1Ôºå</span>
<span class="comment">            Â∞±ÊòØ‰∏∫‰∫Ü‰øùËØÅÂæÖÂÖ•Èòü‰ªªÂä°ÂíåÊ≠£Âú®ÊâßË°å‰ªªÂä°Áõ∏ÂêåÔºå‰ΩÜ‰∏çËÉΩÂíåÂêéÈù¢ÂæÖÊâßË°å‰ªªÂä°Áõ∏Âêå</span>
<span class="comment">           */</span>
          isFlushing &amp;&amp; job.<span class="property">allowRecurse</span> ? flushIndex + <span class="number">1</span> : flushIndex
        )) &amp;&amp;
      job !== currentPreFlushParentJob
    ) &#123;
      <span class="comment">// ‰∫åÂàÜÊü•Êâæ‰ªªÂä°Âú®ÈòüÂàó‰∏≠ÁöÑ‰ΩçÁΩÆ</span>
      <span class="keyword">const</span> pos = <span class="title function_">findInsertionIndex</span>(job)
      <span class="keyword">if</span> (pos &gt; -<span class="number">1</span>) &#123;
        queue.<span class="title function_">splice</span>(pos, <span class="number">0</span>, job)
      &#125; <span class="keyword">else</span> &#123;
        queue.<span class="title function_">push</span>(job)
      &#125;
      <span class="title function_">queueFlush</span>()
    &#125;
&#125;</code></pre>
</li>
<li><p><code>queueFlush</code></p>
<pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">queueFlush</span>(<span class="params"></span>) &#123;
    <span class="comment">/**</span>
<span class="comment">      Ê∏ÖÈòü‰ªªÂä°ÂàõÂª∫ÂêéÁ¶ÅÊ≠¢ÂÜçÊ¨°ÂàõÂª∫Êõ¥Â§öÁöÑÊ∏ÖÈòü‰ªªÂä°</span>
<span class="comment">      Âõ†‰∏∫Âú®ÂÖ•ÈòüÊìç‰ΩúÂÆåÊàêÂêéÔºåflushJobs‰ºöÂú®‰∏ÄÊ¨°ÈÄíÂΩí‰∏≠Â∞Ü‰ªªÂä°ÈòüÂàóÂÖ®ÈÉ®Ê∏ÖÁ©∫ÔºåÊâÄ‰ª•Âè™ÈúÄË¶Å‰∏ÄÊ¨°Ê∏ÖÈòü‰ªªÂä°Âç≥ÂèØ</span>
<span class="comment">     */</span>
    <span class="keyword">if</span> (!isFlushing &amp;&amp; !isFlushPending) &#123;
      isFlushPending = <span class="literal">true</span>
      <span class="comment">/* </span>
<span class="comment">        Ê∏ÖÈòü‰ªªÂä°ÂàõÂª∫ÊàêÂäüÔºåÂπ∂ËÆ∞ÂΩï‰∏ãÂΩìÂâçÊ∏ÖÈòü‰ªªÂä°ÔºåËøô‰∏™Ê†áËÆ∞ÂèØ‰ª•Áî®‰∫énextTickÂàõÂª∫Ëá™ÂÆö‰πâÂáΩÊï∞Ôºå</span>
<span class="comment">        ËØ¥ÊòénextTickÁöÑÊâßË°åÊó∂Êú∫ÊòØÂú®Ê∏ÖÈòü‰ªªÂä°ÂêéÁöÑÔºåÂÖ∂ÂÆû‰ªéËøô‰∏™Âú∞ÊñπÂ∞±ÂèØ‰ª•ÁêÜËß£nextTickÁöÑÊâßË°åÂéüÁêÜ‰∫Ü</span>
<span class="comment">      */</span>
      currentFlushPromise = resolvedPromise.<span class="title function_">then</span>(flushJobs)
    &#125;
&#125;</code></pre>
</li>
<li><p><code>flushJobs</code></p>
<pre><code class="highlight ts"><span class="comment">// Ê∏ÖÁ©∫‰ªªÂä°ÈòüÂàó</span>
<span class="keyword">function</span> <span class="title function_">flushJobs</span>(<span class="params">seen?: CountMap</span>) &#123;
    isFlushPending = <span class="literal">false</span> <span class="comment">// ÂÖ≥Èó≠Ê∏ÖÈòü‰ªªÂä°Á≠âÂæÖÁä∂ÊÄÅ</span>
    isFlushing = <span class="literal">true</span> <span class="comment">// ÂºÄÂêØÊ≠£Âú®Ê∏ÖÁ©∫ÈòüÂàóÁä∂ÊÄÅ</span>
    <span class="keyword">if</span> (__DEV__) &#123;
      seen = seen || <span class="keyword">new</span> <span class="title class_">Map</span>()
    &#125;

    <span class="comment">// Ê∏ÖÁ©∫ÂâçÁΩÆÂõûË∞É‰ªªÂä°ÈòüÂàó</span>
    <span class="title function_">flushPreFlushCbs</span>(seen)

    <span class="comment">/* </span>
<span class="comment">      ‰ªªÂä°ÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°Ê†πÊçÆIDËøõË°åÊéíÂ∫èÁöÑÂéüÂõ†</span>
<span class="comment">        1. Âõ†‰∏∫ÁªÑ‰ª∂Êõ¥Êñ∞ÊòØ‰ªéÁà∂ÁªÑ‰ª∂Âà∞Â≠êÁªÑ‰ª∂ÁöÑÔºåËÄå‰ªªÂä°Êõ¥Êñ∞ÊòØÂú®Êï∞ÊçÆÊ∫êÊõ¥Êñ∞Êó∂Ëß¶ÂèëÁöÑÔºåÊâÄ‰ª•‰∏∫‰∫ÜÊõ¥Êñ∞‰ªªÂä°ÁöÑÈ°∫Â∫èÂ∞±ÈúÄË¶ÅËøõË°åÊéíÂ∫è</span>
<span class="comment">        2. Â¶ÇÊûúÂú®Áà∂ÁªÑ‰ª∂Êõ¥Êñ∞ÊúüÈó¥Â∑≤ÁªèÂç∏ËΩΩ‰∫ÜÁªÑ‰ª∂ÔºåÈÇ£‰πàÂ≠êÁªÑ‰ª∂ÁöÑÊõ¥Êñ∞‰ªªÂä°Â∞±ÂèØ‰ª•Ë∑≥Ëøá</span>
<span class="comment">    */</span>
    queue.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="title function_">getId</span>(a) - <span class="title function_">getId</span>(b))

    <span class="keyword">try</span> &#123;
      <span class="comment">// ÈÅçÂéÜ‰ªªÂä°ÈòüÂàó</span>
      <span class="keyword">for</span> (flushIndex = <span class="number">0</span>; flushIndex &lt; queue.<span class="property">length</span>; flushIndex++) &#123;
        <span class="keyword">const</span> job = queue[flushIndex]
        <span class="keyword">if</span> (job &amp;&amp; job.<span class="property">active</span> !== <span class="literal">false</span>) &#123;
          <span class="keyword">if</span> (__DEV__ &amp;&amp; <span class="title function_">checkRecursiveUpdates</span>(seen!, job)) &#123;
            <span class="keyword">continue</span>
          &#125;
          <span class="comment">// ÊâßË°åÂΩìÂâç‰ªªÂä°</span>
          <span class="title function_">callWithErrorHandling</span>(job, <span class="literal">null</span>, <span class="title class_">ErrorCodes</span>.<span class="property">SCHEDULER</span>)
        &#125;
      &#125;
    &#125; <span class="keyword">finally</span> &#123;
      <span class="comment">// ÈáçÁΩÆÂΩìÂâç‰ªªÂä°Á¥¢Âºï</span>
      flushIndex = <span class="number">0</span>
      <span class="comment">// Ê∏ÖÁ©∫‰ªªÂä°ÈòüÂàó</span>
      queue.<span class="property">length</span> = <span class="number">0</span>

      <span class="comment">// ÊâßË°åÂêéÁΩÆÂõûË∞É‰ªªÂä°ÈòüÂàó</span>
      <span class="title function_">flushPostFlushCbs</span>(seen)
        <span class="comment">// ÈáçÁΩÆÊ∏ÖÈòü‰ªªÂä°ÁöÑÁä∂ÊÄÅ</span>
      isFlushing = <span class="literal">false</span>
      currentFlushPromise = <span class="literal">null</span>
      <span class="comment">/* </span>
<span class="comment">        Âõ†‰∏∫Ê∏ÖÈòü‰ªªÂä°ÊâßË°åÊúüÈó¥‰πü‰ºöÊúâ‰ªªÂä°ÂÖ•ÈòüÔºåÊâÄ‰ª•‰∏∫‰∫ÜÊ∏ÖÈòüÊâßË°åÂÆåÊàê</span>
<span class="comment">        Â∞±ÈúÄË¶ÅÂà§Êñ≠ÂêÑ‰ªªÂä°ÈòüÂàóÁöÑÈïøÂ∫¶ÔºåÁÑ∂ÂêéÈÄíÂΩíÊâßË°å</span>
<span class="comment">      */</span>
      <span class="keyword">if</span> (
        queue.<span class="property">length</span> ||
        pendingPreFlushCbs.<span class="property">length</span> ||
        pendingPostFlushCbs.<span class="property">length</span>
      ) &#123;
        <span class="title function_">flushJobs</span>(seen)
      &#125;
    &#125;
&#125;</code></pre></li>
</ul>
<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><ul>
<li>nextTickÁöÑÊâßË°åÊó∂Êú∫ÊòØÂú®‰ªªÂä°ÈòüÂàó(ÂâçÁΩÆ„ÄÅ‰∏ª‰ªªÂä°„ÄÅÂêéÁΩÆ)Ê∏ÖÈô§ÂêéÁöÑÔºå<code>currentFlushPromise</code>ÊòØÊ∏ÖÈòü‰ªªÂä°ÁöÑpromiseÊ†áËÆ∞</li>
<li>‰ªªÂä°ÈòüÂàóÊâßË°åÈ°∫Â∫èÔºöÊâßË°åÂâçÁΩÆÂõûË∞É‰ªªÂä°ÈòüÂàó -&gt; ÊâßË°å‰∏ª‰ªªÂä°ÈòüÂàó -&gt; ÊâßË°åÂêéÁΩÆÂõûË∞É‰ªªÂä°ÈòüÂàó</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>È¢úËâ≤ÈÄâÊã©Âô®ÁöÑÁ∫ØJSÂÆûÁé∞</title>
    <url>/2022/11/05/%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E7%BA%AFJS%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>ÊúÄËøëÂú®ÈÄõËÆ∫ÂùõÁöÑÊó∂ÂÄôÂèëÁé∞‰∫Ü‰∏Ä‰∏™Êñ∞APIÔºö<code>EyeDropper</code>Ôºå‰ªÖÈúÄÂàõÂª∫‰∏Ä‰∏™ÂÆû‰æãÔºåÁÑ∂ÂêéË∞ÉÁî®openÊñπÊ≥ïÔºåÂ∞±ÂèØ‰ª•ÂèñÂà∞‰Ω†Â±èÂπïÂÜÖÊâÄÊúâÂèØ‰ª•ÂèñÂà∞ÁöÑÈ¢úËâ≤ÔºåÂèØÊÉúÂÖºÂÆπÊÄß‰∏çÂ§™Ë°åÔºåÂè™ÊúâChromeÔºåEdgeÔºåOperaÊîØÊåÅÔºå<a href="https://developer.mozilla.org/en-US/docs/Web/API/EyeDropper">MDNÊñáÊ°£</a><br>Áü•ÈÅì‰∫ÜËøô‰∏™APIÂêéÊàë‰πüÊúâ‰∫Ü‰∏Ä‰∏™ÊÉ≥ÂÆûÁé∞ÂèñËâ≤Âô®ÁöÑÊÉ≥Ê≥ïÔºåÂ∑•‰ΩúÊë∏È±ºÊúüÈó¥üëªÊäòËÖæ‰∫ÜÂá†Â§©Êêû‰∫ÜÂá∫Êù•ÔºåÂÆûÁé∞Ê≠•È™§Â§ßËá¥‰ª•‰∏ãÂá†Ê≠•</p>
<ol>
<li>ÊâÄÈúÄÈ°µÈù¢ÂàõÂª∫ÂÆû‰æãÔºåÂàùÂßãÂåñÊâÄÈúÄÂ±ûÊÄß</li>
<li>ÈúÄÂºÄÂêØÊó∂Ë∞ÉÁî®openÊñπÊ≥ïÂºÄÂêØÂèñËâ≤Âô®ÔºåÁΩëÈ°µÊà™Â±èÁîüÊàêcanvasÔºåÂàùÂßãÂåñÁõëÂê¨‰∫ã‰ª∂ÂíåÊµÆÂä®ÂÖÉÁ¥†(ÊîæÂ§ßÈïú)</li>
<li>Èº†Ê†áÁßªÂä®Êó∂Ê†πÊçÆÂùêÊ†áËé∑ÂèñÈ¢úËâ≤Êï∞ÊçÆ‰øÆÊîπÊîæÂ§ßÈïúÈ¢úËâ≤</li>
<li>Èº†Ê†áÁÇπÂáªÊàñËÄÖÊåâEscÈîÆÂêéÈîÄÊØÅ</li>
</ol>
<h2 id="È¢ÑËßà"><a href="#È¢ÑËßà" class="headerlink" title="È¢ÑËßà"></a>È¢ÑËßà</h2><p>È¢ÑËßàÂú∞ÂùÄÔºö<a href="https://songlh.top/page-color-picker/">https://songlh.top/page-color-picker/</a><br>githubÔºö<a href="https://github.com/LHRUN/page-color-picker">https://github.com/LHRUN/page-color-picker</a><br><img src="https://s1.ax1x.com/2022/11/05/xOoXo4.png"></p>
<h2 id="ÂàùÂßãÂåñÊñπÊ≥ï"><a href="#ÂàùÂßãÂåñÊñπÊ≥ï" class="headerlink" title="ÂàùÂßãÂåñÊñπÊ≥ï"></a>ÂàùÂßãÂåñÊñπÊ≥ï</h2><p>ÂàùÂßãÂåñÊñπÊ≥ïÊ≤°‰ªÄ‰πàËØ¥ÁöÑÔºåÂ∞±ÊòØÊääÈúÄË¶ÅÁöÑÂ±ûÊÄßÂíåÊñπÊ≥ïËµãÂÄº‰∏ÄÈÅçÂàùÂßãÂÄºÔºåÁÑ∂ÂêéÊé•Êî∂‰∏Ä‰∏™Èº†Ê†áÁÇπÂáªÊó∂ÁöÑÂõûË∞É</p>
<pre><code class="highlight ts"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">ColorPicker</span> &#123;
  <span class="attr">canvasContainer</span>: <span class="title class_">HTMLDivElement</span> | <span class="literal">null</span> = <span class="literal">null</span> <span class="comment">// canvasÂÆπÂô®ÂÖÉÁ¥†</span>
  <span class="attr">canvas</span>: <span class="title class_">HTMLCanvasElement</span> | <span class="literal">null</span> = <span class="literal">null</span> <span class="comment">// Êà™Â±ècanvas</span>
  <span class="attr">context</span>: <span class="title class_">CanvasRenderingContext2D</span> | <span class="literal">null</span> = <span class="literal">null</span> <span class="comment">// Êà™Â±ècanvas[context]</span>
  <span class="attr">floatContainer</span>: <span class="title class_">HTMLDivElement</span> | <span class="literal">null</span> = <span class="literal">null</span> <span class="comment">// Èº†Ê†áÁßªÂä®Êó∂ÁöÑÊµÆÂä®ÂÆπÂô®ÂÖÉÁ¥†</span>
  onChange?: <span class="function">(<span class="params">color: <span class="built_in">string</span></span>) =&gt;</span> <span class="built_in">void</span> <span class="comment">// ÁÇπÂáªÈº†Ê†áÂêéÁöÑÂõûË∞É</span>
  color = <span class="string">&#x27;&#x27;</span> <span class="comment">// È¢úËâ≤ÂÄº</span>
  elementId = <span class="string">&#x27;&#x27;</span> <span class="comment">// ÂÖÉÁ¥†ÂîØ‰∏Äid</span>
  <span class="attr">colorArr</span>: &#123;
    <span class="attr">el</span>: <span class="title class_">HTMLDivElement</span>
    <span class="attr">row</span>: <span class="built_in">number</span>
    <span class="attr">col</span>: <span class="built_in">number</span>
  &#125;[] = [] <span class="comment">// ÊîæÂ§ßÈïúÈ¢úËâ≤Êï∞ÁªÑ</span>

  <span class="title function_">constructor</span>(<span class="params"></span>
<span class="params">    onChange?: (color: <span class="built_in">string</span>) =&gt; <span class="built_in">void</span> <span class="comment">// ÁÇπÂáªÂêéÂõûË∞É</span></span>
<span class="params">  </span>) &#123;
    <span class="variable language_">this</span>.<span class="property">onChange</span> = onChange
  &#125;
  <span class="comment">// ...</span>
&#125;</code></pre>

<h2 id="ÂºÄÂêØÂèñËâ≤Âô®"><a href="#ÂºÄÂêØÂèñËâ≤Âô®" class="headerlink" title="ÂºÄÂêØÂèñËâ≤Âô®"></a>ÂºÄÂêØÂèñËâ≤Âô®</h2><p>ÂºÄÂêØÂèñËâ≤Âô®ÂàÜ‰∏∫4Ê≠•</p>
<ol>
<li>ÂàùÂßãÂåñcanvasÂÆπÂô®</li>
<li>ÁîüÊàêcanvasÔºåÊàë‰ΩøÁî®ÁöÑÊòØ<a href="https://www.npmjs.com/package/html2canvas">html2canvas</a></li>
<li>ÂàùÂßãÂåñÁõëÂê¨‰∫ã‰ª∂</li>
<li>ÂàõÂª∫ÊµÆÂä®ÂÖÉÁ¥†</li>
</ol>
<pre><code class="highlight js"><span class="comment">/**</span>
<span class="comment">* ÂºÄÂêØÂèñËâ≤Âô®</span>
<span class="comment">*/</span>
<span class="title function_">open</span>(<span class="params"></span>) &#123;
  <span class="comment">// Ëé∑ÂèñÈöèÊú∫id</span>
  <span class="variable language_">this</span>.<span class="property">elementId</span> = <span class="title function_">getId</span>()
  <span class="comment">// ÂàùÂßãÂåñcanvasÂÆπÂô®</span>
  <span class="variable language_">this</span>.<span class="title function_">initContainer</span>()
  <span class="title function_">html2canvas</span>(<span class="variable language_">document</span>.<span class="property">body</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">canvas</span>) =&gt;</span> &#123;
    <span class="keyword">if</span> (canvas &amp;&amp; <span class="variable language_">this</span>.<span class="property">canvasContainer</span>) &#123;
      <span class="comment">// ÂàùÂßãÂåñ‰∫ã‰ª∂</span>
      <span class="variable language_">this</span>.<span class="title function_">initEvent</span>(canvas)
      <span class="variable language_">this</span>.<span class="property">canvasContainer</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>
      <span class="variable language_">this</span>.<span class="property">canvasContainer</span>.<span class="title function_">appendChild</span>(canvas)
      <span class="variable language_">this</span>.<span class="property">canvas</span> = canvas
      <span class="variable language_">this</span>.<span class="property">context</span> = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)
      <span class="comment">// ÂàõÂª∫ÊµÆÂä®ÂÖÉÁ¥†</span>
      <span class="variable language_">this</span>.<span class="title function_">initFloatContainer</span>()
    &#125;
  &#125;)
&#125;</code></pre>
<ul>
<li><p>ÂàùÂßãÂåñcanvasÂÆπÂô®</p>
<pre><code class="highlight ts"><span class="title function_">initContainer</span>(<span class="params"></span>) &#123;
  <span class="comment">// ÂàõÂª∫ÂÖÉÁ¥†ÊàëÂ∞ÅË£Ö‰∫Ü‰∏Ä‰∏™ÊñπÊ≥ï</span>
  <span class="keyword">const</span> canvasContainer = <span class="title function_">createDocument</span>(
    <span class="string">&#x27;div&#x27;</span>,
    styleObj.<span class="property">canvasContainer</span>,
    <span class="variable language_">document</span>.<span class="property">body</span>
  )
  <span class="variable language_">this</span>.<span class="property">canvasContainer</span> = canvasContainer
  <span class="keyword">return</span> canvasContainer
&#125;

<span class="comment">/**</span>
<span class="comment"> * ÂàõÂª∫ÂÖÉÁ¥†</span>
<span class="comment"> * <span class="doctag">@param</span> elType ÂÖÉÁ¥†Á±ªÂûã</span>
<span class="comment"> * <span class="doctag">@param</span> styleObj Ê†∑ÂºèÂØπË±°</span>
<span class="comment"> * <span class="doctag">@param</span> parent Áà∂Á∫ßÂÖÉÁ¥†</span>
<span class="comment"> * <span class="doctag">@returns</span> <span class="variable">element</span></span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">const</span> createDocument = &lt;T <span class="keyword">extends</span> keyof <span class="title class_">HTMLElementTagNameMap</span>&gt;(
  <span class="attr">elType</span>: T,
  <span class="attr">styleObj</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span> | <span class="built_in">number</span>&gt;,
  <span class="attr">parent</span>: <span class="title class_">HTMLElement</span> | <span class="title class_">DocumentFragment</span>
): <span class="title class_">HTMLElementTagNameMap</span>[T] =&gt; &#123;
  <span class="keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(elType)
  <span class="title class_">Object</span>.<span class="title function_">keys</span>(styleObj).<span class="title function_">forEach</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;
    <span class="keyword">if</span> (<span class="title function_">isValidKey</span>(key, styleObj)) &#123;
      <span class="title class_">Reflect</span>.<span class="title function_">set</span>(el.<span class="property">style</span>, key, styleObj[key])
    &#125;
  &#125;)
  parent.<span class="title function_">appendChild</span>(el)
  <span class="keyword">return</span> el
&#125;</code></pre>
</li>
<li><p>ÂàùÂßãÂåñ‰∫ã‰ª∂</p>
<pre><code class="highlight ts"><span class="comment">/**</span>
<span class="comment"> * ÂàùÂßãÂåñ‰∫ã‰ª∂</span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">canvas</span></span>
<span class="comment"> */</span>
<span class="title function_">initEvent</span>(<span class="params">canvas: HTMLCanvasElement</span>) &#123;
  canvas.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="variable language_">this</span>.<span class="property">canvasMouseMove</span>)
  canvas.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousedown&#x27;</span>, <span class="variable language_">this</span>.<span class="property">canvasMouseDown</span>)
  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onKeyDown</span>)
&#125;</code></pre>
</li>
<li><p>ÂàõÂª∫ÊµÆÂä®ÂÖÉÁ¥†ÂÆπÂô®</p>
<pre><code class="highlight js"><span class="title function_">initFloatCOntainer</span>(<span class="params"></span>) &#123;
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">canvasContainer</span>) &#123;
    <span class="comment">// ÂàõÂª∫ÊµÆÂä®ÂÖÉÁ¥†ÂÆπÂô®</span>
    <span class="keyword">const</span> floatContainer = <span class="title function_">createDocument</span>(
      <span class="string">&#x27;div&#x27;</span>,
      styleObj.<span class="property">floatContainer</span>,
      <span class="variable language_">this</span>.<span class="property">canvasContainer</span>
    )

    <span class="comment">// ÂàõÂª∫ÊîæÂ§ßÈïúÁöÑÂ∞èÈ¢úËâ≤Âùó</span>
    <span class="keyword">const</span> fragment = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>()
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt;= <span class="variable constant_">COLOR_ITEM_SIZE</span> * <span class="variable constant_">COLOR_ITEM_SIZE</span>; i++) &#123;
      <span class="keyword">const</span> row = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(i / <span class="variable constant_">COLOR_ITEM_SIZE</span>)
      <span class="keyword">const</span> col = i - (row - <span class="number">1</span>) * <span class="variable constant_">COLOR_ITEM_SIZE</span>
      <span class="keyword">const</span> <span class="attr">style</span>: <span class="title class_">Record</span>&lt;string, string | number&gt; = &#123;
        ...styleObj.<span class="property">colorItem</span>
      &#125;

      <span class="keyword">if</span> (row === <span class="number">6</span> &amp;&amp; col === <span class="number">6</span>) &#123;
        style.<span class="property">borderColor</span> = <span class="string">&#x27;#000000&#x27;</span>
      &#125;
      <span class="keyword">const</span> itemEl = <span class="title function_">createDocument</span>(<span class="string">&#x27;div&#x27;</span>, style, fragment)
      itemEl.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.elementId&#125;</span><span class="subst">$&#123;i&#125;</span>`</span>)
      <span class="variable language_">this</span>.<span class="property">colorArr</span>.<span class="title function_">push</span>(&#123;
        <span class="attr">el</span>: itemEl,
        row,
        col
      &#125;)
    &#125;
    floatContainer.<span class="title function_">appendChild</span>(fragment)
    <span class="keyword">const</span> textEl = <span class="title function_">createDocument</span>(<span class="string">&#x27;div&#x27;</span>, styleObj.<span class="property">text</span>, floatContainer)
    textEl.<span class="title function_">setAttribute</span>(<span class="string">&#x27;id&#x27;</span>, <span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.elementId&#125;</span>text`</span>)
    <span class="variable language_">this</span>.<span class="property">floatContainer</span> = floatContainer
  &#125;
&#125;</code></pre></li>
</ul>
<h2 id="Èº†Ê†áÁßªÂä®"><a href="#Èº†Ê†áÁßªÂä®" class="headerlink" title="Èº†Ê†áÁßªÂä®"></a>Èº†Ê†áÁßªÂä®</h2><ul>
<li>Ê†πÊçÆÈº†Ê†áÁßªÂä®Êó∂ÁöÑÂùêÊ†áÔºåËÆ°ÁÆóÈúÄË¶ÅÂ§ÑÁêÜÁöÑÈ¢úËâ≤Âå∫ÂüüÔºåÁÑ∂ÂêéË∞ÉÁî®<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/getImageData">CanvasRenderingContext2D.getImageData()</a>ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ï‰ºöËøîÂõû‰∏Ä‰∏™ImageDataÂØπË±°ÔºåËøô‰∏™ÂØπË±°ÈáåÂ∞±ÂåÖÂê´RGBAÊï∞ÊçÆÔºåÁÑ∂ÂêéÊääËøô‰∫õÊï∞ÊçÆÂ±ïÁ§∫Âà∞ÊîæÂ§ßÈïúÂÖÉÁ¥†‰∏äÔºåÂ∞±Êúâ‰∫ÜÊîæÂ§ßÁöÑÊïàÊûú<pre><code class="highlight ts">canvasMouseMove = <span class="function">(<span class="params">e: MouseEvent</span>) =&gt;</span> &#123;
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">context</span>) &#123;
    <span class="keyword">const</span> x = e.<span class="property">pageX</span> * <span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>
    <span class="keyword">const</span> y = e.<span class="property">pageY</span> * <span class="variable language_">window</span>.<span class="property">devicePixelRatio</span>
    <span class="comment">// Ëé∑ÂèñÊîæÂ§ßÈïúÊâÄÈúÄÂå∫ÂüüÈ¢úËâ≤</span>
    <span class="keyword">const</span> colors = <span class="variable language_">this</span>.<span class="title function_">getColors</span>(x, y)
    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">floatContainer</span> &amp;&amp; colors) &#123;
      <span class="comment">// Ê†πÊçÆÂùêÊ†áÊîπÂèòÊîæÂ§ßÈïú‰ΩçÁΩÆ</span>
      <span class="variable language_">this</span>.<span class="property">floatContainer</span>.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`translate(<span class="subst">$&#123;e.pageX - <span class="number">82.5</span>&#125;</span>px, <span class="subst">$&#123;</span></span>
<span class="subst"><span class="string">        e.pageY - <span class="number">82.5</span></span></span>
<span class="subst"><span class="string">      &#125;</span>px )`</span>
      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">floatContainer</span>.<span class="property">style</span>.<span class="property">visibility</span> === <span class="string">&#x27;hidden&#x27;</span>) &#123;
        <span class="variable language_">this</span>.<span class="property">floatContainer</span>.<span class="property">style</span>.<span class="property">visibility</span> = <span class="string">&#x27;visible&#x27;</span>
      &#125;
      <span class="keyword">const</span> textEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.elementId&#125;</span>text`</span>)

      <span class="comment">// ÈÅçÂéÜÊØè‰∏™È¢úËâ≤ÂùóÔºå‰øÆÊîπÈ¢úËâ≤</span>
      <span class="keyword">for</span> (
        <span class="keyword">let</span> i = <span class="number">0</span>;
        i &lt; <span class="variable constant_">COLOR_ITEM_SIZE</span> * <span class="variable constant_">COLOR_ITEM_SIZE</span>;
        i++
      ) &#123;
        <span class="keyword">const</span> &#123; el, row, col &#125; = <span class="variable language_">this</span>.<span class="property">colorArr</span>[i]
        <span class="keyword">const</span> [r, g, b, a] = colors[i]
        <span class="comment">// toHexString rgbaËΩ¨16ËøõÂà∂</span>
        <span class="keyword">const</span> hexStr = <span class="title function_">toHexString</span>(&#123; r, g, b, <span class="attr">a</span>: a / <span class="number">255</span> &#125;)

        <span class="comment">//  ÊúÄ‰∏≠Èó¥ÁöÑÈ¢úËâ≤‰øùÂ≠òËµ∑Êù•</span>
        <span class="keyword">if</span> (row === <span class="number">6</span> &amp;&amp; col === <span class="number">6</span> &amp;&amp; textEl) &#123;
          textEl.<span class="property">textContent</span> = hexStr
          textEl.<span class="property">style</span>.<span class="property">color</span> = hexStr
          <span class="variable language_">this</span>.<span class="property">color</span> = hexStr
        &#125;

        el.<span class="property">style</span>.<span class="property">backgroundColor</span> = hexStr
      &#125;
    &#125;
  &#125;
&#125;

<span class="comment">/**</span>
<span class="comment"> * Ëé∑ÂèñÊîæÂ§ßÈïúÊâÄÈúÄÂå∫ÂüüÈ¢úËâ≤</span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">x</span></span>
<span class="comment"> * <span class="doctag">@param</span> <span class="variable">y</span></span>
<span class="comment"> * <span class="doctag">@returns</span></span>
<span class="comment"> */</span>
<span class="title function_">getColors</span>(<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) &#123;
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">context</span>) &#123;
    <span class="keyword">const</span> &#123; data &#125; = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="title function_">getImageData</span>(
      x - <span class="number">5</span>,
      y - <span class="number">5</span>,
      <span class="variable constant_">COLOR_ITEM_SIZE</span>,
      <span class="variable constant_">COLOR_ITEM_SIZE</span>
    )
    <span class="keyword">const</span> colors = []
    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i += <span class="number">4</span>) &#123;
      colors.<span class="title function_">push</span>([data[i], data[i + <span class="number">1</span>], data[i + <span class="number">2</span>], data[i + <span class="number">3</span>]])
    &#125;
    <span class="keyword">return</span> colors
  &#125;
&#125;</code></pre></li>
</ul>
<h2 id="Èº†Ê†áÁÇπÂáª"><a href="#Èº†Ê†áÁÇπÂáª" class="headerlink" title="Èº†Ê†áÁÇπÂáª"></a>Èº†Ê†áÁÇπÂáª</h2><ul>
<li>Èº†Ê†áÁÇπÂáªËß¶ÂèëÂõûË∞ÉÔºåÈîÄÊØÅÂÖÉÁ¥†<pre><code class="highlight ts">canvasMouseDown = <span class="function">() =&gt;</span> &#123;
  <span class="variable language_">this</span>?.<span class="property">onChange</span>?.(<span class="variable language_">this</span>.<span class="property">color</span>)
  <span class="variable language_">this</span>.<span class="title function_">destroy</span>()
&#125;

<span class="title function_">destroy</span>(<span class="params"></span>) &#123;
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">canvas</span>) &#123;
    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="variable language_">this</span>.<span class="property">canvasMouseMove</span>)
    <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;mousedown&#x27;</span>, <span class="variable language_">this</span>.<span class="property">canvasMouseDown</span>)
  &#125;
  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">canvasContainer</span>) &#123;
    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(<span class="variable language_">this</span>.<span class="property">canvasContainer</span>)
  &#125;
  <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="variable language_">this</span>.<span class="property">onKeyDown</span>)
&#125;</code></pre></li>
</ul>
<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>ÊúâÈóÆÈ¢òÊ¨¢ËøéËÆ®ËÆ∫üëª</p>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>vue3ÂìçÂ∫îÂºèÂàÜÊûê</title>
    <url>/2021/08/01/%E8%A7%A3%E6%9E%90reactive-vue3%E5%93%8D%E5%BA%94%E5%BC%8F/</url>
    <content><![CDATA[<h2 id="vue3ÂìçÂ∫îÂºèÂàÜÊûê"><a href="#vue3ÂìçÂ∫îÂºèÂàÜÊûê" class="headerlink" title="vue3ÂìçÂ∫îÂºèÂàÜÊûê"></a>vue3ÂìçÂ∫îÂºèÂàÜÊûê</h2><ol>
<li>È¶ñÂÖàÂØπvue3ÂìçÂ∫îÂºèÂàÜÊûê‰πãÂâçÔºåÈúÄË¶ÅÂØπÂâçÁΩÆÁü•ËØÜ<code>Proxy</code>Âíå<code>Reflect</code>ÊúâÊâÄ‰∫ÜËß£ÔºåÔºåÂÖ≥‰∫éËøô‰∏§‰∏™Áü•ËØÜÊàëÊé®ËçêÁúãÈòÆ‰∏ÄÂ≥∞ËÄÅÂ∏àÁöÑ<a href="https://es6.ruanyifeng.com/#README">ES6ÂÖ•Èó®ÊïôÁ®ã</a></li>
<li>vue3ÁöÑÂìçÂ∫îÂºèÊàëÊòØ‰ª•reactive‰∏∫ÂÖ•Âè£ËøõË°åÊ¢≥ÁêÜÔºåÊµÅÁ®ãÂ¶Ç‰∏ãÂõæ<br><img src="https://img-blog.csdnimg.cn/83a41b1d8a3044d6b8135850ea972ed1.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDcxOTI1OA==,size_16,color_FFFFFF,t_70#pic_center" alt="Âú®ËøôÈáåÊèíÂÖ•ÂõæÁâáÊèèËø∞"></li>
<li>Ê∫êÁ†Å‰ΩçÁΩÆÔºö<code>reactivity/src/...</code>ÔºåÂàÜÂõõÈÉ®ÂàÜËß£Êûê</li>
</ol>
<ul>
<li>reactiveÊñá‰ª∂ÔºöÁõÆÊ†áÂØπË±°ËΩ¨Âåñ‰∏∫proxyÂÆû‰æã</li>
<li>baseHandlerÊñá‰ª∂ÔºöÂü∫Êú¨Á±ªÂûãÂ§ÑÁêÜÂô®</li>
<li>collectionHandlersÊñá‰ª∂ÔºöMap„ÄÅSetÂ§ÑÁêÜÂô®</li>
<li>effectÊñá‰ª∂ÔºöÊî∂ÈõÜËß¶Âèë‰æùËµñ</li>
</ul>
<ol start="4">
<li>Â¶ÇÊûú‰∏çÊÉ≥ÁúãÊ∫êÁ†ÅËß£ÊûêÔºåÂèØ‰ª•Áõ¥Êé•ÁúãÊÄªÁªìüê∂</li>
</ol>
<h3 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h3><ul>
<li><code>reactive</code>ÔºöÂ∞Ü‰∏Ä‰∏™JSÂØπË±°ËΩ¨‰∏∫ÂÖ∑ÊúâÂìçÂ∫îÂºèÁöÑproxyÂÆû‰æã<pre><code class="highlight ts"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">reactive</span>(<span class="params">target: <span class="built_in">object</span></span>) &#123;
    <span class="comment">// Â¶ÇÊûúÊòØÂè™ËØªÊï∞ÊçÆÔºåÂ∞±Áõ¥Êé•ËøîÂõû</span>
    <span class="keyword">if</span> (target &amp;&amp; (target <span class="keyword">as</span> <span class="title class_">Target</span>)[<span class="title class_">ReactiveFlags</span>.<span class="property">IS_READONLY</span>]) &#123;
      <span class="keyword">return</span> target
    &#125;
    <span class="keyword">return</span> <span class="title function_">createReactiveObject</span>(
      target,
      <span class="literal">false</span>,
      mutableHandlers,
      mutableCollectionHandlers,
      reactiveMap
    )
&#125;</code></pre></li>
<li><code>createReactiveObject</code><pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">createReactiveObject</span>(<span class="params"></span>
<span class="params">    target: Target, <span class="comment">// Ê∫êÂØπË±°</span></span>
<span class="params">    isReadonly: <span class="built_in">boolean</span>, <span class="comment">// ÊòØÂê¶Âè™ËØª</span></span>
<span class="params">    baseHandlers: ProxyHandler&lt;<span class="built_in">any</span>&gt;, <span class="comment">// Âü∫Êú¨Á±ªÂûãÁöÑhandlers</span></span>
<span class="params">    collectionHandlers: ProxyHandler&lt;<span class="built_in">any</span>&gt;, <span class="comment">// ‰∏ªË¶ÅÈíàÂØπ(set„ÄÅmap„ÄÅweakSet„ÄÅweakMap)ÁöÑhandlers</span></span>
<span class="params">    proxyMap: <span class="built_in">WeakMap</span>&lt;Target, <span class="built_in">any</span>&gt;</span>
<span class="params"></span>) &#123;
  <span class="comment">// Â¶ÇÊûú‰∏çÊòØ‰∏Ä‰∏™ÂØπË±°ÔºåÁõ¥Êé•ËøîÂõûÔºåÂπ∂‰∏îÂú®ÂºÄÂèëÁéØÂ¢ÉÂèëÂá∫Ë≠¶Âëä</span>
    <span class="keyword">if</span> (!<span class="title function_">isObject</span>(target)) &#123;
      <span class="keyword">if</span> (__DEV__) &#123;
        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`value cannot be made reactive: <span class="subst">$&#123;<span class="built_in">String</span>(target)&#125;</span>`</span>)
      &#125;
      <span class="keyword">return</span> target
    &#125;
    <span class="comment">// Â¶ÇÊûúÂ∑≤ÁªèÊòØÂìçÂ∫îÂºèÔºåÁõ¥Êé•ËøîÂõû</span>
    <span class="keyword">if</span> (
      target[<span class="title class_">ReactiveFlags</span>.<span class="property">RAW</span>] &amp;&amp;
      !(isReadonly &amp;&amp; target[<span class="title class_">ReactiveFlags</span>.<span class="property">IS_REACTIVE</span>])
    ) &#123;
      <span class="keyword">return</span> target
    &#125;

    <span class="comment">// Â¶ÇÊûúÁõÆÊ†áÂØπË±°Â∑≤ÁªèÂ≠òÂú®‰ª£ÁêÜÔºåÁõ¥Êé•ËøîÂõû</span>
    <span class="keyword">const</span> existingProxy = proxyMap.<span class="title function_">get</span>(target)
    <span class="keyword">if</span> (existingProxy) &#123;
      <span class="keyword">return</span> existingProxy
    &#125;

    <span class="comment">// Â¶ÇÊûúÁ±ªÂûãÂÄº‰∏çÊòØObject„ÄÅArray„ÄÅMap„ÄÅSet„ÄÅWeakMap„ÄÅWeakSetÁöÑÔºåÁõ¥Êé•ËøîÂõû</span>
    <span class="keyword">const</span> targetType = <span class="title function_">getTargetType</span>(target)
    <span class="keyword">if</span> (targetType === <span class="title class_">TargetType</span>.<span class="property">INVALID</span>) &#123;
      <span class="keyword">return</span> target
    &#125;

    <span class="comment">// Ê†πÊçÆ‰∏çÂêåÁöÑÁ±ªÂûãÂÄºËµã‰∫à‰∏çÂêåÁöÑhandlersÔºåÂ∞±ÊòØÊàë‰πãÂâçÂõæ‰∏äÁîªÁöÑÂàÜÂºÄÂ§ÑÁêÜ</span>
    <span class="comment">/* </span>
<span class="comment">      Êääset„ÄÅMapËøôÁßçÊï∞ÊçÆ‰∏éÂü∫Á°ÄÊï∞ÊçÆÂàÜÂºÄÂ§ÑÁêÜÔºåÊòØÂõ†‰∏∫Map„ÄÅSet‰∏≠Â≠òÂÇ®ÁöÑÊï∞ÊçÆÂøÖÈ°ªÈÄöËøáthisËøõË°åËÆøÈóÆ</span>
<span class="comment">      ‰ΩÜÊòØË¢´proxyÂä´ÊåÅÂêéÔºåthisÂ∞±ÂèòÊàê‰∫ÜproxyÔºå</span>
<span class="comment">      ÊâÄ‰ª•ÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜÔºåÊääÂä´ÊåÅÊñπÊ≥ïËøõË°åÈáçÂÜô</span>
<span class="comment">     */</span>
    <span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(
      target,
      targetType === <span class="title class_">TargetType</span>.<span class="property">COLLECTION</span> ? collectionHandlers : baseHandlers
    )
    proxyMap.<span class="title function_">set</span>(target, proxy)
    <span class="keyword">return</span> proxy
  &#125;</code></pre></li>
</ul>
<h3 id="baseHandler"><a href="#baseHandler" class="headerlink" title="baseHandler"></a>baseHandler</h3><p><code>baseHandler</code>‰∏ªË¶ÅÂàÜÊûêreactiveÁöÑÂ§ÑÁêÜÂô®ÂØπË±°<code>mutableHandlers</code></p>
<pre><code class="highlight ts"><span class="comment">// ÂØπget set delete has onwKeysÂÅö‰∫ÜÊã¶Êà™Â§ÑÁêÜ</span>
<span class="keyword">export</span> <span class="keyword">const</span> <span class="attr">mutableHandlers</span>: <span class="title class_">ProxyHandler</span>&lt;<span class="built_in">object</span>&gt; = &#123;
  get,
  set,
  deleteProperty,
  has,
  ownKeys
&#125;</code></pre>
<h4 id="get"><a href="#get" class="headerlink" title="get"></a>get</h4><pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">createGetter</span>(<span class="params">isReadonly = <span class="literal">false</span>, shallow = <span class="literal">false</span></span>) &#123;
  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">get</span>(<span class="params">target: Target, key: <span class="built_in">string</span> | <span class="built_in">symbol</span>, receiver: <span class="built_in">object</span></span>) &#123;
    <span class="comment">// ËÆøÈóÆÊ†áÂøó‰ΩçÊó∂ÁöÑÈÄªËæëÂ§ÑÁêÜ</span>
    <span class="keyword">if</span> (key === <span class="title class_">ReactiveFlags</span>.<span class="property">IS_REACTIVE</span>) &#123;
      <span class="keyword">return</span> !isReadonly
    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key === <span class="title class_">ReactiveFlags</span>.<span class="property">IS_READONLY</span>) &#123;
      <span class="keyword">return</span> isReadonly
    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (
      key === <span class="title class_">ReactiveFlags</span>.<span class="property">RAW</span> &amp;&amp;
      receiver ===
        (isReadonly
          ? shallow
            ? shallowReadonlyMap
            : readonlyMap
          : shallow
            ? shallowReactiveMap
            : reactiveMap
        ).<span class="title function_">get</span>(target)
    ) &#123;
      <span class="keyword">return</span> target
    &#125;

    <span class="keyword">const</span> targetIsArray = <span class="title function_">isArray</span>(target)

    <span class="comment">// Â¶ÇÊûútargetÊòØÊï∞ÁªÑÂπ∂‰∏îkeyÂ±û‰∫é‰∏Ä‰∫õÊï∞ÁªÑÁöÑÂéüÂßãÊñπÊ≥ïÔºåÂç≥Ëß¶ÂèëÊã¶Êà™</span>
    <span class="keyword">if</span> (!isReadonly &amp;&amp; targetIsArray &amp;&amp; <span class="title function_">hasOwn</span>(arrayInstrumentations, key)) &#123;
      <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(arrayInstrumentations, key, receiver)
    &#125;

    <span class="keyword">const</span> res = <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, key, receiver)

    <span class="comment">// Â¶ÇÊûúkeyÊòØsymbolÁöÑÂÜÖÁΩÆÊñπÊ≥ïÔºåÊàñËÄÖÊòØÂéüÂûãÂØπË±°ÔºåÁõ¥Êé•ËøîÂõû</span>
    <span class="keyword">if</span> (<span class="title function_">isSymbol</span>(key) ? builtInSymbols.<span class="title function_">has</span>(key) : <span class="title function_">isNonTrackableKeys</span>(key)) &#123;
      <span class="keyword">return</span> res
    &#125;

    <span class="comment">// Âè™ËØªÂØπË±°‰∏çÊî∂ÈõÜ‰æùËµñÔºåÂõ†‰∏∫‰∏ç‰ºöËß¶Âèë‰æùËµñÊõ¥Êñ∞</span>
    <span class="keyword">if</span> (!isReadonly) &#123;
      <span class="title function_">track</span>(target, <span class="title class_">TrackOpTypes</span>.<span class="property">GET</span>, key)
    &#125;

    <span class="comment">// ÊµÖÂ±ÇÂìçÂ∫îÁ´ãÂç≥ËøîÂõûÔºå‰∏çÈÄíÂΩíËΩ¨Âåñ</span>
    <span class="keyword">if</span> (shallow) &#123;
      <span class="keyword">return</span> res
    &#125;

    <span class="comment">// Â¶ÇÊûúÊòØrefÂØπË±°(Êï∞ÁªÑÈô§Â§ñ)ÔºåËøîÂõûÁúüÊ≠£ÁöÑÂÄºÔºå</span>
    <span class="keyword">if</span> (<span class="title function_">isRef</span>(res)) &#123;
      <span class="keyword">const</span> shouldUnwrap = !targetIsArray || !<span class="title function_">isIntegerKey</span>(key)
      <span class="keyword">return</span> shouldUnwrap ? res.<span class="property">value</span> : res
    &#125;

    <span class="keyword">if</span> (<span class="title function_">isObject</span>(res)) &#123;
      <span class="comment">// Áî±‰∫éproxyÂè™ËÉΩ‰ª£ÁêÜ‰∏ÄÂ±ÇÔºåÊâÄ‰ª•target[key]ÁöÑÂÄºÂ¶ÇÊûúÊòØÂØπË±°ÔºåÂ∞±ÁªßÁª≠ÂØπÂÖ∂ËøõË°å‰ª£ÁêÜ</span>
      <span class="keyword">return</span> isReadonly ? <span class="title function_">readonly</span>(res) : <span class="title function_">reactive</span>(res)
    &#125;
    <span class="keyword">return</span> res
  &#125;
&#125;</code></pre>
<p>Êï∞ÁªÑÊñπÊ≥ïÊã¶Êà™: ÂØπÊï∞ÁªÑÁöÑ‰∏§ÁßçÂéüÁîüÊñπÊ≥ïËøõË°å‰∫ÜÊã¶Êà™</p>
<ul>
<li>ÈÅçÂéÜÊü•ÊâæÁöÑÊñπÊ≥ïÔºöincludes„ÄÅindexOf„ÄÅlastIndexOf</li>
<li>ÊîπÂèòÊï∞ÁªÑÈïøÂ∫¶ÁöÑÊñπÊ≥ïÔºöpush„ÄÅpop„ÄÅshift„ÄÅunshift„ÄÅsplice<pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">createArrayInstrumentations</span>(<span class="params"></span>) &#123;
    <span class="keyword">const</span> <span class="attr">instrumentations</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Function</span>&gt; = &#123;&#125;
    ;([<span class="string">&#x27;includes&#x27;</span>, <span class="string">&#x27;indexOf&#x27;</span>, <span class="string">&#x27;lastIndexOf&#x27;</span>] <span class="keyword">as</span> <span class="keyword">const</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;
      <span class="keyword">const</span> method = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>[key] <span class="keyword">as</span> <span class="built_in">any</span>
      instrumentations[key] = <span class="keyword">function</span>(<span class="params"><span class="variable language_">this</span>: <span class="built_in">unknown</span>[], ...args: <span class="built_in">unknown</span>[]</span>) &#123;
        <span class="comment">// Ëøô‰∏ÄÊ≠•ÊòØ‰∏∫‰∫ÜÂèñÂéüÂßãÂÆû‰æãÔºåÂõ†‰∏∫ÂΩìÂâçÁöÑthisÊòØreceiver</span>
        <span class="keyword">const</span> arr = <span class="title function_">toRaw</span>(<span class="variable language_">this</span>)
        <span class="comment">// ÊêúÈõÜ‰æùËµñ</span>
        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = <span class="variable language_">this</span>.<span class="property">length</span>; i &lt; l; i++) &#123;
          <span class="title function_">track</span>(arr, <span class="title class_">TrackOpTypes</span>.<span class="property">GET</span>, i + <span class="string">&#x27;&#x27;</span>)
        &#125;
        <span class="comment">// Ëß¶ÂèëÊñπÊ≥ïÔºåÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÂØπÂ∫îÁöÑÂÄºÔºåÂ∞±ÂèñÂéüÂßãÂÄºÂÜçÈÅçÂéÜ</span>
        <span class="keyword">const</span> res = method.<span class="title function_">apply</span>(arr, args)
        <span class="keyword">if</span> (res === -<span class="number">1</span> || res === <span class="literal">false</span>) &#123;
          <span class="keyword">return</span> method.<span class="title function_">apply</span>(arr, args.<span class="title function_">map</span>(toRaw))
        &#125; <span class="keyword">else</span> &#123;
          <span class="keyword">return</span> res
        &#125;
      &#125;
    &#125;)
    <span class="comment">/* </span>
<span class="comment">      Âõ†‰∏∫ÊîπÂèòÊï∞ÁªÑÈïøÂ∫¶ÁöÑÊñπÊ≥ïÔºåÊâßË°åÊúüÈó¥‰ºöËß¶ÂèëlengthÁöÑgetÂíåset</span>
<span class="comment">      Â∞±ÂõûÂØºËá¥Êó†ÈôêÂæ™ÁéØtrackÂíåtrigger</span>
<span class="comment">      ÊâÄ‰ª•Â∞±Áî®pauseTracking()Á¶ÅÁî®‰æùËµñÊî∂ÈõÜÔºåËß¶ÂèëÊñπÊ≥ïÂêéÔºå</span>
<span class="comment">      ÂÜçÁî®resetTracking()ÊÅ¢Â§çtrack</span>
<span class="comment">     */</span>
    ;([<span class="string">&#x27;push&#x27;</span>, <span class="string">&#x27;pop&#x27;</span>, <span class="string">&#x27;shift&#x27;</span>, <span class="string">&#x27;unshift&#x27;</span>, <span class="string">&#x27;splice&#x27;</span>] <span class="keyword">as</span> <span class="keyword">const</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;
      <span class="keyword">const</span> method = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>[key] <span class="keyword">as</span> <span class="built_in">any</span>
      instrumentations[key] = <span class="keyword">function</span>(<span class="params"><span class="variable language_">this</span>: <span class="built_in">unknown</span>[], ...args: <span class="built_in">unknown</span>[]</span>) &#123;
        <span class="title function_">pauseTracking</span>()
        <span class="keyword">const</span> res = method.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args)
        <span class="title function_">resetTracking</span>()
        <span class="keyword">return</span> res
      &#125;
    &#125;)
    <span class="keyword">return</span> instrumentations
&#125;</code></pre></li>
</ul>
<h4 id="set"><a href="#set" class="headerlink" title="set"></a>set</h4><pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">createSetter</span>(<span class="params">shallow = <span class="literal">false</span></span>) &#123;
  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">set</span>(<span class="params"></span>
<span class="params">    target: <span class="built_in">object</span>,</span>
<span class="params">    key: <span class="built_in">string</span> | <span class="built_in">symbol</span>,</span>
<span class="params">    value: <span class="built_in">unknown</span>,</span>
<span class="params">    receiver: <span class="built_in">object</span></span>
<span class="params">  </span>): <span class="built_in">boolean</span> &#123;
    <span class="keyword">let</span> oldValue = (target <span class="keyword">as</span> <span class="built_in">any</span>)[key]
    <span class="keyword">if</span> (!shallow) &#123;
      value = <span class="title function_">toRaw</span>(value)
      oldValue = <span class="title function_">toRaw</span>(oldValue)
      <span class="comment">// Â¶ÇÊûúÂéüÊù•ÁöÑÂÄºÊòØrefÔºå‰ΩÜÊñ∞ÁöÑÂÄº‰∏çÊòØÔºåÂàôÂ∞ÜÊñ∞ÁöÑÂÄºËµãÁªôoldValue.value</span>
      <span class="keyword">if</span> (!<span class="title function_">isArray</span>(target) &amp;&amp; <span class="title function_">isRef</span>(oldValue) &amp;&amp; !<span class="title function_">isRef</span>(value)) &#123;
        oldValue.<span class="property">value</span> = value
        <span class="keyword">return</span> <span class="literal">true</span>
      &#125;
    &#125; <span class="keyword">else</span> &#123;
      <span class="comment">// in shallow mode, objects are set as-is regardless of reactive or not</span>
    &#125;

    <span class="keyword">const</span> hadKey =
      <span class="title function_">isArray</span>(target) &amp;&amp; <span class="title function_">isIntegerKey</span>(key)
        ? <span class="title class_">Number</span>(key) &lt; target.<span class="property">length</span>
        : <span class="title function_">hasOwn</span>(target, key)
    <span class="keyword">const</span> result = <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, key, value, receiver)
    
    <span class="comment">// Âà§Êñ≠receiverÊòØÂΩìÂâçÂØπË±°ÁöÑproxyÂÆû‰æãÔºåÈò≤Ê≠¢ÂéüÂûãÈìæ‰∏äÁöÑproxyËß¶ÂèëÊõ¥Êñ∞</span>
    <span class="keyword">if</span> (target === <span class="title function_">toRaw</span>(receiver)) &#123;
      <span class="comment">// Âà§Êñ≠Êñ∞Â¢ûÂ±ûÊÄßËøòÊòØ‰øÆÊîπÂ±ûÊÄß</span>
      <span class="keyword">if</span> (!hadKey) &#123;
        <span class="title function_">trigger</span>(target, <span class="title class_">TriggerOpTypes</span>.<span class="property">ADD</span>, key, value)
      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">hasChanged</span>(value, oldValue)) &#123;
        <span class="title function_">trigger</span>(target, <span class="title class_">TriggerOpTypes</span>.<span class="property">SET</span>, key, value, oldValue)
      &#125;
    &#125;
    <span class="keyword">return</span> result
  &#125;
&#125;</code></pre>
<h4 id="deleteProperty„ÄÅhas‚Ä¶"><a href="#deleteProperty„ÄÅhas‚Ä¶" class="headerlink" title="deleteProperty„ÄÅhas‚Ä¶"></a>deleteProperty„ÄÅhas‚Ä¶</h4><ul>
<li>deleteProperty„ÄÅhas„ÄÅownKeysÁöÑÊ∫êÁ†ÅÂ∞±‰∏çË¥¥‰∫ÜÔºåÈÉΩÊòØÂà§Êñ≠keyÁöÑÂ±ûÊÄßÔºåÁÑ∂ÂêéÈÄâÊã©Ëß¶ÂèëÊàñËÄÖÊî∂ÈõÜ‰æùËµñ</li>
</ul>
<h3 id="collectionHandlers"><a href="#collectionHandlers" class="headerlink" title="collectionHandlers"></a>collectionHandlers</h3><ul>
<li>collection‰∏ªË¶ÅÂàÜÊûêreactiveÁöÑÈáçÂÜôÊñπÊ≥ïÂØπË±°mutableInstrumentations<pre><code class="highlight ts"><span class="comment">// ‰∏ªË¶ÅÂØπ‰ª•‰∏ãÂéüÁîüapiËøõË°å‰∫ÜÊîπÂÜô</span>
<span class="keyword">const</span> <span class="attr">mutableInstrumentations</span>: <span class="title class_">Record</span>&lt;<span class="built_in">string</span>, <span class="title class_">Function</span>&gt; = &#123;
    <span class="title function_">get</span>(<span class="params"><span class="variable language_">this</span>: MapTypes, key: <span class="built_in">unknown</span></span>) &#123;
      <span class="keyword">return</span> <span class="title function_">get</span>(<span class="variable language_">this</span>, key)
    &#125;,
    <span class="keyword">get</span> <span class="title function_">size</span>() &#123;
      <span class="keyword">return</span> <span class="title function_">size</span>((<span class="variable language_">this</span> <span class="keyword">as</span> <span class="built_in">unknown</span>) <span class="keyword">as</span> <span class="title class_">IterableCollections</span>)
    &#125;,
    has,
    add,
    set,
    <span class="attr">delete</span>: deleteEntry,
    clear,
    <span class="attr">forEach</span>: <span class="title function_">createForEach</span>(<span class="literal">false</span>, <span class="literal">false</span>)
&#125;</code></pre></li>
</ul>
<h4 id="get-1"><a href="#get-1" class="headerlink" title="get"></a>get</h4><pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">get</span>(<span class="params"></span>
<span class="params">    target: MapTypes,</span>
<span class="params">    key: <span class="built_in">unknown</span>,</span>
<span class="params">    isReadonly = <span class="literal">false</span>,</span>
<span class="params">    isShallow = <span class="literal">false</span></span>
<span class="params"></span>) &#123;
    <span class="comment">// Ëé∑ÂèñÂéüÂßãÂÄºÈáçÊñ∞ËµãÂÄºÁªôtarget</span>
    target = (target <span class="keyword">as</span> <span class="built_in">any</span>)[<span class="title class_">ReactiveFlags</span>.<span class="property">RAW</span>]

    <span class="comment">// ÂØπtargetÊ∫êÂØπË±°ÂíåkeyËøõ‰∏ÄÊ≠•Ëé∑ÂèñÂéüÂßãÂÄº</span>
    <span class="keyword">const</span> rawTarget = <span class="title function_">toRaw</span>(target)
    <span class="keyword">const</span> rawKey = <span class="title function_">toRaw</span>(key)

    <span class="comment">// ÂΩìÂâçkeyÂíåÂéüÂßãkeyÂùáËøõË°å‰æùËµñÊî∂ÈõÜ(track)</span>
    <span class="keyword">if</span> (key !== rawKey) &#123;
      !isReadonly &amp;&amp; <span class="title function_">track</span>(rawTarget, <span class="title class_">TrackOpTypes</span>.<span class="property">GET</span>, key)
    &#125;
    !isReadonly &amp;&amp; <span class="title function_">track</span>(rawTarget, <span class="title class_">TrackOpTypes</span>.<span class="property">GET</span>, rawKey)
    <span class="keyword">const</span> &#123; has &#125; = <span class="title function_">getProto</span>(rawTarget)

    <span class="comment">// Ëé∑ÂèñÂØπÂ∫îÁöÑËΩ¨Êç¢ÂáΩÊï∞</span>
    <span class="keyword">const</span> wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive
    <span class="comment">/* </span>
<span class="comment">      Â¶ÇÊûúÊ∫êÂØπË±°ÊúâkeyÂØπÂ∫îÁöÑÂ±ûÊÄßÔºåÂ∞±ÈÄöËøáÂéüÁîügetÊñπÊ≥ïÂèñÂà∞ÂÄºÔºå</span>
<span class="comment">      Âπ∂ÂØπËØ•ÂÄºËøõË°åÂìçÂ∫îÂºèËΩ¨Êç¢ÔºåËøîÂõûËΩ¨Êç¢ÂêéÁöÑÂìçÂ∫îÂºèÂØπË±°Ôºå</span>
<span class="comment">      Â¶ÇÊûúÊ≤°ÊúâÔºåÂ∞±ÂéªkeyÂéüÂßãÂÄº‰∏≠ÂéªÊü•Êâæ</span>
<span class="comment">    */</span>
    <span class="keyword">if</span> (has.<span class="title function_">call</span>(rawTarget, key)) &#123;
      <span class="keyword">return</span> <span class="title function_">wrap</span>(target.<span class="title function_">get</span>(key))
    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (has.<span class="title function_">call</span>(rawTarget, rawKey)) &#123;
      <span class="keyword">return</span> <span class="title function_">wrap</span>(target.<span class="title function_">get</span>(rawKey))
    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target !== rawTarget) &#123;
      target.<span class="title function_">get</span>(key)
    &#125;
&#125;</code></pre>

<h4 id="size"><a href="#size" class="headerlink" title="size"></a>size</h4><pre><code class="highlight ts"><span class="comment">// ÂØπsizeÂ±ûÊÄßÂÅögetÊã¶Êà™</span>
<span class="keyword">function</span> <span class="title function_">size</span>(<span class="params">target: IterableCollections, isReadonly = <span class="literal">false</span></span>) &#123;
  target = (target <span class="keyword">as</span> <span class="built_in">any</span>)[<span class="title class_">ReactiveFlags</span>.<span class="property">RAW</span>]
  <span class="comment">// Ëé∑ÂèñsizeÂíåËé∑ÂèñÊï∞ÁªÑÁöÑlengthÁ±ª‰ººÔºåÈÉΩÁî®‰∏ìÈó®ÁöÑkeyÂÅö‰æùËµñÊî∂ÈõÜ</span>
  !isReadonly &amp;&amp; <span class="title function_">track</span>(<span class="title function_">toRaw</span>(target), <span class="title class_">TrackOpTypes</span>.<span class="property">ITERATE</span>, <span class="variable constant_">ITERATE_KEY</span>)
  <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, <span class="string">&#x27;size&#x27;</span>, target)
&#125;</code></pre>

<h4 id="set-1"><a href="#set-1" class="headerlink" title="set"></a>set</h4><pre><code class="highlight ts"><span class="keyword">function</span> <span class="title function_">set</span>(<span class="params"><span class="variable language_">this</span>: MapTypes, key: <span class="built_in">unknown</span>, value: <span class="built_in">unknown</span></span>) &#123;
  <span class="comment">// Ëé∑ÂèñvalueÂíåthis‰∏ä‰∏ãÊñáÁöÑÂéüÂßãÂÄº</span>
  value = <span class="title function_">toRaw</span>(value)
  <span class="keyword">const</span> target = <span class="title function_">toRaw</span>(<span class="variable language_">this</span>)
  <span class="keyword">const</span> &#123; has, get &#125; = <span class="title function_">getProto</span>(target)

  <span class="comment">/* </span>
<span class="comment">    Âà§Êñ≠Ê∫êÂØπË±°ÊòØÂê¶Â∑≤ÁªèÂ≠òÂú®ÂØπÂ∫îÁöÑkey</span>
<span class="comment">    1. È¶ñÂÖàÊü•ÊâæÊ∫êÂØπË±°ÊòØÂê¶Â∑≤ÊúâkeyÂØπÂ∫îÁöÑÂ±ûÊÄß</span>
<span class="comment">    2. Â¶ÇÊûúÊ≤°ÊúâÔºåÂÜçÊü•ÊâækeyÂØπÂ∫îÁöÑÂéüÂßãÂÄºÂú®Ê∫êÂØπË±°ÁöÑÂ±ûÊÄßÊòØÂê¶Â≠òÂú®</span>
<span class="comment">  */</span>
  <span class="keyword">let</span> hadKey = has.<span class="title function_">call</span>(target, key)
  <span class="keyword">if</span> (!hadKey) &#123;
    key = <span class="title function_">toRaw</span>(key)
    hadKey = has.<span class="title function_">call</span>(target, key)
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (__DEV__) &#123;
    <span class="title function_">checkIdentityKeys</span>(target, has, key)
  &#125;

  <span class="keyword">const</span> oldValue = get.<span class="title function_">call</span>(target, key)
  target.<span class="title function_">set</span>(key, value)

  <span class="comment">// Ëß¶Âèë‰æùËµñÔºåÊñ∞Â¢ûÂ±ûÊÄßÂíå‰øÆÊîπÂ±ûÊÄßÂàÜÂºÄËøõË°åtrigger</span>
  <span class="keyword">if</span> (!hadKey) &#123;
    <span class="title function_">trigger</span>(target, <span class="title class_">TriggerOpTypes</span>.<span class="property">ADD</span>, key, value)
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">hasChanged</span>(value, oldValue)) &#123;
    <span class="title function_">trigger</span>(target, <span class="title class_">TriggerOpTypes</span>.<span class="property">SET</span>, key, value, oldValue)
  &#125;
  <span class="keyword">return</span> <span class="variable language_">this</span>
&#125;</code></pre>
<h4 id="has„ÄÅclear‚Ä¶"><a href="#has„ÄÅclear‚Ä¶" class="headerlink" title="has„ÄÅclear‚Ä¶"></a>has„ÄÅclear‚Ä¶</h4><ul>
<li>ÂÖ∂‰ΩôÈáçÂÜôÊñπÊ≥ïÊàëÂ∞±‰∏ç‰∏ä‰ª£Á†Å‰∫ÜÔºå‰∏çÂêåÁÇπÊòØÂçï‰∏™Â±ûÊÄßËß¶ÂèëÂçï‰∏™ÁöÑ‰æùËµñÔºåÂ¶ÇÊûúÊòØÈÅçÂéÜÊâÄÊúâÂ±ûÊÄßÁöÑÊñπÊ≥ïÂ∞±Ëß¶ÂèëÊâÄÊúâ‰æùËµñ</li>
</ul>
<h3 id="effect"><a href="#effect" class="headerlink" title="effect"></a>effect</h3><ul>
<li>effectÊñá‰ª∂‰Ωú‰∏∫ÂìçÂ∫îÂºèÁöÑÊ†∏ÂøÉÔºå‰∏ªË¶ÅË¥üË¥£Êî∂ÈõÜ‰æùËµñÔºåËß¶Âèë‰æùËµñ</li>
</ul>
<h4 id="effect-1"><a href="#effect-1" class="headerlink" title="effect"></a>effect</h4><ul>
<li>effectÂáΩÊï∞‰∏ªË¶ÅÊòØÁîüÊàêÊî∂ÈõÜ‰æùËµñÊâÄÈúÄÁöÑ‰æùËµñÂáΩÊï∞<pre><code class="highlight ts"><span class="keyword">export</span> <span class="keyword">function</span> effect&lt;T = <span class="built_in">any</span>&gt;(
    <span class="attr">fn</span>: <span class="function">() =&gt;</span> T,
    <span class="attr">options</span>: <span class="title class_">ReactiveEffectOptions</span> = <span class="variable constant_">EMPTY_OBJ</span>
): <span class="title class_">ReactiveEffect</span>&lt;T&gt; &#123;
    <span class="comment">// Â¶ÇÊûúÂ∑≤ÁªèÊòØeffectÂáΩÊï∞ÔºåÂèñÂæóÂéüÊù•ÁöÑfn</span>
    <span class="keyword">if</span> (<span class="title function_">isEffect</span>(fn)) &#123;
      fn = fn.<span class="property">raw</span>
    &#125;
    <span class="keyword">const</span> effect = <span class="title function_">createReactiveEffect</span>(fn, options)

    <span class="comment">// Â¶ÇÊûúlazy‰∏∫falseÔºåÁ´ãÂç≥ÊâßË°å‰∏ÄÊ¨°</span>
    <span class="keyword">if</span> (!options.<span class="property">lazy</span>) &#123;
      <span class="title function_">effect</span>()
    &#125;
    <span class="keyword">return</span> effect
&#125;</code></pre></li>
<li><code>createReactiveEffect</code>ÔºöÁîüÊàêeffectÂØπË±°<pre><code class="highlight ts"><span class="keyword">function</span> createReactiveEffect&lt;T = <span class="built_in">any</span>&gt;(
    <span class="attr">fn</span>: <span class="function">() =&gt;</span> T,
    <span class="attr">options</span>: <span class="title class_">ReactiveEffectOptions</span>
): <span class="title class_">ReactiveEffect</span>&lt;T&gt; &#123;
    <span class="keyword">const</span> effect = <span class="keyword">function</span> <span class="title function_">reactiveEffect</span>(<span class="params"></span>): <span class="built_in">unknown</span> &#123;
      <span class="comment">// Ê≤°ÊúâÊøÄÊ¥ªÔºåÂ∑≤ÁªèË∞ÉÁî®stopÂáΩÊï∞ÂÅúÊ≠¢ÁõëÂê¨</span>
      <span class="keyword">if</span> (!effect.<span class="property">active</span>) &#123;
        <span class="keyword">return</span> <span class="title function_">fn</span>()
      &#125;
      <span class="comment">/**</span>
<span class="comment">       * effectStackÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑeffectÊ†àÁªìÊûÑ</span>
<span class="comment">       * ËÆæËÆ°‰∏∫Ê†àÁªìÊûÑÊòØÂõ†‰∏∫Â¶ÇÊûúeffectÊòØÂµåÂ•óÊó∂Ôºå‰∏∫‰∫ÜÈò≤Ê≠¢ÂÜÖÂ±ÇÂâØ‰ΩúÁî®ÂáΩÊï∞Ë¶ÜÁõñÂ§ñÂ±ÇÂâØ‰ΩúÁî®ÂáΩÊï∞ÔºåÂú®Êî∂ÈõÜÊó∂Âè™Êî∂ÈõÜÊ†àÈ°∂ÁöÑÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÊî∂ÈõÜÂà∞ÈîôËØØÁöÑÂâØ‰ΩúÁî®ÂáΩÊï∞</span>
<span class="comment">       */</span>
      <span class="keyword">if</span> (!effectStack.<span class="title function_">includes</span>(effect)) &#123;
        <span class="comment">/**</span>
<span class="comment">         * ‰∏∫‰∫Ü‰øùËØÅÂΩìÂâçeffectÁöÑdepÊòØÊúÄÊñ∞ÔºåÂõ†‰∏∫Âú®‰∏Ä‰∫õÂà§Êñ≠Â§ÑÁêÜ‰∏≠ÔºåÂèØËÉΩ‰ºöÂØºËá¥‰∏Ä‰∫õÊó†ÊïàÁöÑÂâØ‰ΩúÁî®ÂáΩÊï∞</span>
<span class="comment">         * ÊâÄ‰ª•‰∏∫‰∫ÜÂèñÊ∂àËøô‰∫õ‰∏çÂøÖË¶ÅÁöÑÊõ¥Êñ∞ÔºåÂ∞±Ë¶ÅÊ∏ÖÈô§effect‰æùËµñ</span>
<span class="comment">         */</span>
        <span class="title function_">cleanup</span>(effect)
        <span class="keyword">try</span> &#123;
          <span class="title function_">enableTracking</span>() <span class="comment">// ÈáçÊñ∞Êî∂ÈõÜ‰æùËµñ</span>
          effectStack.<span class="title function_">push</span>(effect)
          activeEffect = effect
          <span class="keyword">return</span> <span class="title function_">fn</span>()
        &#125; <span class="keyword">finally</span> &#123;
          <span class="comment">/* </span>
<span class="comment">            trackÂ∞Ü‰æùËµñÂáΩÊï∞activeEffectÊ∑ªÂä†Âà∞ÂØπÂ∫îÁöÑdep‰∏≠Ôºå</span>
<span class="comment">            ÁÑ∂ÂêéÂ∞ÜactiveEffectÈáçÁΩÆ‰∏∫‰∏ä‰∏Ä‰∏™effectÁöÑÂÄº</span>
<span class="comment">          */</span>
          effectStack.<span class="title function_">pop</span>()
          <span class="title function_">resetTracking</span>()
          activeEffect = effectStack[effectStack.<span class="property">length</span> - <span class="number">1</span>]
        &#125;
      &#125;
    &#125; <span class="keyword">as</span> <span class="title class_">ReactiveEffect</span>
    effect.<span class="property">id</span> = uid++ <span class="comment">// Ëá™Â¢ûID</span>
    effect.<span class="property">allowRecurse</span> = !!options.<span class="property">allowRecurse</span> <span class="comment">// ÈÄíÂΩíÁä∂ÊÄÅ</span>
    effect.<span class="property">_isEffect</span> = <span class="literal">true</span> <span class="comment">// Áî®‰∫éÊ†áËØÜÊñπÊ≥ïÊòØ‰∏çÊòØeffect</span>
    effect.<span class="property">active</span> = <span class="literal">true</span> <span class="comment">// Áî®‰∫éÂà§Êñ≠ÂΩìÂâçeffectÊòØÂê¶ÊøÄÊ¥ªÔºåÊúâ‰∏Ä‰∏™stop()Êù•Â∞ÜÂÆÉËÆæ‰∏∫false</span>
    effect.<span class="property">raw</span> = fn <span class="comment">// effectÁöÑÊâßË°åÂáΩÊï∞</span>
    effect.<span class="property">deps</span> = [] <span class="comment">// Áî®‰∫éÊî∂ÈõÜ‰æùËµñ</span>
    effect.<span class="property">options</span> = options <span class="comment">// ÂàõÂª∫effect‰º†ÂÖ•ÁöÑoptions</span>
    <span class="keyword">return</span> effect
&#125;</code></pre></li>
<li>activeEffectÂ∞±ÊòØÊ†áËÆ∞trackÊâÄÈúÄÁöÑ‰æùËµñÂáΩÊï∞</li>
</ul>
<h4 id="track"><a href="#track" class="headerlink" title="track"></a>track</h4><ul>
<li>trackÂ∞±ÊòØbaseHandlerÂíåcollectionHandlersÊñá‰ª∂‰∏≠È¢ëÁπÅ‰ΩøÁî®ÁöÑÊî∂ÈõÜ‰æùËµñÂáΩÊï∞</li>
<li>È¶ñÂÖàÈúÄË¶ÅÁúã‰∏Ä‰∏™ÂÖ≥ÈîÆÂèòÈáètargetMap<pre><code class="highlight ts"><span class="comment">// targetMapÊòØ‰æùËµñÁÆ°ÁêÜ‰∏≠ÂøÉÔºåÊî∂ÈõÜ‰æùËµñÂíåËß¶Âèë‰æùËµñÈÉΩ‰æùÊâò‰∫éËøô‰∏™MapÊï∞ÊçÆ</span>
<span class="comment">// ‰∏ãÈù¢ÊòØtargetMapÁöÑÂÆö‰πâ(target -&gt; key -&gt; dep)</span>
<span class="comment">// target: ÁõëÂê¨ÁöÑÂØπË±°Ê∫ê</span>
<span class="comment">// key: ÁõëÂê¨ÁöÑÈîÆÂÄº</span>
<span class="comment">// depÔºö‰æùËµñÂáΩÊï∞</span>
<span class="keyword">type</span> <span class="title class_">Dep</span> = <span class="title class_">Set</span>&lt;<span class="title class_">ReactiveEffect</span>&gt;
<span class="keyword">type</span> <span class="title class_">KeyToDepMap</span> = <span class="title class_">Map</span>&lt;<span class="built_in">any</span>, <span class="title class_">Dep</span>&gt;
<span class="keyword">const</span> targetMap = <span class="keyword">new</span> <span class="title class_">WeakMap</span>&lt;<span class="built_in">any</span>, <span class="title class_">KeyToDepMap</span>&gt;()
<span class="comment">// Ê†ºÂºèÂ§ßËá¥‰∏∫</span>
targetMap = &#123;
  <span class="attr">target</span>: &#123;
    <span class="attr">key1</span>: &#123; fn1, fn2 &#125;
    <span class="attr">key2</span>: &#123; fn1, fn2 &#125;
  &#125;
&#125;</code></pre>
<pre><code class="highlight ts"><span class="comment">/**</span>
<span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">target</span>&#125; ÁõÆÊ†áÂØπË±°</span>
<span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">type</span>&#125; Êî∂ÈõÜÁ±ªÂûã</span>
<span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">key</span>&#125; ÈúÄË¶ÅÊî∂ÈõÜ‰æùËµñÁöÑkey</span>
<span class="comment"> */</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">track</span>(<span class="params">target: <span class="built_in">object</span>, <span class="keyword">type</span>: TrackOpTypes, key: <span class="built_in">unknown</span></span>) &#123;
    <span class="comment">// activeEffect‰∏∫Á©∫ÔºåÂ∞±Ë°®Á§∫ÂΩìÂâçÊ≤°Êúâ‰æùËµñÔºåÂ∞±Ê≤°ÂøÖË¶ÅÂÅö‰æùËµñÊî∂ÈõÜ‰∫Ü</span>
    <span class="keyword">if</span> (!shouldTrack || activeEffect === <span class="literal">undefined</span>) &#123;
      <span class="keyword">return</span>
    &#125;
    <span class="comment">// Ëé∑ÂèñÂΩìÂâç‰æùËµñÊï∞ÊçÆ</span>
    <span class="keyword">let</span> depsMap = targetMap.<span class="title function_">get</span>(target)

    <span class="keyword">if</span> (!depsMap) &#123;
      targetMap.<span class="title function_">set</span>(target, (depsMap = <span class="keyword">new</span> <span class="title class_">Map</span>()))
    &#125;

    <span class="comment">// Â¶ÇÊûúÂΩìÂâçÊï∞ÊçÆ‰∏≠Ê≤°ÊúâÊâÄÂ±ûÁöÑ‰æùËµñkeyÔºåÂ∞±ÈáçÊñ∞ËÆæÁΩÆ‰∏Ä‰∏™</span>
    <span class="keyword">let</span> dep = depsMap.<span class="title function_">get</span>(key)
    <span class="keyword">if</span> (!dep) &#123;
      depsMap.<span class="title function_">set</span>(key, (dep = <span class="keyword">new</span> <span class="title class_">Set</span>()))
    &#125;
    <span class="comment">// Ê∑ªÂä†‰æùËµñÂáΩÊï∞</span>
    <span class="keyword">if</span> (!dep.<span class="title function_">has</span>(activeEffect)) &#123;
      dep.<span class="title function_">add</span>(activeEffect)
      activeEffect.<span class="property">deps</span>.<span class="title function_">push</span>(dep)
      <span class="keyword">if</span> (__DEV__ &amp;&amp; activeEffect.<span class="property">options</span>.<span class="property">onTrack</span>) &#123;
        activeEffect.<span class="property">options</span>.<span class="title function_">onTrack</span>(&#123;
          <span class="attr">effect</span>: activeEffect,
          target,
          <span class="keyword">type</span>,
          key
        &#125;)
      &#125;
    &#125;
&#125;</code></pre></li>
</ul>
<h4 id="trigger"><a href="#trigger" class="headerlink" title="trigger"></a>trigger</h4><pre><code class="highlight ts"><span class="comment">// Ëß¶Âèë‰æùËµñ</span>
<span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">trigger</span>(<span class="params"></span>
<span class="params">  target: <span class="built_in">object</span>,</span>
<span class="params">  <span class="keyword">type</span>: TriggerOpTypes,</span>
<span class="params">  key?: <span class="built_in">unknown</span>,</span>
<span class="params">  newValue?: <span class="built_in">unknown</span>,</span>
<span class="params">  oldValue?: <span class="built_in">unknown</span>,</span>
<span class="params">  oldTarget?: <span class="built_in">Map</span>&lt;<span class="built_in">unknown</span>, <span class="built_in">unknown</span>&gt; | <span class="built_in">Set</span>&lt;<span class="built_in">unknown</span>&gt;</span>
<span class="params"></span>) &#123;
  <span class="keyword">const</span> depsMap = targetMap.<span class="title function_">get</span>(target)
  <span class="comment">// Â¶ÇÊûúÊ≤°ÊúâÊî∂ÈõÜËøá‰æùËµñÔºåÁõ¥Êé•ËøîÂõû</span>
  <span class="keyword">if</span> (!depsMap) &#123;
    <span class="keyword">return</span>
  &#125;

  <span class="keyword">const</span> effects = <span class="keyword">new</span> <span class="title class_">Set</span>&lt;<span class="title class_">ReactiveEffect</span>&gt;()
  <span class="keyword">const</span> <span class="title function_">add</span> = (<span class="params">effectsToAdd: <span class="built_in">Set</span>&lt;ReactiveEffect&gt; | <span class="literal">undefined</span></span>) =&gt; &#123;
    <span class="keyword">if</span> (effectsToAdd) &#123;
      effectsToAdd.<span class="title function_">forEach</span>(<span class="function"><span class="params">effect</span> =&gt;</span> &#123;
        <span class="comment">// ÈÅøÂÖçÂæ™ÁéØËß¶Âèë‰æùËµñ Á±ª‰ºº`effect(() =&gt; obj.foo++)`</span>
        <span class="keyword">if</span> (effect !== activeEffect || effect.<span class="property">allowRecurse</span>) &#123;
          effects.<span class="title function_">add</span>(effect)
        &#125;
      &#125;)
    &#125;
  &#125;

  <span class="keyword">if</span> (<span class="keyword">type</span> === <span class="title class_">TriggerOpTypes</span>.<span class="property">CLEAR</span>) &#123;
    <span class="comment">// Âú®Ê∏ÖÁ©∫ÂâçÔºåÂ∞ÜÂØπÂ∫îÁöÑ‰æùËµñÂÖ®ÈÉ®Ê∑ªÂä†Âà∞Â±ÄÈÉ®Set</span>
    depsMap.<span class="title function_">forEach</span>(add)
  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (key === <span class="string">&#x27;length&#x27;</span> &amp;&amp; <span class="title function_">isArray</span>(target)) &#123;
    <span class="comment">// ÂΩìÊï∞ÁªÑÁöÑlengthÂ±ûÊÄßÂèòÂåñÊó∂Ëß¶Âèë</span>
    depsMap.<span class="title function_">forEach</span>(<span class="function">(<span class="params">dep, key</span>) =&gt;</span> &#123;
      <span class="keyword">if</span> (key === <span class="string">&#x27;length&#x27;</span> || key &gt;= (newValue <span class="keyword">as</span> <span class="built_in">number</span>)) &#123;
        <span class="title function_">add</span>(dep)
      &#125;
    &#125;)
  &#125; <span class="keyword">else</span> &#123;
    <span class="comment">// schedule runs for SET | ADD | DELETE</span>
    <span class="comment">// ÂæÄÁõ∏Â∫îÈòüÂàóÊ∑ªÂä†‰æùËµñ</span>
    <span class="keyword">if</span> (key !== <span class="built_in">void</span> <span class="number">0</span>) &#123;
      <span class="title function_">add</span>(depsMap.<span class="title function_">get</span>(key))
    &#125;

    <span class="comment">// also run for iteration key on ADD | DELETE | Map.SET</span>
    <span class="comment">// ÈÄöËøá‰∏çÂêåÁöÑTriggerOpTypesÂ∞ÜdepsMapÁöÑÊï∞ÊçÆÂèñÂá∫ÔºåÊ∑ªÂä†Âà∞effects</span>
    <span class="keyword">switch</span> (<span class="keyword">type</span>) &#123;
      <span class="keyword">case</span> <span class="title class_">TriggerOpTypes</span>.<span class="property">ADD</span>:
        <span class="keyword">if</span> (!<span class="title function_">isArray</span>(target)) &#123;
          <span class="title function_">add</span>(depsMap.<span class="title function_">get</span>(<span class="variable constant_">ITERATE_KEY</span>))
          <span class="keyword">if</span> (<span class="title function_">isMap</span>(target)) &#123;
            <span class="title function_">add</span>(depsMap.<span class="title function_">get</span>(<span class="variable constant_">MAP_KEY_ITERATE_KEY</span>))
          &#125;
        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="title function_">isIntegerKey</span>(key)) &#123;
          <span class="comment">// new index added to array -&gt; length changes</span>
          <span class="title function_">add</span>(depsMap.<span class="title function_">get</span>(<span class="string">&#x27;length&#x27;</span>))
        &#125;
        <span class="keyword">break</span>
      <span class="keyword">case</span> <span class="title class_">TriggerOpTypes</span>.<span class="property">DELETE</span>:
        <span class="keyword">if</span> (!<span class="title function_">isArray</span>(target)) &#123;
          <span class="title function_">add</span>(depsMap.<span class="title function_">get</span>(<span class="variable constant_">ITERATE_KEY</span>))
          <span class="keyword">if</span> (<span class="title function_">isMap</span>(target)) &#123;
            <span class="title function_">add</span>(depsMap.<span class="title function_">get</span>(<span class="variable constant_">MAP_KEY_ITERATE_KEY</span>))
          &#125;
        &#125;
        <span class="keyword">break</span>
      <span class="keyword">case</span> <span class="title class_">TriggerOpTypes</span>.<span class="property">SET</span>:
        <span class="keyword">if</span> (<span class="title function_">isMap</span>(target)) &#123;
          <span class="title function_">add</span>(depsMap.<span class="title function_">get</span>(<span class="variable constant_">ITERATE_KEY</span>))
        &#125;
        <span class="keyword">break</span>
    &#125;
  &#125;

  <span class="keyword">const</span> <span class="title function_">run</span> = (<span class="params">effect: ReactiveEffect</span>) =&gt; &#123;
    <span class="keyword">if</span> (__DEV__ &amp;&amp; effect.<span class="property">options</span>.<span class="property">onTrigger</span>) &#123;
      effect.<span class="property">options</span>.<span class="title function_">onTrigger</span>(&#123;
        effect,
        target,
        key,
        <span class="keyword">type</span>,
        newValue,
        oldValue,
        oldTarget
      &#125;)
    &#125;
    <span class="keyword">if</span> (effect.<span class="property">options</span>.<span class="property">scheduler</span>) &#123;
      <span class="comment">// Â¶ÇÊûúÊúâË∞ÉÂ∫¶Â±ûÊÄßÔºåÂ∞±ÈÄöËøáschedulerÂ§ÑÁêÜÊâßË°å</span>
      effect.<span class="property">options</span>.<span class="title function_">scheduler</span>(effect)
    &#125; <span class="keyword">else</span> &#123;
      <span class="title function_">effect</span>()
    &#125;
  &#125;

  effects.<span class="title function_">forEach</span>(run)
&#125;</code></pre>

<h3 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h3><ul>
<li>vue3ÂìçÂ∫îÂºèÊòØÈÄöËøáÊï∞ÊçÆÂä´ÊåÅÂíåÂèëÂ∏ÉËÆ¢ÈòÖÁöÑÊ®°ÂºèËøõË°åÂ§ÑÁêÜÔºåÈ¶ñÂÖàvue3‰∏≠ÁöÑÊï∞ÊçÆÊòØÈÄöËøá<code>proxy</code>ÂÅö‰∫Ü‰∏ÄÂ±Ç‰ª£ÁêÜÔºåÁÑ∂ÂêéÂ§ÑÁêÜ<code>proxy</code>ÁöÑ<code>handler</code>ÔºåÂü∫Êú¨Á±ªÂûãÁöÑ<code>handler</code>ÊòØÈÄöËøá<code>baseHandlers</code>ÔºåÁâπÊÆäÁ±ªÂûã(mapÔºåset)ÁöÑ<code>handler</code>ÊòØÈÄöËøá<code>collectHandlers</code>„ÄÇ</li>
<li><code>handler</code>‰∏≠Ëé∑ÂèñÂ±ûÊÄßÁöÑÊìç‰ΩúÈÄöËøá<code>track</code>ËøõË°å‰æùËµñÊî∂ÈõÜÔºå‰øÆÊîπÂ±ûÊÄßÁöÑÊìç‰ΩúÈÄöËøá<code>trigger</code>ËøõË°å‰æùËµñËß¶ÂèëÔºå‰æùËµñÁöÑÊî∂ÈõÜ‰∏éËß¶ÂèëÊòØÈÄöËøá‰æùËµñÁÆ°ÁêÜ‰∏≠ÂøÉ<code>targetMap</code>‰øùÂ≠òÁöÑ</li>
<li><code>track</code>ËøõË°åÊî∂ÈõÜÊó∂Ôºå‰ªñÊî∂ÈõÜÁöÑÊòØ<code>activeEffect</code>ÔºåËøô‰∏™ÂèòÈáèÂ≠òÂÇ®ÁöÑÂ∞±ÊòØÊ≠£Âú®Ëß¶ÂèëÁöÑÂâØ‰ΩúÁî®ÂáΩÊï∞Ôºå<code>activeEffect</code>ÈÄöËøá<code>effect()</code>ÊñπÊ≥ïËøõË°åÊî∂ÈõÜ</li>
<li><code>effect()</code>Â∏∏Áî®ÁöÑ‰∏â‰∏™Âú∞Êñπ<ul>
<li>ÁªÑ‰ª∂ÂâØ‰ΩúÁî®ÂáΩÊï∞</li>
<li><code>watch</code></li>
<li><code>computed</code></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>gallery</category>
      </categories>
      <tags>
        <tag>Vue3</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>About Me</title>
    <url>/about/index.html</url>
    <content><![CDATA[<p>üëã Hello there, Here is LH‚ÄôBLOG<br>üë®‚Äçüíª I‚Äôm a Frontend Developer. I like to try new technologies and develop some interesting open source projects<br>üìú I will write some tech blogs and life records<br>üå± I‚Äôm currently learning english</p>
<h3 id="contact-me"><a href="#contact-me" class="headerlink" title="contact me"></a>contact me</h3><ul>
<li><a href="https://github.com/LHRUN">Github</a></li>
<li><a href="https://t.me/longhao_song">Telegram</a></li>
<li><a href="mailto:song.lhlh@gmail.com">song.lhlh@gmail.com</a><!-- + [SegmentFault](https://segmentfault.com/u/lh_s)</li>
<li><a href="https://blog.csdn.net/weixin_44719258">CSDN</a> </li>
<li><a href="https://juejin.cn/user/3949101499549518">ÊéòÈáë</a></li>
<li><a href="https://www.zhihu.com/people/wxae77cceaa49dcaf5">Áü•‰πé</a> ‚Äì&gt;</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>&#39;tag&#39;</title>
    <url>/tag/index.html</url>
    <content><![CDATA[]]></content>
  </entry>
</search>
