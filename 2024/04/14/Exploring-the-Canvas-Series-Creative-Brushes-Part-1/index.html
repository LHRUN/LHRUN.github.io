<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="IntroductionI am currently developing a powerful open source creative drawing board. This drawing board contains a variety of creative brushes, which allows users to experience a new drawing effect. W">
<meta property="og:type" content="article">
<meta property="og:title" content="Exploring the Canvas Series: Creative Brushes Part 1">
<meta property="og:url" content="https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/index.html">
<meta property="og:site_name" content="Leo&#39;blog">
<meta property="og:description" content="IntroductionI am currently developing a powerful open source creative drawing board. This drawing board contains a variety of creative brushes, which allows users to experience a new drawing effect. W">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/LHRUN/file-store/main/paint-board/preview_device.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/rainbow.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/shape.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/material.png">
<meta property="og:image" content="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/pixels.png">
<meta property="article:published_time" content="2024-04-14T14:48:08.000Z">
<meta property="article:modified_time" content="2024-04-17T12:16:08.493Z">
<meta property="article:author" content="leo">
<meta property="article:tag" content="Canvas">
<meta property="article:tag" content="Fabric.js">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/LHRUN/file-store/main/paint-board/preview_device.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/IMG_1444.JPG">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/IMG_1444.JPG" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/IMG_1444.JPG">
        
      
    
    <!-- title -->
    <title>Exploring the Canvas Series: Creative Brushes Part 1</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	

  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "jy4barl9vt");
  </script>
<meta name="generator" content="Hexo 6.2.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/search/">Search</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2024/04/15/Exploring-the-Canvas-Series-Creative-Brushes-Part-2/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/04/13/%E7%94%BB%E6%9D%BF%E6%8E%A2%E7%A7%98%E7%B3%BB%E5%88%97%EF%BC%9A%E5%88%9B%E6%84%8F%E7%94%BB%E7%AC%94%E7%AC%AC%E4%B8%89%E6%9C%9F/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&text=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&is_video=false&description=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Exploring the Canvas Series: Creative Brushes Part 1&body=Check out this article: https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&name=Exploring the Canvas Series: Creative Brushes Part 1&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&t=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rainbow-Brush"><span class="toc-number">2.</span> <span class="toc-text">Rainbow Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Multi-Shape-Brush"><span class="toc-number">3.</span> <span class="toc-text">Multi Shape Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Material-Brush"><span class="toc-number">4.</span> <span class="toc-text">Material Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pixel-Brush"><span class="toc-number">5.</span> <span class="toc-text">Pixel Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">6.</span> <span class="toc-text">Conclusion</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Exploring the Canvas Series: Creative Brushes Part 1
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">leo</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-04-14T14:48:08.000Z" class="dt-published" itemprop="datePublished">2024-04-14</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fa-solid fa-tag"></i>
        <a class="p-category" href="/tags/Canvas/" rel="tag">Canvas</a>, <a class="p-category" href="/tags/Fabric-js/" rel="tag">Fabric.js</a>
    </div>


    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>I am currently developing a powerful open source creative drawing board. This drawing board contains a variety of creative brushes, which allows users to experience a new drawing effect. Whether on mobile or PC , you can enjoy a better interactive experience and effect display . And this project has many powerful auxiliary painting functions, including but not limited to forward and backward, copy and delete, upload and download, multiple boards and layers and so on. I’m not going to list all the detailed features, looking forward to your exploration.</p>
<p>Link: <a target="_blank" rel="noopener" href="https://songlh.top/paint-board/">https://songlh.top/paint-board/</a></p>
<p>Github: <a target="_blank" rel="noopener" href="https://github.com/LHRUN/paint-board">https://github.com/LHRUN/paint-board</a> Welcome to Star ⭐️</p>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/paint-board/preview_device.png"></p>
<p>In the gradual development of the project, I plan to write some articles, on the one hand, to record the technical details, which is my habit all the time. On the other hand, I’d like to promote the project, and I hope to get your use and feedback, and of course, a Star would be my greatest support.</p>
<p>I’m going to explain the implementation of the Creative Brush in 3 articles, this is the first one, and I’ll upload all the source code to my Github.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/LHRUN/paint-board-demo">Github Source Code Demo</a></p>
<h2 id="Rainbow-Brush"><a href="#Rainbow-Brush" class="headerlink" title="Rainbow Brush"></a>Rainbow Brush</h2><ul>
<li>The rainbow brush changes colour as it is being drawn, the effect is as follows.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/rainbow.png"></p>
<ul>
<li>This effect is just an extra colour shift compared to a normal brush, which as we know is implemented by connecting line segments one by one, whether they are curves or straight lines. So in order to achieve the rainbow effect, we need to change the colour of each line segment, which is done by modifying <code>strokeStyle</code>.</li>
<li>Then to change the <code>strokeStyle</code> colour, we can’t simply express it as a regular colour, we need to know about <code>HSL</code>.<ul>
<li><code>HSL</code> is a colour expression that describes colours by means of a cylindrical coordinate system, divided into Hue (H), Saturation (S), Luminance (L).<ul>
<li>Hue (H): Indicates the position of the colour on the colour ring.</li>
<li>Saturation (S): It indicates the purity or degree of greyness of a colour. A saturation of 100% indicates a fully saturated colour, while 0% indicates a greyish colour.</li>
<li>Luminance (L): It indicates the brightness of the colour. Adjusting the Luminance changes the lightness or darkness of the colour.</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/color_value/hsl">MDN</a> Detailed description</li>
<li>HSL Online Showcase Website: <a target="_blank" rel="noopener" href="https://mothereffinghsl.com/">https://mothereffinghsl.com/</a></li>
</ul>
</li>
</ul>
</li>
<li>Instead, we just need to keep adjusting the <code>hue</code> in the <code>HSL</code> expression to achieve the effect of constantly changing colours.</li>
</ul>
<pre><code class="highlight ts"><span class="keyword">let</span> hue = <span class="number">0</span> <span class="comment">// Record the current hue</span>
<span class="keyword">let</span> isMouseDown = <span class="literal">false</span>
<span class="keyword">let</span> <span class="attr">movePoint</span>: &#123; <span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span> &#125; | <span class="literal">null</span> = <span class="literal">null</span> <span class="comment">// Record mouse point</span>

<span class="keyword">function</span> <span class="title function_">PaintBoard</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> canvasRef = useRef&lt;<span class="title class_">HTMLCanvasElement</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)
  <span class="keyword">const</span> [context2D, setContext2D] = useState&lt;<span class="title class_">CanvasRenderingContext2D</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)

  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;
    <span class="keyword">if</span> (canvasRef?.<span class="property">current</span>) &#123;
      <span class="keyword">const</span> context2D = canvasRef?.<span class="property">current</span>.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)
      <span class="keyword">if</span> (context2D) &#123;
        context2D.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
        context2D.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
        context2D.<span class="property">lineWidth</span> = <span class="number">10</span>
        <span class="title function_">setContext2D</span>(context2D)
      &#125;
    &#125;
  &#125;, [canvasRef])

  <span class="keyword">const</span> <span class="title function_">onMouseDown</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">true</span>
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseMove</span> = (<span class="params">event: MouseEvent</span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    <span class="keyword">if</span> (isMouseDown) &#123;
      <span class="keyword">const</span> &#123; clientX, clientY &#125; = event
      <span class="keyword">if</span> (movePoint) &#123;
        <span class="comment">/**</span>
<span class="comment">         * Gradually increases by 1 in the range 0 to 360, but resets to 0 when greater than or equal to 360.</span>
<span class="comment">         */</span>
        hue = hue &lt; <span class="number">360</span> ? hue + <span class="number">1</span> : <span class="number">0</span>
        context2D.<span class="title function_">beginPath</span>()
        <span class="comment">// Change colours via HSL</span>
        context2D.<span class="property">strokeStyle</span> = <span class="string">`hsl(<span class="subst">$&#123;hue&#125;</span>, 90%, 50%)`</span>
        context2D.<span class="title function_">moveTo</span>(movePoint.<span class="property">x</span>, movePoint.<span class="property">y</span>)
        context2D.<span class="title function_">lineTo</span>(clientX, clientY)
        context2D.<span class="title function_">stroke</span>()
      &#125;
      movePoint = &#123;
        <span class="attr">x</span>: clientX,
        <span class="attr">y</span>: clientY
      &#125;
    &#125;
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseUp</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">false</span>
    movePoint = <span class="literal">null</span>
  &#125;

  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">canvas</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;canvasRef&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseDown</span>=<span class="string">&#123;onMouseDown&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseMove</span>=<span class="string">&#123;onMouseMove&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseUp</span>=<span class="string">&#123;onMouseUp&#125;</span></span></span>
<span class="tag"><span class="language-xml">      /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
  )
&#125;</code></pre>

<h2 id="Multi-Shape-Brush"><a href="#Multi-Shape-Brush" class="headerlink" title="Multi Shape Brush"></a>Multi Shape Brush</h2><ul>
<li>Multi-shape brush will move with the mouse, in the path of the move to generate random points for shape drawing, the effect is as follows</li>
</ul>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/shape.png"></p>
<ul>
<li>Implementation method, through each mouse movement coordinates, in the coordinates of the surrounding range of a few randomly generated points, and then in these points through the <code>new Path2D()</code> for the generation of graphical path, and then draw the</li>
</ul>
<pre><code class="highlight ts"><span class="keyword">let</span> isMouseDown = <span class="literal">false</span>

<span class="comment">// Music Symbol Shape Path</span>
<span class="keyword">const</span> musicPath = <span class="string">&#x27;***&#x27;</span>

<span class="comment">/**</span>
<span class="comment"> * Generate random points within a rectangle</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="title function_">generateRandomCoordinates</span> = (<span class="params"></span>
<span class="params">  centerX: <span class="built_in">number</span>, <span class="comment">// Rectangle Centre Point X</span></span>
<span class="params">  centerY: <span class="built_in">number</span>, <span class="comment">// Rectangle Centre Point Y</span></span>
<span class="params">  size: <span class="built_in">number</span>, <span class="comment">// Rectangle Size</span></span>
<span class="params">  count: <span class="built_in">number</span> <span class="comment">// Number of generation</span></span>
<span class="params"></span>) =&gt; &#123;
  <span class="keyword">const</span> halfSize = size / <span class="number">2</span>
  <span class="keyword">const</span> points = []

  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;
    <span class="keyword">const</span> randomX = <span class="title class_">Math</span>.<span class="title function_">floor</span>(centerX - halfSize + <span class="title class_">Math</span>.<span class="title function_">random</span>() * size)
    <span class="keyword">const</span> randomY = <span class="title class_">Math</span>.<span class="title function_">floor</span>(centerY - halfSize + <span class="title class_">Math</span>.<span class="title function_">random</span>() * size)
    points.<span class="title function_">push</span>(&#123; <span class="attr">x</span>: randomX, <span class="attr">y</span>: randomY &#125;)
  &#125;

  <span class="keyword">return</span> points
&#125;

<span class="keyword">function</span> <span class="title function_">PaintBoard</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> canvasRef = useRef&lt;<span class="title class_">HTMLCanvasElement</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)
  <span class="keyword">const</span> [context2D, setContext2D] = useState&lt;<span class="title class_">CanvasRenderingContext2D</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)

  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;
    <span class="keyword">if</span> (canvasRef?.<span class="property">current</span>) &#123;
      <span class="keyword">const</span> context2D = canvasRef?.<span class="property">current</span>.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)
      <span class="keyword">if</span> (context2D) &#123;
        context2D.<span class="property">fillStyle</span> = <span class="string">&#x27;#000&#x27;</span>
        <span class="title function_">setContext2D</span>(context2D)
      &#125;
    &#125;
  &#125;, [canvasRef])

  <span class="keyword">const</span> <span class="title function_">onMouseDown</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">true</span>
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseMove</span> = (<span class="params">event: MouseEvent</span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;

    <span class="keyword">if</span> (isMouseDown) &#123;
      <span class="keyword">const</span> &#123; clientX, clientY &#125; = event
      <span class="keyword">const</span> points = <span class="title function_">generateRandomCoordinates</span>(clientX, clientY, <span class="number">30</span>, <span class="number">3</span>)
      points.<span class="title function_">map</span>(<span class="function">(<span class="params">curPoint</span>) =&gt;</span> &#123;
        <span class="title function_">createShape</span>(curPoint.<span class="property">x</span>, curPoint.<span class="property">y</span>)
      &#125;)
    &#125;
  &#125;

  <span class="keyword">const</span> <span class="title function_">createShape</span> = (<span class="params">x: <span class="built_in">number</span>, y: <span class="built_in">number</span></span>) =&gt; &#123;
    <span class="keyword">if</span> (!context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    <span class="comment">// Path creation</span>
    <span class="keyword">const</span> path = <span class="keyword">new</span> <span class="title class_">Path2D</span>(musicPath);
    context2D.<span class="title function_">beginPath</span>();

    context2D.<span class="title function_">save</span>();
    context2D.<span class="title function_">translate</span>(x, y);

    <span class="comment">// Shape random scaling</span>
    <span class="keyword">const</span> scale = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">1.5</span> + <span class="number">0.5</span>
    context2D.<span class="title function_">scale</span>(scale, scale);

    context2D.<span class="title function_">fill</span>(path);
    context2D.<span class="title function_">restore</span>();
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseUp</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">false</span>
    moveDate = <span class="number">0</span>
  &#125;

  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">canvas</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;canvasRef&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseDown</span>=<span class="string">&#123;onMouseDown&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseMove</span>=<span class="string">&#123;onMouseMove&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseUp</span>=<span class="string">&#123;onMouseUp&#125;</span></span></span>
<span class="tag"><span class="language-xml">      /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
  )
&#125;</code></pre>

<h2 id="Material-Brush"><a href="#Material-Brush" class="headerlink" title="Material Brush"></a>Material Brush</h2><ul>
<li>The effect of the material brush is as follows</li>
</ul>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/material.png"></p>
<ul>
<li>The first thing you need is a transparent picture of the material, this picture is used as a base, if you use a picture made of crayon material, it will have a crayon effect, if you use a picture made of frosted material, it will have a frosted effect.</li>
<li>The <code>strokeStyle</code> property can then take a <code>CanvasPattern</code> object, <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/strokeStyle">MDN</a></li>
<li>We can create a new <code>canvas</code>, then draw an image on this <code>canvas</code>, then draw a colour you want, and finally create a <code>pattern</code> from this <code>canvas</code> and assign it to <code>strokeStyle</code> to get the effect of the material’s brush.</li>
</ul>
<pre><code class="highlight ts"><span class="keyword">let</span> isMouseDown = <span class="literal">false</span>
<span class="keyword">let</span> <span class="attr">movePoint</span>: &#123; <span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span> &#125; | <span class="literal">null</span> = <span class="literal">null</span>

<span class="comment">// Load the required material image</span>
<span class="keyword">const</span> materialImage = <span class="keyword">new</span> <span class="title class_">Promise</span>&lt;<span class="title class_">HTMLImageElement</span>&gt;(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;
  <span class="keyword">const</span> image = <span class="keyword">new</span> <span class="title class_">Image</span>()
  image.<span class="property">src</span> = <span class="string">&#x27;Material image URL&#x27;</span>
  image.<span class="property">onload</span> = <span class="function">() =&gt;</span> &#123;
    <span class="title function_">resolve</span>(image)
  &#125;
&#125;)

<span class="comment">/**</span>
<span class="comment"> * Get pattern object</span>
<span class="comment"> * <span class="doctag">@param</span> color background colour</span>
<span class="comment"> */</span>
<span class="keyword">const</span> <span class="title function_">getPattern</span> = <span class="keyword">async</span> (<span class="params">color: <span class="built_in">string</span></span>) =&gt; &#123;
  <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)
  <span class="keyword">const</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>) <span class="keyword">as</span> <span class="title class_">CanvasRenderingContext2D</span>
  canvas.<span class="property">width</span> = <span class="number">100</span>
  canvas.<span class="property">height</span> = <span class="number">100</span>
  context.<span class="property">fillStyle</span> = color

  <span class="comment">// Draw a rectangle as the background colour</span>
  context.<span class="title function_">fillRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)
  <span class="keyword">const</span> image = <span class="keyword">await</span> materialImage

  <span class="comment">// Drawing of material</span>
  <span class="keyword">if</span> (image) &#123;
    context.<span class="title function_">drawImage</span>(image, <span class="number">0</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">100</span>)
  &#125;
  <span class="keyword">return</span> context.<span class="title function_">createPattern</span>(canvas, <span class="string">&#x27;repeat&#x27;</span>)
&#125;

<span class="keyword">function</span> <span class="title function_">PaintBoard</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> canvasRef = useRef&lt;<span class="title class_">HTMLCanvasElement</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)
  <span class="keyword">const</span> [context2D, setContext2D] = useState&lt;<span class="title class_">CanvasRenderingContext2D</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)

  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;
    <span class="title function_">initDraw</span>()
  &#125;, [canvasRef])

  <span class="keyword">const</span> <span class="title function_">initDraw</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (canvasRef?.<span class="property">current</span>) &#123;
      <span class="keyword">const</span> context2D = canvasRef?.<span class="property">current</span>.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)
      <span class="keyword">if</span> (context2D) &#123;
        context2D.<span class="property">lineCap</span> = <span class="string">&#x27;round&#x27;</span>
        context2D.<span class="property">lineJoin</span> = <span class="string">&#x27;round&#x27;</span>
        context2D.<span class="property">lineWidth</span> = <span class="number">10</span>
        <span class="comment">// get pattern material</span>
        <span class="keyword">const</span> pattern = <span class="keyword">await</span> <span class="title function_">getPattern</span>(<span class="string">&#x27;blue&#x27;</span>)
        <span class="keyword">if</span> (pattern) &#123;
          context2D.<span class="property">strokeStyle</span> = pattern
        &#125;
        <span class="title function_">setContext2D</span>(context2D)
      &#125;
    &#125;
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseDown</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">true</span>
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseMove</span> = (<span class="params">event: MouseEvent</span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    <span class="keyword">if</span> (isMouseDown) &#123;
      <span class="keyword">const</span> &#123; clientX, clientY &#125; = event
      <span class="keyword">if</span> (movePoint) &#123;
        <span class="comment">// Brush Drawing</span>
        context2D.<span class="title function_">beginPath</span>()
        context2D.<span class="title function_">moveTo</span>(movePoint.<span class="property">x</span>, movePoint.<span class="property">y</span>)
        context2D.<span class="title function_">lineTo</span>(clientX, clientY)
        context2D.<span class="title function_">stroke</span>()
      &#125;
      movePoint = &#123;
        <span class="attr">x</span>: clientX,
        <span class="attr">y</span>: clientY
      &#125;
    &#125;
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseUp</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">false</span>
    movePoint = <span class="literal">null</span>
  &#125;

  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">canvas</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;canvasRef&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseDown</span>=<span class="string">&#123;onMouseDown&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseMove</span>=<span class="string">&#123;onMouseMove&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseUp</span>=<span class="string">&#123;onMouseUp&#125;</span></span></span>
<span class="tag"><span class="language-xml">      /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
  )
&#125;</code></pre>

<h2 id="Pixel-Brush"><a href="#Pixel-Brush" class="headerlink" title="Pixel Brush"></a>Pixel Brush</h2><ul>
<li>The pixel brush effect is as follows</li>
</ul>
<p><img src="https://raw.githubusercontent.com/LHRUN/file-store/main/post/creativeBrush/pixels.png"></p>
<ul>
<li>Pixel Paintbrush is through the mouse to move, in the path of the mouse to move, randomly point according to the position of the rectangle drawing, multiple rectangles combined to have a similar effect to the pixel dot</li>
</ul>
<pre><code class="highlight ts"><span class="keyword">let</span> isMouseDown = <span class="literal">false</span>
<span class="keyword">const</span> drawWidth = <span class="number">15</span> <span class="comment">// Pixel Brush Size</span>
<span class="keyword">const</span> step = <span class="number">5</span> <span class="comment">// Size of each pixel point</span>

<span class="keyword">function</span> <span class="title function_">PaintBoard</span>(<span class="params"></span>) &#123;
  <span class="keyword">const</span> canvasRef = useRef&lt;<span class="title class_">HTMLCanvasElement</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)
  <span class="keyword">const</span> [context2D, setContext2D] = useState&lt;<span class="title class_">CanvasRenderingContext2D</span> | <span class="literal">null</span>&gt;(<span class="literal">null</span>)

  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;
    <span class="keyword">if</span> (canvasRef?.<span class="property">current</span>) &#123;
      <span class="keyword">const</span> context2D = canvasRef?.<span class="property">current</span>.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>)
      <span class="keyword">if</span> (context2D) &#123;
        context2D.<span class="property">fillStyle</span> = <span class="string">&#x27;#000&#x27;</span>;
        <span class="title function_">setContext2D</span>(context2D)
      &#125;
    &#125;
  &#125;, [canvasRef])

  <span class="keyword">const</span> <span class="title function_">onMouseDown</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">true</span>
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseMove</span> = (<span class="params">event: MouseEvent</span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;

    <span class="keyword">if</span> (isMouseDown) &#123;
      <span class="keyword">const</span> &#123; clientX, clientY &#125; = event
      
      <span class="comment">/**</span>
<span class="comment">       * Iterate over the current pixel brush size, and determine whether to draw based on a random number.</span>
<span class="comment">       */</span>
      <span class="keyword">for</span> (<span class="keyword">let</span> i = -drawWidth; i &lt; drawWidth; i += step) &#123;
        <span class="keyword">for</span> (<span class="keyword">let</span> j = -drawWidth; j &lt; drawWidth; j += step) &#123;
          <span class="keyword">if</span> (<span class="title class_">Math</span>.<span class="title function_">random</span>() &gt; <span class="number">0.5</span>) &#123;
            context2D.<span class="title function_">save</span>();
            context2D.<span class="title function_">fillRect</span>(clientX + i, clientY + j, step, step);
            context2D.<span class="title function_">fill</span>();
            context2D.<span class="title function_">restore</span>();
          &#125;
        &#125;
      &#125;
    &#125;
  &#125;

  <span class="keyword">const</span> <span class="title function_">onMouseUp</span> = (<span class="params"></span>) =&gt; &#123;
    <span class="keyword">if</span> (!canvasRef?.<span class="property">current</span> || !context2D) &#123;
      <span class="keyword">return</span>
    &#125;
    isMouseDown = <span class="literal">false</span>
  &#125;

  <span class="keyword">return</span> (
    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span>
<span class="language-xml">      <span class="tag">&lt;<span class="name">canvas</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&#123;canvasRef&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseDown</span>=<span class="string">&#123;onMouseDown&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseMove</span>=<span class="string">&#123;onMouseMove&#125;</span></span></span>
<span class="tag"><span class="language-xml">        <span class="attr">onMouseUp</span>=<span class="string">&#123;onMouseUp&#125;</span></span></span>
<span class="tag"><span class="language-xml">      /&gt;</span></span>
<span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>
  )
&#125;</code></pre>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Thank you for reading. This is the whole content of this article, I hope this article is helpful to you, welcome to like and favourite. If you have any questions, please feel free to discuss in the comment section!</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="/about/">About</a></li>
        
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Rainbow-Brush"><span class="toc-number">2.</span> <span class="toc-text">Rainbow Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Multi-Shape-Brush"><span class="toc-number">3.</span> <span class="toc-text">Multi Shape Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Material-Brush"><span class="toc-number">4.</span> <span class="toc-text">Material Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Pixel-Brush"><span class="toc-number">5.</span> <span class="toc-text">Pixel Brush</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">6.</span> <span class="toc-text">Conclusion</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&text=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&is_video=false&description=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Exploring the Canvas Series: Creative Brushes Part 1&body=Check out this article: https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&title=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&name=Exploring the Canvas Series: Creative Brushes Part 1&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://lhrun.github.io/2024/04/14/Exploring-the-Canvas-Series-Creative-Brushes-Part-1/&t=Exploring the Canvas Series: Creative Brushes Part 1"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2019-2024
    leo
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'LHS';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>

<!-- utterances Comments -->

</body>
</html>
